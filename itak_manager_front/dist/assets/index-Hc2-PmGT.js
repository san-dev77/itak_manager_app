(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function Fv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Em={exports:{}},bi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function O2(){if(Jp)return bi;Jp=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(i,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var f in c)f!=="key"&&(u[f]=c[f])}else u=c;return c=u.ref,{$$typeof:e,type:i,key:d,ref:c!==void 0?c:null,props:u}}return bi.Fragment=a,bi.jsx=r,bi.jsxs=r,bi}var Wp;function L2(){return Wp||(Wp=1,Em.exports=O2()),Em.exports}var t=L2(),Tm={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function V2(){if(eb)return Fe;eb=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,M={};function _(L,ne,K){this.props=L,this.context=ne,this.refs=M,this.updater=K||S}_.prototype.isReactComponent={},_.prototype.setState=function(L,ne){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ne,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=_.prototype;function j(L,ne,K){this.props=L,this.context=ne,this.refs=M,this.updater=K||S}var N=j.prototype=new C;N.constructor=j,T(N,_.prototype),N.isPureReactComponent=!0;var A=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function D(L,ne,K,me,re,ie){return K=ie.ref,{$$typeof:e,type:L,key:ne,ref:K!==void 0?K:null,props:ie}}function z(L,ne){return D(L.type,ne,void 0,void 0,void 0,L.props)}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function se(L){var ne={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(K){return ne[K]})}var X=/\/+/g;function R(L,ne){return typeof L=="object"&&L!==null&&L.key!=null?se(""+L.key):ne.toString(36)}function Q(){}function ae(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Q,Q):(L.status="pending",L.then(function(ne){L.status==="pending"&&(L.status="fulfilled",L.value=ne)},function(ne){L.status==="pending"&&(L.status="rejected",L.reason=ne)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function te(L,ne,K,me,re){var ie=typeof L;(ie==="undefined"||ie==="boolean")&&(L=null);var G=!1;if(L===null)G=!0;else switch(ie){case"bigint":case"string":case"number":G=!0;break;case"object":switch(L.$$typeof){case e:case a:G=!0;break;case p:return G=L._init,te(G(L._payload),ne,K,me,re)}}if(G)return re=re(L),G=me===""?"."+R(L,0):me,A(re)?(K="",G!=null&&(K=G.replace(X,"$&/")+"/"),te(re,ne,K,"",function(je){return je})):re!=null&&(P(re)&&(re=z(re,K+(re.key==null||L&&L.key===re.key?"":(""+re.key).replace(X,"$&/")+"/")+G)),ne.push(re)),1;G=0;var be=me===""?".":me+":";if(A(L))for(var V=0;V<L.length;V++)me=L[V],ie=be+R(me,V),G+=te(me,ne,K,ie,re);else if(V=v(L),typeof V=="function")for(L=V.call(L),V=0;!(me=L.next()).done;)me=me.value,ie=be+R(me,V++),G+=te(me,ne,K,ie,re);else if(ie==="object"){if(typeof L.then=="function")return te(ae(L),ne,K,me,re);throw ne=String(L),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return G}function F(L,ne,K){if(L==null)return L;var me=[],re=0;return te(L,me,"","",function(ie){return ne.call(K,ie,re++)}),me}function ce(L){if(L._status===-1){var ne=L._result;ne=ne(),ne.then(function(K){(L._status===0||L._status===-1)&&(L._status=1,L._result=K)},function(K){(L._status===0||L._status===-1)&&(L._status=2,L._result=K)}),L._status===-1&&(L._status=0,L._result=ne)}if(L._status===1)return L._result.default;throw L._result}var J=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function W(){}return Fe.Children={map:F,forEach:function(L,ne,K){F(L,function(){ne.apply(this,arguments)},K)},count:function(L){var ne=0;return F(L,function(){ne++}),ne},toArray:function(L){return F(L,function(ne){return ne})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Fe.Component=_,Fe.Fragment=r,Fe.Profiler=c,Fe.PureComponent=j,Fe.StrictMode=i,Fe.Suspense=x,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return O.H.useMemoCache(L)}},Fe.cache=function(L){return function(){return L.apply(null,arguments)}},Fe.cloneElement=function(L,ne,K){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var me=T({},L.props),re=L.key,ie=void 0;if(ne!=null)for(G in ne.ref!==void 0&&(ie=void 0),ne.key!==void 0&&(re=""+ne.key),ne)!U.call(ne,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&ne.ref===void 0||(me[G]=ne[G]);var G=arguments.length-2;if(G===1)me.children=K;else if(1<G){for(var be=Array(G),V=0;V<G;V++)be[V]=arguments[V+2];me.children=be}return D(L.type,re,void 0,void 0,ie,me)},Fe.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Fe.createElement=function(L,ne,K){var me,re={},ie=null;if(ne!=null)for(me in ne.key!==void 0&&(ie=""+ne.key),ne)U.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(re[me]=ne[me]);var G=arguments.length-2;if(G===1)re.children=K;else if(1<G){for(var be=Array(G),V=0;V<G;V++)be[V]=arguments[V+2];re.children=be}if(L&&L.defaultProps)for(me in G=L.defaultProps,G)re[me]===void 0&&(re[me]=G[me]);return D(L,ie,void 0,void 0,null,re)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(L){return{$$typeof:f,render:L}},Fe.isValidElement=P,Fe.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:ce}},Fe.memo=function(L,ne){return{$$typeof:g,type:L,compare:ne===void 0?null:ne}},Fe.startTransition=function(L){var ne=O.T,K={};O.T=K;try{var me=L(),re=O.S;re!==null&&re(K,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(W,J)}catch(ie){J(ie)}finally{O.T=ne}},Fe.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Fe.use=function(L){return O.H.use(L)},Fe.useActionState=function(L,ne,K){return O.H.useActionState(L,ne,K)},Fe.useCallback=function(L,ne){return O.H.useCallback(L,ne)},Fe.useContext=function(L){return O.H.useContext(L)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(L,ne){return O.H.useDeferredValue(L,ne)},Fe.useEffect=function(L,ne,K){var me=O.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(L,ne)},Fe.useId=function(){return O.H.useId()},Fe.useImperativeHandle=function(L,ne,K){return O.H.useImperativeHandle(L,ne,K)},Fe.useInsertionEffect=function(L,ne){return O.H.useInsertionEffect(L,ne)},Fe.useLayoutEffect=function(L,ne){return O.H.useLayoutEffect(L,ne)},Fe.useMemo=function(L,ne){return O.H.useMemo(L,ne)},Fe.useOptimistic=function(L,ne){return O.H.useOptimistic(L,ne)},Fe.useReducer=function(L,ne,K){return O.H.useReducer(L,ne,K)},Fe.useRef=function(L){return O.H.useRef(L)},Fe.useState=function(L){return O.H.useState(L)},Fe.useSyncExternalStore=function(L,ne,K){return O.H.useSyncExternalStore(L,ne,K)},Fe.useTransition=function(){return O.H.useTransition()},Fe.version="19.1.1",Fe}var tb;function Xc(){return tb||(tb=1,Tm.exports=V2()),Tm.exports}var y=Xc();const Ft=Fv(y);var Dm={exports:{}},yi={},km={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function P2(){return sb||(sb=1,(function(e){function a(F,ce){var J=F.length;F.push(ce);e:for(;0<J;){var W=J-1>>>1,L=F[W];if(0<c(L,ce))F[W]=ce,F[J]=L,J=W;else break e}}function r(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var ce=F[0],J=F.pop();if(J!==ce){F[0]=J;e:for(var W=0,L=F.length,ne=L>>>1;W<ne;){var K=2*(W+1)-1,me=F[K],re=K+1,ie=F[re];if(0>c(me,J))re<L&&0>c(ie,me)?(F[W]=ie,F[re]=J,W=re):(F[W]=me,F[K]=J,W=K);else if(re<L&&0>c(ie,J))F[W]=ie,F[re]=J,W=re;else break e}}return ce}function c(F,ce){var J=F.sortIndex-ce.sortIndex;return J!==0?J:F.id-ce.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var x=[],g=[],p=1,b=null,v=3,S=!1,T=!1,M=!1,_=!1,C=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function A(F){for(var ce=r(g);ce!==null;){if(ce.callback===null)i(g);else if(ce.startTime<=F)i(g),ce.sortIndex=ce.expirationTime,a(x,ce);else break;ce=r(g)}}function O(F){if(M=!1,A(F),!T)if(r(x)!==null)T=!0,U||(U=!0,R());else{var ce=r(g);ce!==null&&te(O,ce.startTime-F)}}var U=!1,D=-1,z=5,P=-1;function se(){return _?!0:!(e.unstable_now()-P<z)}function X(){if(_=!1,U){var F=e.unstable_now();P=F;var ce=!0;try{e:{T=!1,M&&(M=!1,j(D),D=-1),S=!0;var J=v;try{t:{for(A(F),b=r(x);b!==null&&!(b.expirationTime>F&&se());){var W=b.callback;if(typeof W=="function"){b.callback=null,v=b.priorityLevel;var L=W(b.expirationTime<=F);if(F=e.unstable_now(),typeof L=="function"){b.callback=L,A(F),ce=!0;break t}b===r(x)&&i(x),A(F)}else i(x);b=r(x)}if(b!==null)ce=!0;else{var ne=r(g);ne!==null&&te(O,ne.startTime-F),ce=!1}}break e}finally{b=null,v=J,S=!1}ce=void 0}}finally{ce?R():U=!1}}}var R;if(typeof N=="function")R=function(){N(X)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ae=Q.port2;Q.port1.onmessage=X,R=function(){ae.postMessage(null)}}else R=function(){C(X,0)};function te(F,ce){D=C(function(){F(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(F){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var J=v;v=ce;try{return F()}finally{v=J}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(F,ce){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=v;v=F;try{return ce()}finally{v=J}},e.unstable_scheduleCallback=function(F,ce,J){var W=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,F){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=J+L,F={id:p++,callback:ce,priorityLevel:F,startTime:J,expirationTime:L,sortIndex:-1},J>W?(F.sortIndex=J,a(g,F),r(x)===null&&F===r(g)&&(M?(j(D),D=-1):M=!0,te(O,J-W))):(F.sortIndex=L,a(x,F),T||S||(T=!0,U||(U=!0,R()))),F},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(F){var ce=v;return function(){var J=v;v=ce;try{return F.apply(this,arguments)}finally{v=J}}}})(Rm)),Rm}var ab;function U2(){return ab||(ab=1,km.exports=P2()),km.exports}var Mm={exports:{}},es={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function B2(){if(nb)return es;nb=1;var e=Xc();function a(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:x,containerInfo:g,implementation:p}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,es.createPortal=function(x,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(x,g,null,p)},es.flushSync=function(x){var g=d.T,p=i.p;try{if(d.T=null,i.p=2,x)return x()}finally{d.T=g,i.p=p,i.d.f()}},es.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},es.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},es.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var p=g.as,b=f(p,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:S}):p==="script"&&i.d.X(x,{crossOrigin:b,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},es.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=f(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},es.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,b=f(p,g.crossOrigin);i.d.L(x,p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},es.preloadModule=function(x,g){if(typeof x=="string")if(g){var p=f(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},es.requestFormReset=function(x){i.d.r(x)},es.unstable_batchedUpdates=function(x,g){return x(g)},es.useFormState=function(x,g,p){return d.H.useFormState(x,g,p)},es.useFormStatus=function(){return d.H.useHostTransitionStatus()},es.version="19.1.1",es}var rb;function Iv(){if(rb)return Mm.exports;rb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Mm.exports=B2(),Mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function $2(){if(lb)return yi;lb=1;var e=U2(),a=Xc(),r=Iv();function i(s){var n="https://react.dev/errors/"+s;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function u(s){var n=s,l=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,(n.flags&4098)!==0&&(l=n.return),s=n.return;while(s)}return n.tag===3?l:null}function d(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function f(s){if(u(s)!==s)throw Error(i(188))}function x(s){var n=s.alternate;if(!n){if(n=u(s),n===null)throw Error(i(188));return n!==s?null:s}for(var l=s,o=n;;){var m=l.return;if(m===null)break;var h=m.alternate;if(h===null){if(o=m.return,o!==null){l=o;continue}break}if(m.child===h.child){for(h=m.child;h;){if(h===l)return f(m),s;if(h===o)return f(m),n;h=h.sibling}throw Error(i(188))}if(l.return!==o.return)l=m,o=h;else{for(var w=!1,k=m.child;k;){if(k===l){w=!0,l=m,o=h;break}if(k===o){w=!0,o=m,l=h;break}k=k.sibling}if(!w){for(k=h.child;k;){if(k===l){w=!0,l=h,o=m;break}if(k===o){w=!0,o=h,l=m;break}k=k.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:n}function g(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s;for(s=s.child;s!==null;){if(n=g(s),n!==null)return n;s=s.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),N=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function R(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var Q=Symbol.for("react.client.reference");function ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Q?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case _:return"Profiler";case M:return"StrictMode";case O:return"Suspense";case U:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case N:return(s.displayName||"Context")+".Provider";case j:return(s._context.displayName||"Context")+".Consumer";case A:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return n=s.displayName||null,n!==null?n:ae(s.type)||"Memo";case z:n=s._payload,s=s._init;try{return ae(s(n))}catch{}}return null}var te=Array.isArray,F=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},W=[],L=-1;function ne(s){return{current:s}}function K(s){0>L||(s.current=W[L],W[L]=null,L--)}function me(s,n){L++,W[L]=s.current,s.current=n}var re=ne(null),ie=ne(null),G=ne(null),be=ne(null);function V(s,n){switch(me(G,n),me(ie,s),me(re,null),n.nodeType){case 9:case 11:s=(s=n.documentElement)&&(s=s.namespaceURI)?Ap(s):0;break;default:if(s=n.tagName,n=n.namespaceURI)n=Ap(n),s=Ep(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(re),me(re,s)}function je(){K(re),K(ie),K(G)}function E(s){s.memoizedState!==null&&me(be,s);var n=re.current,l=Ep(n,s.type);n!==l&&(me(ie,s),me(re,l))}function $(s){ie.current===s&&(K(re),K(ie)),be.current===s&&(K(be),fi._currentValue=J)}var ue=Object.prototype.hasOwnProperty,Y=e.unstable_scheduleCallback,ye=e.unstable_cancelCallback,Z=e.unstable_shouldYield,H=e.unstable_requestPaint,B=e.unstable_now,Ne=e.unstable_getCurrentPriorityLevel,ke=e.unstable_ImmediatePriority,q=e.unstable_UserBlockingPriority,le=e.unstable_NormalPriority,ge=e.unstable_LowPriority,Te=e.unstable_IdlePriority,De=e.log,Ae=e.unstable_setDisableYieldValue,Oe=null,qe=null;function Ke(s){if(typeof De=="function"&&Ae(s),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Oe,s)}catch{}}var it=Math.clz32?Math.clz32:xu,ur=Math.log,Ws=Math.LN2;function xu(s){return s>>>=0,s===0?32:31-(ur(s)/Ws|0)|0}var Pa=256,Ua=4194304;function ha(s){var n=s&42;if(n!==0)return n;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Tn(s,n,l){var o=s.pendingLanes;if(o===0)return 0;var m=0,h=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var k=o&134217727;return k!==0?(o=k&~h,o!==0?m=ha(o):(w&=k,w!==0?m=ha(w):l||(l=k&~s,l!==0&&(m=ha(l))))):(k=o&~h,k!==0?m=ha(k):w!==0?m=ha(w):l||(l=o&~s,l!==0&&(m=ha(l)))),m===0?0:n!==0&&n!==m&&(n&h)===0&&(h=m&-m,l=n&-n,h>=l||h===32&&(l&4194048)!==0)?n:m}function Dn(s,n){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&n)===0}function ao(s,n){switch(s){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c0(){var s=Pa;return Pa<<=1,(Pa&4194048)===0&&(Pa=256),s}function u0(){var s=Ua;return Ua<<=1,(Ua&62914560)===0&&(Ua=4194304),s}function gu(s){for(var n=[],l=0;31>l;l++)n.push(s);return n}function wl(s,n){s.pendingLanes|=n,n!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function w1(s,n,l,o,m,h){var w=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var k=s.entanglements,I=s.expirationTimes,fe=s.hiddenUpdates;for(l=w&~l;0<l;){var ve=31-it(l),Se=1<<ve;k[ve]=0,I[ve]=-1;var he=fe[ve];if(he!==null)for(fe[ve]=null,ve=0;ve<he.length;ve++){var xe=he[ve];xe!==null&&(xe.lane&=-536870913)}l&=~Se}o!==0&&d0(s,o,0),h!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=h&~(w&~n))}function d0(s,n,l){s.pendingLanes|=n,s.suspendedLanes&=~n;var o=31-it(n);s.entangledLanes|=n,s.entanglements[o]=s.entanglements[o]|1073741824|l&4194090}function m0(s,n){var l=s.entangledLanes|=n;for(s=s.entanglements;l;){var o=31-it(l),m=1<<o;m&n|s[o]&n&&(s[o]|=n),l&=~m}}function pu(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function bu(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function f0(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:Yp(s.type))}function S1(s,n){var l=ce.p;try{return ce.p=s,n()}finally{ce.p=l}}var Ba=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Ba,us="__reactProps$"+Ba,dr="__reactContainer$"+Ba,yu="__reactEvents$"+Ba,C1="__reactListeners$"+Ba,A1="__reactHandles$"+Ba,h0="__reactResources$"+Ba,Sl="__reactMarker$"+Ba;function vu(s){delete s[Jt],delete s[us],delete s[yu],delete s[C1],delete s[A1]}function mr(s){var n=s[Jt];if(n)return n;for(var l=s.parentNode;l;){if(n=l[dr]||l[Jt]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(s=Rp(s);s!==null;){if(l=s[Jt])return l;s=Rp(s)}return n}s=l,l=s.parentNode}return null}function fr(s){if(s=s[Jt]||s[dr]){var n=s.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return s}return null}function Cl(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s.stateNode;throw Error(i(33))}function hr(s){var n=s[h0];return n||(n=s[h0]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Pt(s){s[Sl]=!0}var x0=new Set,g0={};function kn(s,n){xr(s,n),xr(s+"Capture",n)}function xr(s,n){for(g0[s]=n,s=0;s<n.length;s++)x0.add(n[s])}var E1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),p0={},b0={};function T1(s){return ue.call(b0,s)?!0:ue.call(p0,s)?!1:E1.test(s)?b0[s]=!0:(p0[s]=!0,!1)}function no(s,n,l){if(T1(n))if(l===null)s.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){s.removeAttribute(n);return}}s.setAttribute(n,""+l)}}function ro(s,n,l){if(l===null)s.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttribute(n,""+l)}}function xa(s,n,l,o){if(o===null)s.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(n,l,""+o)}}var ju,y0;function gr(s){if(ju===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);ju=n&&n[1]||"",y0=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ju+s+y0}var Nu=!1;function wu(s,n){if(!s||Nu)return"";Nu=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(xe){var he=xe}Reflect.construct(s,[],Se)}else{try{Se.call()}catch(xe){he=xe}s.call(Se.prototype)}}else{try{throw Error()}catch(xe){he=xe}(Se=s())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(xe){if(xe&&he&&typeof xe.stack=="string")return[xe.stack,he.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),w=h[0],k=h[1];if(w&&k){var I=w.split(`
`),fe=k.split(`
`);for(m=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;m<fe.length&&!fe[m].includes("DetermineComponentFrameRoot");)m++;if(o===I.length||m===fe.length)for(o=I.length-1,m=fe.length-1;1<=o&&0<=m&&I[o]!==fe[m];)m--;for(;1<=o&&0<=m;o--,m--)if(I[o]!==fe[m]){if(o!==1||m!==1)do if(o--,m--,0>m||I[o]!==fe[m]){var ve=`
`+I[o].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=o&&0<=m);break}}}finally{Nu=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?gr(l):""}function D1(s){switch(s.tag){case 26:case 27:case 5:return gr(s.type);case 16:return gr("Lazy");case 13:return gr("Suspense");case 19:return gr("SuspenseList");case 0:case 15:return wu(s.type,!1);case 11:return wu(s.type.render,!1);case 1:return wu(s.type,!0);case 31:return gr("Activity");default:return""}}function v0(s){try{var n="";do n+=D1(s),s=s.return;while(s);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Ds(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function j0(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function k1(s){var n=j0(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),o=""+s[n];if(!s.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,h=l.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return m.call(this)},set:function(w){o=""+w,h.call(this,w)}}),Object.defineProperty(s,n,{enumerable:l.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function lo(s){s._valueTracker||(s._valueTracker=k1(s))}function N0(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var l=n.getValue(),o="";return s&&(o=j0(s)?s.checked?"true":"false":s.value),s=o,s!==l?(n.setValue(s),!0):!1}function io(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var R1=/[\n"\\]/g;function ks(s){return s.replace(R1,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Su(s,n,l,o,m,h,w,k){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),n!=null?w==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+Ds(n)):s.value!==""+Ds(n)&&(s.value=""+Ds(n)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),n!=null?Cu(s,w,Ds(n)):l!=null?Cu(s,w,Ds(l)):o!=null&&s.removeAttribute("value"),m==null&&h!=null&&(s.defaultChecked=!!h),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+Ds(k):s.removeAttribute("name")}function w0(s,n,l,o,m,h,w,k){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(s.type=h),n!=null||l!=null){if(!(h!=="submit"&&h!=="reset"||n!=null))return;l=l!=null?""+Ds(l):"",n=n!=null?""+Ds(n):l,k||n===s.value||(s.value=n),s.defaultValue=n}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,s.checked=k?s.checked:!!o,s.defaultChecked=!!o,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function Cu(s,n,l){n==="number"&&io(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function pr(s,n,l,o){if(s=s.options,n){n={};for(var m=0;m<l.length;m++)n["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=n.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&o&&(s[l].defaultSelected=!0)}else{for(l=""+Ds(l),n=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,o&&(s[m].defaultSelected=!0);return}n!==null||s[m].disabled||(n=s[m])}n!==null&&(n.selected=!0)}}function S0(s,n,l){if(n!=null&&(n=""+Ds(n),n!==s.value&&(s.value=n),l==null)){s.defaultValue!==n&&(s.defaultValue=n);return}s.defaultValue=l!=null?""+Ds(l):""}function C0(s,n,l,o){if(n==null){if(o!=null){if(l!=null)throw Error(i(92));if(te(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),n=l}l=Ds(n),s.defaultValue=l,o=s.textContent,o===l&&o!==""&&o!==null&&(s.value=o)}function br(s,n){if(n){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=n;return}}s.textContent=n}var M1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function A0(s,n,l){var o=n.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="":o?s.setProperty(n,l):typeof l!="number"||l===0||M1.has(n)?n==="float"?s.cssFloat=l:s[n]=(""+l).trim():s[n]=l+"px"}function E0(s,n,l){if(n!=null&&typeof n!="object")throw Error(i(62));if(s=s.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="");for(var m in n)o=n[m],n.hasOwnProperty(m)&&l[m]!==o&&A0(s,m,o)}else for(var h in n)n.hasOwnProperty(h)&&A0(s,h,n[h])}function Au(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),z1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(s){return z1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Eu=null;function Tu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yr=null,vr=null;function T0(s){var n=fr(s);if(n&&(s=n.stateNode)){var l=s[us]||null;e:switch(s=n.stateNode,n.type){case"input":if(Su(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),n=l.name,l.type==="radio"&&n!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ks(""+n)+'"][type="radio"]'),n=0;n<l.length;n++){var o=l[n];if(o!==s&&o.form===s.form){var m=o[us]||null;if(!m)throw Error(i(90));Su(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<l.length;n++)o=l[n],o.form===s.form&&N0(o)}break e;case"textarea":S0(s,l.value,l.defaultValue);break e;case"select":n=l.value,n!=null&&pr(s,!!l.multiple,n,!1)}}}var Du=!1;function D0(s,n,l){if(Du)return s(n,l);Du=!0;try{var o=s(n);return o}finally{if(Du=!1,(yr!==null||vr!==null)&&(Go(),yr&&(n=yr,s=vr,vr=yr=null,T0(n),s)))for(n=0;n<s.length;n++)T0(s[n])}}function Al(s,n){var l=s.stateNode;if(l===null)return null;var o=l[us]||null;if(o===null)return null;l=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(s=s.type,o=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!o;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,n,typeof l));return l}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=!1;if(ga)try{var El={};Object.defineProperty(El,"passive",{get:function(){ku=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{ku=!1}var $a=null,Ru=null,co=null;function k0(){if(co)return co;var s,n=Ru,l=n.length,o,m="value"in $a?$a.value:$a.textContent,h=m.length;for(s=0;s<l&&n[s]===m[s];s++);var w=l-s;for(o=1;o<=w&&n[l-o]===m[h-o];o++);return co=m.slice(s,1<o?1-o:void 0)}function uo(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function mo(){return!0}function R0(){return!1}function ds(s){function n(l,o,m,h,w){this._reactName=l,this._targetInst=m,this.type=o,this.nativeEvent=h,this.target=w,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(l=s[k],this[k]=l?l(h):h[k]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?mo:R0,this.isPropagationStopped=R0,this}return p(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),n}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=ds(Rn),Tl=p({},Rn,{view:0,detail:0}),O1=ds(Tl),Mu,_u,Dl,ho=p({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Dl&&(Dl&&s.type==="mousemove"?(Mu=s.screenX-Dl.screenX,_u=s.screenY-Dl.screenY):_u=Mu=0,Dl=s),Mu)},movementY:function(s){return"movementY"in s?s.movementY:_u}}),M0=ds(ho),L1=p({},ho,{dataTransfer:0}),V1=ds(L1),P1=p({},Tl,{relatedTarget:0}),zu=ds(P1),U1=p({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),B1=ds(U1),$1=p({},Rn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),q1=ds($1),F1=p({},Rn,{data:0}),_0=ds(F1),I1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z1(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=Y1[s])?!!n[s]:!1}function Ou(){return Z1}var G1=p({},Tl,{key:function(s){if(s.key){var n=I1[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=uo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?H1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(s){return s.type==="keypress"?uo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?uo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),K1=ds(G1),X1=p({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z0=ds(X1),Q1=p({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),J1=ds(Q1),W1=p({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ew=ds(W1),tw=p({},ho,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=ds(tw),aw=p({},Rn,{newState:0,oldState:0}),nw=ds(aw),rw=[9,13,27,32],Lu=ga&&"CompositionEvent"in window,kl=null;ga&&"documentMode"in document&&(kl=document.documentMode);var lw=ga&&"TextEvent"in window&&!kl,O0=ga&&(!Lu||kl&&8<kl&&11>=kl),L0=" ",V0=!1;function P0(s,n){switch(s){case"keyup":return rw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jr=!1;function iw(s,n){switch(s){case"compositionend":return U0(n);case"keypress":return n.which!==32?null:(V0=!0,L0);case"textInput":return s=n.data,s===L0&&V0?null:s;default:return null}}function ow(s,n){if(jr)return s==="compositionend"||!Lu&&P0(s,n)?(s=k0(),co=Ru=$a=null,jr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return O0&&n.locale!=="ko"?null:n.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B0(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!cw[s.type]:n==="textarea"}function $0(s,n,l,o){yr?vr?vr.push(o):vr=[o]:yr=o,n=ec(n,"onChange"),0<n.length&&(l=new fo("onChange","change",null,l,o),s.push({event:l,listeners:n}))}var Rl=null,Ml=null;function uw(s){jp(s,0)}function xo(s){var n=Cl(s);if(N0(n))return s}function q0(s,n){if(s==="change")return n}var F0=!1;if(ga){var Vu;if(ga){var Pu="oninput"in document;if(!Pu){var I0=document.createElement("div");I0.setAttribute("oninput","return;"),Pu=typeof I0.oninput=="function"}Vu=Pu}else Vu=!1;F0=Vu&&(!document.documentMode||9<document.documentMode)}function H0(){Rl&&(Rl.detachEvent("onpropertychange",Y0),Ml=Rl=null)}function Y0(s){if(s.propertyName==="value"&&xo(Ml)){var n=[];$0(n,Ml,s,Tu(s)),D0(uw,n)}}function dw(s,n,l){s==="focusin"?(H0(),Rl=n,Ml=l,Rl.attachEvent("onpropertychange",Y0)):s==="focusout"&&H0()}function mw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return xo(Ml)}function fw(s,n){if(s==="click")return xo(n)}function hw(s,n){if(s==="input"||s==="change")return xo(n)}function xw(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var vs=typeof Object.is=="function"?Object.is:xw;function _l(s,n){if(vs(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var l=Object.keys(s),o=Object.keys(n);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var m=l[o];if(!ue.call(n,m)||!vs(s[m],n[m]))return!1}return!0}function Z0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function G0(s,n){var l=Z0(s);s=0;for(var o;l;){if(l.nodeType===3){if(o=s+l.textContent.length,s<=n&&o>=n)return{node:l,offset:n-s};s=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Z0(l)}}function K0(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?K0(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function X0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var n=io(s.document);n instanceof s.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)s=n.contentWindow;else break;n=io(s.document)}return n}function Uu(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}var gw=ga&&"documentMode"in document&&11>=document.documentMode,Nr=null,Bu=null,zl=null,$u=!1;function Q0(s,n,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$u||Nr==null||Nr!==io(o)||(o=Nr,"selectionStart"in o&&Uu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zl&&_l(zl,o)||(zl=o,o=ec(Bu,"onSelect"),0<o.length&&(n=new fo("onSelect","select",null,n,l),s.push({event:n,listeners:o}),n.target=Nr)))}function Mn(s,n){var l={};return l[s.toLowerCase()]=n.toLowerCase(),l["Webkit"+s]="webkit"+n,l["Moz"+s]="moz"+n,l}var wr={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionrun:Mn("Transition","TransitionRun"),transitionstart:Mn("Transition","TransitionStart"),transitioncancel:Mn("Transition","TransitionCancel"),transitionend:Mn("Transition","TransitionEnd")},qu={},J0={};ga&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function _n(s){if(qu[s])return qu[s];if(!wr[s])return s;var n=wr[s],l;for(l in n)if(n.hasOwnProperty(l)&&l in J0)return qu[s]=n[l];return s}var W0=_n("animationend"),ex=_n("animationiteration"),tx=_n("animationstart"),pw=_n("transitionrun"),bw=_n("transitionstart"),yw=_n("transitioncancel"),sx=_n("transitionend"),ax=new Map,Fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fu.push("scrollEnd");function Is(s,n){ax.set(s,n),kn(n,[s])}var nx=new WeakMap;function Rs(s,n){if(typeof s=="object"&&s!==null){var l=nx.get(s);return l!==void 0?l:(n={value:s,source:n,stack:v0(n)},nx.set(s,n),n)}return{value:s,source:n,stack:v0(n)}}var Ms=[],Sr=0,Iu=0;function go(){for(var s=Sr,n=Iu=Sr=0;n<s;){var l=Ms[n];Ms[n++]=null;var o=Ms[n];Ms[n++]=null;var m=Ms[n];Ms[n++]=null;var h=Ms[n];if(Ms[n++]=null,o!==null&&m!==null){var w=o.pending;w===null?m.next=m:(m.next=w.next,w.next=m),o.pending=m}h!==0&&rx(l,m,h)}}function po(s,n,l,o){Ms[Sr++]=s,Ms[Sr++]=n,Ms[Sr++]=l,Ms[Sr++]=o,Iu|=o,s.lanes|=o,s=s.alternate,s!==null&&(s.lanes|=o)}function Hu(s,n,l,o){return po(s,n,l,o),bo(s)}function Cr(s,n){return po(s,null,null,n),bo(s)}function rx(s,n,l){s.lanes|=l;var o=s.alternate;o!==null&&(o.lanes|=l);for(var m=!1,h=s.return;h!==null;)h.childLanes|=l,o=h.alternate,o!==null&&(o.childLanes|=l),h.tag===22&&(s=h.stateNode,s===null||s._visibility&1||(m=!0)),s=h,h=h.return;return s.tag===3?(h=s.stateNode,m&&n!==null&&(m=31-it(l),s=h.hiddenUpdates,o=s[m],o===null?s[m]=[n]:o.push(n),n.lane=l|536870912),h):null}function bo(s){if(50<ri)throw ri=0,Qd=null,Error(i(185));for(var n=s.return;n!==null;)s=n,n=s.return;return s.tag===3?s.stateNode:null}var Ar={};function vw(s,n,l,o){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(s,n,l,o){return new vw(s,n,l,o)}function Yu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function pa(s,n){var l=s.alternate;return l===null?(l=js(s.tag,n,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=n,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,n=s.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function lx(s,n){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,n=l.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s}function yo(s,n,l,o,m,h){var w=0;if(o=s,typeof s=="function")Yu(s)&&(w=1);else if(typeof s=="string")w=N2(s,l,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=js(31,l,n,m),s.elementType=P,s.lanes=h,s;case T:return zn(l.children,m,h,n);case M:w=8,m|=24;break;case _:return s=js(12,l,n,m|2),s.elementType=_,s.lanes=h,s;case O:return s=js(13,l,n,m),s.elementType=O,s.lanes=h,s;case U:return s=js(19,l,n,m),s.elementType=U,s.lanes=h,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case N:w=10;break e;case j:w=9;break e;case A:w=11;break e;case D:w=14;break e;case z:w=16,o=null;break e}w=29,l=Error(i(130,s===null?"null":typeof s,"")),o=null}return n=js(w,l,n,m),n.elementType=s,n.type=o,n.lanes=h,n}function zn(s,n,l,o){return s=js(7,s,o,n),s.lanes=l,s}function Zu(s,n,l){return s=js(6,s,null,n),s.lanes=l,s}function Gu(s,n,l){return n=js(4,s.children!==null?s.children:[],s.key,n),n.lanes=l,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}var Er=[],Tr=0,vo=null,jo=0,_s=[],zs=0,On=null,ba=1,ya="";function Ln(s,n){Er[Tr++]=jo,Er[Tr++]=vo,vo=s,jo=n}function ix(s,n,l){_s[zs++]=ba,_s[zs++]=ya,_s[zs++]=On,On=s;var o=ba;s=ya;var m=32-it(o)-1;o&=~(1<<m),l+=1;var h=32-it(n)+m;if(30<h){var w=m-m%5;h=(o&(1<<w)-1).toString(32),o>>=w,m-=w,ba=1<<32-it(n)+m|l<<m|o,ya=h+s}else ba=1<<h|l<<m|o,ya=s}function Ku(s){s.return!==null&&(Ln(s,1),ix(s,1,0))}function Xu(s){for(;s===vo;)vo=Er[--Tr],Er[Tr]=null,jo=Er[--Tr],Er[Tr]=null;for(;s===On;)On=_s[--zs],_s[zs]=null,ya=_s[--zs],_s[zs]=null,ba=_s[--zs],_s[zs]=null}var ns=null,vt=null,Je=!1,Vn=null,ea=!1,Qu=Error(i(519));function Pn(s){var n=Error(i(418,""));throw Vl(Rs(n,s)),Qu}function ox(s){var n=s.stateNode,l=s.type,o=s.memoizedProps;switch(n[Jt]=s,n[us]=o,l){case"dialog":Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":case"embed":Ge("load",n);break;case"video":case"audio":for(l=0;l<ii.length;l++)Ge(ii[l],n);break;case"source":Ge("error",n);break;case"img":case"image":case"link":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"input":Ge("invalid",n),w0(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),lo(n);break;case"select":Ge("invalid",n);break;case"textarea":Ge("invalid",n),C0(n,o.value,o.defaultValue,o.children),lo(n)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||n.textContent===""+l||o.suppressHydrationWarning===!0||Cp(n.textContent,l)?(o.popover!=null&&(Ge("beforetoggle",n),Ge("toggle",n)),o.onScroll!=null&&Ge("scroll",n),o.onScrollEnd!=null&&Ge("scrollend",n),o.onClick!=null&&(n.onclick=tc),n=!0):n=!1,n||Pn(s)}function cx(s){for(ns=s.return;ns;)switch(ns.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:ns=ns.return}}function Ol(s){if(s!==ns)return!1;if(!Je)return cx(s),Je=!0,!1;var n=s.tag,l;if((l=n!==3&&n!==27)&&((l=n===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||fm(s.type,s.memoizedProps)),l=!l),l&&vt&&Pn(s),cx(s),n===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(n===0){vt=Ys(s.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++;s=s.nextSibling}vt=null}}else n===27?(n=vt,an(s.type)?(s=pm,pm=null,vt=s):vt=n):vt=ns?Ys(s.stateNode.nextSibling):null;return!0}function Ll(){vt=ns=null,Je=!1}function ux(){var s=Vn;return s!==null&&(hs===null?hs=s:hs.push.apply(hs,s),Vn=null),s}function Vl(s){Vn===null?Vn=[s]:Vn.push(s)}var Ju=ne(null),Un=null,va=null;function qa(s,n,l){me(Ju,n._currentValue),n._currentValue=l}function ja(s){s._currentValue=Ju.current,K(Ju)}function Wu(s,n,l){for(;s!==null;){var o=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),s===l)break;s=s.return}}function ed(s,n,l,o){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var h=m.dependencies;if(h!==null){var w=m.child;h=h.firstContext;e:for(;h!==null;){var k=h;h=m;for(var I=0;I<n.length;I++)if(k.context===n[I]){h.lanes|=l,k=h.alternate,k!==null&&(k.lanes|=l),Wu(h.return,l,s),o||(w=null);break e}h=k.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(i(341));w.lanes|=l,h=w.alternate,h!==null&&(h.lanes|=l),Wu(w,l,s),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Pl(s,n,l,o){s=null;for(var m=n,h=!1;m!==null;){if(!h){if((m.flags&524288)!==0)h=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var k=m.type;vs(m.pendingProps.value,w.value)||(s!==null?s.push(k):s=[k])}}else if(m===be.current){if(w=m.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(fi):s=[fi])}m=m.return}s!==null&&ed(n,s,l,o),n.flags|=262144}function No(s){for(s=s.firstContext;s!==null;){if(!vs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Bn(s){Un=s,va=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return dx(Un,s)}function wo(s,n){return Un===null&&Bn(s),dx(s,n)}function dx(s,n){var l=n._currentValue;if(n={context:n,memoizedValue:l,next:null},va===null){if(s===null)throw Error(i(308));va=n,s.dependencies={lanes:0,firstContext:n},s.flags|=524288}else va=va.next=n;return l}var jw=typeof AbortController<"u"?AbortController:function(){var s=[],n=this.signal={aborted:!1,addEventListener:function(l,o){s.push(o)}};this.abort=function(){n.aborted=!0,s.forEach(function(l){return l()})}},Nw=e.unstable_scheduleCallback,ww=e.unstable_NormalPriority,zt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function td(){return{controller:new jw,data:new Map,refCount:0}}function Ul(s){s.refCount--,s.refCount===0&&Nw(ww,function(){s.controller.abort()})}var Bl=null,sd=0,Dr=0,kr=null;function Sw(s,n){if(Bl===null){var l=Bl=[];sd=0,Dr=nm(),kr={status:"pending",value:void 0,then:function(o){l.push(o)}}}return sd++,n.then(mx,mx),n}function mx(){if(--sd===0&&Bl!==null){kr!==null&&(kr.status="fulfilled");var s=Bl;Bl=null,Dr=0,kr=null;for(var n=0;n<s.length;n++)(0,s[n])()}}function Cw(s,n){var l=[],o={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){o.status="fulfilled",o.value=n;for(var m=0;m<l.length;m++)(0,l[m])(n)},function(m){for(o.status="rejected",o.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),o}var fx=F.S;F.S=function(s,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Sw(s,n),fx!==null&&fx(s,n)};var $n=ne(null);function ad(){var s=$n.current;return s!==null?s:ot.pooledCache}function So(s,n){n===null?me($n,$n.current):me($n,n.pool)}function hx(){var s=ad();return s===null?null:{parent:zt._currentValue,pool:s}}var $l=Error(i(460)),xx=Error(i(474)),Co=Error(i(542)),nd={then:function(){}};function gx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ao(){}function px(s,n,l){switch(l=s[l],l===void 0?s.push(n):l!==n&&(n.then(Ao,Ao),n=l),n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,yx(s),s;default:if(typeof n.status=="string")n.then(Ao,Ao);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=n,s.status="pending",s.then(function(o){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=o}},function(o){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,yx(s),s}throw ql=n,$l}}var ql=null;function bx(){if(ql===null)throw Error(i(459));var s=ql;return ql=null,s}function yx(s){if(s===$l||s===Co)throw Error(i(483))}var Fa=!1;function rd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ia(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ha(s,n,l){var o=s.updateQueue;if(o===null)return null;if(o=o.shared,(et&2)!==0){var m=o.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),o.pending=n,n=bo(s),rx(s,null,l),n}return po(s,o,n,l),bo(s)}function Fl(s,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194048)!==0)){var o=n.lanes;o&=s.pendingLanes,l|=o,n.lanes=l,m0(s,l)}}function id(s,n){var l=s.updateQueue,o=s.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var m=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};h===null?m=h=w:h=h.next=w,l=l.next}while(l!==null);h===null?m=h=n:h=h.next=n}else m=h=n;l={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=n:s.next=n,l.lastBaseUpdate=n}var od=!1;function Il(){if(od){var s=kr;if(s!==null)throw s}}function Hl(s,n,l,o){od=!1;var m=s.updateQueue;Fa=!1;var h=m.firstBaseUpdate,w=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var I=k,fe=I.next;I.next=null,w===null?h=fe:w.next=fe,w=I;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,k=ve.lastBaseUpdate,k!==w&&(k===null?ve.firstBaseUpdate=fe:k.next=fe,ve.lastBaseUpdate=I))}if(h!==null){var Se=m.baseState;w=0,ve=fe=I=null,k=h;do{var he=k.lane&-536870913,xe=he!==k.lane;if(xe?(Xe&he)===he:(o&he)===he){he!==0&&he===Dr&&(od=!0),ve!==null&&(ve=ve.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ue=s,Ve=k;he=n;var nt=l;switch(Ve.tag){case 1:if(Ue=Ve.payload,typeof Ue=="function"){Se=Ue.call(nt,Se,he);break e}Se=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Ve.payload,he=typeof Ue=="function"?Ue.call(nt,Se,he):Ue,he==null)break e;Se=p({},Se,he);break e;case 2:Fa=!0}}he=k.callback,he!==null&&(s.flags|=64,xe&&(s.flags|=8192),xe=m.callbacks,xe===null?m.callbacks=[he]:xe.push(he))}else xe={lane:he,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ve===null?(fe=ve=xe,I=Se):ve=ve.next=xe,w|=he;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;xe=k,k=xe.next,xe.next=null,m.lastBaseUpdate=xe,m.shared.pending=null}}while(!0);ve===null&&(I=Se),m.baseState=I,m.firstBaseUpdate=fe,m.lastBaseUpdate=ve,h===null&&(m.shared.lanes=0),Wa|=w,s.lanes=w,s.memoizedState=Se}}function vx(s,n){if(typeof s!="function")throw Error(i(191,s));s.call(n)}function jx(s,n){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)vx(l[s],n)}var Rr=ne(null),Eo=ne(0);function Nx(s,n){s=Ta,me(Eo,s),me(Rr,n),Ta=s|n.baseLanes}function cd(){me(Eo,Ta),me(Rr,Rr.current)}function ud(){Ta=Eo.current,K(Rr),K(Eo)}var Ya=0,Ie=null,st=null,Tt=null,To=!1,Mr=!1,qn=!1,Do=0,Yl=0,_r=null,Aw=0;function St(){throw Error(i(321))}function dd(s,n){if(n===null)return!1;for(var l=0;l<n.length&&l<s.length;l++)if(!vs(s[l],n[l]))return!1;return!0}function md(s,n,l,o,m,h){return Ya=h,Ie=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=s===null||s.memoizedState===null?rg:lg,qn=!1,h=l(o,m),qn=!1,Mr&&(h=Sx(n,l,o,m)),wx(s),h}function wx(s){F.H=Oo;var n=st!==null&&st.next!==null;if(Ya=0,Tt=st=Ie=null,To=!1,Yl=0,_r=null,n)throw Error(i(300));s===null||Ut||(s=s.dependencies,s!==null&&No(s)&&(Ut=!0))}function Sx(s,n,l,o){Ie=s;var m=0;do{if(Mr&&(_r=null),Yl=0,Mr=!1,25<=m)throw Error(i(301));if(m+=1,Tt=st=null,s.updateQueue!=null){var h=s.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}F.H=_w,h=n(l,o)}while(Mr);return h}function Ew(){var s=F.H,n=s.useState()[0];return n=typeof n.then=="function"?Zl(n):n,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Ie.flags|=1024),n}function fd(){var s=Do!==0;return Do=0,s}function hd(s,n,l){n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~l}function xd(s){if(To){for(s=s.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}To=!1}Ya=0,Tt=st=Ie=null,Mr=!1,Yl=Do=0,_r=null}function ms(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ie.memoizedState=Tt=s:Tt=Tt.next=s,Tt}function Dt(){if(st===null){var s=Ie.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var n=Tt===null?Ie.memoizedState:Tt.next;if(n!==null)Tt=n,st=s;else{if(s===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Tt===null?Ie.memoizedState=Tt=s:Tt=Tt.next=s}return Tt}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(s){var n=Yl;return Yl+=1,_r===null&&(_r=[]),s=px(_r,s,n),n=Ie,(Tt===null?n.memoizedState:Tt.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?rg:lg),s}function ko(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Zl(s);if(s.$$typeof===N)return Wt(s)}throw Error(i(438,String(s)))}function pd(s){var n=null,l=Ie.updateQueue;if(l!==null&&(n=l.memoCache),n==null){var o=Ie.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),l===null&&(l=gd(),Ie.updateQueue=l),l.memoCache=n,l=n.data[n.index],l===void 0)for(l=n.data[n.index]=Array(s),o=0;o<s;o++)l[o]=se;return n.index++,l}function Na(s,n){return typeof n=="function"?n(s):n}function Ro(s){var n=Dt();return bd(n,st,s)}function bd(s,n,l){var o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var m=s.baseQueue,h=o.pending;if(h!==null){if(m!==null){var w=m.next;m.next=h.next,h.next=w}n.baseQueue=m=h,o.pending=null}if(h=s.baseState,m===null)s.memoizedState=h;else{n=m.next;var k=w=null,I=null,fe=n,ve=!1;do{var Se=fe.lane&-536870913;if(Se!==fe.lane?(Xe&Se)===Se:(Ya&Se)===Se){var he=fe.revertLane;if(he===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Se===Dr&&(ve=!0);else if((Ya&he)===he){fe=fe.next,he===Dr&&(ve=!0);continue}else Se={lane:0,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},I===null?(k=I=Se,w=h):I=I.next=Se,Ie.lanes|=he,Wa|=he;Se=fe.action,qn&&l(h,Se),h=fe.hasEagerState?fe.eagerState:l(h,Se)}else he={lane:Se,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},I===null?(k=I=he,w=h):I=I.next=he,Ie.lanes|=Se,Wa|=Se;fe=fe.next}while(fe!==null&&fe!==n);if(I===null?w=h:I.next=k,!vs(h,s.memoizedState)&&(Ut=!0,ve&&(l=kr,l!==null)))throw l;s.memoizedState=h,s.baseState=w,s.baseQueue=I,o.lastRenderedState=h}return m===null&&(o.lanes=0),[s.memoizedState,o.dispatch]}function yd(s){var n=Dt(),l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var o=l.dispatch,m=l.pending,h=n.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do h=s(h,w.action),w=w.next;while(w!==m);vs(h,n.memoizedState)||(Ut=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),l.lastRenderedState=h}return[h,o]}function Cx(s,n,l){var o=Ie,m=Dt(),h=Je;if(h){if(l===void 0)throw Error(i(407));l=l()}else l=n();var w=!vs((st||m).memoizedState,l);w&&(m.memoizedState=l,Ut=!0),m=m.queue;var k=Tx.bind(null,o,m,s);if(Gl(2048,8,k,[s]),m.getSnapshot!==n||w||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,zr(9,Mo(),Ex.bind(null,o,m,l,n),null),ot===null)throw Error(i(349));h||(Ya&124)!==0||Ax(o,n,l)}return l}function Ax(s,n,l){s.flags|=16384,s={getSnapshot:n,value:l},n=Ie.updateQueue,n===null?(n=gd(),Ie.updateQueue=n,n.stores=[s]):(l=n.stores,l===null?n.stores=[s]:l.push(s))}function Ex(s,n,l,o){n.value=l,n.getSnapshot=o,Dx(n)&&kx(s)}function Tx(s,n,l){return l(function(){Dx(n)&&kx(s)})}function Dx(s){var n=s.getSnapshot;s=s.value;try{var l=n();return!vs(s,l)}catch{return!0}}function kx(s){var n=Cr(s,2);n!==null&&As(n,s,2)}function vd(s){var n=ms();if(typeof s=="function"){var l=s;if(s=l(),qn){Ke(!0);try{l()}finally{Ke(!1)}}}return n.memoizedState=n.baseState=s,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:s},n}function Rx(s,n,l,o){return s.baseState=l,bd(s,st,typeof o=="function"?o:Na)}function Tw(s,n,l,o,m){if(zo(s))throw Error(i(485));if(s=n.action,s!==null){var h={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){h.listeners.push(w)}};F.T!==null?l(!0):h.isTransition=!1,o(h),l=n.pending,l===null?(h.next=n.pending=h,Mx(n,h)):(h.next=l.next,n.pending=l.next=h)}}function Mx(s,n){var l=n.action,o=n.payload,m=s.state;if(n.isTransition){var h=F.T,w={};F.T=w;try{var k=l(m,o),I=F.S;I!==null&&I(w,k),_x(s,n,k)}catch(fe){jd(s,n,fe)}finally{F.T=h}}else try{h=l(m,o),_x(s,n,h)}catch(fe){jd(s,n,fe)}}function _x(s,n,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){zx(s,n,o)},function(o){return jd(s,n,o)}):zx(s,n,l)}function zx(s,n,l){n.status="fulfilled",n.value=l,Ox(n),s.state=l,n=s.pending,n!==null&&(l=n.next,l===n?s.pending=null:(l=l.next,n.next=l,Mx(s,l)))}function jd(s,n,l){var o=s.pending;if(s.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=l,Ox(n),n=n.next;while(n!==o)}s.action=null}function Ox(s){s=s.listeners;for(var n=0;n<s.length;n++)(0,s[n])()}function Lx(s,n){return n}function Vx(s,n){if(Je){var l=ot.formState;if(l!==null){e:{var o=Ie;if(Je){if(vt){t:{for(var m=vt,h=ea;m.nodeType!==8;){if(!h){m=null;break t}if(m=Ys(m.nextSibling),m===null){m=null;break t}}h=m.data,m=h==="F!"||h==="F"?m:null}if(m){vt=Ys(m.nextSibling),o=m.data==="F!";break e}}Pn(o)}o=!1}o&&(n=l[0])}}return l=ms(),l.memoizedState=l.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lx,lastRenderedState:n},l.queue=o,l=sg.bind(null,Ie,o),o.dispatch=l,o=vd(!1),h=Ad.bind(null,Ie,!1,o.queue),o=ms(),m={state:n,dispatch:null,action:s,pending:null},o.queue=m,l=Tw.bind(null,Ie,m,h,l),m.dispatch=l,o.memoizedState=s,[n,l,!1]}function Px(s){var n=Dt();return Ux(n,st,s)}function Ux(s,n,l){if(n=bd(s,n,Lx)[0],s=Ro(Na)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Zl(n)}catch(w){throw w===$l?Co:w}else o=n;n=Dt();var m=n.queue,h=m.dispatch;return l!==n.memoizedState&&(Ie.flags|=2048,zr(9,Mo(),Dw.bind(null,m,l),null)),[o,h,s]}function Dw(s,n){s.action=n}function Bx(s){var n=Dt(),l=st;if(l!==null)return Ux(n,l,s);Dt(),n=n.memoizedState,l=Dt();var o=l.queue.dispatch;return l.memoizedState=s,[n,o,!1]}function zr(s,n,l,o){return s={tag:s,create:l,deps:o,inst:n,next:null},n=Ie.updateQueue,n===null&&(n=gd(),Ie.updateQueue=n),l=n.lastEffect,l===null?n.lastEffect=s.next=s:(o=l.next,l.next=s,s.next=o,n.lastEffect=s),s}function Mo(){return{destroy:void 0,resource:void 0}}function $x(){return Dt().memoizedState}function _o(s,n,l,o){var m=ms();o=o===void 0?null:o,Ie.flags|=s,m.memoizedState=zr(1|n,Mo(),l,o)}function Gl(s,n,l,o){var m=Dt();o=o===void 0?null:o;var h=m.memoizedState.inst;st!==null&&o!==null&&dd(o,st.memoizedState.deps)?m.memoizedState=zr(n,h,l,o):(Ie.flags|=s,m.memoizedState=zr(1|n,h,l,o))}function qx(s,n){_o(8390656,8,s,n)}function Fx(s,n){Gl(2048,8,s,n)}function Ix(s,n){return Gl(4,2,s,n)}function Hx(s,n){return Gl(4,4,s,n)}function Yx(s,n){if(typeof n=="function"){s=s();var l=n(s);return function(){typeof l=="function"?l():n(null)}}if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function Zx(s,n,l){l=l!=null?l.concat([s]):null,Gl(4,4,Yx.bind(null,n,s),l)}function Nd(){}function Gx(s,n){var l=Dt();n=n===void 0?null:n;var o=l.memoizedState;return n!==null&&dd(n,o[1])?o[0]:(l.memoizedState=[s,n],s)}function Kx(s,n){var l=Dt();n=n===void 0?null:n;var o=l.memoizedState;if(n!==null&&dd(n,o[1]))return o[0];if(o=s(),qn){Ke(!0);try{s()}finally{Ke(!1)}}return l.memoizedState=[o,n],o}function wd(s,n,l){return l===void 0||(Ya&1073741824)!==0?s.memoizedState=n:(s.memoizedState=l,s=Jg(),Ie.lanes|=s,Wa|=s,l)}function Xx(s,n,l,o){return vs(l,n)?l:Rr.current!==null?(s=wd(s,l,o),vs(s,n)||(Ut=!0),s):(Ya&42)===0?(Ut=!0,s.memoizedState=l):(s=Jg(),Ie.lanes|=s,Wa|=s,n)}function Qx(s,n,l,o,m){var h=ce.p;ce.p=h!==0&&8>h?h:8;var w=F.T,k={};F.T=k,Ad(s,!1,n,l);try{var I=m(),fe=F.S;if(fe!==null&&fe(k,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ve=Cw(I,o);Kl(s,n,ve,Cs(s))}else Kl(s,n,o,Cs(s))}catch(Se){Kl(s,n,{then:function(){},status:"rejected",reason:Se},Cs())}finally{ce.p=h,F.T=w}}function kw(){}function Sd(s,n,l,o){if(s.tag!==5)throw Error(i(476));var m=Jx(s).queue;Qx(s,m,n,J,l===null?kw:function(){return Wx(s),l(o)})}function Jx(s){var n=s.memoizedState;if(n!==null)return n;n={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:J},next:null};var l={};return n.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:l},next:null},s.memoizedState=n,s=s.alternate,s!==null&&(s.memoizedState=n),n}function Wx(s){var n=Jx(s).next.queue;Kl(s,n,{},Cs())}function Cd(){return Wt(fi)}function eg(){return Dt().memoizedState}function tg(){return Dt().memoizedState}function Rw(s){for(var n=s.return;n!==null;){switch(n.tag){case 24:case 3:var l=Cs();s=Ia(l);var o=Ha(n,s,l);o!==null&&(As(o,n,l),Fl(o,n,l)),n={cache:td()},s.payload=n;return}n=n.return}}function Mw(s,n,l){var o=Cs();l={lane:o,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},zo(s)?ag(n,l):(l=Hu(s,n,l,o),l!==null&&(As(l,s,o),ng(l,n,o)))}function sg(s,n,l){var o=Cs();Kl(s,n,l,o)}function Kl(s,n,l,o){var m={lane:o,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(zo(s))ag(n,m);else{var h=s.alternate;if(s.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var w=n.lastRenderedState,k=h(w,l);if(m.hasEagerState=!0,m.eagerState=k,vs(k,w))return po(s,n,m,0),ot===null&&go(),!1}catch{}finally{}if(l=Hu(s,n,m,o),l!==null)return As(l,s,o),ng(l,n,o),!0}return!1}function Ad(s,n,l,o){if(o={lane:2,revertLane:nm(),action:o,hasEagerState:!1,eagerState:null,next:null},zo(s)){if(n)throw Error(i(479))}else n=Hu(s,l,o,2),n!==null&&As(n,s,2)}function zo(s){var n=s.alternate;return s===Ie||n!==null&&n===Ie}function ag(s,n){Mr=To=!0;var l=s.pending;l===null?n.next=n:(n.next=l.next,l.next=n),s.pending=n}function ng(s,n,l){if((l&4194048)!==0){var o=n.lanes;o&=s.pendingLanes,l|=o,n.lanes=l,m0(s,l)}}var Oo={readContext:Wt,use:ko,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},rg={readContext:Wt,use:ko,useCallback:function(s,n){return ms().memoizedState=[s,n===void 0?null:n],s},useContext:Wt,useEffect:qx,useImperativeHandle:function(s,n,l){l=l!=null?l.concat([s]):null,_o(4194308,4,Yx.bind(null,n,s),l)},useLayoutEffect:function(s,n){return _o(4194308,4,s,n)},useInsertionEffect:function(s,n){_o(4,2,s,n)},useMemo:function(s,n){var l=ms();n=n===void 0?null:n;var o=s();if(qn){Ke(!0);try{s()}finally{Ke(!1)}}return l.memoizedState=[o,n],o},useReducer:function(s,n,l){var o=ms();if(l!==void 0){var m=l(n);if(qn){Ke(!0);try{l(n)}finally{Ke(!1)}}}else m=n;return o.memoizedState=o.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},o.queue=s,s=s.dispatch=Mw.bind(null,Ie,s),[o.memoizedState,s]},useRef:function(s){var n=ms();return s={current:s},n.memoizedState=s},useState:function(s){s=vd(s);var n=s.queue,l=sg.bind(null,Ie,n);return n.dispatch=l,[s.memoizedState,l]},useDebugValue:Nd,useDeferredValue:function(s,n){var l=ms();return wd(l,s,n)},useTransition:function(){var s=vd(!1);return s=Qx.bind(null,Ie,s.queue,!0,!1),ms().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,n,l){var o=Ie,m=ms();if(Je){if(l===void 0)throw Error(i(407));l=l()}else{if(l=n(),ot===null)throw Error(i(349));(Xe&124)!==0||Ax(o,n,l)}m.memoizedState=l;var h={value:l,getSnapshot:n};return m.queue=h,qx(Tx.bind(null,o,h,s),[s]),o.flags|=2048,zr(9,Mo(),Ex.bind(null,o,h,l,n),null),l},useId:function(){var s=ms(),n=ot.identifierPrefix;if(Je){var l=ya,o=ba;l=(o&~(1<<32-it(o)-1)).toString(32)+l,n=""+n+"R"+l,l=Do++,0<l&&(n+="H"+l.toString(32)),n+=""}else l=Aw++,n=""+n+"r"+l.toString(32)+"";return s.memoizedState=n},useHostTransitionStatus:Cd,useFormState:Vx,useActionState:Vx,useOptimistic:function(s){var n=ms();n.memoizedState=n.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=l,n=Ad.bind(null,Ie,!0,l),l.dispatch=n,[s,n]},useMemoCache:pd,useCacheRefresh:function(){return ms().memoizedState=Rw.bind(null,Ie)}},lg={readContext:Wt,use:ko,useCallback:Gx,useContext:Wt,useEffect:Fx,useImperativeHandle:Zx,useInsertionEffect:Ix,useLayoutEffect:Hx,useMemo:Kx,useReducer:Ro,useRef:$x,useState:function(){return Ro(Na)},useDebugValue:Nd,useDeferredValue:function(s,n){var l=Dt();return Xx(l,st.memoizedState,s,n)},useTransition:function(){var s=Ro(Na)[0],n=Dt().memoizedState;return[typeof s=="boolean"?s:Zl(s),n]},useSyncExternalStore:Cx,useId:eg,useHostTransitionStatus:Cd,useFormState:Px,useActionState:Px,useOptimistic:function(s,n){var l=Dt();return Rx(l,st,s,n)},useMemoCache:pd,useCacheRefresh:tg},_w={readContext:Wt,use:ko,useCallback:Gx,useContext:Wt,useEffect:Fx,useImperativeHandle:Zx,useInsertionEffect:Ix,useLayoutEffect:Hx,useMemo:Kx,useReducer:yd,useRef:$x,useState:function(){return yd(Na)},useDebugValue:Nd,useDeferredValue:function(s,n){var l=Dt();return st===null?wd(l,s,n):Xx(l,st.memoizedState,s,n)},useTransition:function(){var s=yd(Na)[0],n=Dt().memoizedState;return[typeof s=="boolean"?s:Zl(s),n]},useSyncExternalStore:Cx,useId:eg,useHostTransitionStatus:Cd,useFormState:Bx,useActionState:Bx,useOptimistic:function(s,n){var l=Dt();return st!==null?Rx(l,st,s,n):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:pd,useCacheRefresh:tg},Or=null,Xl=0;function Lo(s){var n=Xl;return Xl+=1,Or===null&&(Or=[]),px(Or,s,n)}function Ql(s,n){n=n.props.ref,s.ref=n!==void 0?n:null}function Vo(s,n){throw n.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(n),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)))}function ig(s){var n=s._init;return n(s._payload)}function og(s){function n(oe,ee){if(s){var de=oe.deletions;de===null?(oe.deletions=[ee],oe.flags|=16):de.push(ee)}}function l(oe,ee){if(!s)return null;for(;ee!==null;)n(oe,ee),ee=ee.sibling;return null}function o(oe){for(var ee=new Map;oe!==null;)oe.key!==null?ee.set(oe.key,oe):ee.set(oe.index,oe),oe=oe.sibling;return ee}function m(oe,ee){return oe=pa(oe,ee),oe.index=0,oe.sibling=null,oe}function h(oe,ee,de){return oe.index=de,s?(de=oe.alternate,de!==null?(de=de.index,de<ee?(oe.flags|=67108866,ee):de):(oe.flags|=67108866,ee)):(oe.flags|=1048576,ee)}function w(oe){return s&&oe.alternate===null&&(oe.flags|=67108866),oe}function k(oe,ee,de,we){return ee===null||ee.tag!==6?(ee=Zu(de,oe.mode,we),ee.return=oe,ee):(ee=m(ee,de),ee.return=oe,ee)}function I(oe,ee,de,we){var Me=de.type;return Me===T?ve(oe,ee,de.props.children,we,de.key):ee!==null&&(ee.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===z&&ig(Me)===ee.type)?(ee=m(ee,de.props),Ql(ee,de),ee.return=oe,ee):(ee=yo(de.type,de.key,de.props,null,oe.mode,we),Ql(ee,de),ee.return=oe,ee)}function fe(oe,ee,de,we){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==de.containerInfo||ee.stateNode.implementation!==de.implementation?(ee=Gu(de,oe.mode,we),ee.return=oe,ee):(ee=m(ee,de.children||[]),ee.return=oe,ee)}function ve(oe,ee,de,we,Me){return ee===null||ee.tag!==7?(ee=zn(de,oe.mode,we,Me),ee.return=oe,ee):(ee=m(ee,de),ee.return=oe,ee)}function Se(oe,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Zu(""+ee,oe.mode,de),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return de=yo(ee.type,ee.key,ee.props,null,oe.mode,de),Ql(de,ee),de.return=oe,de;case S:return ee=Gu(ee,oe.mode,de),ee.return=oe,ee;case z:var we=ee._init;return ee=we(ee._payload),Se(oe,ee,de)}if(te(ee)||R(ee))return ee=zn(ee,oe.mode,de,null),ee.return=oe,ee;if(typeof ee.then=="function")return Se(oe,Lo(ee),de);if(ee.$$typeof===N)return Se(oe,wo(oe,ee),de);Vo(oe,ee)}return null}function he(oe,ee,de,we){var Me=ee!==null?ee.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Me!==null?null:k(oe,ee,""+de,we);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case v:return de.key===Me?I(oe,ee,de,we):null;case S:return de.key===Me?fe(oe,ee,de,we):null;case z:return Me=de._init,de=Me(de._payload),he(oe,ee,de,we)}if(te(de)||R(de))return Me!==null?null:ve(oe,ee,de,we,null);if(typeof de.then=="function")return he(oe,ee,Lo(de),we);if(de.$$typeof===N)return he(oe,ee,wo(oe,de),we);Vo(oe,de)}return null}function xe(oe,ee,de,we,Me){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return oe=oe.get(de)||null,k(ee,oe,""+we,Me);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case v:return oe=oe.get(we.key===null?de:we.key)||null,I(ee,oe,we,Me);case S:return oe=oe.get(we.key===null?de:we.key)||null,fe(ee,oe,we,Me);case z:var Ye=we._init;return we=Ye(we._payload),xe(oe,ee,de,we,Me)}if(te(we)||R(we))return oe=oe.get(de)||null,ve(ee,oe,we,Me,null);if(typeof we.then=="function")return xe(oe,ee,de,Lo(we),Me);if(we.$$typeof===N)return xe(oe,ee,de,wo(ee,we),Me);Vo(ee,we)}return null}function Ue(oe,ee,de,we){for(var Me=null,Ye=null,Le=ee,Pe=ee=0,$t=null;Le!==null&&Pe<de.length;Pe++){Le.index>Pe?($t=Le,Le=null):$t=Le.sibling;var Qe=he(oe,Le,de[Pe],we);if(Qe===null){Le===null&&(Le=$t);break}s&&Le&&Qe.alternate===null&&n(oe,Le),ee=h(Qe,ee,Pe),Ye===null?Me=Qe:Ye.sibling=Qe,Ye=Qe,Le=$t}if(Pe===de.length)return l(oe,Le),Je&&Ln(oe,Pe),Me;if(Le===null){for(;Pe<de.length;Pe++)Le=Se(oe,de[Pe],we),Le!==null&&(ee=h(Le,ee,Pe),Ye===null?Me=Le:Ye.sibling=Le,Ye=Le);return Je&&Ln(oe,Pe),Me}for(Le=o(Le);Pe<de.length;Pe++)$t=xe(Le,oe,Pe,de[Pe],we),$t!==null&&(s&&$t.alternate!==null&&Le.delete($t.key===null?Pe:$t.key),ee=h($t,ee,Pe),Ye===null?Me=$t:Ye.sibling=$t,Ye=$t);return s&&Le.forEach(function(cn){return n(oe,cn)}),Je&&Ln(oe,Pe),Me}function Ve(oe,ee,de,we){if(de==null)throw Error(i(151));for(var Me=null,Ye=null,Le=ee,Pe=ee=0,$t=null,Qe=de.next();Le!==null&&!Qe.done;Pe++,Qe=de.next()){Le.index>Pe?($t=Le,Le=null):$t=Le.sibling;var cn=he(oe,Le,Qe.value,we);if(cn===null){Le===null&&(Le=$t);break}s&&Le&&cn.alternate===null&&n(oe,Le),ee=h(cn,ee,Pe),Ye===null?Me=cn:Ye.sibling=cn,Ye=cn,Le=$t}if(Qe.done)return l(oe,Le),Je&&Ln(oe,Pe),Me;if(Le===null){for(;!Qe.done;Pe++,Qe=de.next())Qe=Se(oe,Qe.value,we),Qe!==null&&(ee=h(Qe,ee,Pe),Ye===null?Me=Qe:Ye.sibling=Qe,Ye=Qe);return Je&&Ln(oe,Pe),Me}for(Le=o(Le);!Qe.done;Pe++,Qe=de.next())Qe=xe(Le,oe,Pe,Qe.value,we),Qe!==null&&(s&&Qe.alternate!==null&&Le.delete(Qe.key===null?Pe:Qe.key),ee=h(Qe,ee,Pe),Ye===null?Me=Qe:Ye.sibling=Qe,Ye=Qe);return s&&Le.forEach(function(z2){return n(oe,z2)}),Je&&Ln(oe,Pe),Me}function nt(oe,ee,de,we){if(typeof de=="object"&&de!==null&&de.type===T&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case v:e:{for(var Me=de.key;ee!==null;){if(ee.key===Me){if(Me=de.type,Me===T){if(ee.tag===7){l(oe,ee.sibling),we=m(ee,de.props.children),we.return=oe,oe=we;break e}}else if(ee.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===z&&ig(Me)===ee.type){l(oe,ee.sibling),we=m(ee,de.props),Ql(we,de),we.return=oe,oe=we;break e}l(oe,ee);break}else n(oe,ee);ee=ee.sibling}de.type===T?(we=zn(de.props.children,oe.mode,we,de.key),we.return=oe,oe=we):(we=yo(de.type,de.key,de.props,null,oe.mode,we),Ql(we,de),we.return=oe,oe=we)}return w(oe);case S:e:{for(Me=de.key;ee!==null;){if(ee.key===Me)if(ee.tag===4&&ee.stateNode.containerInfo===de.containerInfo&&ee.stateNode.implementation===de.implementation){l(oe,ee.sibling),we=m(ee,de.children||[]),we.return=oe,oe=we;break e}else{l(oe,ee);break}else n(oe,ee);ee=ee.sibling}we=Gu(de,oe.mode,we),we.return=oe,oe=we}return w(oe);case z:return Me=de._init,de=Me(de._payload),nt(oe,ee,de,we)}if(te(de))return Ue(oe,ee,de,we);if(R(de)){if(Me=R(de),typeof Me!="function")throw Error(i(150));return de=Me.call(de),Ve(oe,ee,de,we)}if(typeof de.then=="function")return nt(oe,ee,Lo(de),we);if(de.$$typeof===N)return nt(oe,ee,wo(oe,de),we);Vo(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,ee!==null&&ee.tag===6?(l(oe,ee.sibling),we=m(ee,de),we.return=oe,oe=we):(l(oe,ee),we=Zu(de,oe.mode,we),we.return=oe,oe=we),w(oe)):l(oe,ee)}return function(oe,ee,de,we){try{Xl=0;var Me=nt(oe,ee,de,we);return Or=null,Me}catch(Le){if(Le===$l||Le===Co)throw Le;var Ye=js(29,Le,null,oe.mode);return Ye.lanes=we,Ye.return=oe,Ye}finally{}}}var Lr=og(!0),cg=og(!1),Os=ne(null),ta=null;function Za(s){var n=s.alternate;me(Ot,Ot.current&1),me(Os,s),ta===null&&(n===null||Rr.current!==null||n.memoizedState!==null)&&(ta=s)}function ug(s){if(s.tag===22){if(me(Ot,Ot.current),me(Os,s),ta===null){var n=s.alternate;n!==null&&n.memoizedState!==null&&(ta=s)}}else Ga()}function Ga(){me(Ot,Ot.current),me(Os,Os.current)}function wa(s){K(Os),ta===s&&(ta=null),K(Ot)}var Ot=ne(0);function Po(s){for(var n=s;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||gm(l)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Ed(s,n,l,o){n=s.memoizedState,l=l(o,n),l=l==null?n:p({},n,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Td={enqueueSetState:function(s,n,l){s=s._reactInternals;var o=Cs(),m=Ia(o);m.payload=n,l!=null&&(m.callback=l),n=Ha(s,m,o),n!==null&&(As(n,s,o),Fl(n,s,o))},enqueueReplaceState:function(s,n,l){s=s._reactInternals;var o=Cs(),m=Ia(o);m.tag=1,m.payload=n,l!=null&&(m.callback=l),n=Ha(s,m,o),n!==null&&(As(n,s,o),Fl(n,s,o))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var l=Cs(),o=Ia(l);o.tag=2,n!=null&&(o.callback=n),n=Ha(s,o,l),n!==null&&(As(n,s,l),Fl(n,s,l))}};function dg(s,n,l,o,m,h,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(o,h,w):n.prototype&&n.prototype.isPureReactComponent?!_l(l,o)||!_l(m,h):!0}function mg(s,n,l,o){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,o),n.state!==s&&Td.enqueueReplaceState(n,n.state,null)}function Fn(s,n){var l=n;if("ref"in n){l={};for(var o in n)o!=="ref"&&(l[o]=n[o])}if(s=s.defaultProps){l===n&&(l=p({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}var Uo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function fg(s){Uo(s)}function hg(s){console.error(s)}function xg(s){Uo(s)}function Bo(s,n){try{var l=s.onUncaughtError;l(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function gg(s,n,l){try{var o=s.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Dd(s,n,l){return l=Ia(l),l.tag=3,l.payload={element:null},l.callback=function(){Bo(s,n)},l}function pg(s){return s=Ia(s),s.tag=3,s}function bg(s,n,l,o){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var h=o.value;s.payload=function(){return m(h)},s.callback=function(){gg(n,l,o)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){gg(n,l,o),typeof m!="function"&&(en===null?en=new Set([this]):en.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})})}function zw(s,n,l,o,m){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=l.alternate,n!==null&&Pl(n,l,m,!0),l=Os.current,l!==null){switch(l.tag){case 13:return ta===null?Wd():l.alternate===null&&jt===0&&(jt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,o===nd?l.flags|=16384:(n=l.updateQueue,n===null?l.updateQueue=new Set([o]):n.add(o),tm(s,o,m)),!1;case 22:return l.flags|=65536,o===nd?l.flags|=16384:(n=l.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=n):(l=n.retryQueue,l===null?n.retryQueue=new Set([o]):l.add(o)),tm(s,o,m)),!1}throw Error(i(435,l.tag))}return tm(s,o,m),Wd(),!1}if(Je)return n=Os.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,o!==Qu&&(s=Error(i(422),{cause:o}),Vl(Rs(s,l)))):(o!==Qu&&(n=Error(i(423),{cause:o}),Vl(Rs(n,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,o=Rs(o,l),m=Dd(s.stateNode,o,m),id(s,m),jt!==4&&(jt=2)),!1;var h=Error(i(520),{cause:o});if(h=Rs(h,l),ni===null?ni=[h]:ni.push(h),jt!==4&&(jt=2),n===null)return!0;o=Rs(o,l),l=n;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=Dd(l.stateNode,o,s),id(l,s),!1;case 1:if(n=l.type,h=l.stateNode,(l.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(en===null||!en.has(h))))return l.flags|=65536,m&=-m,l.lanes|=m,m=pg(m),bg(m,s,l,o),id(l,m),!1}l=l.return}while(l!==null);return!1}var yg=Error(i(461)),Ut=!1;function Yt(s,n,l,o){n.child=s===null?cg(n,null,l,o):Lr(n,s.child,l,o)}function vg(s,n,l,o,m){l=l.render;var h=n.ref;if("ref"in o){var w={};for(var k in o)k!=="ref"&&(w[k]=o[k])}else w=o;return Bn(n),o=md(s,n,l,w,h,m),k=fd(),s!==null&&!Ut?(hd(s,n,m),Sa(s,n,m)):(Je&&k&&Ku(n),n.flags|=1,Yt(s,n,o,m),n.child)}function jg(s,n,l,o,m){if(s===null){var h=l.type;return typeof h=="function"&&!Yu(h)&&h.defaultProps===void 0&&l.compare===null?(n.tag=15,n.type=h,Ng(s,n,h,o,m)):(s=yo(l.type,null,o,n,n.mode,m),s.ref=n.ref,s.return=n,n.child=s)}if(h=s.child,!Vd(s,m)){var w=h.memoizedProps;if(l=l.compare,l=l!==null?l:_l,l(w,o)&&s.ref===n.ref)return Sa(s,n,m)}return n.flags|=1,s=pa(h,o),s.ref=n.ref,s.return=n,n.child=s}function Ng(s,n,l,o,m){if(s!==null){var h=s.memoizedProps;if(_l(h,o)&&s.ref===n.ref)if(Ut=!1,n.pendingProps=o=h,Vd(s,m))(s.flags&131072)!==0&&(Ut=!0);else return n.lanes=s.lanes,Sa(s,n,m)}return kd(s,n,l,o,m)}function wg(s,n,l){var o=n.pendingProps,m=o.children,h=s!==null?s.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=h!==null?h.baseLanes|l:l,s!==null){for(m=n.child=s.child,h=0;m!==null;)h=h|m.lanes|m.childLanes,m=m.sibling;n.childLanes=h&~o}else n.childLanes=0,n.child=null;return Sg(s,n,o,l)}if((l&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},s!==null&&So(n,h!==null?h.cachePool:null),h!==null?Nx(n,h):cd(),ug(n);else return n.lanes=n.childLanes=536870912,Sg(s,n,h!==null?h.baseLanes|l:l,l)}else h!==null?(So(n,h.cachePool),Nx(n,h),Ga(),n.memoizedState=null):(s!==null&&So(n,null),cd(),Ga());return Yt(s,n,m,l),n.child}function Sg(s,n,l,o){var m=ad();return m=m===null?null:{parent:zt._currentValue,pool:m},n.memoizedState={baseLanes:l,cachePool:m},s!==null&&So(n,null),cd(),ug(n),s!==null&&Pl(s,n,o,!0),null}function $o(s,n){var l=n.ref;if(l===null)s!==null&&s.ref!==null&&(n.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(n.flags|=4194816)}}function kd(s,n,l,o,m){return Bn(n),l=md(s,n,l,o,void 0,m),o=fd(),s!==null&&!Ut?(hd(s,n,m),Sa(s,n,m)):(Je&&o&&Ku(n),n.flags|=1,Yt(s,n,l,m),n.child)}function Cg(s,n,l,o,m,h){return Bn(n),n.updateQueue=null,l=Sx(n,o,l,m),wx(s),o=fd(),s!==null&&!Ut?(hd(s,n,h),Sa(s,n,h)):(Je&&o&&Ku(n),n.flags|=1,Yt(s,n,l,h),n.child)}function Ag(s,n,l,o,m){if(Bn(n),n.stateNode===null){var h=Ar,w=l.contextType;typeof w=="object"&&w!==null&&(h=Wt(w)),h=new l(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Td,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},rd(n),w=l.contextType,h.context=typeof w=="object"&&w!==null?Wt(w):Ar,h.state=n.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Ed(n,l,w,o),h.state=n.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(w=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),w!==h.state&&Td.enqueueReplaceState(h,h.state,null),Hl(n,o,h,m),Il(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(s===null){h=n.stateNode;var k=n.memoizedProps,I=Fn(l,k);h.props=I;var fe=h.context,ve=l.contextType;w=Ar,typeof ve=="object"&&ve!==null&&(w=Wt(ve));var Se=l.getDerivedStateFromProps;ve=typeof Se=="function"||typeof h.getSnapshotBeforeUpdate=="function",k=n.pendingProps!==k,ve||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(k||fe!==w)&&mg(n,h,o,w),Fa=!1;var he=n.memoizedState;h.state=he,Hl(n,o,h,m),Il(),fe=n.memoizedState,k||he!==fe||Fa?(typeof Se=="function"&&(Ed(n,l,Se,o),fe=n.memoizedState),(I=Fa||dg(n,l,I,o,he,fe,w))?(ve||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=fe),h.props=o,h.state=fe,h.context=w,o=I):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,ld(s,n),w=n.memoizedProps,ve=Fn(l,w),h.props=ve,Se=n.pendingProps,he=h.context,fe=l.contextType,I=Ar,typeof fe=="object"&&fe!==null&&(I=Wt(fe)),k=l.getDerivedStateFromProps,(fe=typeof k=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w!==Se||he!==I)&&mg(n,h,o,I),Fa=!1,he=n.memoizedState,h.state=he,Hl(n,o,h,m),Il();var xe=n.memoizedState;w!==Se||he!==xe||Fa||s!==null&&s.dependencies!==null&&No(s.dependencies)?(typeof k=="function"&&(Ed(n,l,k,o),xe=n.memoizedState),(ve=Fa||dg(n,l,ve,o,he,xe,I)||s!==null&&s.dependencies!==null&&No(s.dependencies))?(fe||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,xe,I),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,xe,I)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||w===s.memoizedProps&&he===s.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&he===s.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=xe),h.props=o,h.state=xe,h.context=I,o=ve):(typeof h.componentDidUpdate!="function"||w===s.memoizedProps&&he===s.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&he===s.memoizedState||(n.flags|=1024),o=!1)}return h=o,$o(s,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,s!==null&&o?(n.child=Lr(n,s.child,null,m),n.child=Lr(n,null,l,m)):Yt(s,n,l,m),n.memoizedState=h.state,s=n.child):s=Sa(s,n,m),s}function Eg(s,n,l,o){return Ll(),n.flags|=256,Yt(s,n,l,o),n.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Md(s){return{baseLanes:s,cachePool:hx()}}function _d(s,n,l){return s=s!==null?s.childLanes&~l:0,n&&(s|=Ls),s}function Tg(s,n,l){var o=n.pendingProps,m=!1,h=(n.flags&128)!==0,w;if((w=h)||(w=s!==null&&s.memoizedState===null?!1:(Ot.current&2)!==0),w&&(m=!0,n.flags&=-129),w=(n.flags&32)!==0,n.flags&=-33,s===null){if(Je){if(m?Za(n):Ga(),Je){var k=vt,I;if(I=k){e:{for(I=k,k=ea;I.nodeType!==8;){if(!k){k=null;break e}if(I=Ys(I.nextSibling),I===null){k=null;break e}}k=I}k!==null?(n.memoizedState={dehydrated:k,treeContext:On!==null?{id:ba,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},I=js(18,null,null,0),I.stateNode=k,I.return=n,n.child=I,ns=n,vt=null,I=!0):I=!1}I||Pn(n)}if(k=n.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return gm(k)?n.lanes=32:n.lanes=536870912,null;wa(n)}return k=o.children,o=o.fallback,m?(Ga(),m=n.mode,k=qo({mode:"hidden",children:k},m),o=zn(o,m,l,null),k.return=n,o.return=n,k.sibling=o,n.child=k,m=n.child,m.memoizedState=Md(l),m.childLanes=_d(s,w,l),n.memoizedState=Rd,o):(Za(n),zd(n,k))}if(I=s.memoizedState,I!==null&&(k=I.dehydrated,k!==null)){if(h)n.flags&256?(Za(n),n.flags&=-257,n=Od(s,n,l)):n.memoizedState!==null?(Ga(),n.child=s.child,n.flags|=128,n=null):(Ga(),m=o.fallback,k=n.mode,o=qo({mode:"visible",children:o.children},k),m=zn(m,k,l,null),m.flags|=2,o.return=n,m.return=n,o.sibling=m,n.child=o,Lr(n,s.child,null,l),o=n.child,o.memoizedState=Md(l),o.childLanes=_d(s,w,l),n.memoizedState=Rd,n=m);else if(Za(n),gm(k)){if(w=k.nextSibling&&k.nextSibling.dataset,w)var fe=w.dgst;w=fe,o=Error(i(419)),o.stack="",o.digest=w,Vl({value:o,source:null,stack:null}),n=Od(s,n,l)}else if(Ut||Pl(s,n,l,!1),w=(l&s.childLanes)!==0,Ut||w){if(w=ot,w!==null&&(o=l&-l,o=(o&42)!==0?1:pu(o),o=(o&(w.suspendedLanes|l))!==0?0:o,o!==0&&o!==I.retryLane))throw I.retryLane=o,Cr(s,o),As(w,s,o),yg;k.data==="$?"||Wd(),n=Od(s,n,l)}else k.data==="$?"?(n.flags|=192,n.child=s.child,n=null):(s=I.treeContext,vt=Ys(k.nextSibling),ns=n,Je=!0,Vn=null,ea=!1,s!==null&&(_s[zs++]=ba,_s[zs++]=ya,_s[zs++]=On,ba=s.id,ya=s.overflow,On=n),n=zd(n,o.children),n.flags|=4096);return n}return m?(Ga(),m=o.fallback,k=n.mode,I=s.child,fe=I.sibling,o=pa(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,fe!==null?m=pa(fe,m):(m=zn(m,k,l,null),m.flags|=2),m.return=n,o.return=n,o.sibling=m,n.child=o,o=m,m=n.child,k=s.child.memoizedState,k===null?k=Md(l):(I=k.cachePool,I!==null?(fe=zt._currentValue,I=I.parent!==fe?{parent:fe,pool:fe}:I):I=hx(),k={baseLanes:k.baseLanes|l,cachePool:I}),m.memoizedState=k,m.childLanes=_d(s,w,l),n.memoizedState=Rd,o):(Za(n),l=s.child,s=l.sibling,l=pa(l,{mode:"visible",children:o.children}),l.return=n,l.sibling=null,s!==null&&(w=n.deletions,w===null?(n.deletions=[s],n.flags|=16):w.push(s)),n.child=l,n.memoizedState=null,l)}function zd(s,n){return n=qo({mode:"visible",children:n},s.mode),n.return=s,s.child=n}function qo(s,n){return s=js(22,s,null,n),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Od(s,n,l){return Lr(n,s.child,null,l),s=zd(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function Dg(s,n,l){s.lanes|=n;var o=s.alternate;o!==null&&(o.lanes|=n),Wu(s.return,n,l)}function Ld(s,n,l,o,m){var h=s.memoizedState;h===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:m}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=l,h.tailMode=m)}function kg(s,n,l){var o=n.pendingProps,m=o.revealOrder,h=o.tail;if(Yt(s,n,o.children,l),o=Ot.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Dg(s,l,n);else if(s.tag===19)Dg(s,l,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o&=1}switch(me(Ot,o),m){case"forwards":for(l=n.child,m=null;l!==null;)s=l.alternate,s!==null&&Po(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=n.child,n.child=null):(m=l.sibling,l.sibling=null),Ld(n,!1,m,l,h);break;case"backwards":for(l=null,m=n.child,n.child=null;m!==null;){if(s=m.alternate,s!==null&&Po(s)===null){n.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}Ld(n,!0,l,null,h);break;case"together":Ld(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Sa(s,n,l){if(s!==null&&(n.dependencies=s.dependencies),Wa|=n.lanes,(l&n.childLanes)===0)if(s!==null){if(Pl(s,n,l,!1),(l&n.childLanes)===0)return null}else return null;if(s!==null&&n.child!==s.child)throw Error(i(153));if(n.child!==null){for(s=n.child,l=pa(s,s.pendingProps),n.child=l,l.return=n;s.sibling!==null;)s=s.sibling,l=l.sibling=pa(s,s.pendingProps),l.return=n;l.sibling=null}return n.child}function Vd(s,n){return(s.lanes&n)!==0?!0:(s=s.dependencies,!!(s!==null&&No(s)))}function Ow(s,n,l){switch(n.tag){case 3:V(n,n.stateNode.containerInfo),qa(n,zt,s.memoizedState.cache),Ll();break;case 27:case 5:E(n);break;case 4:V(n,n.stateNode.containerInfo);break;case 10:qa(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Za(n),n.flags|=128,null):(l&n.child.childLanes)!==0?Tg(s,n,l):(Za(n),s=Sa(s,n,l),s!==null?s.sibling:null);Za(n);break;case 19:var m=(s.flags&128)!==0;if(o=(l&n.childLanes)!==0,o||(Pl(s,n,l,!1),o=(l&n.childLanes)!==0),m){if(o)return kg(s,n,l);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),me(Ot,Ot.current),o)break;return null;case 22:case 23:return n.lanes=0,wg(s,n,l);case 24:qa(n,zt,s.memoizedState.cache)}return Sa(s,n,l)}function Rg(s,n,l){if(s!==null)if(s.memoizedProps!==n.pendingProps)Ut=!0;else{if(!Vd(s,l)&&(n.flags&128)===0)return Ut=!1,Ow(s,n,l);Ut=(s.flags&131072)!==0}else Ut=!1,Je&&(n.flags&1048576)!==0&&ix(n,jo,n.index);switch(n.lanes=0,n.tag){case 16:e:{s=n.pendingProps;var o=n.elementType,m=o._init;if(o=m(o._payload),n.type=o,typeof o=="function")Yu(o)?(s=Fn(o,s),n.tag=1,n=Ag(null,n,o,s,l)):(n.tag=0,n=kd(null,n,o,s,l));else{if(o!=null){if(m=o.$$typeof,m===A){n.tag=11,n=vg(null,n,o,s,l);break e}else if(m===D){n.tag=14,n=jg(null,n,o,s,l);break e}}throw n=ae(o)||o,Error(i(306,n,""))}}return n;case 0:return kd(s,n,n.type,n.pendingProps,l);case 1:return o=n.type,m=Fn(o,n.pendingProps),Ag(s,n,o,m,l);case 3:e:{if(V(n,n.stateNode.containerInfo),s===null)throw Error(i(387));o=n.pendingProps;var h=n.memoizedState;m=h.element,ld(s,n),Hl(n,o,null,l);var w=n.memoizedState;if(o=w.cache,qa(n,zt,o),o!==h.cache&&ed(n,[zt],l,!0),Il(),o=w.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:w.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=Eg(s,n,o,l);break e}else if(o!==m){m=Rs(Error(i(424)),n),Vl(m),n=Eg(s,n,o,l);break e}else{switch(s=n.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(vt=Ys(s.firstChild),ns=n,Je=!0,Vn=null,ea=!0,l=cg(n,null,o,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ll(),o===m){n=Sa(s,n,l);break e}Yt(s,n,o,l)}n=n.child}return n;case 26:return $o(s,n),s===null?(l=Op(n.type,null,n.pendingProps,null))?n.memoizedState=l:Je||(l=n.type,s=n.pendingProps,o=sc(G.current).createElement(l),o[Jt]=n,o[us]=s,Gt(o,l,s),Pt(o),n.stateNode=o):n.memoizedState=Op(n.type,s.memoizedProps,n.pendingProps,s.memoizedState),null;case 27:return E(n),s===null&&Je&&(o=n.stateNode=Mp(n.type,n.pendingProps,G.current),ns=n,ea=!0,m=vt,an(n.type)?(pm=m,vt=Ys(o.firstChild)):vt=m),Yt(s,n,n.pendingProps.children,l),$o(s,n),s===null&&(n.flags|=4194304),n.child;case 5:return s===null&&Je&&((m=o=vt)&&(o=c2(o,n.type,n.pendingProps,ea),o!==null?(n.stateNode=o,ns=n,vt=Ys(o.firstChild),ea=!1,m=!0):m=!1),m||Pn(n)),E(n),m=n.type,h=n.pendingProps,w=s!==null?s.memoizedProps:null,o=h.children,fm(m,h)?o=null:w!==null&&fm(m,w)&&(n.flags|=32),n.memoizedState!==null&&(m=md(s,n,Ew,null,null,l),fi._currentValue=m),$o(s,n),Yt(s,n,o,l),n.child;case 6:return s===null&&Je&&((s=l=vt)&&(l=u2(l,n.pendingProps,ea),l!==null?(n.stateNode=l,ns=n,vt=null,s=!0):s=!1),s||Pn(n)),null;case 13:return Tg(s,n,l);case 4:return V(n,n.stateNode.containerInfo),o=n.pendingProps,s===null?n.child=Lr(n,null,o,l):Yt(s,n,o,l),n.child;case 11:return vg(s,n,n.type,n.pendingProps,l);case 7:return Yt(s,n,n.pendingProps,l),n.child;case 8:return Yt(s,n,n.pendingProps.children,l),n.child;case 12:return Yt(s,n,n.pendingProps.children,l),n.child;case 10:return o=n.pendingProps,qa(n,n.type,o.value),Yt(s,n,o.children,l),n.child;case 9:return m=n.type._context,o=n.pendingProps.children,Bn(n),m=Wt(m),o=o(m),n.flags|=1,Yt(s,n,o,l),n.child;case 14:return jg(s,n,n.type,n.pendingProps,l);case 15:return Ng(s,n,n.type,n.pendingProps,l);case 19:return kg(s,n,l);case 31:return o=n.pendingProps,l=n.mode,o={mode:o.mode,children:o.children},s===null?(l=qo(o,l),l.ref=n.ref,n.child=l,l.return=n,n=l):(l=pa(s.child,o),l.ref=n.ref,n.child=l,l.return=n,n=l),n;case 22:return wg(s,n,l);case 24:return Bn(n),o=Wt(zt),s===null?(m=ad(),m===null&&(m=ot,h=td(),m.pooledCache=h,h.refCount++,h!==null&&(m.pooledCacheLanes|=l),m=h),n.memoizedState={parent:o,cache:m},rd(n),qa(n,zt,m)):((s.lanes&l)!==0&&(ld(s,n),Hl(n,null,null,l),Il()),m=s.memoizedState,h=n.memoizedState,m.parent!==o?(m={parent:o,cache:o},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),qa(n,zt,o)):(o=h.cache,qa(n,zt,o),o!==m.cache&&ed(n,[zt],l,!0))),Yt(s,n,n.pendingProps.children,l),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Ca(s){s.flags|=4}function Mg(s,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Bp(n)){if(n=Os.current,n!==null&&((Xe&4194048)===Xe?ta!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||n!==ta))throw ql=nd,xx;s.flags|=8192}}function Fo(s,n){n!==null&&(s.flags|=4),s.flags&16384&&(n=s.tag!==22?u0():536870912,s.lanes|=n,Br|=n)}function Jl(s,n){if(!Je)switch(s.tailMode){case"hidden":n=s.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:o.sibling=null}}function pt(s){var n=s.alternate!==null&&s.alternate.child===s.child,l=0,o=0;if(n)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=o,s.childLanes=l,n}function Lw(s,n,l){var o=n.pendingProps;switch(Xu(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(n),null;case 1:return pt(n),null;case 3:return l=n.stateNode,o=null,s!==null&&(o=s.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ja(zt),je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ol(n)?Ca(n):s===null||s.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ux())),pt(n),null;case 26:return l=n.memoizedState,s===null?(Ca(n),l!==null?(pt(n),Mg(n,l)):(pt(n),n.flags&=-16777217)):l?l!==s.memoizedState?(Ca(n),pt(n),Mg(n,l)):(pt(n),n.flags&=-16777217):(s.memoizedProps!==o&&Ca(n),pt(n),n.flags&=-16777217),null;case 27:$(n),l=G.current;var m=n.type;if(s!==null&&n.stateNode!=null)s.memoizedProps!==o&&Ca(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return pt(n),null}s=re.current,Ol(n)?ox(n):(s=Mp(m,o,l),n.stateNode=s,Ca(n))}return pt(n),null;case 5:if($(n),l=n.type,s!==null&&n.stateNode!=null)s.memoizedProps!==o&&Ca(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return pt(n),null}if(s=re.current,Ol(n))ox(n);else{switch(m=sc(G.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof o.is=="string"?m.createElement("select",{is:o.is}):m.createElement("select"),o.multiple?s.multiple=!0:o.size&&(s.size=o.size);break;default:s=typeof o.is=="string"?m.createElement(l,{is:o.is}):m.createElement(l)}}s[Jt]=n,s[us]=o;e:for(m=n.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}n.stateNode=s;e:switch(Gt(s,l,o),l){case"button":case"input":case"select":case"textarea":s=!!o.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ca(n)}}return pt(n),n.flags&=-16777217,null;case 6:if(s&&n.stateNode!=null)s.memoizedProps!==o&&Ca(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(s=G.current,Ol(n)){if(s=n.stateNode,l=n.memoizedProps,o=null,m=ns,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}s[Jt]=n,s=!!(s.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||Cp(s.nodeValue,l)),s||Pn(n)}else s=sc(s).createTextNode(o),s[Jt]=n,n.stateNode=s}return pt(n),null;case 13:if(o=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Ol(n),o!==null&&o.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Jt]=n}else Ll(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;pt(n),m=!1}else m=ux(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(wa(n),n):(wa(n),null)}if(wa(n),(n.flags&128)!==0)return n.lanes=l,n;if(l=o!==null,s=s!==null&&s.memoizedState!==null,l){o=n.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool);var h=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==m&&(o.flags|=2048)}return l!==s&&l&&(n.child.flags|=8192),Fo(n,n.updateQueue),pt(n),null;case 4:return je(),s===null&&om(n.stateNode.containerInfo),pt(n),null;case 10:return ja(n.type),pt(n),null;case 19:if(K(Ot),m=n.memoizedState,m===null)return pt(n),null;if(o=(n.flags&128)!==0,h=m.rendering,h===null)if(o)Jl(m,!1);else{if(jt!==0||s!==null&&(s.flags&128)!==0)for(s=n.child;s!==null;){if(h=Po(s),h!==null){for(n.flags|=128,Jl(m,!1),s=h.updateQueue,n.updateQueue=s,Fo(n,s),n.subtreeFlags=0,s=l,l=n.child;l!==null;)lx(l,s),l=l.sibling;return me(Ot,Ot.current&1|2),n.child}s=s.sibling}m.tail!==null&&B()>Yo&&(n.flags|=128,o=!0,Jl(m,!1),n.lanes=4194304)}else{if(!o)if(s=Po(h),s!==null){if(n.flags|=128,o=!0,s=s.updateQueue,n.updateQueue=s,Fo(n,s),Jl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!h.alternate&&!Je)return pt(n),null}else 2*B()-m.renderingStartTime>Yo&&l!==536870912&&(n.flags|=128,o=!0,Jl(m,!1),n.lanes=4194304);m.isBackwards?(h.sibling=n.child,n.child=h):(s=m.last,s!==null?s.sibling=h:n.child=h,m.last=h)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=B(),n.sibling=null,s=Ot.current,me(Ot,o?s&1|2:s&1),n):(pt(n),null);case 22:case 23:return wa(n),ud(),o=n.memoizedState!==null,s!==null?s.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(l&536870912)!==0&&(n.flags&128)===0&&(pt(n),n.subtreeFlags&6&&(n.flags|=8192)):pt(n),l=n.updateQueue,l!==null&&Fo(n,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==l&&(n.flags|=2048),s!==null&&K($n),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ja(zt),pt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function Vw(s,n){switch(Xu(n),n.tag){case 1:return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return ja(zt),je(),s=n.flags,(s&65536)!==0&&(s&128)===0?(n.flags=s&-65537|128,n):null;case 26:case 27:case 5:return $(n),null;case 13:if(wa(n),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(i(340));Ll()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return K(Ot),null;case 4:return je(),null;case 10:return ja(n.type),null;case 22:case 23:return wa(n),ud(),s!==null&&K($n),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 24:return ja(zt),null;case 25:return null;default:return null}}function _g(s,n){switch(Xu(n),n.tag){case 3:ja(zt),je();break;case 26:case 27:case 5:$(n);break;case 4:je();break;case 13:wa(n);break;case 19:K(Ot);break;case 10:ja(n.type);break;case 22:case 23:wa(n),ud(),s!==null&&K($n);break;case 24:ja(zt)}}function Wl(s,n){try{var l=n.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var m=o.next;l=m;do{if((l.tag&s)===s){o=void 0;var h=l.create,w=l.inst;o=h(),w.destroy=o}l=l.next}while(l!==m)}}catch(k){rt(n,n.return,k)}}function Ka(s,n,l){try{var o=n.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var h=m.next;o=h;do{if((o.tag&s)===s){var w=o.inst,k=w.destroy;if(k!==void 0){w.destroy=void 0,m=n;var I=l,fe=k;try{fe()}catch(ve){rt(m,I,ve)}}}o=o.next}while(o!==h)}}catch(ve){rt(n,n.return,ve)}}function zg(s){var n=s.updateQueue;if(n!==null){var l=s.stateNode;try{jx(n,l)}catch(o){rt(s,s.return,o)}}}function Og(s,n,l){l.props=Fn(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(o){rt(s,n,o)}}function ei(s,n){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var o=s.stateNode;break;case 30:o=s.stateNode;break;default:o=s.stateNode}typeof l=="function"?s.refCleanup=l(o):l.current=o}}catch(m){rt(s,n,m)}}function sa(s,n){var l=s.ref,o=s.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(m){rt(s,n,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){rt(s,n,m)}else l.current=null}function Lg(s){var n=s.type,l=s.memoizedProps,o=s.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(m){rt(s,s.return,m)}}function Pd(s,n,l){try{var o=s.stateNode;n2(o,s.type,l,n),o[us]=n}catch(m){rt(s,s.return,m)}}function Vg(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&an(s.type)||s.tag===4}function Ud(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Vg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&an(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bd(s,n,l){var o=s.tag;if(o===5||o===6)s=s.stateNode,n?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,n):(n=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,n.appendChild(s),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=tc));else if(o!==4&&(o===27&&an(s.type)&&(l=s.stateNode,n=null),s=s.child,s!==null))for(Bd(s,n,l),s=s.sibling;s!==null;)Bd(s,n,l),s=s.sibling}function Io(s,n,l){var o=s.tag;if(o===5||o===6)s=s.stateNode,n?l.insertBefore(s,n):l.appendChild(s);else if(o!==4&&(o===27&&an(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Io(s,n,l),s=s.sibling;s!==null;)Io(s,n,l),s=s.sibling}function Pg(s){var n=s.stateNode,l=s.memoizedProps;try{for(var o=s.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);Gt(n,o,l),n[Jt]=s,n[us]=l}catch(h){rt(s,s.return,h)}}var Aa=!1,Ct=!1,$d=!1,Ug=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function Pw(s,n){if(s=s.containerInfo,dm=oc,s=X0(s),Uu(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var m=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var w=0,k=-1,I=-1,fe=0,ve=0,Se=s,he=null;t:for(;;){for(var xe;Se!==l||m!==0&&Se.nodeType!==3||(k=w+m),Se!==h||o!==0&&Se.nodeType!==3||(I=w+o),Se.nodeType===3&&(w+=Se.nodeValue.length),(xe=Se.firstChild)!==null;)he=Se,Se=xe;for(;;){if(Se===s)break t;if(he===l&&++fe===m&&(k=w),he===h&&++ve===o&&(I=w),(xe=Se.nextSibling)!==null)break;Se=he,he=Se.parentNode}Se=xe}l=k===-1||I===-1?null:{start:k,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(mm={focusedElem:s,selectionRange:l},oc=!1,Bt=n;Bt!==null;)if(n=Bt,s=n.child,(n.subtreeFlags&1024)!==0&&s!==null)s.return=n,Bt=s;else for(;Bt!==null;){switch(n=Bt,h=n.alternate,s=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&h!==null){s=void 0,l=n,m=h.memoizedProps,h=h.memoizedState,o=l.stateNode;try{var Ue=Fn(l.type,m,l.elementType===l.type);s=o.getSnapshotBeforeUpdate(Ue,h),o.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){rt(l,l.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=n.stateNode.containerInfo,l=s.nodeType,l===9)xm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":xm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=n.sibling,s!==null){s.return=n.return,Bt=s;break}Bt=n.return}}function Bg(s,n,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:Xa(s,l),o&4&&Wl(5,l);break;case 1:if(Xa(s,l),o&4)if(s=l.stateNode,n===null)try{s.componentDidMount()}catch(w){rt(l,l.return,w)}else{var m=Fn(l.type,n.memoizedProps);n=n.memoizedState;try{s.componentDidUpdate(m,n,s.__reactInternalSnapshotBeforeUpdate)}catch(w){rt(l,l.return,w)}}o&64&&zg(l),o&512&&ei(l,l.return);break;case 3:if(Xa(s,l),o&64&&(s=l.updateQueue,s!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{jx(s,n)}catch(w){rt(l,l.return,w)}}break;case 27:n===null&&o&4&&Pg(l);case 26:case 5:Xa(s,l),n===null&&o&4&&Lg(l),o&512&&ei(l,l.return);break;case 12:Xa(s,l);break;case 13:Xa(s,l),o&4&&Fg(s,l),o&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Zw.bind(null,l),d2(s,l))));break;case 22:if(o=l.memoizedState!==null||Aa,!o){n=n!==null&&n.memoizedState!==null||Ct,m=Aa;var h=Ct;Aa=o,(Ct=n)&&!h?Qa(s,l,(l.subtreeFlags&8772)!==0):Xa(s,l),Aa=m,Ct=h}break;case 30:break;default:Xa(s,l)}}function $g(s){var n=s.alternate;n!==null&&(s.alternate=null,$g(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&vu(n)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,fs=!1;function Ea(s,n,l){for(l=l.child;l!==null;)qg(s,n,l),l=l.sibling}function qg(s,n,l){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Oe,l)}catch{}switch(l.tag){case 26:Ct||sa(l,n),Ea(s,n,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ct||sa(l,n);var o=dt,m=fs;an(l.type)&&(dt=l.stateNode,fs=!1),Ea(s,n,l),ci(l.stateNode),dt=o,fs=m;break;case 5:Ct||sa(l,n);case 6:if(o=dt,m=fs,dt=null,Ea(s,n,l),dt=o,fs=m,dt!==null)if(fs)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(l.stateNode)}catch(h){rt(l,n,h)}else try{dt.removeChild(l.stateNode)}catch(h){rt(l,n,h)}break;case 18:dt!==null&&(fs?(s=dt,kp(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),pi(s)):kp(dt,l.stateNode));break;case 4:o=dt,m=fs,dt=l.stateNode.containerInfo,fs=!0,Ea(s,n,l),dt=o,fs=m;break;case 0:case 11:case 14:case 15:Ct||Ka(2,l,n),Ct||Ka(4,l,n),Ea(s,n,l);break;case 1:Ct||(sa(l,n),o=l.stateNode,typeof o.componentWillUnmount=="function"&&Og(l,n,o)),Ea(s,n,l);break;case 21:Ea(s,n,l);break;case 22:Ct=(o=Ct)||l.memoizedState!==null,Ea(s,n,l),Ct=o;break;default:Ea(s,n,l)}}function Fg(s,n){if(n.memoizedState===null&&(s=n.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{pi(s)}catch(l){rt(n,n.return,l)}}function Uw(s){switch(s.tag){case 13:case 19:var n=s.stateNode;return n===null&&(n=s.stateNode=new Ug),n;case 22:return s=s.stateNode,n=s._retryCache,n===null&&(n=s._retryCache=new Ug),n;default:throw Error(i(435,s.tag))}}function qd(s,n){var l=Uw(s);n.forEach(function(o){var m=Gw.bind(null,s,o);l.has(o)||(l.add(o),o.then(m,m))})}function Ns(s,n){var l=n.deletions;if(l!==null)for(var o=0;o<l.length;o++){var m=l[o],h=s,w=n,k=w;e:for(;k!==null;){switch(k.tag){case 27:if(an(k.type)){dt=k.stateNode,fs=!1;break e}break;case 5:dt=k.stateNode,fs=!1;break e;case 3:case 4:dt=k.stateNode.containerInfo,fs=!0;break e}k=k.return}if(dt===null)throw Error(i(160));qg(h,w,m),dt=null,fs=!1,h=m.alternate,h!==null&&(h.return=null),m.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Ig(n,s),n=n.sibling}var Hs=null;function Ig(s,n){var l=s.alternate,o=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ns(n,s),ws(s),o&4&&(Ka(3,s,s.return),Wl(3,s),Ka(5,s,s.return));break;case 1:Ns(n,s),ws(s),o&512&&(Ct||l===null||sa(l,l.return)),o&64&&Aa&&(s=s.updateQueue,s!==null&&(o=s.callbacks,o!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var m=Hs;if(Ns(n,s),ws(s),o&512&&(Ct||l===null||sa(l,l.return)),o&4){var h=l!==null?l.memoizedState:null;if(o=s.memoizedState,l===null)if(o===null)if(s.stateNode===null){e:{o=s.type,l=s.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":h=m.getElementsByTagName("title")[0],(!h||h[Sl]||h[Jt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=m.createElement(o),m.head.insertBefore(h,m.querySelector("head > title"))),Gt(h,o,l),h[Jt]=s,Pt(h),o=h;break e;case"link":var w=Pp("link","href",m).get(o+(l.href||""));if(w){for(var k=0;k<w.length;k++)if(h=w[k],h.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&h.getAttribute("rel")===(l.rel==null?null:l.rel)&&h.getAttribute("title")===(l.title==null?null:l.title)&&h.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(k,1);break t}}h=m.createElement(o),Gt(h,o,l),m.head.appendChild(h);break;case"meta":if(w=Pp("meta","content",m).get(o+(l.content||""))){for(k=0;k<w.length;k++)if(h=w[k],h.getAttribute("content")===(l.content==null?null:""+l.content)&&h.getAttribute("name")===(l.name==null?null:l.name)&&h.getAttribute("property")===(l.property==null?null:l.property)&&h.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&h.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(k,1);break t}}h=m.createElement(o),Gt(h,o,l),m.head.appendChild(h);break;default:throw Error(i(468,o))}h[Jt]=s,Pt(h),o=h}s.stateNode=o}else Up(m,s.type,s.stateNode);else s.stateNode=Vp(m,o,s.memoizedProps);else h!==o?(h===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):h.count--,o===null?Up(m,s.type,s.stateNode):Vp(m,o,s.memoizedProps)):o===null&&s.stateNode!==null&&Pd(s,s.memoizedProps,l.memoizedProps)}break;case 27:Ns(n,s),ws(s),o&512&&(Ct||l===null||sa(l,l.return)),l!==null&&o&4&&Pd(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Ns(n,s),ws(s),o&512&&(Ct||l===null||sa(l,l.return)),s.flags&32){m=s.stateNode;try{br(m,"")}catch(xe){rt(s,s.return,xe)}}o&4&&s.stateNode!=null&&(m=s.memoizedProps,Pd(s,m,l!==null?l.memoizedProps:m)),o&1024&&($d=!0);break;case 6:if(Ns(n,s),ws(s),o&4){if(s.stateNode===null)throw Error(i(162));o=s.memoizedProps,l=s.stateNode;try{l.nodeValue=o}catch(xe){rt(s,s.return,xe)}}break;case 3:if(rc=null,m=Hs,Hs=ac(n.containerInfo),Ns(n,s),Hs=m,ws(s),o&4&&l!==null&&l.memoizedState.isDehydrated)try{pi(n.containerInfo)}catch(xe){rt(s,s.return,xe)}$d&&($d=!1,Hg(s));break;case 4:o=Hs,Hs=ac(s.stateNode.containerInfo),Ns(n,s),ws(s),Hs=o;break;case 12:Ns(n,s),ws(s);break;case 13:Ns(n,s),ws(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gd=B()),o&4&&(o=s.updateQueue,o!==null&&(s.updateQueue=null,qd(s,o)));break;case 22:m=s.memoizedState!==null;var I=l!==null&&l.memoizedState!==null,fe=Aa,ve=Ct;if(Aa=fe||m,Ct=ve||I,Ns(n,s),Ct=ve,Aa=fe,ws(s),o&8192)e:for(n=s.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(l===null||I||Aa||Ct||In(s)),l=null,n=s;;){if(n.tag===5||n.tag===26){if(l===null){I=l=n;try{if(h=I.stateNode,m)w=h.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{k=I.stateNode;var Se=I.memoizedProps.style,he=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;k.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(xe){rt(I,I.return,xe)}}}else if(n.tag===6){if(l===null){I=n;try{I.stateNode.nodeValue=m?"":I.memoizedProps}catch(xe){rt(I,I.return,xe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===s)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;l===n&&(l=null),n=n.return}l===n&&(l=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=s.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,qd(s,l))));break;case 19:Ns(n,s),ws(s),o&4&&(o=s.updateQueue,o!==null&&(s.updateQueue=null,qd(s,o)));break;case 30:break;case 21:break;default:Ns(n,s),ws(s)}}function ws(s){var n=s.flags;if(n&2){try{for(var l,o=s.return;o!==null;){if(Vg(o)){l=o;break}o=o.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,h=Ud(s);Io(s,h,m);break;case 5:var w=l.stateNode;l.flags&32&&(br(w,""),l.flags&=-33);var k=Ud(s);Io(s,k,w);break;case 3:case 4:var I=l.stateNode.containerInfo,fe=Ud(s);Bd(s,fe,I);break;default:throw Error(i(161))}}catch(ve){rt(s,s.return,ve)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function Hg(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var n=s;Hg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),s=s.sibling}}function Xa(s,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Bg(s,n.alternate,n),n=n.sibling}function In(s){for(s=s.child;s!==null;){var n=s;switch(n.tag){case 0:case 11:case 14:case 15:Ka(4,n,n.return),In(n);break;case 1:sa(n,n.return);var l=n.stateNode;typeof l.componentWillUnmount=="function"&&Og(n,n.return,l),In(n);break;case 27:ci(n.stateNode);case 26:case 5:sa(n,n.return),In(n);break;case 22:n.memoizedState===null&&In(n);break;case 30:In(n);break;default:In(n)}s=s.sibling}}function Qa(s,n,l){for(l=l&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,m=s,h=n,w=h.flags;switch(h.tag){case 0:case 11:case 15:Qa(m,h,l),Wl(4,h);break;case 1:if(Qa(m,h,l),o=h,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(fe){rt(o,o.return,fe)}if(o=h,m=o.updateQueue,m!==null){var k=o.stateNode;try{var I=m.shared.hiddenCallbacks;if(I!==null)for(m.shared.hiddenCallbacks=null,m=0;m<I.length;m++)vx(I[m],k)}catch(fe){rt(o,o.return,fe)}}l&&w&64&&zg(h),ei(h,h.return);break;case 27:Pg(h);case 26:case 5:Qa(m,h,l),l&&o===null&&w&4&&Lg(h),ei(h,h.return);break;case 12:Qa(m,h,l);break;case 13:Qa(m,h,l),l&&w&4&&Fg(m,h);break;case 22:h.memoizedState===null&&Qa(m,h,l),ei(h,h.return);break;case 30:break;default:Qa(m,h,l)}n=n.sibling}}function Fd(s,n){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Ul(l))}function Id(s,n){s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Ul(s))}function aa(s,n,l,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yg(s,n,l,o),n=n.sibling}function Yg(s,n,l,o){var m=n.flags;switch(n.tag){case 0:case 11:case 15:aa(s,n,l,o),m&2048&&Wl(9,n);break;case 1:aa(s,n,l,o);break;case 3:aa(s,n,l,o),m&2048&&(s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Ul(s)));break;case 12:if(m&2048){aa(s,n,l,o),s=n.stateNode;try{var h=n.memoizedProps,w=h.id,k=h.onPostCommit;typeof k=="function"&&k(w,n.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(I){rt(n,n.return,I)}}else aa(s,n,l,o);break;case 13:aa(s,n,l,o);break;case 23:break;case 22:h=n.stateNode,w=n.alternate,n.memoizedState!==null?h._visibility&2?aa(s,n,l,o):ti(s,n):h._visibility&2?aa(s,n,l,o):(h._visibility|=2,Vr(s,n,l,o,(n.subtreeFlags&10256)!==0)),m&2048&&Fd(w,n);break;case 24:aa(s,n,l,o),m&2048&&Id(n.alternate,n);break;default:aa(s,n,l,o)}}function Vr(s,n,l,o,m){for(m=m&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var h=s,w=n,k=l,I=o,fe=w.flags;switch(w.tag){case 0:case 11:case 15:Vr(h,w,k,I,m),Wl(8,w);break;case 23:break;case 22:var ve=w.stateNode;w.memoizedState!==null?ve._visibility&2?Vr(h,w,k,I,m):ti(h,w):(ve._visibility|=2,Vr(h,w,k,I,m)),m&&fe&2048&&Fd(w.alternate,w);break;case 24:Vr(h,w,k,I,m),m&&fe&2048&&Id(w.alternate,w);break;default:Vr(h,w,k,I,m)}n=n.sibling}}function ti(s,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var l=s,o=n,m=o.flags;switch(o.tag){case 22:ti(l,o),m&2048&&Fd(o.alternate,o);break;case 24:ti(l,o),m&2048&&Id(o.alternate,o);break;default:ti(l,o)}n=n.sibling}}var si=8192;function Pr(s){if(s.subtreeFlags&si)for(s=s.child;s!==null;)Zg(s),s=s.sibling}function Zg(s){switch(s.tag){case 26:Pr(s),s.flags&si&&s.memoizedState!==null&&S2(Hs,s.memoizedState,s.memoizedProps);break;case 5:Pr(s);break;case 3:case 4:var n=Hs;Hs=ac(s.stateNode.containerInfo),Pr(s),Hs=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=si,si=16777216,Pr(s),si=n):Pr(s));break;default:Pr(s)}}function Gg(s){var n=s.alternate;if(n!==null&&(s=n.child,s!==null)){n.child=null;do n=s.sibling,s.sibling=null,s=n;while(s!==null)}}function ai(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var o=n[l];Bt=o,Xg(o,s)}Gg(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Kg(s),s=s.sibling}function Kg(s){switch(s.tag){case 0:case 11:case 15:ai(s),s.flags&2048&&Ka(9,s,s.return);break;case 3:ai(s);break;case 12:ai(s);break;case 22:var n=s.stateNode;s.memoizedState!==null&&n._visibility&2&&(s.return===null||s.return.tag!==13)?(n._visibility&=-3,Ho(s)):ai(s);break;default:ai(s)}}function Ho(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var o=n[l];Bt=o,Xg(o,s)}Gg(s)}for(s=s.child;s!==null;){switch(n=s,n.tag){case 0:case 11:case 15:Ka(8,n,n.return),Ho(n);break;case 22:l=n.stateNode,l._visibility&2&&(l._visibility&=-3,Ho(n));break;default:Ho(n)}s=s.sibling}}function Xg(s,n){for(;Bt!==null;){var l=Bt;switch(l.tag){case 0:case 11:case 15:Ka(8,l,n);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ul(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,Bt=o;else e:for(l=s;Bt!==null;){o=Bt;var m=o.sibling,h=o.return;if($g(o),o===l){Bt=null;break e}if(m!==null){m.return=h,Bt=m;break e}Bt=h}}}var Bw={getCacheForType:function(s){var n=Wt(zt),l=n.data.get(s);return l===void 0&&(l=s(),n.data.set(s,l)),l}},$w=typeof WeakMap=="function"?WeakMap:Map,et=0,ot=null,Ze=null,Xe=0,tt=0,Ss=null,Ja=!1,Ur=!1,Hd=!1,Ta=0,jt=0,Wa=0,Hn=0,Yd=0,Ls=0,Br=0,ni=null,hs=null,Zd=!1,Gd=0,Yo=1/0,Zo=null,en=null,Zt=0,tn=null,$r=null,qr=0,Kd=0,Xd=null,Qg=null,ri=0,Qd=null;function Cs(){if((et&2)!==0&&Xe!==0)return Xe&-Xe;if(F.T!==null){var s=Dr;return s!==0?s:nm()}return f0()}function Jg(){Ls===0&&(Ls=(Xe&536870912)===0||Je?c0():536870912);var s=Os.current;return s!==null&&(s.flags|=32),Ls}function As(s,n,l){(s===ot&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(Fr(s,0),sn(s,Xe,Ls,!1)),wl(s,l),((et&2)===0||s!==ot)&&(s===ot&&((et&2)===0&&(Hn|=l),jt===4&&sn(s,Xe,Ls,!1)),na(s))}function Wg(s,n,l){if((et&6)!==0)throw Error(i(327));var o=!l&&(n&124)===0&&(n&s.expiredLanes)===0||Dn(s,n),m=o?Iw(s,n):em(s,n,!0),h=o;do{if(m===0){Ur&&!o&&sn(s,n,0,!1);break}else{if(l=s.current.alternate,h&&!qw(l)){m=em(s,n,!1),h=!1;continue}if(m===2){if(h=n,s.errorRecoveryDisabledLanes&h)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){n=w;e:{var k=s;m=ni;var I=k.current.memoizedState.isDehydrated;if(I&&(Fr(k,w).flags|=256),w=em(k,w,!1),w!==2){if(Hd&&!I){k.errorRecoveryDisabledLanes|=h,Hn|=h,m=4;break e}h=hs,hs=m,h!==null&&(hs===null?hs=h:hs.push.apply(hs,h))}m=w}if(h=!1,m!==2)continue}}if(m===1){Fr(s,0),sn(s,n,0,!0);break}e:{switch(o=s,h=m,h){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:sn(o,n,Ls,!Ja);break e;case 2:hs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(m=Gd+300-B(),10<m)){if(sn(o,n,Ls,!Ja),Tn(o,0,!0)!==0)break e;o.timeoutHandle=Tp(ep.bind(null,o,l,hs,Zo,Zd,n,Ls,Hn,Br,Ja,h,2,-0,0),m);break e}ep(o,l,hs,Zo,Zd,n,Ls,Hn,Br,Ja,h,0,-0,0)}}break}while(!0);na(s)}function ep(s,n,l,o,m,h,w,k,I,fe,ve,Se,he,xe){if(s.timeoutHandle=-1,Se=n.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(mi={stylesheets:null,count:0,unsuspend:w2},Zg(n),Se=C2(),Se!==null)){s.cancelPendingCommit=Se(ip.bind(null,s,n,h,l,o,m,w,k,I,ve,1,he,xe)),sn(s,h,w,!fe);return}ip(s,n,h,l,o,m,w,k,I)}function qw(s){for(var n=s;;){var l=n.tag;if((l===0||l===11||l===15)&&n.flags&16384&&(l=n.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var m=l[o],h=m.getSnapshot;m=m.value;try{if(!vs(h(),m))return!1}catch{return!1}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function sn(s,n,l,o){n&=~Yd,n&=~Hn,s.suspendedLanes|=n,s.pingedLanes&=~n,o&&(s.warmLanes|=n),o=s.expirationTimes;for(var m=n;0<m;){var h=31-it(m),w=1<<h;o[h]=-1,m&=~w}l!==0&&d0(s,l,n)}function Go(){return(et&6)===0?(li(0),!1):!0}function Jd(){if(Ze!==null){if(tt===0)var s=Ze.return;else s=Ze,va=Un=null,xd(s),Or=null,Xl=0,s=Ze;for(;s!==null;)_g(s.alternate,s),s=s.return;Ze=null}}function Fr(s,n){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,l2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Jd(),ot=s,Ze=l=pa(s.current,null),Xe=n,tt=0,Ss=null,Ja=!1,Ur=Dn(s,n),Hd=!1,Br=Ls=Yd=Hn=Wa=jt=0,hs=ni=null,Zd=!1,(n&8)!==0&&(n|=n&32);var o=s.entangledLanes;if(o!==0)for(s=s.entanglements,o&=n;0<o;){var m=31-it(o),h=1<<m;n|=s[m],o&=~h}return Ta=n,go(),l}function tp(s,n){Ie=null,F.H=Oo,n===$l||n===Co?(n=bx(),tt=3):n===xx?(n=bx(),tt=4):tt=n===yg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ss=n,Ze===null&&(jt=1,Bo(s,Rs(n,s.current)))}function sp(){var s=F.H;return F.H=Oo,s===null?Oo:s}function ap(){var s=F.A;return F.A=Bw,s}function Wd(){jt=4,Ja||(Xe&4194048)!==Xe&&Os.current!==null||(Ur=!0),(Wa&134217727)===0&&(Hn&134217727)===0||ot===null||sn(ot,Xe,Ls,!1)}function em(s,n,l){var o=et;et|=2;var m=sp(),h=ap();(ot!==s||Xe!==n)&&(Zo=null,Fr(s,n)),n=!1;var w=jt;e:do try{if(tt!==0&&Ze!==null){var k=Ze,I=Ss;switch(tt){case 8:Jd(),w=6;break e;case 3:case 2:case 9:case 6:Os.current===null&&(n=!0);var fe=tt;if(tt=0,Ss=null,Ir(s,k,I,fe),l&&Ur){w=0;break e}break;default:fe=tt,tt=0,Ss=null,Ir(s,k,I,fe)}}Fw(),w=jt;break}catch(ve){tp(s,ve)}while(!0);return n&&s.shellSuspendCounter++,va=Un=null,et=o,F.H=m,F.A=h,Ze===null&&(ot=null,Xe=0,go()),w}function Fw(){for(;Ze!==null;)np(Ze)}function Iw(s,n){var l=et;et|=2;var o=sp(),m=ap();ot!==s||Xe!==n?(Zo=null,Yo=B()+500,Fr(s,n)):Ur=Dn(s,n);e:do try{if(tt!==0&&Ze!==null){n=Ze;var h=Ss;t:switch(tt){case 1:tt=0,Ss=null,Ir(s,n,h,1);break;case 2:case 9:if(gx(h)){tt=0,Ss=null,rp(n);break}n=function(){tt!==2&&tt!==9||ot!==s||(tt=7),na(s)},h.then(n,n);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:gx(h)?(tt=0,Ss=null,rp(n)):(tt=0,Ss=null,Ir(s,n,h,7));break;case 5:var w=null;switch(Ze.tag){case 26:w=Ze.memoizedState;case 5:case 27:var k=Ze;if(!w||Bp(w)){tt=0,Ss=null;var I=k.sibling;if(I!==null)Ze=I;else{var fe=k.return;fe!==null?(Ze=fe,Ko(fe)):Ze=null}break t}}tt=0,Ss=null,Ir(s,n,h,5);break;case 6:tt=0,Ss=null,Ir(s,n,h,6);break;case 8:Jd(),jt=6;break e;default:throw Error(i(462))}}Hw();break}catch(ve){tp(s,ve)}while(!0);return va=Un=null,F.H=o,F.A=m,et=l,Ze!==null?0:(ot=null,Xe=0,go(),jt)}function Hw(){for(;Ze!==null&&!Z();)np(Ze)}function np(s){var n=Rg(s.alternate,s,Ta);s.memoizedProps=s.pendingProps,n===null?Ko(s):Ze=n}function rp(s){var n=s,l=n.alternate;switch(n.tag){case 15:case 0:n=Cg(l,n,n.pendingProps,n.type,void 0,Xe);break;case 11:n=Cg(l,n,n.pendingProps,n.type.render,n.ref,Xe);break;case 5:xd(n);default:_g(l,n),n=Ze=lx(n,Ta),n=Rg(l,n,Ta)}s.memoizedProps=s.pendingProps,n===null?Ko(s):Ze=n}function Ir(s,n,l,o){va=Un=null,xd(n),Or=null,Xl=0;var m=n.return;try{if(zw(s,m,n,l,Xe)){jt=1,Bo(s,Rs(l,s.current)),Ze=null;return}}catch(h){if(m!==null)throw Ze=m,h;jt=1,Bo(s,Rs(l,s.current)),Ze=null;return}n.flags&32768?(Je||o===1?s=!0:Ur||(Xe&536870912)!==0?s=!1:(Ja=s=!0,(o===2||o===9||o===3||o===6)&&(o=Os.current,o!==null&&o.tag===13&&(o.flags|=16384))),lp(n,s)):Ko(n)}function Ko(s){var n=s;do{if((n.flags&32768)!==0){lp(n,Ja);return}s=n.return;var l=Lw(n.alternate,n,Ta);if(l!==null){Ze=l;return}if(n=n.sibling,n!==null){Ze=n;return}Ze=n=s}while(n!==null);jt===0&&(jt=5)}function lp(s,n){do{var l=Vw(s.alternate,s);if(l!==null){l.flags&=32767,Ze=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!n&&(s=s.sibling,s!==null)){Ze=s;return}Ze=s=l}while(s!==null);jt=6,Ze=null}function ip(s,n,l,o,m,h,w,k,I){s.cancelPendingCommit=null;do Xo();while(Zt!==0);if((et&6)!==0)throw Error(i(327));if(n!==null){if(n===s.current)throw Error(i(177));if(h=n.lanes|n.childLanes,h|=Iu,w1(s,l,h,w,k,I),s===ot&&(Ze=ot=null,Xe=0),$r=n,tn=s,qr=l,Kd=h,Xd=m,Qg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Kw(le,function(){return mp(),null})):(s.callbackNode=null,s.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,m=ce.p,ce.p=2,w=et,et|=4;try{Pw(s,n,l)}finally{et=w,ce.p=m,F.T=o}}Zt=1,op(),cp(),up()}}function op(){if(Zt===1){Zt=0;var s=tn,n=$r,l=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var o=ce.p;ce.p=2;var m=et;et|=4;try{Ig(n,s);var h=mm,w=X0(s.containerInfo),k=h.focusedElem,I=h.selectionRange;if(w!==k&&k&&k.ownerDocument&&K0(k.ownerDocument.documentElement,k)){if(I!==null&&Uu(k)){var fe=I.start,ve=I.end;if(ve===void 0&&(ve=fe),"selectionStart"in k)k.selectionStart=fe,k.selectionEnd=Math.min(ve,k.value.length);else{var Se=k.ownerDocument||document,he=Se&&Se.defaultView||window;if(he.getSelection){var xe=he.getSelection(),Ue=k.textContent.length,Ve=Math.min(I.start,Ue),nt=I.end===void 0?Ve:Math.min(I.end,Ue);!xe.extend&&Ve>nt&&(w=nt,nt=Ve,Ve=w);var oe=G0(k,Ve),ee=G0(k,nt);if(oe&&ee&&(xe.rangeCount!==1||xe.anchorNode!==oe.node||xe.anchorOffset!==oe.offset||xe.focusNode!==ee.node||xe.focusOffset!==ee.offset)){var de=Se.createRange();de.setStart(oe.node,oe.offset),xe.removeAllRanges(),Ve>nt?(xe.addRange(de),xe.extend(ee.node,ee.offset)):(de.setEnd(ee.node,ee.offset),xe.addRange(de))}}}}for(Se=[],xe=k;xe=xe.parentNode;)xe.nodeType===1&&Se.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Se.length;k++){var we=Se[k];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}oc=!!dm,mm=dm=null}finally{et=m,ce.p=o,F.T=l}}s.current=n,Zt=2}}function cp(){if(Zt===2){Zt=0;var s=tn,n=$r,l=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var o=ce.p;ce.p=2;var m=et;et|=4;try{Bg(s,n.alternate,n)}finally{et=m,ce.p=o,F.T=l}}Zt=3}}function up(){if(Zt===4||Zt===3){Zt=0,H();var s=tn,n=$r,l=qr,o=Qg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Zt=5:(Zt=0,$r=tn=null,dp(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(en=null),bu(l),n=n.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Oe,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=F.T,m=ce.p,ce.p=2,F.T=null;try{for(var h=s.onRecoverableError,w=0;w<o.length;w++){var k=o[w];h(k.value,{componentStack:k.stack})}}finally{F.T=n,ce.p=m}}(qr&3)!==0&&Xo(),na(s),m=s.pendingLanes,(l&4194090)!==0&&(m&42)!==0?s===Qd?ri++:(ri=0,Qd=s):ri=0,li(0)}}function dp(s,n){(s.pooledCacheLanes&=n)===0&&(n=s.pooledCache,n!=null&&(s.pooledCache=null,Ul(n)))}function Xo(s){return op(),cp(),up(),mp()}function mp(){if(Zt!==5)return!1;var s=tn,n=Kd;Kd=0;var l=bu(qr),o=F.T,m=ce.p;try{ce.p=32>l?32:l,F.T=null,l=Xd,Xd=null;var h=tn,w=qr;if(Zt=0,$r=tn=null,qr=0,(et&6)!==0)throw Error(i(331));var k=et;if(et|=4,Kg(h.current),Yg(h,h.current,w,l),et=k,li(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Oe,h)}catch{}return!0}finally{ce.p=m,F.T=o,dp(s,n)}}function fp(s,n,l){n=Rs(l,n),n=Dd(s.stateNode,n,2),s=Ha(s,n,2),s!==null&&(wl(s,2),na(s))}function rt(s,n,l){if(s.tag===3)fp(s,s,l);else for(;n!==null;){if(n.tag===3){fp(n,s,l);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(en===null||!en.has(o))){s=Rs(l,s),l=pg(2),o=Ha(n,l,2),o!==null&&(bg(l,o,n,s),wl(o,2),na(o));break}}n=n.return}}function tm(s,n,l){var o=s.pingCache;if(o===null){o=s.pingCache=new $w;var m=new Set;o.set(n,m)}else m=o.get(n),m===void 0&&(m=new Set,o.set(n,m));m.has(l)||(Hd=!0,m.add(l),s=Yw.bind(null,s,n,l),n.then(s,s))}function Yw(s,n,l){var o=s.pingCache;o!==null&&o.delete(n),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(Xe&l)===l&&(jt===4||jt===3&&(Xe&62914560)===Xe&&300>B()-Gd?(et&2)===0&&Fr(s,0):Yd|=l,Br===Xe&&(Br=0)),na(s)}function hp(s,n){n===0&&(n=u0()),s=Cr(s,n),s!==null&&(wl(s,n),na(s))}function Zw(s){var n=s.memoizedState,l=0;n!==null&&(l=n.retryLane),hp(s,l)}function Gw(s,n){var l=0;switch(s.tag){case 13:var o=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:o=s.stateNode;break;case 22:o=s.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),hp(s,l)}function Kw(s,n){return Y(s,n)}var Qo=null,Hr=null,sm=!1,Jo=!1,am=!1,Yn=0;function na(s){s!==Hr&&s.next===null&&(Hr===null?Qo=Hr=s:Hr=Hr.next=s),Jo=!0,sm||(sm=!0,Qw())}function li(s,n){if(!am&&Jo){am=!0;do for(var l=!1,o=Qo;o!==null;){if(s!==0){var m=o.pendingLanes;if(m===0)var h=0;else{var w=o.suspendedLanes,k=o.pingedLanes;h=(1<<31-it(42|s)+1)-1,h&=m&~(w&~k),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(l=!0,bp(o,h))}else h=Xe,h=Tn(o,o===ot?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Dn(o,h)||(l=!0,bp(o,h));o=o.next}while(l);am=!1}}function Xw(){xp()}function xp(){Jo=sm=!1;var s=0;Yn!==0&&(r2()&&(s=Yn),Yn=0);for(var n=B(),l=null,o=Qo;o!==null;){var m=o.next,h=gp(o,n);h===0?(o.next=null,l===null?Qo=m:l.next=m,m===null&&(Hr=l)):(l=o,(s!==0||(h&3)!==0)&&(Jo=!0)),o=m}li(s)}function gp(s,n){for(var l=s.suspendedLanes,o=s.pingedLanes,m=s.expirationTimes,h=s.pendingLanes&-62914561;0<h;){var w=31-it(h),k=1<<w,I=m[w];I===-1?((k&l)===0||(k&o)!==0)&&(m[w]=ao(k,n)):I<=n&&(s.expiredLanes|=k),h&=~k}if(n=ot,l=Xe,l=Tn(s,s===n?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),o=s.callbackNode,l===0||s===n&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return o!==null&&o!==null&&ye(o),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Dn(s,l)){if(n=l&-l,n===s.callbackPriority)return n;switch(o!==null&&ye(o),bu(l)){case 2:case 8:l=q;break;case 32:l=le;break;case 268435456:l=Te;break;default:l=le}return o=pp.bind(null,s),l=Y(l,o),s.callbackPriority=n,s.callbackNode=l,n}return o!==null&&o!==null&&ye(o),s.callbackPriority=2,s.callbackNode=null,2}function pp(s,n){if(Zt!==0&&Zt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Xo()&&s.callbackNode!==l)return null;var o=Xe;return o=Tn(s,s===ot?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),o===0?null:(Wg(s,o,n),gp(s,B()),s.callbackNode!=null&&s.callbackNode===l?pp.bind(null,s):null)}function bp(s,n){if(Xo())return null;Wg(s,n,!0)}function Qw(){i2(function(){(et&6)!==0?Y(ke,Xw):xp()})}function nm(){return Yn===0&&(Yn=c0()),Yn}function yp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:oo(""+s)}function vp(s,n){var l=n.ownerDocument.createElement("input");return l.name=n.name,l.value=n.value,s.id&&l.setAttribute("form",s.id),n.parentNode.insertBefore(l,n),s=new FormData(s),l.parentNode.removeChild(l),s}function Jw(s,n,l,o,m){if(n==="submit"&&l&&l.stateNode===m){var h=yp((m[us]||null).action),w=o.submitter;w&&(n=(n=w[us]||null)?yp(n.formAction):w.getAttribute("formAction"),n!==null&&(h=n,w=null));var k=new fo("action","action",null,o,m);s.push({event:k,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Yn!==0){var I=w?vp(m,w):new FormData(m);Sd(l,{pending:!0,data:I,method:m.method,action:h},null,I)}}else typeof h=="function"&&(k.preventDefault(),I=w?vp(m,w):new FormData(m),Sd(l,{pending:!0,data:I,method:m.method,action:h},h,I))},currentTarget:m}]})}}for(var rm=0;rm<Fu.length;rm++){var lm=Fu[rm],Ww=lm.toLowerCase(),e2=lm[0].toUpperCase()+lm.slice(1);Is(Ww,"on"+e2)}Is(W0,"onAnimationEnd"),Is(ex,"onAnimationIteration"),Is(tx,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(pw,"onTransitionRun"),Is(bw,"onTransitionStart"),Is(yw,"onTransitionCancel"),Is(sx,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ii));function jp(s,n){n=(n&4)!==0;for(var l=0;l<s.length;l++){var o=s[l],m=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var w=o.length-1;0<=w;w--){var k=o[w],I=k.instance,fe=k.currentTarget;if(k=k.listener,I!==h&&m.isPropagationStopped())break e;h=k,m.currentTarget=fe;try{h(m)}catch(ve){Uo(ve)}m.currentTarget=null,h=I}else for(w=0;w<o.length;w++){if(k=o[w],I=k.instance,fe=k.currentTarget,k=k.listener,I!==h&&m.isPropagationStopped())break e;h=k,m.currentTarget=fe;try{h(m)}catch(ve){Uo(ve)}m.currentTarget=null,h=I}}}}function Ge(s,n){var l=n[yu];l===void 0&&(l=n[yu]=new Set);var o=s+"__bubble";l.has(o)||(Np(n,s,2,!1),l.add(o))}function im(s,n,l){var o=0;n&&(o|=4),Np(l,s,o,n)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function om(s){if(!s[Wo]){s[Wo]=!0,x0.forEach(function(l){l!=="selectionchange"&&(t2.has(l)||im(l,!1,s),im(l,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[Wo]||(n[Wo]=!0,im("selectionchange",!1,n))}}function Np(s,n,l,o){switch(Yp(n)){case 2:var m=T2;break;case 8:m=D2;break;default:m=Nm}l=m.bind(null,n,l,s),m=void 0,!ku||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),o?m!==void 0?s.addEventListener(n,l,{capture:!0,passive:m}):s.addEventListener(n,l,!0):m!==void 0?s.addEventListener(n,l,{passive:m}):s.addEventListener(n,l,!1)}function cm(s,n,l,o,m){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var k=o.stateNode.containerInfo;if(k===m)break;if(w===4)for(w=o.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;k!==null;){if(w=mr(k),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){o=h=w;continue e}k=k.parentNode}}o=o.return}D0(function(){var fe=h,ve=Tu(l),Se=[];e:{var he=ax.get(s);if(he!==void 0){var xe=fo,Ue=s;switch(s){case"keypress":if(uo(l)===0)break e;case"keydown":case"keyup":xe=K1;break;case"focusin":Ue="focus",xe=zu;break;case"focusout":Ue="blur",xe=zu;break;case"beforeblur":case"afterblur":xe=zu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=M0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=V1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=J1;break;case W0:case ex:case tx:xe=B1;break;case sx:xe=ew;break;case"scroll":case"scrollend":xe=O1;break;case"wheel":xe=sw;break;case"copy":case"cut":case"paste":xe=q1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=z0;break;case"toggle":case"beforetoggle":xe=nw}var Ve=(n&4)!==0,nt=!Ve&&(s==="scroll"||s==="scrollend"),oe=Ve?he!==null?he+"Capture":null:he;Ve=[];for(var ee=fe,de;ee!==null;){var we=ee;if(de=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||de===null||oe===null||(we=Al(ee,oe),we!=null&&Ve.push(oi(ee,we,de))),nt)break;ee=ee.return}0<Ve.length&&(he=new xe(he,Ue,null,l,ve),Se.push({event:he,listeners:Ve}))}}if((n&7)===0){e:{if(he=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",he&&l!==Eu&&(Ue=l.relatedTarget||l.fromElement)&&(mr(Ue)||Ue[dr]))break e;if((xe||he)&&(he=ve.window===ve?ve:(he=ve.ownerDocument)?he.defaultView||he.parentWindow:window,xe?(Ue=l.relatedTarget||l.toElement,xe=fe,Ue=Ue?mr(Ue):null,Ue!==null&&(nt=u(Ue),Ve=Ue.tag,Ue!==nt||Ve!==5&&Ve!==27&&Ve!==6)&&(Ue=null)):(xe=null,Ue=fe),xe!==Ue)){if(Ve=M0,we="onMouseLeave",oe="onMouseEnter",ee="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=z0,we="onPointerLeave",oe="onPointerEnter",ee="pointer"),nt=xe==null?he:Cl(xe),de=Ue==null?he:Cl(Ue),he=new Ve(we,ee+"leave",xe,l,ve),he.target=nt,he.relatedTarget=de,we=null,mr(ve)===fe&&(Ve=new Ve(oe,ee+"enter",Ue,l,ve),Ve.target=de,Ve.relatedTarget=nt,we=Ve),nt=we,xe&&Ue)t:{for(Ve=xe,oe=Ue,ee=0,de=Ve;de;de=Yr(de))ee++;for(de=0,we=oe;we;we=Yr(we))de++;for(;0<ee-de;)Ve=Yr(Ve),ee--;for(;0<de-ee;)oe=Yr(oe),de--;for(;ee--;){if(Ve===oe||oe!==null&&Ve===oe.alternate)break t;Ve=Yr(Ve),oe=Yr(oe)}Ve=null}else Ve=null;xe!==null&&wp(Se,he,xe,Ve,!1),Ue!==null&&nt!==null&&wp(Se,nt,Ue,Ve,!0)}}e:{if(he=fe?Cl(fe):window,xe=he.nodeName&&he.nodeName.toLowerCase(),xe==="select"||xe==="input"&&he.type==="file")var Me=q0;else if(B0(he))if(F0)Me=hw;else{Me=mw;var Ye=dw}else xe=he.nodeName,!xe||xe.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?fe&&Au(fe.elementType)&&(Me=q0):Me=fw;if(Me&&(Me=Me(s,fe))){$0(Se,Me,l,ve);break e}Ye&&Ye(s,he,fe),s==="focusout"&&fe&&he.type==="number"&&fe.memoizedProps.value!=null&&Cu(he,"number",he.value)}switch(Ye=fe?Cl(fe):window,s){case"focusin":(B0(Ye)||Ye.contentEditable==="true")&&(Nr=Ye,Bu=fe,zl=null);break;case"focusout":zl=Bu=Nr=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,Q0(Se,l,ve);break;case"selectionchange":if(gw)break;case"keydown":case"keyup":Q0(Se,l,ve)}var Le;if(Lu)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else jr?P0(s,l)&&(Pe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(O0&&l.locale!=="ko"&&(jr||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&jr&&(Le=k0()):($a=ve,Ru="value"in $a?$a.value:$a.textContent,jr=!0)),Ye=ec(fe,Pe),0<Ye.length&&(Pe=new _0(Pe,s,null,l,ve),Se.push({event:Pe,listeners:Ye}),Le?Pe.data=Le:(Le=U0(l),Le!==null&&(Pe.data=Le)))),(Le=lw?iw(s,l):ow(s,l))&&(Pe=ec(fe,"onBeforeInput"),0<Pe.length&&(Ye=new _0("onBeforeInput","beforeinput",null,l,ve),Se.push({event:Ye,listeners:Pe}),Ye.data=Le)),Jw(Se,s,fe,l,ve)}jp(Se,n)})}function oi(s,n,l){return{instance:s,listener:n,currentTarget:l}}function ec(s,n){for(var l=n+"Capture",o=[];s!==null;){var m=s,h=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||h===null||(m=Al(s,l),m!=null&&o.unshift(oi(s,m,h)),m=Al(s,n),m!=null&&o.push(oi(s,m,h))),s.tag===3)return o;s=s.return}return[]}function Yr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function wp(s,n,l,o,m){for(var h=n._reactName,w=[];l!==null&&l!==o;){var k=l,I=k.alternate,fe=k.stateNode;if(k=k.tag,I!==null&&I===o)break;k!==5&&k!==26&&k!==27||fe===null||(I=fe,m?(fe=Al(l,h),fe!=null&&w.unshift(oi(l,fe,I))):m||(fe=Al(l,h),fe!=null&&w.push(oi(l,fe,I)))),l=l.return}w.length!==0&&s.push({event:n,listeners:w})}var s2=/\r\n?/g,a2=/\u0000|\uFFFD/g;function Sp(s){return(typeof s=="string"?s:""+s).replace(s2,`
`).replace(a2,"")}function Cp(s,n){return n=Sp(n),Sp(s)===n}function tc(){}function at(s,n,l,o,m,h){switch(l){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||br(s,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&br(s,""+o);break;case"className":ro(s,"class",o);break;case"tabIndex":ro(s,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ro(s,l,o);break;case"style":E0(s,o,h);break;case"data":if(n!=="object"){ro(s,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||l!=="href")){s.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){s.removeAttribute(l);break}o=oo(""+o),s.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(l==="formAction"?(n!=="input"&&at(s,n,"name",m.name,m,null),at(s,n,"formEncType",m.formEncType,m,null),at(s,n,"formMethod",m.formMethod,m,null),at(s,n,"formTarget",m.formTarget,m,null)):(at(s,n,"encType",m.encType,m,null),at(s,n,"method",m.method,m,null),at(s,n,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){s.removeAttribute(l);break}o=oo(""+o),s.setAttribute(l,o);break;case"onClick":o!=null&&(s.onclick=tc);break;case"onScroll":o!=null&&Ge("scroll",s);break;case"onScrollEnd":o!=null&&Ge("scrollend",s);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":s.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){s.removeAttribute("xlink:href");break}l=oo(""+o),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?s.setAttribute(l,""+o):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":o===!0?s.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?s.setAttribute(l,o):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?s.setAttribute(l,o):s.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?s.removeAttribute(l):s.setAttribute(l,o);break;case"popover":Ge("beforetoggle",s),Ge("toggle",s),no(s,"popover",o);break;case"xlinkActuate":xa(s,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":xa(s,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":xa(s,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":xa(s,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":xa(s,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":xa(s,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":xa(s,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":xa(s,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":xa(s,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":no(s,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=_1.get(l)||l,no(s,l,o))}}function um(s,n,l,o,m,h){switch(l){case"style":E0(s,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof o=="string"?br(s,o):(typeof o=="number"||typeof o=="bigint")&&br(s,""+o);break;case"onScroll":o!=null&&Ge("scroll",s);break;case"onScrollEnd":o!=null&&Ge("scrollend",s);break;case"onClick":o!=null&&(s.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!g0.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),n=l.slice(2,m?l.length-7:void 0),h=s[us]||null,h=h!=null?h[l]:null,typeof h=="function"&&s.removeEventListener(n,h,m),typeof o=="function")){typeof h!="function"&&h!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(n,o,m);break e}l in s?s[l]=o:o===!0?s.setAttribute(l,""):no(s,l,o)}}}function Gt(s,n,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",s),Ge("load",s);var o=!1,m=!1,h;for(h in l)if(l.hasOwnProperty(h)){var w=l[h];if(w!=null)switch(h){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:at(s,n,h,w,l,null)}}m&&at(s,n,"srcSet",l.srcSet,l,null),o&&at(s,n,"src",l.src,l,null);return;case"input":Ge("invalid",s);var k=h=w=m=null,I=null,fe=null;for(o in l)if(l.hasOwnProperty(o)){var ve=l[o];if(ve!=null)switch(o){case"name":m=ve;break;case"type":w=ve;break;case"checked":I=ve;break;case"defaultChecked":fe=ve;break;case"value":h=ve;break;case"defaultValue":k=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,n));break;default:at(s,n,o,ve,l,null)}}w0(s,h,k,I,fe,w,m,!1),lo(s);return;case"select":Ge("invalid",s),o=w=h=null;for(m in l)if(l.hasOwnProperty(m)&&(k=l[m],k!=null))switch(m){case"value":h=k;break;case"defaultValue":w=k;break;case"multiple":o=k;default:at(s,n,m,k,l,null)}n=h,l=w,s.multiple=!!o,n!=null?pr(s,!!o,n,!1):l!=null&&pr(s,!!o,l,!0);return;case"textarea":Ge("invalid",s),h=m=o=null;for(w in l)if(l.hasOwnProperty(w)&&(k=l[w],k!=null))switch(w){case"value":o=k;break;case"defaultValue":m=k;break;case"children":h=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:at(s,n,w,k,l,null)}C0(s,o,m,h),lo(s);return;case"option":for(I in l)if(l.hasOwnProperty(I)&&(o=l[I],o!=null))switch(I){case"selected":s.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:at(s,n,I,o,l,null)}return;case"dialog":Ge("beforetoggle",s),Ge("toggle",s),Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":Ge("load",s);break;case"video":case"audio":for(o=0;o<ii.length;o++)Ge(ii[o],s);break;case"image":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"embed":case"source":case"link":Ge("error",s),Ge("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in l)if(l.hasOwnProperty(fe)&&(o=l[fe],o!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:at(s,n,fe,o,l,null)}return;default:if(Au(n)){for(ve in l)l.hasOwnProperty(ve)&&(o=l[ve],o!==void 0&&um(s,n,ve,o,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(o=l[k],o!=null&&at(s,n,k,o,l,null))}function n2(s,n,l,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,h=null,w=null,k=null,I=null,fe=null,ve=null;for(xe in l){var Se=l[xe];if(l.hasOwnProperty(xe)&&Se!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":I=Se;default:o.hasOwnProperty(xe)||at(s,n,xe,null,o,Se)}}for(var he in o){var xe=o[he];if(Se=l[he],o.hasOwnProperty(he)&&(xe!=null||Se!=null))switch(he){case"type":h=xe;break;case"name":m=xe;break;case"checked":fe=xe;break;case"defaultChecked":ve=xe;break;case"value":w=xe;break;case"defaultValue":k=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,n));break;default:xe!==Se&&at(s,n,he,xe,o,Se)}}Su(s,w,k,I,fe,ve,h,m);return;case"select":xe=w=k=he=null;for(h in l)if(I=l[h],l.hasOwnProperty(h)&&I!=null)switch(h){case"value":break;case"multiple":xe=I;default:o.hasOwnProperty(h)||at(s,n,h,null,o,I)}for(m in o)if(h=o[m],I=l[m],o.hasOwnProperty(m)&&(h!=null||I!=null))switch(m){case"value":he=h;break;case"defaultValue":k=h;break;case"multiple":w=h;default:h!==I&&at(s,n,m,h,o,I)}n=k,l=w,o=xe,he!=null?pr(s,!!l,he,!1):!!o!=!!l&&(n!=null?pr(s,!!l,n,!0):pr(s,!!l,l?[]:"",!1));return;case"textarea":xe=he=null;for(k in l)if(m=l[k],l.hasOwnProperty(k)&&m!=null&&!o.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:at(s,n,k,null,o,m)}for(w in o)if(m=o[w],h=l[w],o.hasOwnProperty(w)&&(m!=null||h!=null))switch(w){case"value":he=m;break;case"defaultValue":xe=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==h&&at(s,n,w,m,o,h)}S0(s,he,xe);return;case"option":for(var Ue in l)if(he=l[Ue],l.hasOwnProperty(Ue)&&he!=null&&!o.hasOwnProperty(Ue))switch(Ue){case"selected":s.selected=!1;break;default:at(s,n,Ue,null,o,he)}for(I in o)if(he=o[I],xe=l[I],o.hasOwnProperty(I)&&he!==xe&&(he!=null||xe!=null))switch(I){case"selected":s.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:at(s,n,I,he,o,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in l)he=l[Ve],l.hasOwnProperty(Ve)&&he!=null&&!o.hasOwnProperty(Ve)&&at(s,n,Ve,null,o,he);for(fe in o)if(he=o[fe],xe=l[fe],o.hasOwnProperty(fe)&&he!==xe&&(he!=null||xe!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,n));break;default:at(s,n,fe,he,o,xe)}return;default:if(Au(n)){for(var nt in l)he=l[nt],l.hasOwnProperty(nt)&&he!==void 0&&!o.hasOwnProperty(nt)&&um(s,n,nt,void 0,o,he);for(ve in o)he=o[ve],xe=l[ve],!o.hasOwnProperty(ve)||he===xe||he===void 0&&xe===void 0||um(s,n,ve,he,o,xe);return}}for(var oe in l)he=l[oe],l.hasOwnProperty(oe)&&he!=null&&!o.hasOwnProperty(oe)&&at(s,n,oe,null,o,he);for(Se in o)he=o[Se],xe=l[Se],!o.hasOwnProperty(Se)||he===xe||he==null&&xe==null||at(s,n,Se,he,o,xe)}var dm=null,mm=null;function sc(s){return s.nodeType===9?s:s.ownerDocument}function Ap(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ep(s,n){if(s===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&n==="foreignObject"?0:s}function fm(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var hm=null;function r2(){var s=window.event;return s&&s.type==="popstate"?s===hm?!1:(hm=s,!0):(hm=null,!1)}var Tp=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,i2=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(s){return Dp.resolve(null).then(s).catch(o2)}:Tp;function o2(s){setTimeout(function(){throw s})}function an(s){return s==="head"}function kp(s,n){var l=n,o=0,m=0;do{var h=l.nextSibling;if(s.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(0<o&&8>o){l=o;var w=s.ownerDocument;if(l&1&&ci(w.documentElement),l&2&&ci(w.body),l&4)for(l=w.head,ci(l),w=l.firstChild;w;){var k=w.nextSibling,I=w.nodeName;w[Sl]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=k}}if(m===0){s.removeChild(h),pi(n);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:o=l.charCodeAt(0)-48;else o=0;l=h}while(l);pi(n)}function xm(s){var n=s.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var l=n;switch(n=n.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":xm(l),vu(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function c2(s,n,l,o){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(o){if(!s[Sl])switch(n){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(h=s.getAttribute("rel"),h==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(h!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(h=s.getAttribute("src"),(h!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&h&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(n==="input"&&s.type==="hidden"){var h=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===h)return s}else return s;if(s=Ys(s.nextSibling),s===null)break}return null}function u2(s,n,l){if(n==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Ys(s.nextSibling),s===null))return null;return s}function gm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function d2(s,n){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")n();else{var o=function(){n(),l.removeEventListener("DOMContentLoaded",o)};l.addEventListener("DOMContentLoaded",o),s._reactRetry=o}}function Ys(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return s}var pm=null;function Rp(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return s;n--}else l==="/$"&&n++}s=s.previousSibling}return null}function Mp(s,n,l){switch(n=sc(l),s){case"html":if(s=n.documentElement,!s)throw Error(i(452));return s;case"head":if(s=n.head,!s)throw Error(i(453));return s;case"body":if(s=n.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ci(s){for(var n=s.attributes;n.length;)s.removeAttributeNode(n[0]);vu(s)}var Vs=new Map,_p=new Set;function ac(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Da=ce.d;ce.d={f:m2,r:f2,D:h2,C:x2,L:g2,m:p2,X:y2,S:b2,M:v2};function m2(){var s=Da.f(),n=Go();return s||n}function f2(s){var n=fr(s);n!==null&&n.tag===5&&n.type==="form"?Wx(n):Da.r(s)}var Zr=typeof document>"u"?null:document;function zp(s,n,l){var o=Zr;if(o&&typeof n=="string"&&n){var m=ks(n);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),_p.has(m)||(_p.add(m),s={rel:s,crossOrigin:l,href:n},o.querySelector(m)===null&&(n=o.createElement("link"),Gt(n,"link",s),Pt(n),o.head.appendChild(n)))}}function h2(s){Da.D(s),zp("dns-prefetch",s,null)}function x2(s,n){Da.C(s,n),zp("preconnect",s,n)}function g2(s,n,l){Da.L(s,n,l);var o=Zr;if(o&&s&&n){var m='link[rel="preload"][as="'+ks(n)+'"]';n==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+ks(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+ks(l.imageSizes)+'"]')):m+='[href="'+ks(s)+'"]';var h=m;switch(n){case"style":h=Gr(s);break;case"script":h=Kr(s)}Vs.has(h)||(s=p({rel:"preload",href:n==="image"&&l&&l.imageSrcSet?void 0:s,as:n},l),Vs.set(h,s),o.querySelector(m)!==null||n==="style"&&o.querySelector(ui(h))||n==="script"&&o.querySelector(di(h))||(n=o.createElement("link"),Gt(n,"link",s),Pt(n),o.head.appendChild(n)))}}function p2(s,n){Da.m(s,n);var l=Zr;if(l&&s){var o=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+ks(o)+'"][href="'+ks(s)+'"]',h=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Kr(s)}if(!Vs.has(h)&&(s=p({rel:"modulepreload",href:s},n),Vs.set(h,s),l.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(di(h)))return}o=l.createElement("link"),Gt(o,"link",s),Pt(o),l.head.appendChild(o)}}}function b2(s,n,l){Da.S(s,n,l);var o=Zr;if(o&&s){var m=hr(o).hoistableStyles,h=Gr(s);n=n||"default";var w=m.get(h);if(!w){var k={loading:0,preload:null};if(w=o.querySelector(ui(h)))k.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":n},l),(l=Vs.get(h))&&bm(s,l);var I=w=o.createElement("link");Pt(I),Gt(I,"link",s),I._p=new Promise(function(fe,ve){I.onload=fe,I.onerror=ve}),I.addEventListener("load",function(){k.loading|=1}),I.addEventListener("error",function(){k.loading|=2}),k.loading|=4,nc(w,n,o)}w={type:"stylesheet",instance:w,count:1,state:k},m.set(h,w)}}}function y2(s,n){Da.X(s,n);var l=Zr;if(l&&s){var o=hr(l).hoistableScripts,m=Kr(s),h=o.get(m);h||(h=l.querySelector(di(m)),h||(s=p({src:s,async:!0},n),(n=Vs.get(m))&&ym(s,n),h=l.createElement("script"),Pt(h),Gt(h,"link",s),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(m,h))}}function v2(s,n){Da.M(s,n);var l=Zr;if(l&&s){var o=hr(l).hoistableScripts,m=Kr(s),h=o.get(m);h||(h=l.querySelector(di(m)),h||(s=p({src:s,async:!0,type:"module"},n),(n=Vs.get(m))&&ym(s,n),h=l.createElement("script"),Pt(h),Gt(h,"link",s),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(m,h))}}function Op(s,n,l,o){var m=(m=G.current)?ac(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(n=Gr(l.href),l=hr(m).hoistableStyles,o=l.get(n),o||(o={type:"style",instance:null,count:0,state:null},l.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Gr(l.href);var h=hr(m).hoistableStyles,w=h.get(s);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(s,w),(h=m.querySelector(ui(s)))&&!h._p&&(w.instance=h,w.state.loading=5),Vs.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Vs.set(s,l),h||j2(m,s,l,w.state))),n&&o===null)throw Error(i(528,""));return w}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=l.async,l=l.src,typeof l=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Kr(l),l=hr(m).hoistableScripts,o=l.get(n),o||(o={type:"script",instance:null,count:0,state:null},l.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Gr(s){return'href="'+ks(s)+'"'}function ui(s){return'link[rel="stylesheet"]['+s+"]"}function Lp(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function j2(s,n,l,o){s.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=s.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Gt(n,"link",l),Pt(n),s.head.appendChild(n))}function Kr(s){return'[src="'+ks(s)+'"]'}function di(s){return"script[async]"+s}function Vp(s,n,l){if(n.count++,n.instance===null)switch(n.type){case"style":var o=s.querySelector('style[data-href~="'+ks(l.href)+'"]');if(o)return n.instance=o,Pt(o),o;var m=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(s.ownerDocument||s).createElement("style"),Pt(o),Gt(o,"style",m),nc(o,l.precedence,s),n.instance=o;case"stylesheet":m=Gr(l.href);var h=s.querySelector(ui(m));if(h)return n.state.loading|=4,n.instance=h,Pt(h),h;o=Lp(l),(m=Vs.get(m))&&bm(o,m),h=(s.ownerDocument||s).createElement("link"),Pt(h);var w=h;return w._p=new Promise(function(k,I){w.onload=k,w.onerror=I}),Gt(h,"link",o),n.state.loading|=4,nc(h,l.precedence,s),n.instance=h;case"script":return h=Kr(l.src),(m=s.querySelector(di(h)))?(n.instance=m,Pt(m),m):(o=l,(m=Vs.get(h))&&(o=p({},l),ym(o,m)),s=s.ownerDocument||s,m=s.createElement("script"),Pt(m),Gt(m,"link",o),s.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,nc(o,l.precedence,s));return n.instance}function nc(s,n,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,h=m,w=0;w<o.length;w++){var k=o[w];if(k.dataset.precedence===n)h=k;else if(h!==m)break}h?h.parentNode.insertBefore(s,h.nextSibling):(n=l.nodeType===9?l.head:l,n.insertBefore(s,n.firstChild))}function bm(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.title==null&&(s.title=n.title)}function ym(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.integrity==null&&(s.integrity=n.integrity)}var rc=null;function Pp(s,n,l){if(rc===null){var o=new Map,m=rc=new Map;m.set(l,o)}else m=rc,o=m.get(l),o||(o=new Map,m.set(l,o));if(o.has(s))return o;for(o.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var h=l[m];if(!(h[Sl]||h[Jt]||s==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var w=h.getAttribute(n)||"";w=s+w;var k=o.get(w);k?k.push(h):o.set(w,[h])}}return o}function Up(s,n,l){s=s.ownerDocument||s,s.head.insertBefore(l,n==="title"?s.querySelector("head > title"):null)}function N2(s,n,l){if(l===1||n.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return s=n.disabled,typeof n.precedence=="string"&&s==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Bp(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var mi=null;function w2(){}function S2(s,n,l){if(mi===null)throw Error(i(475));var o=mi;if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var m=Gr(l.href),h=s.querySelector(ui(m));if(h){s=h._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=lc.bind(o),s.then(o,o)),n.state.loading|=4,n.instance=h,Pt(h);return}h=s.ownerDocument||s,l=Lp(l),(m=Vs.get(m))&&bm(l,m),h=h.createElement("link"),Pt(h);var w=h;w._p=new Promise(function(k,I){w.onload=k,w.onerror=I}),Gt(h,"link",l),n.instance=h}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=lc.bind(o),s.addEventListener("load",n),s.addEventListener("error",n))}}function C2(){if(mi===null)throw Error(i(475));var s=mi;return s.stylesheets&&s.count===0&&vm(s,s.stylesheets),0<s.count?function(n){var l=setTimeout(function(){if(s.stylesheets&&vm(s,s.stylesheets),s.unsuspend){var o=s.unsuspend;s.unsuspend=null,o()}},6e4);return s.unsuspend=n,function(){s.unsuspend=null,clearTimeout(l)}}:null}function lc(){if(this.count--,this.count===0){if(this.stylesheets)vm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ic=null;function vm(s,n){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ic=new Map,n.forEach(A2,s),ic=null,lc.call(s))}function A2(s,n){if(!(n.state.loading&4)){var l=ic.get(s);if(l)var o=l.get(null);else{l=new Map,ic.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<m.length;h++){var w=m[h];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),o=w)}o&&l.set(null,o)}m=n.instance,w=m.getAttribute("data-precedence"),h=l.get(w)||o,h===o&&l.set(null,m),l.set(w,m),this.count++,o=lc.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),h?h.parentNode.insertBefore(m,h.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),n.state.loading|=4}}var fi={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function E2(s,n,l,o,m,h,w,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.hiddenUpdates=gu(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=h,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function $p(s,n,l,o,m,h,w,k,I,fe,ve,Se){return s=new E2(s,n,l,w,k,I,fe,Se),n=1,h===!0&&(n|=24),h=js(3,null,null,n),s.current=h,h.stateNode=s,n=td(),n.refCount++,s.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:l,cache:n},rd(h),s}function qp(s){return s?(s=Ar,s):Ar}function Fp(s,n,l,o,m,h){m=qp(m),o.context===null?o.context=m:o.pendingContext=m,o=Ia(n),o.payload={element:l},h=h===void 0?null:h,h!==null&&(o.callback=h),l=Ha(s,o,n),l!==null&&(As(l,s,n),Fl(l,s,n))}function Ip(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<n?l:n}}function jm(s,n){Ip(s,n),(s=s.alternate)&&Ip(s,n)}function Hp(s){if(s.tag===13){var n=Cr(s,67108864);n!==null&&As(n,s,67108864),jm(s,67108864)}}var oc=!0;function T2(s,n,l,o){var m=F.T;F.T=null;var h=ce.p;try{ce.p=2,Nm(s,n,l,o)}finally{ce.p=h,F.T=m}}function D2(s,n,l,o){var m=F.T;F.T=null;var h=ce.p;try{ce.p=8,Nm(s,n,l,o)}finally{ce.p=h,F.T=m}}function Nm(s,n,l,o){if(oc){var m=wm(o);if(m===null)cm(s,n,o,cc,l),Zp(s,o);else if(R2(m,s,n,l,o))o.stopPropagation();else if(Zp(s,o),n&4&&-1<k2.indexOf(s)){for(;m!==null;){var h=fr(m);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var w=ha(h.pendingLanes);if(w!==0){var k=h;for(k.pendingLanes|=2,k.entangledLanes|=2;w;){var I=1<<31-it(w);k.entanglements[1]|=I,w&=~I}na(h),(et&6)===0&&(Yo=B()+500,li(0))}}break;case 13:k=Cr(h,2),k!==null&&As(k,h,2),Go(),jm(h,2)}if(h=wm(o),h===null&&cm(s,n,o,cc,l),h===m)break;m=h}m!==null&&o.stopPropagation()}else cm(s,n,o,null,l)}}function wm(s){return s=Tu(s),Sm(s)}var cc=null;function Sm(s){if(cc=null,s=mr(s),s!==null){var n=u(s);if(n===null)s=null;else{var l=n.tag;if(l===13){if(s=d(n),s!==null)return s;s=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null)}}return cc=s,null}function Yp(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case ke:return 2;case q:return 8;case le:case ge:return 32;case Te:return 268435456;default:return 32}default:return 32}}var Cm=!1,nn=null,rn=null,ln=null,hi=new Map,xi=new Map,on=[],k2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zp(s,n){switch(s){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":hi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(n.pointerId)}}function gi(s,n,l,o,m,h){return s===null||s.nativeEvent!==h?(s={blockedOn:n,domEventName:l,eventSystemFlags:o,nativeEvent:h,targetContainers:[m]},n!==null&&(n=fr(n),n!==null&&Hp(n)),s):(s.eventSystemFlags|=o,n=s.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),s)}function R2(s,n,l,o,m){switch(n){case"focusin":return nn=gi(nn,s,n,l,o,m),!0;case"dragenter":return rn=gi(rn,s,n,l,o,m),!0;case"mouseover":return ln=gi(ln,s,n,l,o,m),!0;case"pointerover":var h=m.pointerId;return hi.set(h,gi(hi.get(h)||null,s,n,l,o,m)),!0;case"gotpointercapture":return h=m.pointerId,xi.set(h,gi(xi.get(h)||null,s,n,l,o,m)),!0}return!1}function Gp(s){var n=mr(s.target);if(n!==null){var l=u(n);if(l!==null){if(n=l.tag,n===13){if(n=d(l),n!==null){s.blockedOn=n,S1(s.priority,function(){if(l.tag===13){var o=Cs();o=pu(o);var m=Cr(l,o);m!==null&&As(m,l,o),jm(l,o)}});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function uc(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var l=wm(s.nativeEvent);if(l===null){l=s.nativeEvent;var o=new l.constructor(l.type,l);Eu=o,l.target.dispatchEvent(o),Eu=null}else return n=fr(l),n!==null&&Hp(n),s.blockedOn=l,!1;n.shift()}return!0}function Kp(s,n,l){uc(s)&&l.delete(n)}function M2(){Cm=!1,nn!==null&&uc(nn)&&(nn=null),rn!==null&&uc(rn)&&(rn=null),ln!==null&&uc(ln)&&(ln=null),hi.forEach(Kp),xi.forEach(Kp)}function dc(s,n){s.blockedOn===n&&(s.blockedOn=null,Cm||(Cm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,M2)))}var mc=null;function Xp(s){mc!==s&&(mc=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){mc===s&&(mc=null);for(var n=0;n<s.length;n+=3){var l=s[n],o=s[n+1],m=s[n+2];if(typeof o!="function"){if(Sm(o||l)===null)continue;break}var h=fr(l);h!==null&&(s.splice(n,3),n-=3,Sd(h,{pending:!0,data:m,method:l.method,action:o},o,m))}}))}function pi(s){function n(I){return dc(I,s)}nn!==null&&dc(nn,s),rn!==null&&dc(rn,s),ln!==null&&dc(ln,s),hi.forEach(n),xi.forEach(n);for(var l=0;l<on.length;l++){var o=on[l];o.blockedOn===s&&(o.blockedOn=null)}for(;0<on.length&&(l=on[0],l.blockedOn===null);)Gp(l),l.blockedOn===null&&on.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var m=l[o],h=l[o+1],w=m[us]||null;if(typeof h=="function")w||Xp(l);else if(w){var k=null;if(h&&h.hasAttribute("formAction")){if(m=h,w=h[us]||null)k=w.formAction;else if(Sm(m)!==null)continue}else k=w.action;typeof k=="function"?l[o+1]=k:(l.splice(o,3),o-=3),Xp(l)}}}function Am(s){this._internalRoot=s}fc.prototype.render=Am.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(i(409));var l=n.current,o=Cs();Fp(l,o,s,n,null,null)},fc.prototype.unmount=Am.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;Fp(s.current,2,null,s,null,null),Go(),n[dr]=null}};function fc(s){this._internalRoot=s}fc.prototype.unstable_scheduleHydration=function(s){if(s){var n=f0();s={blockedOn:null,target:s,priority:n};for(var l=0;l<on.length&&n!==0&&n<on[l].priority;l++);on.splice(l,0,s),l===0&&Gp(s)}};var Qp=a.version;if(Qp!=="19.1.1")throw Error(i(527,Qp,"19.1.1"));ce.findDOMNode=function(s){var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=x(n),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var _2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Oe=hc.inject(_2),qe=hc}catch{}}return yi.createRoot=function(s,n){if(!c(s))throw Error(i(299));var l=!1,o="",m=fg,h=hg,w=xg,k=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(k=n.unstable_transitionCallbacks)),n=$p(s,1,!1,null,null,l,o,m,h,w,k,null),s[dr]=n.current,om(s),new Am(n)},yi.hydrateRoot=function(s,n,l){if(!c(s))throw Error(i(299));var o=!1,m="",h=fg,w=hg,k=xg,I=null,fe=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks),l.formState!==void 0&&(fe=l.formState)),n=$p(s,1,!0,n,l??null,o,m,h,w,k,I,fe),n.context=qp(null),l=n.current,o=Cs(),o=pu(o),m=Ia(o),m.callback=null,Ha(l,m,o),l=o,n.current.lanes=l,wl(n,l),na(n),s[dr]=n.current,om(s),new fc(n)},yi.version="19.1.1",yi}var ib;function q2(){if(ib)return Dm.exports;ib=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Dm.exports=$2(),Dm.exports}var F2=q2();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ob="popstate";function I2(e={}){function a(i,c){let{pathname:u,search:d,hash:f}=i.location;return Cf("",{pathname:u,search:d,hash:f},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(i,c){return typeof c=="string"?c:zi(c)}return Y2(a,r,null,e)}function ht(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Qs(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function H2(){return Math.random().toString(36).substring(2,10)}function cb(e,a){return{usr:e.state,key:e.key,idx:a}}function Cf(e,a,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof a=="string"?gl(a):a,state:r,key:a&&a.key||i||H2()}}function zi({pathname:e="/",search:a="",hash:r=""}){return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gl(e){let a={};if(e){let r=e.indexOf("#");r>=0&&(a.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(a.search=e.substring(i),e=e.substring(0,i)),e&&(a.pathname=e)}return a}function Y2(e,a,r,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,d=c.history,f="POP",x=null,g=p();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function p(){return(d.state||{idx:null}).idx}function b(){f="POP";let _=p(),C=_==null?null:_-g;g=_,x&&x({action:f,location:M.location,delta:C})}function v(_,C){f="PUSH";let j=Cf(M.location,_,C);g=p()+1;let N=cb(j,g),A=M.createHref(j);try{d.pushState(N,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;c.location.assign(A)}u&&x&&x({action:f,location:M.location,delta:1})}function S(_,C){f="REPLACE";let j=Cf(M.location,_,C);g=p();let N=cb(j,g),A=M.createHref(j);d.replaceState(N,"",A),u&&x&&x({action:f,location:M.location,delta:0})}function T(_){return Z2(_)}let M={get action(){return f},get location(){return e(c,d)},listen(_){if(x)throw new Error("A history only accepts one active listener");return c.addEventListener(ob,b),x=_,()=>{c.removeEventListener(ob,b),x=null}},createHref(_){return a(c,_)},createURL:T,encodeLocation(_){let C=T(_);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:S,go(_){return d.go(_)}};return M}function Z2(e,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ht(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:zi(e);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Hv(e,a,r="/"){return G2(e,a,r,!1)}function G2(e,a,r,i){let c=typeof a=="string"?gl(a):a,u=_a(c.pathname||"/",r);if(u==null)return null;let d=Yv(e);K2(d);let f=null;for(let x=0;f==null&&x<d.length;++x){let g=lS(u);f=nS(d[x],g,i)}return f}function Yv(e,a=[],r=[],i="",c=!1){let u=(d,f,x=c,g)=>{let p={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&x)return;ht(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let b=Ma([i,p.relativePath]),v=r.concat(p);d.children&&d.children.length>0&&(ht(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Yv(d.children,a,v,b,x)),!(d.path==null&&!d.index)&&a.push({path:b,score:sS(b,d.index),routesMeta:v})};return e.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))u(d,f);else for(let x of Zv(d.path))u(d,f,!0,x)}),a}function Zv(e){let a=e.split("/");if(a.length===0)return[];let[r,...i]=a,c=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let d=Zv(i.join("/")),f=[];return f.push(...d.map(x=>x===""?u:[u,x].join("/"))),c&&f.push(...d),f.map(x=>e.startsWith("/")&&x===""?"/":x)}function K2(e){e.sort((a,r)=>a.score!==r.score?r.score-a.score:aS(a.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var X2=/^:[\w-]+$/,Q2=3,J2=2,W2=1,eS=10,tS=-2,ub=e=>e==="*";function sS(e,a){let r=e.split("/"),i=r.length;return r.some(ub)&&(i+=tS),a&&(i+=J2),r.filter(c=>!ub(c)).reduce((c,u)=>c+(X2.test(u)?Q2:u===""?W2:eS),i)}function aS(e,a){return e.length===a.length&&e.slice(0,-1).every((i,c)=>i===a[c])?e[e.length-1]-a[a.length-1]:0}function nS(e,a,r=!1){let{routesMeta:i}=e,c={},u="/",d=[];for(let f=0;f<i.length;++f){let x=i[f],g=f===i.length-1,p=u==="/"?a:a.slice(u.length)||"/",b=Oc({path:x.relativePath,caseSensitive:x.caseSensitive,end:g},p),v=x.route;if(!b&&g&&r&&!i[i.length-1].route.index&&(b=Oc({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},p)),!b)return null;Object.assign(c,b.params),d.push({params:c,pathname:Ma([u,b.pathname]),pathnameBase:uS(Ma([u,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(u=Ma([u,b.pathnameBase]))}return d}function Oc(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=rS(e.path,e.caseSensitive,e.end),c=a.match(r);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:i.reduce((g,{paramName:p,isOptional:b},v)=>{if(p==="*"){let T=f[v]||"";d=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}const S=f[v];return b&&!S?g[p]=void 0:g[p]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:e}}function rS(e,a=!1,r=!0){Qs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,x)=>(i.push({paramName:f,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function lS(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Qs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),e}}function _a(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function iS(e,a="/"){let{pathname:r,search:i="",hash:c=""}=typeof e=="string"?gl(e):e;return{pathname:r?r.startsWith("/")?r:oS(r,a):a,search:dS(i),hash:mS(c)}}function oS(e,a){let r=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function _m(e,a,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cS(e){return e.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function lh(e){let a=cS(e);return a.map((r,i)=>i===a.length-1?r.pathname:r.pathnameBase)}function ih(e,a,r,i=!1){let c;typeof e=="string"?c=gl(e):(c={...e},ht(!c.pathname||!c.pathname.includes("?"),_m("?","pathname","search",c)),ht(!c.pathname||!c.pathname.includes("#"),_m("#","pathname","hash",c)),ht(!c.search||!c.search.includes("#"),_m("#","search","hash",c)));let u=e===""||c.pathname==="",d=u?"/":c.pathname,f;if(d==null)f=r;else{let b=a.length-1;if(!i&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),b-=1;c.pathname=v.join("/")}f=b>=0?a[b]:"/"}let x=iS(c,f),g=d&&d!=="/"&&d.endsWith("/"),p=(u||d===".")&&r.endsWith("/");return!x.pathname.endsWith("/")&&(g||p)&&(x.pathname+="/"),x}var Ma=e=>e.join("/").replace(/\/\/+/g,"/"),uS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Gv=["POST","PUT","PATCH","DELETE"];new Set(Gv);var hS=["GET",...Gv];new Set(hS);var pl=y.createContext(null);pl.displayName="DataRouter";var Qc=y.createContext(null);Qc.displayName="DataRouterState";y.createContext(!1);var Kv=y.createContext({isTransitioning:!1});Kv.displayName="ViewTransition";var xS=y.createContext(new Map);xS.displayName="Fetchers";var gS=y.createContext(null);gS.displayName="Await";var Js=y.createContext(null);Js.displayName="Navigation";var Gi=y.createContext(null);Gi.displayName="Location";var da=y.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var oh=y.createContext(null);oh.displayName="RouteError";function pS(e,{relative:a}={}){ht(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=y.useContext(Js),{hash:c,pathname:u,search:d}=Ki(e,{relative:a}),f=u;return r!=="/"&&(f=u==="/"?r:Ma([r,u])),i.createHref({pathname:f,search:d,hash:c})}function bl(){return y.useContext(Gi)!=null}function ma(){return ht(bl(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Gi).location}var Xv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Qv(e){y.useContext(Js).static||y.useLayoutEffect(e)}function Ht(){let{isDataRoute:e}=y.useContext(da);return e?kS():bS()}function bS(){ht(bl(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(pl),{basename:a,navigator:r}=y.useContext(Js),{matches:i}=y.useContext(da),{pathname:c}=ma(),u=JSON.stringify(lh(i)),d=y.useRef(!1);return Qv(()=>{d.current=!0}),y.useCallback((x,g={})=>{if(Qs(d.current,Xv),!d.current)return;if(typeof x=="number"){r.go(x);return}let p=ih(x,JSON.parse(u),c,g.relative==="path");e==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:Ma([a,p.pathname])),(g.replace?r.replace:r.push)(p,g.state,g)},[a,r,u,c,e])}y.createContext(null);function Ki(e,{relative:a}={}){let{matches:r}=y.useContext(da),{pathname:i}=ma(),c=JSON.stringify(lh(r));return y.useMemo(()=>ih(e,JSON.parse(c),i,a==="path"),[e,c,i,a])}function yS(e,a){return Jv(e,a)}function Jv(e,a,r,i,c){ht(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=y.useContext(Js),{matches:d}=y.useContext(da),f=d[d.length-1],x=f?f.params:{},g=f?f.pathname:"/",p=f?f.pathnameBase:"/",b=f&&f.route;{let j=b&&b.path||"";Wv(g,!b||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let v=ma(),S;if(a){let j=typeof a=="string"?gl(a):a;ht(p==="/"||j.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${j.pathname}" was given in the \`location\` prop.`),S=j}else S=v;let T=S.pathname||"/",M=T;if(p!=="/"){let j=p.replace(/^\//,"").split("/");M="/"+T.replace(/^\//,"").split("/").slice(j.length).join("/")}let _=Hv(e,{pathname:M});Qs(b||_!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Qs(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=SS(_&&_.map(j=>Object.assign({},j,{params:Object.assign({},x,j.params),pathname:Ma([p,u.encodeLocation?u.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:Ma([p,u.encodeLocation?u.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),d,r,i,c);return a&&C?y.createElement(Gi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},C):C}function vS(){let e=DS(),a=fS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:u},"ErrorBoundary")," or"," ",y.createElement("code",{style:u},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},a),r?y.createElement("pre",{style:c},r):null,d)}var jS=y.createElement(vS,null),NS=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(da.Provider,{value:this.props.routeContext},y.createElement(oh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wS({routeContext:e,match:a,children:r}){let i=y.useContext(pl);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),y.createElement(da.Provider,{value:e},r)}function SS(e,a=[],r=null,i=null,c=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let u=e,d=r?.errors;if(d!=null){let g=u.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let f=!1,x=-1;if(r)for(let g=0;g<u.length;g++){let p=u[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(x=g),p.route.id){let{loaderData:b,errors:v}=r,S=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||S){f=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}return u.reduceRight((g,p,b)=>{let v,S=!1,T=null,M=null;r&&(v=d&&p.route.id?d[p.route.id]:void 0,T=p.route.errorElement||jS,f&&(x<0&&b===0?(Wv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,M=null):x===b&&(S=!0,M=p.route.hydrateFallbackElement||null)));let _=a.concat(u.slice(0,b+1)),C=()=>{let j;return v?j=T:S?j=M:p.route.Component?j=y.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=g,y.createElement(wS,{match:p,routeContext:{outlet:g,matches:_,isDataRoute:r!=null},children:j})};return r&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?y.createElement(NS,{location:r.location,revalidation:r.revalidation,component:T,error:v,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:i}):C()},null)}function ch(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CS(e){let a=y.useContext(pl);return ht(a,ch(e)),a}function AS(e){let a=y.useContext(Qc);return ht(a,ch(e)),a}function ES(e){let a=y.useContext(da);return ht(a,ch(e)),a}function uh(e){let a=ES(e),r=a.matches[a.matches.length-1];return ht(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function TS(){return uh("useRouteId")}function DS(){let e=y.useContext(oh),a=AS("useRouteError"),r=uh("useRouteError");return e!==void 0?e:a.errors?.[r]}function kS(){let{router:e}=CS("useNavigate"),a=uh("useNavigate"),r=y.useRef(!1);return Qv(()=>{r.current=!0}),y.useCallback(async(c,u={})=>{Qs(r.current,Xv),r.current&&(typeof c=="number"?e.navigate(c):await e.navigate(c,{fromRouteId:a,...u}))},[e,a])}var db={};function Wv(e,a,r){!a&&!db[e]&&(db[e]=!0,Qs(!1,r))}y.memo(RS);function RS({routes:e,future:a,state:r,unstable_onError:i}){return Jv(e,void 0,r,i,a)}function Af({to:e,replace:a,state:r,relative:i}){ht(bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=y.useContext(Js);Qs(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=y.useContext(da),{pathname:d}=ma(),f=Ht(),x=ih(e,lh(u),d,i==="path"),g=JSON.stringify(x);return y.useEffect(()=>{f(JSON.parse(g),{replace:a,state:r,relative:i})},[f,g,i,a,r]),null}function ct(e){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MS({basename:e="/",children:a=null,location:r,navigationType:i="POP",navigator:c,static:u=!1}){ht(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=y.useMemo(()=>({basename:d,navigator:c,static:u,future:{}}),[d,c,u]);typeof r=="string"&&(r=gl(r));let{pathname:x="/",search:g="",hash:p="",state:b=null,key:v="default"}=r,S=y.useMemo(()=>{let T=_a(x,d);return T==null?null:{location:{pathname:T,search:g,hash:p,state:b,key:v},navigationType:i}},[d,x,g,p,b,v,i]);return Qs(S!=null,`<Router basename="${d}"> is not able to match the URL "${x}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:y.createElement(Js.Provider,{value:f},y.createElement(Gi.Provider,{children:a,value:S}))}function _S({children:e,location:a}){return yS(Ef(e),a)}function Ef(e,a=[]){let r=[];return y.Children.forEach(e,(i,c)=>{if(!y.isValidElement(i))return;let u=[...a,c];if(i.type===y.Fragment){r.push.apply(r,Ef(i.props.children,u));return}ht(i.type===ct,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Ef(i.props.children,u)),r.push(d)}),r}var Tc="get",Dc="application/x-www-form-urlencoded";function Jc(e){return e!=null&&typeof e.tagName=="string"}function zS(e){return Jc(e)&&e.tagName.toLowerCase()==="button"}function OS(e){return Jc(e)&&e.tagName.toLowerCase()==="form"}function LS(e){return Jc(e)&&e.tagName.toLowerCase()==="input"}function VS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PS(e,a){return e.button===0&&(!a||a==="_self")&&!VS(e)}var xc=null;function US(){if(xc===null)try{new FormData(document.createElement("form"),0),xc=!1}catch{xc=!0}return xc}var BS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zm(e){return e!=null&&!BS.has(e)?(Qs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dc}"`),null):e}function $S(e,a){let r,i,c,u,d;if(OS(e)){let f=e.getAttribute("action");i=f?_a(f,a):null,r=e.getAttribute("method")||Tc,c=zm(e.getAttribute("enctype"))||Dc,u=new FormData(e)}else if(zS(e)||LS(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=e.getAttribute("formaction")||f.getAttribute("action");if(i=x?_a(x,a):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||Tc,c=zm(e.getAttribute("formenctype"))||zm(f.getAttribute("enctype"))||Dc,u=new FormData(f,e),!US()){let{name:g,type:p,value:b}=e;if(p==="image"){let v=g?`${g}.`:"";u.append(`${v}x`,"0"),u.append(`${v}y`,"0")}else g&&u.append(g,b)}}else{if(Jc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Tc,i=null,c=Dc,d=e}return u&&c==="text/plain"&&(d=u,u=void 0),{action:i,method:r.toLowerCase(),encType:c,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dh(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function qS(e,a,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:a&&_a(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function FS(e,a){if(e.id in a)return a[e.id];try{let r=await import(e.module);return a[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function HS(e,a,r){let i=await Promise.all(e.map(async c=>{let u=a.routes[c.route.id];if(u){let d=await FS(u,r);return d.links?d.links():[]}return[]}));return KS(i.flat(1).filter(IS).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function mb(e,a,r,i,c,u){let d=(x,g)=>r[g]?x.route.id!==r[g].route.id:!0,f=(x,g)=>r[g].pathname!==x.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==x.params["*"];return u==="assets"?a.filter((x,g)=>d(x,g)||f(x,g)):u==="data"?a.filter((x,g)=>{let p=i.routes[x.route.id];if(!p||!p.hasLoader)return!1;if(d(x,g)||f(x,g))return!0;if(x.route.shouldRevalidate){let b=x.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function YS(e,a,{includeHydrateFallback:r}={}){return ZS(e.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),r&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function ZS(e){return[...new Set(e)]}function GS(e){let a={},r=Object.keys(e).sort();for(let i of r)a[i]=e[i];return a}function KS(e,a){let r=new Set;return new Set(a),e.reduce((i,c)=>{let u=JSON.stringify(GS(c));return r.has(u)||(r.add(u),i.push({key:u,link:c})),i},[])}function ej(){let e=y.useContext(pl);return dh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function XS(){let e=y.useContext(Qc);return dh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var mh=y.createContext(void 0);mh.displayName="FrameworkContext";function tj(){let e=y.useContext(mh);return dh(e,"You must render this element inside a <HydratedRouter> element"),e}function QS(e,a){let r=y.useContext(mh),[i,c]=y.useState(!1),[u,d]=y.useState(!1),{onFocus:f,onBlur:x,onMouseEnter:g,onMouseLeave:p,onTouchStart:b}=a,v=y.useRef(null);y.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let M=C=>{C.forEach(j=>{d(j.isIntersecting)})},_=new IntersectionObserver(M,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[e]),y.useEffect(()=>{if(i){let M=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(M)}}},[i]);let S=()=>{c(!0)},T=()=>{c(!1),d(!1)};return r?e!=="intent"?[u,v,{}]:[u,v,{onFocus:vi(f,S),onBlur:vi(x,T),onMouseEnter:vi(g,S),onMouseLeave:vi(p,T),onTouchStart:vi(b,S)}]:[!1,v,{}]}function vi(e,a){return r=>{e&&e(r),r.defaultPrevented||a(r)}}function JS({page:e,...a}){let{router:r}=ej(),i=y.useMemo(()=>Hv(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?y.createElement(e4,{page:e,matches:i,...a}):null}function WS(e){let{manifest:a,routeModules:r}=tj(),[i,c]=y.useState([]);return y.useEffect(()=>{let u=!1;return HS(e,a,r).then(d=>{u||c(d)}),()=>{u=!0}},[e,a,r]),i}function e4({page:e,matches:a,...r}){let i=ma(),{manifest:c,routeModules:u}=tj(),{basename:d}=ej(),{loaderData:f,matches:x}=XS(),g=y.useMemo(()=>mb(e,a,x,c,i,"data"),[e,a,x,c,i]),p=y.useMemo(()=>mb(e,a,x,c,i,"assets"),[e,a,x,c,i]),b=y.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let T=new Set,M=!1;if(a.forEach(C=>{let j=c.routes[C.route.id];!j||!j.hasLoader||(!g.some(N=>N.route.id===C.route.id)&&C.route.id in f&&u[C.route.id]?.shouldRevalidate||j.hasClientLoader?M=!0:T.add(C.route.id))}),T.size===0)return[];let _=qS(e,d,"data");return M&&T.size>0&&_.searchParams.set("_routes",a.filter(C=>T.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[d,f,i,c,g,a,e,u]),v=y.useMemo(()=>YS(p,c),[p,c]),S=WS(p);return y.createElement(y.Fragment,null,b.map(T=>y.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...r})),v.map(T=>y.createElement("link",{key:T,rel:"modulepreload",href:T,...r})),S.map(({key:T,link:M})=>y.createElement("link",{key:T,nonce:r.nonce,...M})))}function t4(...e){return a=>{e.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var sj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sj&&(window.__reactRouterVersion="7.8.2")}catch{}function s4({basename:e,children:a,window:r}){let i=y.useRef();i.current==null&&(i.current=I2({window:r,v5Compat:!0}));let c=i.current,[u,d]=y.useState({action:c.action,location:c.location}),f=y.useCallback(x=>{y.startTransition(()=>d(x))},[d]);return y.useLayoutEffect(()=>c.listen(f),[c,f]),y.createElement(MS,{basename:e,children:a,location:u.location,navigationType:u.action,navigator:c})}var aj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=y.forwardRef(function({onClick:a,discover:r="render",prefetch:i="none",relative:c,reloadDocument:u,replace:d,state:f,target:x,to:g,preventScrollReset:p,viewTransition:b,...v},S){let{basename:T}=y.useContext(Js),M=typeof g=="string"&&aj.test(g),_,C=!1;if(typeof g=="string"&&M&&(_=g,sj))try{let P=new URL(window.location.href),se=g.startsWith("//")?new URL(P.protocol+g):new URL(g),X=_a(se.pathname,T);se.origin===P.origin&&X!=null?g=X+se.search+se.hash:C=!0}catch{Qs(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=pS(g,{relative:c}),[N,A,O]=QS(i,v),U=l4(g,{replace:d,state:f,target:x,preventScrollReset:p,relative:c,viewTransition:b});function D(P){a&&a(P),P.defaultPrevented||U(P)}let z=y.createElement("a",{...v,...O,href:_||j,onClick:C||u?a:D,ref:t4(S,A),target:x,"data-discover":!M&&r==="render"?"true":void 0});return N&&!M?y.createElement(y.Fragment,null,z,y.createElement(JS,{page:j})):z});mt.displayName="Link";var a4=y.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:i="",end:c=!1,style:u,to:d,viewTransition:f,children:x,...g},p){let b=Ki(d,{relative:g.relative}),v=ma(),S=y.useContext(Qc),{navigator:T,basename:M}=y.useContext(Js),_=S!=null&&d4(b)&&f===!0,C=T.encodeLocation?T.encodeLocation(b).pathname:b.pathname,j=v.pathname,N=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(j=j.toLowerCase(),N=N?N.toLowerCase():null,C=C.toLowerCase()),N&&M&&(N=_a(N,M)||N);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let O=j===C||!c&&j.startsWith(C)&&j.charAt(A)==="/",U=N!=null&&(N===C||!c&&N.startsWith(C)&&N.charAt(C.length)==="/"),D={isActive:O,isPending:U,isTransitioning:_},z=O?a:void 0,P;typeof i=="function"?P=i(D):P=[i,O?"active":null,U?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let se=typeof u=="function"?u(D):u;return y.createElement(mt,{...g,"aria-current":z,className:P,ref:p,style:se,to:d,viewTransition:f},typeof x=="function"?x(D):x)});a4.displayName="NavLink";var n4=y.forwardRef(({discover:e="render",fetcherKey:a,navigate:r,reloadDocument:i,replace:c,state:u,method:d=Tc,action:f,onSubmit:x,relative:g,preventScrollReset:p,viewTransition:b,...v},S)=>{let T=c4(),M=u4(f,{relative:g}),_=d.toLowerCase()==="get"?"get":"post",C=typeof f=="string"&&aj.test(f),j=N=>{if(x&&x(N),N.defaultPrevented)return;N.preventDefault();let A=N.nativeEvent.submitter,O=A?.getAttribute("formmethod")||d;T(A||N.currentTarget,{fetcherKey:a,method:O,navigate:r,replace:c,state:u,relative:g,preventScrollReset:p,viewTransition:b})};return y.createElement("form",{ref:S,method:_,action:M,onSubmit:i?x:j,...v,"data-discover":!C&&e==="render"?"true":void 0})});n4.displayName="Form";function r4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nj(e){let a=y.useContext(pl);return ht(a,r4(e)),a}function l4(e,{target:a,replace:r,state:i,preventScrollReset:c,relative:u,viewTransition:d}={}){let f=Ht(),x=ma(),g=Ki(e,{relative:u});return y.useCallback(p=>{if(PS(p,a)){p.preventDefault();let b=r!==void 0?r:zi(x)===zi(g);f(e,{replace:b,state:i,preventScrollReset:c,relative:u,viewTransition:d})}},[x,f,g,r,i,a,e,c,u,d])}var i4=0,o4=()=>`__${String(++i4)}__`;function c4(){let{router:e}=nj("useSubmit"),{basename:a}=y.useContext(Js),r=TS();return y.useCallback(async(i,c={})=>{let{action:u,method:d,encType:f,formData:x,body:g}=$S(i,a);if(c.navigate===!1){let p=c.fetcherKey||o4();await e.fetch(p,r,c.action||u,{preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await e.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[e,a,r])}function u4(e,{relative:a}={}){let{basename:r}=y.useContext(Js),i=y.useContext(da);ht(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...Ki(e||".",{relative:a})},d=ma();if(e==null){u.search=d.search;let f=new URLSearchParams(u.search),x=f.getAll("index");if(x.some(p=>p==="")){f.delete("index"),x.filter(b=>b).forEach(b=>f.append("index",b));let p=f.toString();u.search=p?`?${p}`:""}}return(!e||e===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:Ma([r,u.pathname])),zi(u)}function d4(e,{relative:a}={}){let r=y.useContext(Kv);ht(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=nj("useViewTransitionState"),c=Ki(e,{relative:a});if(!r.isTransitioning)return!1;let u=_a(r.currentLocation.pathname,i)||r.currentLocation.pathname,d=_a(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Oc(c.pathname,d)!=null||Oc(c.pathname,u)!=null}var fh=Iv();const m4="/api",Xr={SUPER_ADMIN:"super_admin",ADMIN:"admin",SCOLARITE:"scolarite",FINANCE:"finance",QUALITE:"qualite"},fb={super_admin:"Prsident / DG",admin:"Administrateur",scolarite:"Scolarit",finance:"Comptabilit",qualite:"Assurance Qualit"},Zs={MONDAY:"Monday",TUESDAY:"Tuesday",WEDNESDAY:"Wednesday",THURSDAY:"Thursday",FRIDAY:"Friday",SATURDAY:"Saturday",SUNDAY:"Sunday"};class f4{async makeRequest(a,r={}){try{const i=`${m4}${a}`,c=localStorage.getItem("token");console.log(" Token rcupr:",c?" Prsent":" Absent"),c&&console.log(" Token (premiers caractres):",c.substring(0,20)+"...");const u={headers:{"Content-Type":"application/json",...c&&{Authorization:`Bearer ${c}`},...r.headers},...r};console.log(" Headers envoys:",u.headers),console.log(" Appel HTTP vers:",i),console.log(" Options de la requte:",u),console.log(" Body de la requte:",r.body);const d=await fetch(i,u);console.log(" Statut de la rponse:",d.status,d.statusText),console.log(" Headers de la rponse:",Object.fromEntries(d.headers.entries()));const f=d.headers.get("content-type"),x=f&&f.includes("application/json");let g=null;if(x){const b=await d.text();if(b&&b.trim().length>0)try{g=JSON.parse(b)}catch{console.warn(" Impossible de parser le JSON:",b),g=null}}if(console.log(" Donnes de la rponse:",g),!d.ok){console.error(" Erreur HTTP:",d.status,d.statusText),console.error(" Dtails de l'erreur:",g);let b="Erreur inconnue";if(g&&typeof g=="object"){if("message"in g){const v=g.message;Array.isArray(v)?b=v[0]:typeof v=="string"&&v.trim()&&(b=v)}if(b==="Erreur inconnue"&&"error"in g){const v=g.error;typeof v=="string"&&v.trim()&&(b=v)}if(b==="Erreur inconnue"&&"statusCode"in g&&"message"in g){const v=g.message;typeof v=="string"&&v.trim()&&(b=v)}}return b==="Erreur inconnue"&&(b=`Erreur ${d.status}: ${d.statusText}`),{success:!1,error:b,statusCode:d.status}}console.log(" Requte russie!");let p;if(g&&typeof g=="object"&&"message"in g){const b=g.message;typeof b=="string"&&(p=b)}return{success:!0,data:g,message:p}}catch(i){return console.error(" Erreur de connexion:",i),{success:!1,error:i instanceof Error?i.message:"Erreur de connexion"}}}async createUser(a){return console.log(a),this.makeRequest("/auth/register",{method:"POST",body:JSON.stringify(a)})}async getUserById(a){return this.makeRequest(`/users/${a}`)}async getAllUsers(){return this.makeRequest("/users")}async updateUser(a,r){return this.makeRequest(`/users/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteUser(a){return this.makeRequest(`/users/${a}`,{method:"DELETE"})}async activateUser(a){return this.makeRequest(`/users/${a}/activate`,{method:"PUT"})}async deactivateUser(a){return this.makeRequest(`/users/${a}/deactivate`,{method:"PUT"})}async login(a){return this.makeRequest("/auth/login",{method:"POST",body:JSON.stringify(a)})}async refreshToken(a){return this.makeRequest("/auth/refresh",{method:"POST",body:JSON.stringify({refresh_token:a})})}async logout(){return this.makeRequest("/auth/logout",{method:"POST"})}async createStudentProfile(a){return console.log(a),this.makeRequest("/students",{method:"POST",body:JSON.stringify(a)})}async getAllStudents(a){const r=a?`/students?institutionId=${a}`:"/students";return this.makeRequest(r)}async createTeacherProfile(a){return console.log(a),this.makeRequest("/teachers",{method:"POST",body:JSON.stringify(a)})}async getAllTeachers(a){const r=a?`/teachers?institutionId=${a}`:"/teachers";return this.makeRequest(r)}async createStaffProfile(a){return console.log(a),this.makeRequest("/staff",{method:"POST",body:JSON.stringify(a)})}async getAllStaff(){return this.makeRequest("/staff")}async updateStudentProfile(a,r){return this.makeRequest(`/students/${a}`,{method:"PUT",body:JSON.stringify(r)})}async updateTeacherProfile(a,r){return this.makeRequest(`/teachers/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteStudent(a){return this.makeRequest(`/students/${a}`,{method:"DELETE"})}async deleteTeacher(a){return this.makeRequest(`/teachers/${a}`,{method:"DELETE"})}async deleteStaff(a){return this.makeRequest(`/staff/${a}`,{method:"DELETE"})}async updateStaffProfile(a,r){return this.makeRequest(`/staff/${a}`,{method:"PUT",body:JSON.stringify(r)})}async createClass(a){return console.log(a),this.makeRequest("/classes",{method:"POST",body:JSON.stringify(a)})}async getAllClasses(){return this.makeRequest("/classes")}async updateClass(a,r){return this.makeRequest(`/classes/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteClass(a){return this.makeRequest(`/classes/${a}`,{method:"DELETE"})}async getClassesByCategory(a){return this.makeRequest(`/classes/category/${a}`)}async getClassesByLevel(a){return this.makeRequest(`/classes/level/${a}`)}async createClassCategory(a){return this.makeRequest("/class-categories",{method:"POST",body:JSON.stringify(a)})}async getAllClassCategories(a){const r=a?`/class-categories?institutionId=${a}`:"/class-categories";return this.makeRequest(r)}async getClassCategoryById(a){return this.makeRequest(`/class-categories/${a}`)}async updateClassCategory(a,r){return this.makeRequest(`/class-categories/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteClassCategory(a){return this.makeRequest(`/class-categories/${a}`,{method:"DELETE"})}async initializeClassCategories(){return this.makeRequest("/class-categories/initialize",{method:"POST"})}async createSubject(a){return this.makeRequest("/subjects",{method:"POST",body:JSON.stringify(a)})}async getAllSubjects(){return this.makeRequest("/subjects")}async updateSubject(a,r){return this.makeRequest(`/subjects/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSubject(a){return this.makeRequest(`/subjects/${a}`,{method:"DELETE"})}async createClassSubject(a){return console.log(a),this.makeRequest("/class-subjects",{method:"POST",body:JSON.stringify(a)})}async getAllClassSubjects(){return this.makeRequest("/class-subjects")}async createStudentClass(a){return console.log(a),this.makeRequest("/student-classes",{method:"POST",body:JSON.stringify(a)})}async getAllStudentClasses(){return this.makeRequest("/student-classes")}async createTeachingAssignment(a){return console.log(a),this.makeRequest("/teaching-assignments",{method:"POST",body:JSON.stringify(a)})}async getAllTeachingAssignments(){return this.makeRequest("/teaching-assignments")}async deleteStudentClass(a){return this.makeRequest(`/student-classes/${a}`,{method:"DELETE"})}async deleteClassSubject(a){return this.makeRequest(`/class-subjects/${a}`,{method:"DELETE"})}async deleteTeachingAssignment(a){return this.makeRequest(`/teaching-assignments/${a}`,{method:"DELETE"})}async createSchoolYear(a){return this.makeRequest("/school-years",{method:"POST",body:JSON.stringify(a)})}async getAllSchoolYears(){return this.makeRequest("/school-years")}async getSchoolYearById(a){return this.makeRequest(`/school-years/${a}`)}async updateSchoolYear(a,r){return this.makeRequest(`/school-years/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSchoolYear(a){return this.makeRequest(`/school-years/${a}`,{method:"DELETE"})}async createTerm(a){return this.makeRequest("/terms",{method:"POST",body:JSON.stringify(a)})}async getAllTerms(){return this.makeRequest("/terms")}async getTermById(a){return this.makeRequest(`/terms/${a}`)}async getTermsBySchoolYear(a){return this.makeRequest(`/terms/school-years/${a}`)}async updateTerm(a,r){return this.makeRequest(`/terms/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteTerm(a){return this.makeRequest(`/terms/${a}`,{method:"DELETE"})}async createTimetable(a){return this.makeRequest("/timetables",{method:"POST",body:JSON.stringify(a)})}async getAllTimetables(){return this.makeRequest("/timetables")}async getTimetableById(a){return this.makeRequest(`/timetables/${a}`)}async getTimetablesByClass(a,r){return this.makeRequest(`/timetables/class/${a}?academicYearId=${r}`)}async getWeeklyTimetable(a,r){return this.makeRequest(`/timetables/weekly/${a}?academicYearId=${r}`)}async updateTimetable(a,r){return this.makeRequest(`/timetables/${a}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteTimetable(a){return this.makeRequest(`/timetables/${a}`,{method:"DELETE"})}async createEvent(a){return this.makeRequest("/events",{method:"POST",body:JSON.stringify(a)})}async getAllEvents(){return this.makeRequest("/events")}async getEventById(a){return this.makeRequest(`/events/${a}`)}async getEventsByAcademicYear(a){return this.makeRequest(`/events/academic-year/${a}`)}async getEventsByClass(a){return this.makeRequest(`/events/class/${a}`)}async getEventsByDateRange(a,r){return this.makeRequest(`/events/calendar?startDate=${a}&endDate=${r}`)}async updateEvent(a,r){return this.makeRequest(`/events/${a}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteEvent(a){return this.makeRequest(`/events/${a}`,{method:"DELETE"})}async getAllFeeTypes(){return this.makeRequest("/fee-types")}async createFeeType(a){return this.makeRequest("/fee-types",{method:"POST",body:JSON.stringify(a)})}async updateFeeType(a,r){return this.makeRequest(`/fee-types/${a}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteFeeType(a){return this.makeRequest(`/fee-types/${a}`,{method:"DELETE"})}async getAllStudentFees(){return this.makeRequest("/student-fees")}async createStudentFee(a){return this.makeRequest("/student-fees",{method:"POST",body:JSON.stringify(a)})}async updateStudentFee(a,r){return this.makeRequest(`/student-fees/${a}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteStudentFee(a){return this.makeRequest(`/student-fees/${a}`,{method:"DELETE"})}async getAllPayments(){return this.makeRequest("/payments")}async createPayment(a){return this.makeRequest("/payments",{method:"POST",body:JSON.stringify(a)})}async updatePayment(a,r){return this.makeRequest(`/payments/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deletePayment(a){return this.makeRequest(`/payments/${a}`,{method:"DELETE"})}async getAllInvoices(){return this.makeRequest("/invoices")}async createInvoice(a){return this.makeRequest("/invoices",{method:"POST",body:JSON.stringify(a)})}async updateInvoice(a,r){return this.makeRequest(`/invoices/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteInvoice(a){return this.makeRequest(`/invoices/${a}`,{method:"DELETE"})}async getAllDiscounts(){return this.makeRequest("/discounts")}async createDiscount(a){return this.makeRequest("/discounts",{method:"POST",body:JSON.stringify(a)})}async updateDiscount(a,r){return this.makeRequest(`/discounts/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteDiscount(a){return this.makeRequest(`/discounts/${a}`,{method:"DELETE"})}async getAllRefunds(){return this.makeRequest("/refunds")}async createRefund(a){return this.makeRequest("/refunds",{method:"POST",body:JSON.stringify(a)})}async updateRefund(a,r){return this.makeRequest(`/refunds/${a}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRefund(a){return this.makeRequest(`/refunds/${a}`,{method:"DELETE"})}async getFinanceStats(){return this.makeRequest("/finance/stats")}}const pe=new f4,rj=y.createContext(void 0),h4=({children:e})=>{const[a,r]=y.useState(null),[i,c]=y.useState(!0);y.useEffect(()=>{(()=>{try{const p=localStorage.getItem("user"),b=localStorage.getItem("token");if(console.log(" AuthContext - Chargement:",{hasUser:!!p,hasToken:!!b}),p&&b){const v=JSON.parse(p);console.log(" AuthContext - Utilisateur charg:",v.email),r(v)}else console.log(" AuthContext - Pas de donnes d'auth")}catch(p){console.error(" AuthContext - Erreur:",p),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{c(!1)}})()},[]);const x={user:a,isAuthenticated:!!a,isLoading:i,login:(g,p,b)=>{r(g),localStorage.setItem("user",JSON.stringify(g)),localStorage.setItem("token",p),b&&localStorage.setItem("refreshToken",b)},logout:()=>{r(null),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),sessionStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("refreshToken")},updateUser:g=>{r(g),localStorage.setItem("user",JSON.stringify(g))}};return t.jsx(rj.Provider,{value:x,children:e})},lj=y.createContext(void 0),x4=({children:e})=>{const[a,r]=y.useState(null),[i,c]=y.useState([]),[u,d]=y.useState(!0);y.useEffect(()=>{(()=>{try{const b=localStorage.getItem("selectedInstitution");if(b){const v=JSON.parse(b);r(v)}}catch(b){console.error("Erreur lors du chargement de l'institution:",b)}})(),f()},[]);const f=async()=>{try{d(!0);const p=localStorage.getItem("token"),b=await fetch("/api/class-categories/institutions/all",{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!b.ok)throw new Error("Erreur lors de la rcupration des institutions");const v=await b.json();c(v),!a&&v.length>0&&(localStorage.getItem("selectedInstitution")||(r(v[0]),localStorage.setItem("selectedInstitution",JSON.stringify(v[0]))))}catch(p){console.error("Erreur lors du chargement des institutions:",p)}finally{d(!1)}},g={selectedInstitution:a,institutions:i,setSelectedInstitution:p=>{r(p),p?localStorage.setItem("selectedInstitution",JSON.stringify(p)):localStorage.removeItem("selectedInstitution")},isLoading:u,fetchInstitutions:f};return t.jsx(lj.Provider,{value:g,children:e})},Xi=()=>{const e=y.useContext(rj);if(e===void 0)throw new Error("useAuth doit tre utilis dans un AuthProvider");return e},Wc={super_admin:{label:"Prsident / DG",description:"Accs total  toutes les fonctionnalits",menus:["dashboard","users","students","classes","calendar","school-years","finances","qualite","settings"],canValidateDiscounts:!0,canViewAll:!0,canModifyAll:!0,canManageUsers:!0,canViewStats:!0,canExportData:!0,canDeleteData:!0},admin:{label:"Administrateur",description:"Vue globale avec droits limits",menus:["dashboard","users","students","classes","calendar","school-years","settings"],canValidateDiscounts:!1,canViewAll:!0,canModifyAll:!1,canManageUsers:!0,canViewStats:!0,canExportData:!0,canDeleteData:!1},scolarite:{label:"Service Scolarit",description:"Gestion des tudiants, notes, diplmes",menus:["dashboard","students","classes","calendar","school-years","settings"],canValidateDiscounts:!1,canViewAll:!1,canModifyAll:!1,canManageUsers:!1,canViewStats:!1,canExportData:!0,canDeleteData:!1},finance:{label:"Service Comptabilit",description:"Gestion des finances et paiements",menus:["dashboard","finances","students"],canValidateDiscounts:!1,canViewAll:!1,canModifyAll:!1,canManageUsers:!1,canViewStats:!0,canExportData:!0,canDeleteData:!1},qualite:{label:"Assurance Qualit & RP",description:"Suivi qualit, volumes horaires, modules",menus:["dashboard","qualite","classes","calendar"],canValidateDiscounts:!1,canViewAll:!1,canModifyAll:!1,canManageUsers:!1,canViewStats:!0,canExportData:!0,canDeleteData:!1}},g4=(e,a)=>Wc[e]?.menus.includes(a)??!1,Zn=(e,a)=>Wc[e]?.[a]??!1,p4=e=>Wc[e]??null,b4={dashboard:["/dashboard"],users:["/users"],students:["/students","/students/*"],classes:["/classes-subjects"],calendar:["/calendar","/calendar/*"],"school-years":["/school-years"],finances:["/finances","/finances/*"],qualite:["/qualite","/qualite/*"],settings:["/settings","/settings/*"]},y4=(e,a)=>{const r=Wc[e];if(!r)return!1;if(e==="super_admin")return!0;for(const i of r.menus){const c=b4[i];for(const u of c)if(u.endsWith("*")){const d=u.slice(0,-1);if(a.startsWith(d))return!0}else if(a===u)return!0}return!1},ij=()=>{const{user:e}=Xi(),a=y.useMemo(()=>e?.role||null,[e?.role]),r=y.useMemo(()=>a?p4(a):null,[a]),i=y.useMemo(()=>r?.menus??[],[r]),c=d=>a?g4(a,d):!1,u=d=>a?y4(a,d):!1;return{role:a,roleLabel:r?.label??"Inconnu",permissions:r,canAccessMenu:c,canAccessRoute:u,canValidateDiscounts:a?Zn(a,"canValidateDiscounts"):!1,canViewAll:a?Zn(a,"canViewAll"):!1,canModifyAll:a?Zn(a,"canModifyAll"):!1,canManageUsers:a?Zn(a,"canManageUsers"):!1,canViewStats:a?Zn(a,"canViewStats"):!1,canExportData:a?Zn(a,"canExportData"):!1,canDeleteData:a?Zn(a,"canDeleteData"):!1,isSuperAdmin:a==="super_admin",isAdmin:a==="admin",isScolarite:a==="scolarite",isFinance:a==="finance",isQualite:a==="qualite",allowedMenus:i}},Nt=({children:e,requiredMenu:a})=>{const{user:r,isLoading:i}=Xi(),{canAccessMenu:c}=ij(),u=ma(),d=localStorage.getItem("user"),f=localStorage.getItem("token"),x=!!(d&&f);return i&&!x?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:t.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):!x&&!r?t.jsx(Af,{to:"/login",state:{from:u},replace:!0}):a&&r&&!c(a)?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md bg-white p-8 rounded-xl shadow-lg",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Accs Non Autoris"}),t.jsx("p",{className:"text-slate-600 mb-6",children:"Vous n'avez pas les permissions pour accder  cette page."}),t.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Retour au tableau de bord"})]})}):t.jsx(t.Fragment,{children:e})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,i)=>i?i.toUpperCase():r.toLowerCase()),hb=e=>{const a=j4(e);return a.charAt(0).toUpperCase()+a.slice(1)},oj=(...e)=>e.filter((a,r,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===r).join(" ").trim(),N4=e=>{for(const a in e)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=y.forwardRef(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...f},x)=>y.createElement("svg",{ref:x,...w4,width:a,height:a,stroke:e,strokeWidth:i?Number(r)*24/Number(a):r,className:oj("lucide",c),...!u&&!N4(f)&&{"aria-hidden":"true"},...f},[...d.map(([g,p])=>y.createElement(g,p)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(e,a)=>{const r=y.forwardRef(({className:i,...c},u)=>y.createElement(S4,{ref:u,iconNode:a,className:oj(`lucide-${v4(hb(e))}`,`lucide-${e}`,i),...c}));return r.displayName=hb(e),r};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],eu=Re("arrow-left",C4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Es=Re("arrow-right",A4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],T4=Re("award",E4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xb=Re("bell",D4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qs=Re("book-open",k4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],M4=Re("briefcase",R4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Tf=Re("building-2",_4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Lc=Re("calendar-days",z4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],L4=Re("camera",O4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],as=Re("calendar",V4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],cj=Re("chart-column",P4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],B4=Re("chart-pie",U4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vc=Re("chevron-down",$4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hh=Re("chevron-left",q4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rr=Re("chevron-right",F4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pn=Re("circle-alert",I4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bs=Re("circle-check-big",H4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gb=Re("circle-check",Y4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xh=Re("circle-x",Z4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],K4=Re("clipboard-check",G4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ps=Re("clock",X4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Xt=Re("credit-card",Q4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ts=Re("dollar-sign",J4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],uj=Re("download",W4);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],t5=Re("ellipsis",e5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Df=Re("eye-off",s5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Oi=Re("eye",a5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ys=Re("file-text",n5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],We=Re("graduation-cap",r5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],i5=Re("grid-3x3",l5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],c5=Re("heart",o5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],dj=Re("house",u5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dl=Re("info",d5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],f5=Re("list",m5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],kf=Re("lock",h5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Rf=Re("log-out",x5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],za=Re("mail",g5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Mf=Re("map-pin",p5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],y5=Re("pen-line",b5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],j5=Re("percent",v5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bn=Re("phone",N5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],is=Re("plus",w5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],mj=Re("printer",S5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],A5=Re("qr-code",C5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Li=Re("receipt",E5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],D5=Re("rotate-ccw",T5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],R5=Re("rotate-cw",k5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],_5=Re("school",M5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yn=Re("search",z5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qi=Re("settings",O5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Om=Re("shield",L5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],P5=Re("sparkles",V5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vi=Re("square-check-big",U5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Pi=Re("square-pen",B5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ui=Re("square",$5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vn=Re("trash-2",q5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],pb=Re("trending-down",F5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jn=Re("trending-up",I5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pc=Re("triangle-alert",H5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Z5=Re("upload",Y5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Uc=Re("user-check",G5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fj=Re("user-plus",K5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lt=Re("user",X5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],J5=Re("users-round",Q5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qt=Re("users",W5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],tC=Re("wallet",eC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Sn=Re("x",sC);class aC extends y.Component{refreshTimeout=null;constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}componentDidMount(){window.addEventListener("error",this.handleGlobalError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleGlobalError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection),this.refreshTimeout&&clearTimeout(this.refreshTimeout)}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,r){console.error(" Erreur capture par ErrorHandler:",a),console.error(" Dtails:",r),this.isRemoveChildError(a)?(console.warn(" Erreur removeChild dtecte, rafrachissement de la page dans 1 seconde..."),this.refreshPage()):this.setState({error:a,errorInfo:r})}handleGlobalError=a=>{const r=a.error||new Error(a.message);this.isRemoveChildError(r)&&(console.warn(" Erreur removeChild dtecte (global), rafrachissement de la page dans 1 seconde..."),a.preventDefault(),this.refreshPage())};handleUnhandledRejection=a=>{const r=a.reason;r instanceof Error&&this.isRemoveChildError(r)&&(console.warn(" Erreur removeChild dtecte (promise), rafrachissement de la page dans 1 seconde..."),a.preventDefault(),this.refreshPage())};isRemoveChildError=a=>{if(!(a instanceof Error))return!1;const r=a.message||"",i=a.stack||"";return r.includes("removeChild")||r.includes("Failed to execute 'removeChild'")||i.includes("removeChild")||i.includes("commitDeletionEffectsOnFiber")};refreshPage=()=>{this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{console.log(" Rafrachissement de la page..."),window.location.reload()},1e3)};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.isRemoveChildError(this.state.error)?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Pc,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Rafrachissement de la page..."}),t.jsx("p",{className:"text-gray-600",children:"La page va se rafrachir automatiquement dans quelques instants."})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(Pc,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Une erreur s'est produite"}),t.jsx("p",{className:"text-sm text-gray-600",children:this.state.error.message||"Erreur inconnue"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:this.handleReset,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Ressayer"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Rafrachir la page"})]}),!1]})}):this.props.children}}const hj=y.createContext({});function nC(e){const a=y.useRef(null);return a.current===null&&(a.current=e()),a.current}const gh=typeof window<"u",rC=gh?y.useLayoutEffect:y.useEffect,ph=y.createContext(null);function bh(e,a){e.indexOf(a)===-1&&e.push(a)}function yh(e,a){const r=e.indexOf(a);r>-1&&e.splice(r,1)}const Oa=(e,a,r)=>r>a?a:r<e?e:r;let vh=()=>{};const La={},xj=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function gj(e){return typeof e=="object"&&e!==null}const pj=e=>/^0[^.\s]+$/u.test(e);function jh(e){let a;return()=>(a===void 0&&(a=e()),a)}const $s=e=>e,lC=(e,a)=>r=>a(e(r)),Ji=(...e)=>e.reduce(lC),Bi=(e,a,r)=>{const i=a-e;return i===0?1:(r-e)/i};class Nh{constructor(){this.subscriptions=[]}add(a){return bh(this.subscriptions,a),()=>yh(this.subscriptions,a)}notify(a,r,i){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](a,r,i);else for(let u=0;u<c;u++){const d=this.subscriptions[u];d&&d(a,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ia=e=>e*1e3,oa=e=>e/1e3;function bj(e,a){return a?e*(1e3/a):0}const yj=(e,a,r)=>(((1-3*r+3*a)*e+(3*r-6*a))*e+3*a)*e,iC=1e-7,oC=12;function cC(e,a,r,i,c){let u,d,f=0;do d=a+(r-a)/2,u=yj(d,i,c)-e,u>0?r=d:a=d;while(Math.abs(u)>iC&&++f<oC);return d}function Wi(e,a,r,i){if(e===a&&r===i)return $s;const c=u=>cC(u,0,1,e,r);return u=>u===0||u===1?u:yj(c(u),a,i)}const vj=e=>a=>a<=.5?e(2*a)/2:(2-e(2*(1-a)))/2,jj=e=>a=>1-e(1-a),Nj=Wi(.33,1.53,.69,.99),wh=jj(Nj),wj=vj(wh),Sj=e=>(e*=2)<1?.5*wh(e):.5*(2-Math.pow(2,-10*(e-1))),Sh=e=>1-Math.sin(Math.acos(e)),Cj=jj(Sh),Aj=vj(Sh),uC=Wi(.42,0,1,1),dC=Wi(0,0,.58,1),Ej=Wi(.42,0,.58,1),mC=e=>Array.isArray(e)&&typeof e[0]!="number",Tj=e=>Array.isArray(e)&&typeof e[0]=="number",fC={linear:$s,easeIn:uC,easeInOut:Ej,easeOut:dC,circIn:Sh,circInOut:Aj,circOut:Cj,backIn:wh,backInOut:wj,backOut:Nj,anticipate:Sj},hC=e=>typeof e=="string",bb=e=>{if(Tj(e)){vh(e.length===4);const[a,r,i,c]=e;return Wi(a,r,i,c)}else if(hC(e))return fC[e];return e},gc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xC(e,a){let r=new Set,i=new Set,c=!1,u=!1;const d=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function x(p){d.has(p)&&(g.schedule(p),e()),p(f)}const g={schedule:(p,b=!1,v=!1)=>{const T=v&&c?r:i;return b&&d.add(p),T.has(p)||T.add(p),p},cancel:p=>{i.delete(p),d.delete(p)},process:p=>{if(f=p,c){u=!0;return}c=!0,[r,i]=[i,r],r.forEach(x),r.clear(),c=!1,u&&(u=!1,g.process(p))}};return g}const gC=40;function Dj(e,a){let r=!1,i=!0;const c={delta:0,timestamp:0,isProcessing:!1},u=()=>r=!0,d=gc.reduce((N,A)=>(N[A]=xC(u),N),{}),{setup:f,read:x,resolveKeyframes:g,preUpdate:p,update:b,preRender:v,render:S,postRender:T}=d,M=()=>{const N=La.useManualTiming?c.timestamp:performance.now();r=!1,La.useManualTiming||(c.delta=i?1e3/60:Math.max(Math.min(N-c.timestamp,gC),1)),c.timestamp=N,c.isProcessing=!0,f.process(c),x.process(c),g.process(c),p.process(c),b.process(c),v.process(c),S.process(c),T.process(c),c.isProcessing=!1,r&&a&&(i=!1,e(M))},_=()=>{r=!0,i=!0,c.isProcessing||e(M)};return{schedule:gc.reduce((N,A)=>{const O=d[A];return N[A]=(U,D=!1,z=!1)=>(r||_(),O.schedule(U,D,z)),N},{}),cancel:N=>{for(let A=0;A<gc.length;A++)d[gc[A]].cancel(N)},state:c,steps:d}}const{schedule:ft,cancel:Nn,state:Kt,steps:Lm}=Dj(typeof requestAnimationFrame<"u"?requestAnimationFrame:$s,!0);let kc;function pC(){kc=void 0}const gs={now:()=>(kc===void 0&&gs.set(Kt.isProcessing||La.useManualTiming?Kt.timestamp:performance.now()),kc),set:e=>{kc=e,queueMicrotask(pC)}},kj=e=>a=>typeof a=="string"&&a.startsWith(e),Ch=kj("--"),bC=kj("var(--"),Ah=e=>bC(e)?yC.test(e.split("/*")[0].trim()):!1,yC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$i={...yl,transform:e=>Oa(0,1,e)},pc={...yl,default:1},Ei=e=>Math.round(e*1e5)/1e5,Eh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vC(e){return e==null}const jC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Th=(e,a)=>r=>!!(typeof r=="string"&&jC.test(r)&&r.startsWith(e)||a&&!vC(r)&&Object.prototype.hasOwnProperty.call(r,a)),Rj=(e,a,r)=>i=>{if(typeof i!="string")return i;const[c,u,d,f]=i.match(Eh);return{[e]:parseFloat(c),[a]:parseFloat(u),[r]:parseFloat(d),alpha:f!==void 0?parseFloat(f):1}},NC=e=>Oa(0,255,e),Vm={...yl,transform:e=>Math.round(NC(e))},Xn={test:Th("rgb","red"),parse:Rj("red","green","blue"),transform:({red:e,green:a,blue:r,alpha:i=1})=>"rgba("+Vm.transform(e)+", "+Vm.transform(a)+", "+Vm.transform(r)+", "+Ei($i.transform(i))+")"};function wC(e){let a="",r="",i="",c="";return e.length>5?(a=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),c=e.substring(7,9)):(a=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),c=e.substring(4,5),a+=a,r+=r,i+=i,c+=c),{red:parseInt(a,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:c?parseInt(c,16)/255:1}}const _f={test:Th("#"),parse:wC,transform:Xn.transform},eo=e=>({test:a=>typeof a=="string"&&a.endsWith(e)&&a.split(" ").length===1,parse:parseFloat,transform:a=>`${a}${e}`}),mn=eo("deg"),ca=eo("%"),Be=eo("px"),SC=eo("vh"),CC=eo("vw"),yb={...ca,parse:e=>ca.parse(e)/100,transform:e=>ca.transform(e*100)},sl={test:Th("hsl","hue"),parse:Rj("hue","saturation","lightness"),transform:({hue:e,saturation:a,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+ca.transform(Ei(a))+", "+ca.transform(Ei(r))+", "+Ei($i.transform(i))+")"},Rt={test:e=>Xn.test(e)||_f.test(e)||sl.test(e),parse:e=>Xn.test(e)?Xn.parse(e):sl.test(e)?sl.parse(e):_f.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Xn.transform(e):sl.transform(e),getAnimatableNone:e=>{const a=Rt.parse(e);return a.alpha=0,Rt.transform(a)}},AC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EC(e){return isNaN(e)&&typeof e=="string"&&(e.match(Eh)?.length||0)+(e.match(AC)?.length||0)>0}const Mj="number",_j="color",TC="var",DC="var(",vb="${}",kC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qi(e){const a=e.toString(),r=[],i={color:[],number:[],var:[]},c=[];let u=0;const f=a.replace(kC,x=>(Rt.test(x)?(i.color.push(u),c.push(_j),r.push(Rt.parse(x))):x.startsWith(DC)?(i.var.push(u),c.push(TC),r.push(x)):(i.number.push(u),c.push(Mj),r.push(parseFloat(x))),++u,vb)).split(vb);return{values:r,split:f,indexes:i,types:c}}function zj(e){return qi(e).values}function Oj(e){const{split:a,types:r}=qi(e),i=a.length;return c=>{let u="";for(let d=0;d<i;d++)if(u+=a[d],c[d]!==void 0){const f=r[d];f===Mj?u+=Ei(c[d]):f===_j?u+=Rt.transform(c[d]):u+=c[d]}return u}}const RC=e=>typeof e=="number"?0:Rt.test(e)?Rt.getAnimatableNone(e):e;function MC(e){const a=zj(e);return Oj(e)(a.map(RC))}const wn={test:EC,parse:zj,createTransformer:Oj,getAnimatableNone:MC};function Pm(e,a,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(a-e)*6*r:r<1/2?a:r<2/3?e+(a-e)*(2/3-r)*6:e}function _C({hue:e,saturation:a,lightness:r,alpha:i}){e/=360,a/=100,r/=100;let c=0,u=0,d=0;if(!a)c=u=d=r;else{const f=r<.5?r*(1+a):r+a-r*a,x=2*r-f;c=Pm(x,f,e+1/3),u=Pm(x,f,e),d=Pm(x,f,e-1/3)}return{red:Math.round(c*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:i}}function Bc(e,a){return r=>r>0?a:e}const bt=(e,a,r)=>e+(a-e)*r,Um=(e,a,r)=>{const i=e*e,c=r*(a*a-i)+i;return c<0?0:Math.sqrt(c)},zC=[_f,Xn,sl],OC=e=>zC.find(a=>a.test(e));function jb(e){const a=OC(e);if(!a)return!1;let r=a.parse(e);return a===sl&&(r=_C(r)),r}const Nb=(e,a)=>{const r=jb(e),i=jb(a);if(!r||!i)return Bc(e,a);const c={...r};return u=>(c.red=Um(r.red,i.red,u),c.green=Um(r.green,i.green,u),c.blue=Um(r.blue,i.blue,u),c.alpha=bt(r.alpha,i.alpha,u),Xn.transform(c))},zf=new Set(["none","hidden"]);function LC(e,a){return zf.has(e)?r=>r<=0?e:a:r=>r>=1?a:e}function VC(e,a){return r=>bt(e,a,r)}function Dh(e){return typeof e=="number"?VC:typeof e=="string"?Ah(e)?Bc:Rt.test(e)?Nb:BC:Array.isArray(e)?Lj:typeof e=="object"?Rt.test(e)?Nb:PC:Bc}function Lj(e,a){const r=[...e],i=r.length,c=e.map((u,d)=>Dh(u)(u,a[d]));return u=>{for(let d=0;d<i;d++)r[d]=c[d](u);return r}}function PC(e,a){const r={...e,...a},i={};for(const c in r)e[c]!==void 0&&a[c]!==void 0&&(i[c]=Dh(e[c])(e[c],a[c]));return c=>{for(const u in i)r[u]=i[u](c);return r}}function UC(e,a){const r=[],i={color:0,var:0,number:0};for(let c=0;c<a.values.length;c++){const u=a.types[c],d=e.indexes[u][i[u]],f=e.values[d]??0;r[c]=f,i[u]++}return r}const BC=(e,a)=>{const r=wn.createTransformer(a),i=qi(e),c=qi(a);return i.indexes.var.length===c.indexes.var.length&&i.indexes.color.length===c.indexes.color.length&&i.indexes.number.length>=c.indexes.number.length?zf.has(e)&&!c.values.length||zf.has(a)&&!i.values.length?LC(e,a):Ji(Lj(UC(i,c),c.values),r):Bc(e,a)};function Vj(e,a,r){return typeof e=="number"&&typeof a=="number"&&typeof r=="number"?bt(e,a,r):Dh(e)(e,a)}const $C=e=>{const a=({timestamp:r})=>e(r);return{start:(r=!0)=>ft.update(a,r),stop:()=>Nn(a),now:()=>Kt.isProcessing?Kt.timestamp:gs.now()}},Pj=(e,a,r=10)=>{let i="";const c=Math.max(Math.round(a/r),2);for(let u=0;u<c;u++)i+=Math.round(e(u/(c-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},$c=2e4;function kh(e){let a=0;const r=50;let i=e.next(a);for(;!i.done&&a<$c;)a+=r,i=e.next(a);return a>=$c?1/0:a}function qC(e,a=100,r){const i=r({...e,keyframes:[0,a]}),c=Math.min(kh(i),$c);return{type:"keyframes",ease:u=>i.next(c*u).value/a,duration:oa(c)}}const FC=5;function Uj(e,a,r){const i=Math.max(a-FC,0);return bj(r-e(i),a-i)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bm=.001;function IC({duration:e=wt.duration,bounce:a=wt.bounce,velocity:r=wt.velocity,mass:i=wt.mass}){let c,u,d=1-a;d=Oa(wt.minDamping,wt.maxDamping,d),e=Oa(wt.minDuration,wt.maxDuration,oa(e)),d<1?(c=g=>{const p=g*d,b=p*e,v=p-r,S=Of(g,d),T=Math.exp(-b);return Bm-v/S*T},u=g=>{const b=g*d*e,v=b*r+r,S=Math.pow(d,2)*Math.pow(g,2)*e,T=Math.exp(-b),M=Of(Math.pow(g,2),d);return(-c(g)+Bm>0?-1:1)*((v-S)*T)/M}):(c=g=>{const p=Math.exp(-g*e),b=(g-r)*e+1;return-Bm+p*b},u=g=>{const p=Math.exp(-g*e),b=(r-g)*(e*e);return p*b});const f=5/e,x=YC(c,u,f);if(e=ia(e),isNaN(x))return{stiffness:wt.stiffness,damping:wt.damping,duration:e};{const g=Math.pow(x,2)*i;return{stiffness:g,damping:d*2*Math.sqrt(i*g),duration:e}}}const HC=12;function YC(e,a,r){let i=r;for(let c=1;c<HC;c++)i=i-e(i)/a(i);return i}function Of(e,a){return e*Math.sqrt(1-a*a)}const ZC=["duration","bounce"],GC=["stiffness","damping","mass"];function wb(e,a){return a.some(r=>e[r]!==void 0)}function KC(e){let a={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...e};if(!wb(e,GC)&&wb(e,ZC))if(e.visualDuration){const r=e.visualDuration,i=2*Math.PI/(r*1.2),c=i*i,u=2*Oa(.05,1,1-(e.bounce||0))*Math.sqrt(c);a={...a,mass:wt.mass,stiffness:c,damping:u}}else{const r=IC(e);a={...a,...r,mass:wt.mass},a.isResolvedFromDuration=!0}return a}function qc(e=wt.visualDuration,a=wt.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:a}:e;let{restSpeed:i,restDelta:c}=r;const u=r.keyframes[0],d=r.keyframes[r.keyframes.length-1],f={done:!1,value:u},{stiffness:x,damping:g,mass:p,duration:b,velocity:v,isResolvedFromDuration:S}=KC({...r,velocity:-oa(r.velocity||0)}),T=v||0,M=g/(2*Math.sqrt(x*p)),_=d-u,C=oa(Math.sqrt(x/p)),j=Math.abs(_)<5;i||(i=j?wt.restSpeed.granular:wt.restSpeed.default),c||(c=j?wt.restDelta.granular:wt.restDelta.default);let N;if(M<1){const O=Of(C,M);N=U=>{const D=Math.exp(-M*C*U);return d-D*((T+M*C*_)/O*Math.sin(O*U)+_*Math.cos(O*U))}}else if(M===1)N=O=>d-Math.exp(-C*O)*(_+(T+C*_)*O);else{const O=C*Math.sqrt(M*M-1);N=U=>{const D=Math.exp(-M*C*U),z=Math.min(O*U,300);return d-D*((T+M*C*_)*Math.sinh(z)+O*_*Math.cosh(z))/O}}const A={calculatedDuration:S&&b||null,next:O=>{const U=N(O);if(S)f.done=O>=b;else{let D=O===0?T:0;M<1&&(D=O===0?ia(T):Uj(N,O,U));const z=Math.abs(D)<=i,P=Math.abs(d-U)<=c;f.done=z&&P}return f.value=f.done?d:U,f},toString:()=>{const O=Math.min(kh(A),$c),U=Pj(D=>A.next(O*D).value,O,30);return O+"ms "+U},toTransition:()=>{}};return A}qc.applyToOptions=e=>{const a=qC(e,100,qc);return e.ease=a.ease,e.duration=ia(a.duration),e.type="keyframes",e};function Lf({keyframes:e,velocity:a=0,power:r=.8,timeConstant:i=325,bounceDamping:c=10,bounceStiffness:u=500,modifyTarget:d,min:f,max:x,restDelta:g=.5,restSpeed:p}){const b=e[0],v={done:!1,value:b},S=z=>f!==void 0&&z<f||x!==void 0&&z>x,T=z=>f===void 0?x:x===void 0||Math.abs(f-z)<Math.abs(x-z)?f:x;let M=r*a;const _=b+M,C=d===void 0?_:d(_);C!==_&&(M=C-b);const j=z=>-M*Math.exp(-z/i),N=z=>C+j(z),A=z=>{const P=j(z),se=N(z);v.done=Math.abs(P)<=g,v.value=v.done?C:se};let O,U;const D=z=>{S(v.value)&&(O=z,U=qc({keyframes:[v.value,T(v.value)],velocity:Uj(N,z,v.value),damping:c,stiffness:u,restDelta:g,restSpeed:p}))};return D(0),{calculatedDuration:null,next:z=>{let P=!1;return!U&&O===void 0&&(P=!0,A(z),D(z)),O!==void 0&&z>=O?U.next(z-O):(!P&&A(z),v)}}}function XC(e,a,r){const i=[],c=r||La.mix||Vj,u=e.length-1;for(let d=0;d<u;d++){let f=c(e[d],e[d+1]);if(a){const x=Array.isArray(a)?a[d]||$s:a;f=Ji(x,f)}i.push(f)}return i}function QC(e,a,{clamp:r=!0,ease:i,mixer:c}={}){const u=e.length;if(vh(u===a.length),u===1)return()=>a[0];if(u===2&&a[0]===a[1])return()=>a[1];const d=e[0]===e[1];e[0]>e[u-1]&&(e=[...e].reverse(),a=[...a].reverse());const f=XC(a,i,c),x=f.length,g=p=>{if(d&&p<e[0])return a[0];let b=0;if(x>1)for(;b<e.length-2&&!(p<e[b+1]);b++);const v=Bi(e[b],e[b+1],p);return f[b](v)};return r?p=>g(Oa(e[0],e[u-1],p)):g}function JC(e,a){const r=e[e.length-1];for(let i=1;i<=a;i++){const c=Bi(0,a,i);e.push(bt(r,1,c))}}function WC(e){const a=[0];return JC(a,e.length-1),a}function eA(e,a){return e.map(r=>r*a)}function tA(e,a){return e.map(()=>a||Ej).splice(0,e.length-1)}function Ti({duration:e=300,keyframes:a,times:r,ease:i="easeInOut"}){const c=mC(i)?i.map(bb):bb(i),u={done:!1,value:a[0]},d=eA(r&&r.length===a.length?r:WC(a),e),f=QC(d,a,{ease:Array.isArray(c)?c:tA(a,c)});return{calculatedDuration:e,next:x=>(u.value=f(x),u.done=x>=e,u)}}const sA=e=>e!==null;function Rh(e,{repeat:a,repeatType:r="loop"},i,c=1){const u=e.filter(sA),f=c<0||a&&r!=="loop"&&a%2===1?0:u.length-1;return!f||i===void 0?u[f]:i}const aA={decay:Lf,inertia:Lf,tween:Ti,keyframes:Ti,spring:qc};function Bj(e){typeof e.type=="string"&&(e.type=aA[e.type])}class Mh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,r){return this.finished.then(a,r)}}const nA=e=>e/100;class _h extends Mh{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==gs.now()&&this.tick(gs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=a,this.initAnimation(),this.play(),a.autoplay===!1&&this.pause()}initAnimation(){const{options:a}=this;Bj(a);const{type:r=Ti,repeat:i=0,repeatDelay:c=0,repeatType:u,velocity:d=0}=a;let{keyframes:f}=a;const x=r||Ti;x!==Ti&&typeof f[0]!="number"&&(this.mixKeyframes=Ji(nA,Vj(f[0],f[1])),f=[0,100]);const g=x({...a,keyframes:f});u==="mirror"&&(this.mirroredGenerator=x({...a,keyframes:[...f].reverse(),velocity:-d})),g.calculatedDuration===null&&(g.calculatedDuration=kh(g));const{calculatedDuration:p}=g;this.calculatedDuration=p,this.resolvedDuration=p+c,this.totalDuration=this.resolvedDuration*(i+1)-c,this.generator=g}updateTime(a){const r=Math.round(a-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(a,r=!1){const{generator:i,totalDuration:c,mixKeyframes:u,mirroredGenerator:d,resolvedDuration:f,calculatedDuration:x}=this;if(this.startTime===null)return i.next(0);const{delay:g=0,keyframes:p,repeat:b,repeatType:v,repeatDelay:S,type:T,onUpdate:M,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-c/this.speed,this.startTime)),r?this.currentTime=a:this.updateTime(a);const C=this.currentTime-g*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?C<0:C>c;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let N=this.currentTime,A=i;if(b){const z=Math.min(this.currentTime,c)/f;let P=Math.floor(z),se=z%1;!se&&z>=1&&(se=1),se===1&&P--,P=Math.min(P,b+1),!!(P%2)&&(v==="reverse"?(se=1-se,S&&(se-=S/f)):v==="mirror"&&(A=d)),N=Oa(0,1,se)*f}const O=j?{done:!1,value:p[0]}:A.next(N);u&&(O.value=u(O.value));let{done:U}=O;!j&&x!==null&&(U=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return D&&T!==Lf&&(O.value=Rh(p,this.options,_,this.speed)),M&&M(O.value),D&&this.finish(),O}then(a,r){return this.finished.then(a,r)}get duration(){return oa(this.calculatedDuration)}get time(){return oa(this.currentTime)}set time(a){a=ia(a),this.currentTime=a,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(gs.now());const r=this.playbackSpeed!==a;this.playbackSpeed=a,r&&(this.time=oa(this.currentTime))}play(){if(this.isStopped)return;const{driver:a=$C,startTime:r}=this.options;this.driver||(this.driver=a(c=>this.tick(c))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(gs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}function rA(e){for(let a=1;a<e.length;a++)e[a]??(e[a]=e[a-1])}const Qn=e=>e*180/Math.PI,Vf=e=>{const a=Qn(Math.atan2(e[1],e[0]));return Pf(a)},lA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Vf,rotateZ:Vf,skewX:e=>Qn(Math.atan(e[1])),skewY:e=>Qn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Pf=e=>(e=e%360,e<0&&(e+=360),e),Sb=Vf,Cb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ab=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),iA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Cb,scaleY:Ab,scale:e=>(Cb(e)+Ab(e))/2,rotateX:e=>Pf(Qn(Math.atan2(e[6],e[5]))),rotateY:e=>Pf(Qn(Math.atan2(-e[2],e[0]))),rotateZ:Sb,rotate:Sb,skewX:e=>Qn(Math.atan(e[4])),skewY:e=>Qn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Uf(e){return e.includes("scale")?1:0}function Bf(e,a){if(!e||e==="none")return Uf(a);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,c;if(r)i=iA,c=r;else{const f=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=lA,c=f}if(!c)return Uf(a);const u=i[a],d=c[1].split(",").map(cA);return typeof u=="function"?u(d):d[u]}const oA=(e,a)=>{const{transform:r="none"}=getComputedStyle(e);return Bf(r,a)};function cA(e){return parseFloat(e.trim())}const vl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jl=new Set(vl),Eb=e=>e===yl||e===Be,uA=new Set(["x","y","z"]),dA=vl.filter(e=>!uA.has(e));function mA(e){const a=[];return dA.forEach(r=>{const i=e.getValue(r);i!==void 0&&(a.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),a}const er={width:({x:e},{paddingLeft:a="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(a)-parseFloat(r),height:({y:e},{paddingTop:a="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(a)-parseFloat(r),top:(e,{top:a})=>parseFloat(a),left:(e,{left:a})=>parseFloat(a),bottom:({y:e},{top:a})=>parseFloat(a)+(e.max-e.min),right:({x:e},{left:a})=>parseFloat(a)+(e.max-e.min),x:(e,{transform:a})=>Bf(a,"x"),y:(e,{transform:a})=>Bf(a,"y")};er.translateX=er.x;er.translateY=er.y;const tr=new Set;let $f=!1,qf=!1,Ff=!1;function $j(){if(qf){const e=Array.from(tr).filter(i=>i.needsMeasurement),a=new Set(e.map(i=>i.element)),r=new Map;a.forEach(i=>{const c=mA(i);c.length&&(r.set(i,c),i.render())}),e.forEach(i=>i.measureInitialState()),a.forEach(i=>{i.render();const c=r.get(i);c&&c.forEach(([u,d])=>{i.getValue(u)?.set(d)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}qf=!1,$f=!1,tr.forEach(e=>e.complete(Ff)),tr.clear()}function qj(){tr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(qf=!0)})}function fA(){Ff=!0,qj(),$j(),Ff=!1}class zh{constructor(a,r,i,c,u,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=r,this.name=i,this.motionValue=c,this.element=u,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(tr.add(this),$f||($f=!0,ft.read(qj),ft.resolveKeyframes($j))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:a,name:r,element:i,motionValue:c}=this;if(a[0]===null){const u=c?.get(),d=a[a.length-1];if(u!==void 0)a[0]=u;else if(i&&r){const f=i.readValue(r,d);f!=null&&(a[0]=f)}a[0]===void 0&&(a[0]=d),c&&u===void 0&&c.set(a[0])}rA(a)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),tr.delete(this)}cancel(){this.state==="scheduled"&&(tr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hA=e=>e.startsWith("--");function xA(e,a,r){hA(a)?e.style.setProperty(a,r):e.style[a]=r}const gA=jh(()=>window.ScrollTimeline!==void 0),pA={};function bA(e,a){const r=jh(e);return()=>pA[a]??r()}const Fj=bA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ai=([e,a,r,i])=>`cubic-bezier(${e}, ${a}, ${r}, ${i})`,Tb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ai([0,.65,.55,1]),circOut:Ai([.55,0,1,.45]),backIn:Ai([.31,.01,.66,-.59]),backOut:Ai([.33,1.53,.69,.99])};function Ij(e,a){if(e)return typeof e=="function"?Fj()?Pj(e,a):"ease-out":Tj(e)?Ai(e):Array.isArray(e)?e.map(r=>Ij(r,a)||Tb.easeOut):Tb[e]}function yA(e,a,r,{delay:i=0,duration:c=300,repeat:u=0,repeatType:d="loop",ease:f="easeOut",times:x}={},g=void 0){const p={[a]:r};x&&(p.offset=x);const b=Ij(f,c);Array.isArray(b)&&(p.easing=b);const v={delay:i,duration:c,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"};return g&&(v.pseudoElement=g),e.animate(p,v)}function Hj(e){return typeof e=="function"&&"applyToOptions"in e}function vA({type:e,...a}){return Hj(e)&&Fj()?e.applyToOptions(a):(a.duration??(a.duration=300),a.ease??(a.ease="easeOut"),a)}class jA extends Mh{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,!a)return;const{element:r,name:i,keyframes:c,pseudoElement:u,allowFlatten:d=!1,finalKeyframe:f,onComplete:x}=a;this.isPseudoElement=!!u,this.allowFlatten=d,this.options=a,vh(typeof a.type!="string");const g=vA(a);this.animation=yA(r,i,c,g,u),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const p=Rh(c,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(p):xA(r,i,p),this.animation.cancel()}x?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:a}=this;a==="idle"||a==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const a=this.animation.effect?.getComputedTiming?.().duration||0;return oa(Number(a))}get time(){return oa(Number(this.animation.currentTime)||0)}set time(a){this.finishedTime=null,this.animation.currentTime=ia(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(a){this.animation.startTime=a}attachTimeline({timeline:a,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&gA()?(this.animation.timeline=a,$s):r(this)}}const Yj={anticipate:Sj,backInOut:wj,circInOut:Aj};function NA(e){return e in Yj}function wA(e){typeof e.ease=="string"&&NA(e.ease)&&(e.ease=Yj[e.ease])}const Db=10;class SA extends jA{constructor(a){wA(a),Bj(a),super(a),a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){const{motionValue:r,onUpdate:i,onComplete:c,element:u,...d}=this.options;if(!r)return;if(a!==void 0){r.set(a);return}const f=new _h({...d,autoplay:!1}),x=ia(this.finishedTime??this.time);r.setWithVelocity(f.sample(x-Db).value,f.sample(x).value,Db),f.stop()}}const kb=(e,a)=>a==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(wn.test(e)||e==="0")&&!e.startsWith("url("));function CA(e){const a=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==a)return!0}function AA(e,a,r,i){const c=e[0];if(c===null)return!1;if(a==="display"||a==="visibility")return!0;const u=e[e.length-1],d=kb(c,a),f=kb(u,a);return!d||!f?!1:CA(e)||(r==="spring"||Hj(r))&&i}function If(e){e.duration=0,e.type}const EA=new Set(["opacity","clipPath","filter","transform"]),TA=jh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DA(e){const{motionValue:a,name:r,repeatDelay:i,repeatType:c,damping:u,type:d}=e;if(!(a?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:x,transformTemplate:g}=a.owner.getProps();return TA()&&r&&EA.has(r)&&(r!=="transform"||!g)&&!x&&!i&&c!=="mirror"&&u!==0&&d!=="inertia"}const kA=40;class RA extends Mh{constructor({autoplay:a=!0,delay:r=0,type:i="keyframes",repeat:c=0,repeatDelay:u=0,repeatType:d="loop",keyframes:f,name:x,motionValue:g,element:p,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=gs.now();const v={autoplay:a,delay:r,type:i,repeat:c,repeatDelay:u,repeatType:d,name:x,motionValue:g,element:p,...b},S=p?.KeyframeResolver||zh;this.keyframeResolver=new S(f,(T,M,_)=>this.onKeyframesResolved(T,M,v,!_),x,g,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,r,i,c){this.keyframeResolver=void 0;const{name:u,type:d,velocity:f,delay:x,isHandoff:g,onUpdate:p}=i;this.resolvedAt=gs.now(),AA(a,u,d,f)||((La.instantAnimations||!x)&&p?.(Rh(a,i,r)),a[0]=a[a.length-1],If(i),i.repeat=0);const v={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>kA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...i,keyframes:a},S=!g&&DA(v)?new SA({...v,element:v.motionValue.owner.current}):new _h(v);S.finished.then(()=>this.notifyFinished()).catch($s),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(a,r){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),fA()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const MA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _A(e){const a=MA.exec(e);if(!a)return[,];const[,r,i,c]=a;return[`--${r??i}`,c]}function Zj(e,a,r=1){const[i,c]=_A(e);if(!i)return;const u=window.getComputedStyle(a).getPropertyValue(i);if(u){const d=u.trim();return xj(d)?parseFloat(d):d}return Ah(c)?Zj(c,a,r+1):c}function Oh(e,a){return e?.[a]??e?.default??e}const Gj=new Set(["width","height","top","left","right","bottom",...vl]),zA={test:e=>e==="auto",parse:e=>e},Kj=e=>a=>a.test(e),Xj=[yl,Be,ca,mn,CC,SC,zA],Rb=e=>Xj.find(Kj(e));function OA(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||pj(e):!0}const LA=new Set(["brightness","contrast","saturate","opacity"]);function VA(e){const[a,r]=e.slice(0,-1).split("(");if(a==="drop-shadow")return e;const[i]=r.match(Eh)||[];if(!i)return e;const c=r.replace(i,"");let u=LA.has(a)?1:0;return i!==r&&(u*=100),a+"("+u+c+")"}const PA=/\b([a-z-]*)\(.*?\)/gu,Hf={...wn,getAnimatableNone:e=>{const a=e.match(PA);return a?a.map(VA).join(" "):e}},Mb={...yl,transform:Math.round},UA={rotate:mn,rotateX:mn,rotateY:mn,rotateZ:mn,scale:pc,scaleX:pc,scaleY:pc,scaleZ:pc,skew:mn,skewX:mn,skewY:mn,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:$i,originX:yb,originY:yb,originZ:Be},Lh={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...UA,zIndex:Mb,fillOpacity:$i,strokeOpacity:$i,numOctaves:Mb},BA={...Lh,color:Rt,backgroundColor:Rt,outlineColor:Rt,fill:Rt,stroke:Rt,borderColor:Rt,borderTopColor:Rt,borderRightColor:Rt,borderBottomColor:Rt,borderLeftColor:Rt,filter:Hf,WebkitFilter:Hf},Qj=e=>BA[e];function Jj(e,a){let r=Qj(e);return r!==Hf&&(r=wn),r.getAnimatableNone?r.getAnimatableNone(a):void 0}const $A=new Set(["auto","none","0"]);function qA(e,a,r){let i=0,c;for(;i<e.length&&!c;){const u=e[i];typeof u=="string"&&!$A.has(u)&&qi(u).values.length&&(c=e[i]),i++}if(c&&r)for(const u of a)e[u]=Jj(r,c)}class FA extends zh{constructor(a,r,i,c,u){super(a,r,i,c,u,!0)}readKeyframes(){const{unresolvedKeyframes:a,element:r,name:i}=this;if(!r||!r.current)return;super.readKeyframes();for(let x=0;x<a.length;x++){let g=a[x];if(typeof g=="string"&&(g=g.trim(),Ah(g))){const p=Zj(g,r.current);p!==void 0&&(a[x]=p),x===a.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!Gj.has(i)||a.length!==2)return;const[c,u]=a,d=Rb(c),f=Rb(u);if(d!==f)if(Eb(d)&&Eb(f))for(let x=0;x<a.length;x++){const g=a[x];typeof g=="string"&&(a[x]=parseFloat(g))}else er[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:a,name:r}=this,i=[];for(let c=0;c<a.length;c++)(a[c]===null||OA(a[c]))&&i.push(c);i.length&&qA(a,i,r)}measureInitialState(){const{element:a,unresolvedKeyframes:r,name:i}=this;if(!a||!a.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=er[i](a.measureViewportBox(),window.getComputedStyle(a.current)),r[0]=this.measuredOrigin;const c=r[r.length-1];c!==void 0&&a.getValue(i,c).jump(c,!1)}measureEndState(){const{element:a,name:r,unresolvedKeyframes:i}=this;if(!a||!a.current)return;const c=a.getValue(r);c&&c.jump(this.measuredOrigin,!1);const u=i.length-1,d=i[u];i[u]=er[r](a.measureViewportBox(),window.getComputedStyle(a.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,x])=>{a.getValue(f).set(x)}),this.resolveNoneKeyframes()}}function IA(e,a,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const c=r?.[e]??i.querySelectorAll(e);return c?Array.from(c):[]}return Array.from(e)}const Wj=(e,a)=>a&&typeof e=="number"?a.transform(e):e;function HA(e){return gj(e)&&"offsetHeight"in e}const _b=30,YA=e=>!isNaN(parseFloat(e));class ZA{constructor(a,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const c=gs.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=r.owner}setCurrent(a){this.current=a,this.updatedAt=gs.now(),this.canTrackVelocity===null&&a!==void 0&&(this.canTrackVelocity=YA(this.current))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,r){this.events[a]||(this.events[a]=new Nh);const i=this.events[a].add(r);return a==="change"?()=>{i(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const a in this.events)this.events[a].clear()}attach(a,r){this.passiveEffect=a,this.stopPassiveEffect=r}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,r,i){this.set(r),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-i}jump(a,r=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const a=gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||a-this.updatedAt>_b)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,_b);return bj(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(a){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=a(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ml(e,a){return new ZA(e,a)}const{schedule:Vh}=Dj(queueMicrotask,!1),Gs={x:!1,y:!1};function eN(){return Gs.x||Gs.y}function GA(e){return e==="x"||e==="y"?Gs[e]?null:(Gs[e]=!0,()=>{Gs[e]=!1}):Gs.x||Gs.y?null:(Gs.x=Gs.y=!0,()=>{Gs.x=Gs.y=!1})}function tN(e,a){const r=IA(e),i=new AbortController,c={passive:!0,...a,signal:i.signal};return[r,c,()=>i.abort()]}function zb(e){return!(e.pointerType==="touch"||eN())}function KA(e,a,r={}){const[i,c,u]=tN(e,r),d=f=>{if(!zb(f))return;const{target:x}=f,g=a(x,f);if(typeof g!="function"||!x)return;const p=b=>{zb(b)&&(g(b),x.removeEventListener("pointerleave",p))};x.addEventListener("pointerleave",p,c)};return i.forEach(f=>{f.addEventListener("pointerenter",d,c)}),u}const sN=(e,a)=>a?e===a?!0:sN(e,a.parentElement):!1,Ph=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,XA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QA(e){return XA.has(e.tagName)||e.tabIndex!==-1}const Rc=new WeakSet;function Ob(e){return a=>{a.key==="Enter"&&e(a)}}function $m(e,a){e.dispatchEvent(new PointerEvent("pointer"+a,{isPrimary:!0,bubbles:!0}))}const JA=(e,a)=>{const r=e.currentTarget;if(!r)return;const i=Ob(()=>{if(Rc.has(r))return;$m(r,"down");const c=Ob(()=>{$m(r,"up")}),u=()=>$m(r,"cancel");r.addEventListener("keyup",c,a),r.addEventListener("blur",u,a)});r.addEventListener("keydown",i,a),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),a)};function Lb(e){return Ph(e)&&!eN()}function WA(e,a,r={}){const[i,c,u]=tN(e,r),d=f=>{const x=f.currentTarget;if(!Lb(f))return;Rc.add(x);const g=a(x,f),p=(S,T)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",v),Rc.has(x)&&Rc.delete(x),Lb(S)&&typeof g=="function"&&g(S,{success:T})},b=S=>{p(S,x===window||x===document||r.useGlobalTarget||sN(x,S.target))},v=S=>{p(S,!1)};window.addEventListener("pointerup",b,c),window.addEventListener("pointercancel",v,c)};return i.forEach(f=>{(r.useGlobalTarget?window:f).addEventListener("pointerdown",d,c),HA(f)&&(f.addEventListener("focus",g=>JA(g,c)),!QA(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),u}function aN(e){return gj(e)&&"ownerSVGElement"in e}function e6(e){return aN(e)&&e.tagName==="svg"}const ss=e=>!!(e&&e.getVelocity),t6=[...Xj,Rt,wn],s6=e=>t6.find(Kj(e)),nN=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function a6(e=!0){const a=y.useContext(ph);if(a===null)return[!0,null];const{isPresent:r,onExitComplete:i,register:c}=a,u=y.useId();y.useEffect(()=>{if(e)return c(u)},[e]);const d=y.useCallback(()=>e&&i&&i(u),[u,i,e]);return!r&&i?[!1,d]:[!0]}const rN=y.createContext({strict:!1}),Vb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fl={};for(const e in Vb)fl[e]={isEnabled:a=>Vb[e].some(r=>!!a[r])};function n6(e){for(const a in e)fl[a]={...fl[a],...e[a]}}const r6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||r6.has(e)}let lN=e=>!Fc(e);function l6(e){typeof e=="function"&&(lN=a=>a.startsWith("on")?!Fc(a):e(a))}try{l6(require("@emotion/is-prop-valid").default)}catch{}function i6(e,a,r){const i={};for(const c in e)c==="values"&&typeof e.values=="object"||(lN(c)||r===!0&&Fc(c)||!a&&!Fc(c)||e.draggable&&c.startsWith("onDrag"))&&(i[c]=e[c]);return i}const tu=y.createContext({});function su(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Fi(e){return typeof e=="string"||Array.isArray(e)}const Uh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bh=["initial",...Uh];function au(e){return su(e.animate)||Bh.some(a=>Fi(e[a]))}function iN(e){return!!(au(e)||e.variants)}function o6(e,a){if(au(e)){const{initial:r,animate:i}=e;return{initial:r===!1||Fi(r)?r:void 0,animate:Fi(i)?i:void 0}}return e.inherit!==!1?a:{}}function c6(e){const{initial:a,animate:r}=o6(e,y.useContext(tu));return y.useMemo(()=>({initial:a,animate:r}),[Pb(a),Pb(r)])}function Pb(e){return Array.isArray(e)?e.join(" "):e}const Ii={};function u6(e){for(const a in e)Ii[a]=e[a],Ch(a)&&(Ii[a].isCSSVariable=!0)}function oN(e,{layout:a,layoutId:r}){return jl.has(e)||e.startsWith("origin")||(a||r!==void 0)&&(!!Ii[e]||e==="opacity")}const d6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m6=vl.length;function f6(e,a,r){let i="",c=!0;for(let u=0;u<m6;u++){const d=vl[u],f=e[d];if(f===void 0)continue;let x=!0;if(typeof f=="number"?x=f===(d.startsWith("scale")?1:0):x=parseFloat(f)===0,!x||r){const g=Wj(f,Lh[d]);if(!x){c=!1;const p=d6[d]||d;i+=`${p}(${g}) `}r&&(a[d]=g)}}return i=i.trim(),r?i=r(a,c?"":i):c&&(i="none"),i}function $h(e,a,r){const{style:i,vars:c,transformOrigin:u}=e;let d=!1,f=!1;for(const x in a){const g=a[x];if(jl.has(x)){d=!0;continue}else if(Ch(x)){c[x]=g;continue}else{const p=Wj(g,Lh[x]);x.startsWith("origin")?(f=!0,u[x]=p):i[x]=p}}if(a.transform||(d||r?i.transform=f6(a,e.transform,r):i.transform&&(i.transform="none")),f){const{originX:x="50%",originY:g="50%",originZ:p=0}=u;i.transformOrigin=`${x} ${g} ${p}`}}const qh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cN(e,a,r){for(const i in a)!ss(a[i])&&!oN(i,r)&&(e[i]=a[i])}function h6({transformTemplate:e},a){return y.useMemo(()=>{const r=qh();return $h(r,a,e),Object.assign({},r.vars,r.style)},[a])}function x6(e,a){const r=e.style||{},i={};return cN(i,r,e),Object.assign(i,h6(e,a)),i}function g6(e,a){const r={},i=x6(e,a);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const p6={offset:"stroke-dashoffset",array:"stroke-dasharray"},b6={offset:"strokeDashoffset",array:"strokeDasharray"};function y6(e,a,r=1,i=0,c=!0){e.pathLength=1;const u=c?p6:b6;e[u.offset]=Be.transform(-i);const d=Be.transform(a),f=Be.transform(r);e[u.array]=`${d} ${f}`}function uN(e,{attrX:a,attrY:r,attrScale:i,pathLength:c,pathSpacing:u=1,pathOffset:d=0,...f},x,g,p){if($h(e,f,g),x){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:b,style:v}=e;b.transform&&(v.transform=b.transform,delete b.transform),(v.transform||b.transformOrigin)&&(v.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete b.transformBox),a!==void 0&&(b.x=a),r!==void 0&&(b.y=r),i!==void 0&&(b.scale=i),c!==void 0&&y6(b,c,u,d,!1)}const dN=()=>({...qh(),attrs:{}}),mN=e=>typeof e=="string"&&e.toLowerCase()==="svg";function v6(e,a,r,i){const c=y.useMemo(()=>{const u=dN();return uN(u,a,mN(i),e.transformTemplate,e.style),{...u.attrs,style:{...u.style}}},[a]);if(e.style){const u={};cN(u,e.style,e),c.style={...u,...c.style}}return c}const j6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fh(e){return typeof e!="string"||e.includes("-")?!1:!!(j6.indexOf(e)>-1||/[A-Z]/u.test(e))}function N6(e,a,r,{latestValues:i},c,u=!1){const f=(Fh(e)?v6:g6)(a,i,c,e),x=i6(a,typeof e=="string",u),g=e!==y.Fragment?{...x,...f,ref:r}:{},{children:p}=a,b=y.useMemo(()=>ss(p)?p.get():p,[p]);return y.createElement(e,{...g,children:b})}function Ub(e){const a=[{},{}];return e?.values.forEach((r,i)=>{a[0][i]=r.get(),a[1][i]=r.getVelocity()}),a}function Ih(e,a,r,i){if(typeof a=="function"){const[c,u]=Ub(i);a=a(r!==void 0?r:e.custom,c,u)}if(typeof a=="string"&&(a=e.variants&&e.variants[a]),typeof a=="function"){const[c,u]=Ub(i);a=a(r!==void 0?r:e.custom,c,u)}return a}function Mc(e){return ss(e)?e.get():e}function w6({scrapeMotionValuesFromProps:e,createRenderState:a},r,i,c){return{latestValues:S6(r,i,c,e),renderState:a()}}function S6(e,a,r,i){const c={},u=i(e,{});for(const v in u)c[v]=Mc(u[v]);let{initial:d,animate:f}=e;const x=au(e),g=iN(e);a&&g&&!x&&e.inherit!==!1&&(d===void 0&&(d=a.initial),f===void 0&&(f=a.animate));let p=r?r.initial===!1:!1;p=p||d===!1;const b=p?f:d;if(b&&typeof b!="boolean"&&!su(b)){const v=Array.isArray(b)?b:[b];for(let S=0;S<v.length;S++){const T=Ih(e,v[S]);if(T){const{transitionEnd:M,transition:_,...C}=T;for(const j in C){let N=C[j];if(Array.isArray(N)){const A=p?N.length-1:0;N=N[A]}N!==null&&(c[j]=N)}for(const j in M)c[j]=M[j]}}}return c}const fN=e=>(a,r)=>{const i=y.useContext(tu),c=y.useContext(ph),u=()=>w6(e,a,i,c);return r?u():nC(u)};function Hh(e,a,r){const{style:i}=e,c={};for(const u in i)(ss(i[u])||a.style&&ss(a.style[u])||oN(u,e)||r?.getValue(u)?.liveStyle!==void 0)&&(c[u]=i[u]);return c}const C6=fN({scrapeMotionValuesFromProps:Hh,createRenderState:qh});function hN(e,a,r){const i=Hh(e,a,r);for(const c in e)if(ss(e[c])||ss(a[c])){const u=vl.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;i[u]=e[c]}return i}const A6=fN({scrapeMotionValuesFromProps:hN,createRenderState:dN}),E6=Symbol.for("motionComponentSymbol");function al(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function T6(e,a,r){return y.useCallback(i=>{i&&e.onMount&&e.onMount(i),a&&(i?a.mount(i):a.unmount()),r&&(typeof r=="function"?r(i):al(r)&&(r.current=i))},[a])}const Yh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),D6="framerAppearId",xN="data-"+Yh(D6),gN=y.createContext({});function k6(e,a,r,i,c){const{visualElement:u}=y.useContext(tu),d=y.useContext(rN),f=y.useContext(ph),x=y.useContext(nN).reducedMotion,g=y.useRef(null);i=i||d.renderer,!g.current&&i&&(g.current=i(e,{visualState:a,parent:u,props:r,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:x}));const p=g.current,b=y.useContext(gN);p&&!p.projection&&c&&(p.type==="html"||p.type==="svg")&&R6(g.current,r,c,b);const v=y.useRef(!1);y.useInsertionEffect(()=>{p&&v.current&&p.update(r,f)});const S=r[xN],T=y.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return rC(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),T.current&&p.animationState&&p.animationState.animateChanges())}),y.useEffect(()=>{p&&(!T.current&&p.animationState&&p.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),T.current=!1),p.enteringChildren=void 0)}),p}function R6(e,a,r,i){const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:x,layoutRoot:g,layoutCrossfade:p}=a;e.projection=new r(e.latestValues,a["data-framer-portal-id"]?void 0:pN(e.parent)),e.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&al(f),visualElement:e,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:x,layoutRoot:g})}function pN(e){if(e)return e.options.allowProjection!==!1?e.projection:pN(e.parent)}function qm(e,{forwardMotionProps:a=!1}={},r,i){r&&n6(r);const c=Fh(e)?A6:C6;function u(f,x){let g;const p={...y.useContext(nN),...f,layoutId:M6(f)},{isStatic:b}=p,v=c6(f),S=c(f,b);if(!b&&gh){_6();const T=z6(p);g=T.MeasureLayout,v.visualElement=k6(e,S,p,i,T.ProjectionNode)}return t.jsxs(tu.Provider,{value:v,children:[g&&v.visualElement?t.jsx(g,{visualElement:v.visualElement,...p}):null,N6(e,f,T6(S,v.visualElement,x),S,b,a)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=y.forwardRef(u);return d[E6]=e,d}function M6({layoutId:e}){const a=y.useContext(hj).id;return a&&e!==void 0?a+"-"+e:e}function _6(e,a){y.useContext(rN).strict}function z6(e){const{drag:a,layout:r}=fl;if(!a&&!r)return{};const i={...a,...r};return{MeasureLayout:a?.isEnabled(e)||r?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function O6(e,a){if(typeof Proxy>"u")return qm;const r=new Map,i=(u,d)=>qm(u,d,e,a),c=(u,d)=>i(u,d);return new Proxy(c,{get:(u,d)=>d==="create"?i:(r.has(d)||r.set(d,qm(d,void 0,e,a)),r.get(d))})}function bN({top:e,left:a,right:r,bottom:i}){return{x:{min:a,max:r},y:{min:e,max:i}}}function L6({x:e,y:a}){return{top:a.min,right:e.max,bottom:a.max,left:e.min}}function V6(e,a){if(!a)return e;const r=a({x:e.left,y:e.top}),i=a({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function Fm(e){return e===void 0||e===1}function Yf({scale:e,scaleX:a,scaleY:r}){return!Fm(e)||!Fm(a)||!Fm(r)}function Kn(e){return Yf(e)||yN(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yN(e){return Bb(e.x)||Bb(e.y)}function Bb(e){return e&&e!=="0%"}function Ic(e,a,r){const i=e-r,c=a*i;return r+c}function $b(e,a,r,i,c){return c!==void 0&&(e=Ic(e,c,i)),Ic(e,r,i)+a}function Zf(e,a=0,r=1,i,c){e.min=$b(e.min,a,r,i,c),e.max=$b(e.max,a,r,i,c)}function vN(e,{x:a,y:r}){Zf(e.x,a.translate,a.scale,a.originPoint),Zf(e.y,r.translate,r.scale,r.originPoint)}const qb=.999999999999,Fb=1.0000000000001;function P6(e,a,r,i=!1){const c=r.length;if(!c)return;a.x=a.y=1;let u,d;for(let f=0;f<c;f++){u=r[f],d=u.projectionDelta;const{visualElement:x}=u.options;x&&x.props.style&&x.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&rl(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(a.x*=d.x.scale,a.y*=d.y.scale,vN(e,d)),i&&Kn(u.latestValues)&&rl(e,u.latestValues))}a.x<Fb&&a.x>qb&&(a.x=1),a.y<Fb&&a.y>qb&&(a.y=1)}function nl(e,a){e.min=e.min+a,e.max=e.max+a}function Ib(e,a,r,i,c=.5){const u=bt(e.min,e.max,c);Zf(e,a,r,u,i)}function rl(e,a){Ib(e.x,a.x,a.scaleX,a.scale,a.originX),Ib(e.y,a.y,a.scaleY,a.scale,a.originY)}function jN(e,a){return bN(V6(e.getBoundingClientRect(),a))}function U6(e,a,r){const i=jN(e,r),{scroll:c}=a;return c&&(nl(i.x,c.offset.x),nl(i.y,c.offset.y)),i}const Hb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ll=()=>({x:Hb(),y:Hb()}),Yb=()=>({min:0,max:0}),At=()=>({x:Yb(),y:Yb()}),Gf={current:null},NN={current:!1};function B6(){if(NN.current=!0,!!gh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),a=()=>Gf.current=e.matches;e.addEventListener("change",a),a()}else Gf.current=!1}const $6=new WeakMap;function q6(e,a,r){for(const i in a){const c=a[i],u=r[i];if(ss(c))e.addValue(i,c);else if(ss(u))e.addValue(i,ml(c,{owner:e}));else if(u!==c)if(e.hasValue(i)){const d=e.getValue(i);d.liveStyle===!0?d.jump(c):d.hasAnimated||d.set(c)}else{const d=e.getStaticValue(i);e.addValue(i,ml(d!==void 0?d:c,{owner:e}))}}for(const i in r)a[i]===void 0&&e.removeValue(i);return a}const Zb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class F6{scrapeMotionValuesFromProps(a,r,i){return{}}constructor({parent:a,props:r,presenceContext:i,reducedMotionConfig:c,blockInitialAnimation:u,visualState:d},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=gs.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ft.render(this.render,!1,!0))};const{latestValues:x,renderState:g}=d;this.latestValues=x,this.baseTarget={...x},this.initialValues=r.initial?{...x}:{},this.renderState=g,this.parent=a,this.props=r,this.presenceContext=i,this.depth=a?a.depth+1:0,this.reducedMotionConfig=c,this.options=f,this.blockInitialAnimation=!!u,this.isControllingVariants=au(r),this.isVariantNode=iN(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:p,...b}=this.scrapeMotionValuesFromProps(r,{},this);for(const v in b){const S=b[v];x[v]!==void 0&&ss(S)&&S.set(x[v])}}mount(a){this.current=a,$6.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),NN.current||B6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gf.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Nn(this.notifyUpdate),Nn(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const r=this.features[a];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,r){this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();const i=jl.has(a);i&&this.onBindTransform&&this.onBindTransform();const c=r.on("change",d=>{this.latestValues[a]=d,this.props.onUpdate&&ft.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,a,r)),this.valueSubscriptions.set(a,()=>{c(),u&&u(),r.owner&&r.stop()})}sortNodePosition(a){return!this.current||!this.sortInstanceNodePosition||this.type!==a.type?0:this.sortInstanceNodePosition(this.current,a.current)}updateFeatures(){let a="animation";for(a in fl){const r=fl[a];if(!r)continue;const{isEnabled:i,Feature:c}=r;if(!this.features[a]&&c&&i(this.props)&&(this.features[a]=new c(this)),this.features[a]){const u=this.features[a];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,r){this.latestValues[a]=r}update(a,r){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<Zb.length;i++){const c=Zb[i];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const u="on"+c,d=a[u];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=q6(this,this.scrapeMotionValuesFromProps(a,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(a),()=>r.variantChildren.delete(a)}addValue(a,r){const i=this.values.get(a);r!==i&&(i&&this.removeValue(a),this.bindToMotionValue(a,r),this.values.set(a,r),this.latestValues[a]=r.get())}removeValue(a){this.values.delete(a);const r=this.valueSubscriptions.get(a);r&&(r(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,r){if(this.props.values&&this.props.values[a])return this.props.values[a];let i=this.values.get(a);return i===void 0&&r!==void 0&&(i=ml(r===null?void 0:r,{owner:this}),this.addValue(a,i)),i}readValue(a,r){let i=this.latestValues[a]!==void 0||!this.current?this.latestValues[a]:this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options);return i!=null&&(typeof i=="string"&&(xj(i)||pj(i))?i=parseFloat(i):!s6(i)&&wn.test(r)&&(i=Jj(a,r)),this.setBaseTarget(a,ss(i)?i.get():i)),ss(i)?i.get():i}setBaseTarget(a,r){this.baseTarget[a]=r}getBaseTarget(a){const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const u=Ih(this.props,r,this.presenceContext?.custom);u&&(i=u[a])}if(r&&i!==void 0)return i;const c=this.getBaseTargetFromProps(this.props,a);return c!==void 0&&!ss(c)?c:this.initialValues[a]!==void 0&&i===void 0?void 0:this.baseTarget[a]}on(a,r){return this.events[a]||(this.events[a]=new Nh),this.events[a].add(r)}notify(a,...r){this.events[a]&&this.events[a].notify(...r)}scheduleRenderMicrotask(){Vh.render(this.render)}}class wN extends F6{constructor(){super(...arguments),this.KeyframeResolver=FA}sortInstanceNodePosition(a,r){return a.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(a,r){return a.style?a.style[r]:void 0}removeValueFromRenderState(a,{vars:r,style:i}){delete r[a],delete i[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:a}=this.props;ss(a)&&(this.childSubscription=a.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function SN(e,{style:a,vars:r},i,c){const u=e.style;let d;for(d in a)u[d]=a[d];c?.applyProjectionStyles(u,i);for(d in r)u.setProperty(d,r[d])}function I6(e){return window.getComputedStyle(e)}class H6 extends wN{constructor(){super(...arguments),this.type="html",this.renderInstance=SN}readValueFromInstance(a,r){if(jl.has(r))return this.projection?.isProjecting?Uf(r):oA(a,r);{const i=I6(a),c=(Ch(r)?i.getPropertyValue(r):i[r])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(a,{transformPagePoint:r}){return jN(a,r)}build(a,r,i){$h(a,r,i.transformTemplate)}scrapeMotionValuesFromProps(a,r,i){return Hh(a,r,i)}}const CN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Y6(e,a,r,i){SN(e,a,void 0,i);for(const c in a.attrs)e.setAttribute(CN.has(c)?c:Yh(c),a.attrs[c])}class Z6 extends wN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=At}getBaseTargetFromProps(a,r){return a[r]}readValueFromInstance(a,r){if(jl.has(r)){const i=Qj(r);return i&&i.default||0}return r=CN.has(r)?r:Yh(r),a.getAttribute(r)}scrapeMotionValuesFromProps(a,r,i){return hN(a,r,i)}build(a,r,i){uN(a,r,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(a,r,i,c){Y6(a,r,i,c)}mount(a){this.isSVGTag=mN(a.tagName),super.mount(a)}}const G6=(e,a)=>Fh(e)?new Z6(a):new H6(a,{allowProjection:e!==y.Fragment});function cl(e,a,r){const i=e.getProps();return Ih(i,a,r!==void 0?r:i.custom,e)}const Kf=e=>Array.isArray(e);function K6(e,a,r){e.hasValue(a)?e.getValue(a).set(r):e.addValue(a,ml(r))}function X6(e){return Kf(e)?e[e.length-1]||0:e}function Q6(e,a){const r=cl(e,a);let{transitionEnd:i={},transition:c={},...u}=r||{};u={...u,...i};for(const d in u){const f=X6(u[d]);K6(e,d,f)}}function J6(e){return!!(ss(e)&&e.add)}function Xf(e,a){const r=e.getValue("willChange");if(J6(r))return r.add(a);if(!r&&La.WillChange){const i=new La.WillChange("auto");e.addValue("willChange",i),i.add(a)}}function AN(e){return e.props[xN]}const W6=e=>e!==null;function e3(e,{repeat:a,repeatType:r="loop"},i){const c=e.filter(W6),u=a&&r!=="loop"&&a%2===1?0:c.length-1;return c[u]}const t3={type:"spring",stiffness:500,damping:25,restSpeed:10},s3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),a3={type:"keyframes",duration:.8},n3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r3=(e,{keyframes:a})=>a.length>2?a3:jl.has(e)?e.startsWith("scale")?s3(a[1]):t3:n3;function l3({when:e,delay:a,delayChildren:r,staggerChildren:i,staggerDirection:c,repeat:u,repeatType:d,repeatDelay:f,from:x,elapsed:g,...p}){return!!Object.keys(p).length}const Zh=(e,a,r,i={},c,u)=>d=>{const f=Oh(i,e)||{},x=f.delay||i.delay||0;let{elapsed:g=0}=i;g=g-ia(x);const p={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:a.getVelocity(),...f,delay:-g,onUpdate:v=>{a.set(v),f.onUpdate&&f.onUpdate(v)},onComplete:()=>{d(),f.onComplete&&f.onComplete()},name:e,motionValue:a,element:u?void 0:c};l3(f)||Object.assign(p,r3(e,p)),p.duration&&(p.duration=ia(p.duration)),p.repeatDelay&&(p.repeatDelay=ia(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let b=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(If(p),p.delay===0&&(b=!0)),(La.instantAnimations||La.skipAnimations)&&(b=!0,If(p),p.delay=0),p.allowFlatten=!f.type&&!f.ease,b&&!u&&a.get()!==void 0){const v=e3(p.keyframes,f);if(v!==void 0){ft.update(()=>{p.onUpdate(v),p.onComplete()});return}}return f.isSync?new _h(p):new RA(p)};function i3({protectedKeys:e,needsAnimating:a},r){const i=e.hasOwnProperty(r)&&a[r]!==!0;return a[r]=!1,i}function EN(e,a,{delay:r=0,transitionOverride:i,type:c}={}){let{transition:u=e.getDefaultTransition(),transitionEnd:d,...f}=a;i&&(u=i);const x=[],g=c&&e.animationState&&e.animationState.getState()[c];for(const p in f){const b=e.getValue(p,e.latestValues[p]??null),v=f[p];if(v===void 0||g&&i3(g,p))continue;const S={delay:r,...Oh(u||{},p)},T=b.get();if(T!==void 0&&!b.isAnimating&&!Array.isArray(v)&&v===T&&!S.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const C=AN(e);if(C){const j=window.MotionHandoffAnimation(C,p,ft);j!==null&&(S.startTime=j,M=!0)}}Xf(e,p),b.start(Zh(p,b,v,e.shouldReduceMotion&&Gj.has(p)?{type:!1}:S,e,M));const _=b.animation;_&&x.push(_)}return d&&Promise.all(x).then(()=>{ft.update(()=>{d&&Q6(e,d)})}),x}function TN(e,a,r,i=0,c=1){const u=Array.from(e).sort((g,p)=>g.sortNodePosition(p)).indexOf(a),d=e.size,f=(d-1)*i;return typeof r=="function"?r(u,d):c===1?u*i:f-u*i}function Qf(e,a,r={}){const i=cl(e,a,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(c=r.transitionOverride);const u=i?()=>Promise.all(EN(e,i,r)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(x=0)=>{const{delayChildren:g=0,staggerChildren:p,staggerDirection:b}=c;return o3(e,a,x,g,p,b,r)}:()=>Promise.resolve(),{when:f}=c;if(f){const[x,g]=f==="beforeChildren"?[u,d]:[d,u];return x().then(()=>g())}else return Promise.all([u(),d(r.delay)])}function o3(e,a,r=0,i=0,c=0,u=1,d){const f=[];for(const x of e.variantChildren)x.notify("AnimationStart",a),f.push(Qf(x,a,{...d,delay:r+(typeof i=="function"?0:i)+TN(e.variantChildren,x,i,c,u)}).then(()=>x.notify("AnimationComplete",a)));return Promise.all(f)}function c3(e,a,r={}){e.notify("AnimationStart",a);let i;if(Array.isArray(a)){const c=a.map(u=>Qf(e,u,r));i=Promise.all(c)}else if(typeof a=="string")i=Qf(e,a,r);else{const c=typeof a=="function"?cl(e,a,r.custom):a;i=Promise.all(EN(e,c,r))}return i.then(()=>{e.notify("AnimationComplete",a)})}function DN(e,a){if(!Array.isArray(a))return!1;const r=a.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(a[i]!==e[i])return!1;return!0}const u3=Bh.length;function kN(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?kN(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const a={};for(let r=0;r<u3;r++){const i=Bh[r],c=e.props[i];(Fi(c)||c===!1)&&(a[i]=c)}return a}const d3=[...Uh].reverse(),m3=Uh.length;function f3(e){return a=>Promise.all(a.map(({animation:r,options:i})=>c3(e,r,i)))}function h3(e){let a=f3(e),r=Gb(),i=!0;const c=x=>(g,p)=>{const b=cl(e,p,x==="exit"?e.presenceContext?.custom:void 0);if(b){const{transition:v,transitionEnd:S,...T}=b;g={...g,...T,...S}}return g};function u(x){a=x(e)}function d(x){const{props:g}=e,p=kN(e.parent)||{},b=[],v=new Set;let S={},T=1/0;for(let _=0;_<m3;_++){const C=d3[_],j=r[C],N=g[C]!==void 0?g[C]:p[C],A=Fi(N),O=C===x?j.isActive:null;O===!1&&(T=_);let U=N===p[C]&&N!==g[C]&&A;if(U&&i&&e.manuallyAnimateOnMount&&(U=!1),j.protectedKeys={...S},!j.isActive&&O===null||!N&&!j.prevProp||su(N)||typeof N=="boolean")continue;const D=x3(j.prevProp,N);let z=D||C===x&&j.isActive&&!U&&A||_>T&&A,P=!1;const se=Array.isArray(N)?N:[N];let X=se.reduce(c(C),{});O===!1&&(X={});const{prevResolvedValues:R={}}=j,Q={...R,...X},ae=ce=>{z=!0,v.has(ce)&&(P=!0,v.delete(ce)),j.needsAnimating[ce]=!0;const J=e.getValue(ce);J&&(J.liveStyle=!1)};for(const ce in Q){const J=X[ce],W=R[ce];if(S.hasOwnProperty(ce))continue;let L=!1;Kf(J)&&Kf(W)?L=!DN(J,W):L=J!==W,L?J!=null?ae(ce):v.add(ce):J!==void 0&&v.has(ce)?ae(ce):j.protectedKeys[ce]=!0}j.prevProp=N,j.prevResolvedValues=X,j.isActive&&(S={...S,...X}),i&&e.blockInitialAnimation&&(z=!1);const te=U&&D;z&&(!te||P)&&b.push(...se.map(ce=>{const J={type:C};if(typeof ce=="string"&&i&&!te&&e.manuallyAnimateOnMount&&e.parent){const{parent:W}=e,L=cl(W,ce);if(W.enteringChildren&&L){const{delayChildren:ne}=L.transition||{};J.delay=TN(W.enteringChildren,e,ne)}}return{animation:ce,options:J}}))}if(v.size){const _={};if(typeof g.initial!="boolean"){const C=cl(e,Array.isArray(g.initial)?g.initial[0]:g.initial);C&&C.transition&&(_.transition=C.transition)}v.forEach(C=>{const j=e.getBaseTarget(C),N=e.getValue(C);N&&(N.liveStyle=!0),_[C]=j??null}),b.push({animation:_})}let M=!!b.length;return i&&(g.initial===!1||g.initial===g.animate)&&!e.manuallyAnimateOnMount&&(M=!1),i=!1,M?a(b):Promise.resolve()}function f(x,g){if(r[x].isActive===g)return Promise.resolve();e.variantChildren?.forEach(b=>b.animationState?.setActive(x,g)),r[x].isActive=g;const p=d(x);for(const b in r)r[b].protectedKeys={};return p}return{animateChanges:d,setActive:f,setAnimateFunction:u,getState:()=>r,reset:()=>{r=Gb(),i=!0}}}function x3(e,a){return typeof a=="string"?a!==e:Array.isArray(a)?!DN(a,e):!1}function Gn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Gb(){return{animate:Gn(!0),whileInView:Gn(),whileHover:Gn(),whileTap:Gn(),whileDrag:Gn(),whileFocus:Gn(),exit:Gn()}}class Cn{constructor(a){this.isMounted=!1,this.node=a}update(){}}class g3 extends Cn{constructor(a){super(a),a.animationState||(a.animationState=h3(a))}updateAnimationControlsSubscription(){const{animate:a}=this.node.getProps();su(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:a}=this.node.getProps(),{animate:r}=this.node.prevProps||{};a!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let p3=0;class b3 extends Cn{constructor(){super(...arguments),this.id=p3++}update(){if(!this.node.presenceContext)return;const{isPresent:a,onExitComplete:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===i)return;const c=this.node.animationState.setActive("exit",!a);r&&!a&&c.then(()=>{r(this.id)})}mount(){const{register:a,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),a&&(this.unmount=a(this.id))}unmount(){}}const y3={animation:{Feature:g3},exit:{Feature:b3}};function Hi(e,a,r,i={passive:!0}){return e.addEventListener(a,r,i),()=>e.removeEventListener(a,r)}function to(e){return{point:{x:e.pageX,y:e.pageY}}}const v3=e=>a=>Ph(a)&&e(a,to(a));function Di(e,a,r,i){return Hi(e,a,v3(r),i)}const RN=1e-4,j3=1-RN,N3=1+RN,MN=.01,w3=0-MN,S3=0+MN;function ls(e){return e.max-e.min}function C3(e,a,r){return Math.abs(e-a)<=r}function Kb(e,a,r,i=.5){e.origin=i,e.originPoint=bt(a.min,a.max,e.origin),e.scale=ls(r)/ls(a),e.translate=bt(r.min,r.max,e.origin)-e.originPoint,(e.scale>=j3&&e.scale<=N3||isNaN(e.scale))&&(e.scale=1),(e.translate>=w3&&e.translate<=S3||isNaN(e.translate))&&(e.translate=0)}function ki(e,a,r,i){Kb(e.x,a.x,r.x,i?i.originX:void 0),Kb(e.y,a.y,r.y,i?i.originY:void 0)}function Xb(e,a,r){e.min=r.min+a.min,e.max=e.min+ls(a)}function A3(e,a,r){Xb(e.x,a.x,r.x),Xb(e.y,a.y,r.y)}function Qb(e,a,r){e.min=a.min-r.min,e.max=e.min+ls(a)}function Ri(e,a,r){Qb(e.x,a.x,r.x),Qb(e.y,a.y,r.y)}function Us(e){return[e("x"),e("y")]}const _N=({current:e})=>e?e.ownerDocument.defaultView:null,Jb=(e,a)=>Math.abs(e-a);function E3(e,a){const r=Jb(e.x,a.x),i=Jb(e.y,a.y);return Math.sqrt(r**2+i**2)}class zN{constructor(a,r,{transformPagePoint:i,contextWindow:c=window,dragSnapToOrigin:u=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Hm(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,T=E3(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!T)return;const{point:M}=v,{timestamp:_}=Kt;this.history.push({...M,timestamp:_});const{onStart:C,onMove:j}=this.handlers;S||(C&&C(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,v)},this.handlePointerMove=(v,S)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Im(S,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(v,S)=>{this.end();const{onEnd:T,onSessionEnd:M,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Hm(v.type==="pointercancel"?this.lastMoveEventInfo:Im(S,this.transformPagePoint),this.history);this.startEvent&&T&&T(v,C),M&&M(v,C)},!Ph(a))return;this.dragSnapToOrigin=u,this.handlers=r,this.transformPagePoint=i,this.distanceThreshold=d,this.contextWindow=c||window;const f=to(a),x=Im(f,this.transformPagePoint),{point:g}=x,{timestamp:p}=Kt;this.history=[{...g,timestamp:p}];const{onSessionStart:b}=r;b&&b(a,Hm(x,this.history)),this.removeListeners=Ji(Di(this.contextWindow,"pointermove",this.handlePointerMove),Di(this.contextWindow,"pointerup",this.handlePointerUp),Di(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),Nn(this.updatePoint)}}function Im(e,a){return a?{point:a(e.point)}:e}function Wb(e,a){return{x:e.x-a.x,y:e.y-a.y}}function Hm({point:e},a){return{point:e,delta:Wb(e,ON(a)),offset:Wb(e,T3(a)),velocity:D3(a,.1)}}function T3(e){return e[0]}function ON(e){return e[e.length-1]}function D3(e,a){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null;const c=ON(e);for(;r>=0&&(i=e[r],!(c.timestamp-i.timestamp>ia(a)));)r--;if(!i)return{x:0,y:0};const u=oa(c.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const d={x:(c.x-i.x)/u,y:(c.y-i.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function k3(e,{min:a,max:r},i){return a!==void 0&&e<a?e=i?bt(a,e,i.min):Math.max(e,a):r!==void 0&&e>r&&(e=i?bt(r,e,i.max):Math.min(e,r)),e}function ey(e,a,r){return{min:a!==void 0?e.min+a:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function R3(e,{top:a,left:r,bottom:i,right:c}){return{x:ey(e.x,r,c),y:ey(e.y,a,i)}}function ty(e,a){let r=a.min-e.min,i=a.max-e.max;return a.max-a.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function M3(e,a){return{x:ty(e.x,a.x),y:ty(e.y,a.y)}}function _3(e,a){let r=.5;const i=ls(e),c=ls(a);return c>i?r=Bi(a.min,a.max-i,e.min):i>c&&(r=Bi(e.min,e.max-c,a.min)),Oa(0,1,r)}function z3(e,a){const r={};return a.min!==void 0&&(r.min=a.min-e.min),a.max!==void 0&&(r.max=a.max-e.min),r}const Jf=.35;function O3(e=Jf){return e===!1?e=0:e===!0&&(e=Jf),{x:sy(e,"left","right"),y:sy(e,"top","bottom")}}function sy(e,a,r){return{min:ay(e,a),max:ay(e,r)}}function ay(e,a){return typeof e=="number"?e:e[a]||0}const L3=new WeakMap;class V3{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:r=!1,distanceThreshold:i}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const u=b=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(to(b).point)},d=(b,v)=>{const{drag:S,dragPropagation:T,onDragStart:M}=this.getProps();if(S&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=GA(S),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Us(C=>{let j=this.getAxisMotionValue(C).get()||0;if(ca.test(j)){const{projection:N}=this.visualElement;if(N&&N.layout){const A=N.layout.layoutBox[C];A&&(j=ls(A)*(parseFloat(j)/100))}}this.originPoint[C]=j}),M&&ft.postRender(()=>M(b,v)),Xf(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},f=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v;const{dragPropagation:S,dragDirectionLock:T,onDirectionLock:M,onDrag:_}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:C}=v;if(T&&this.currentDirection===null){this.currentDirection=P3(C),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",v.point,C),this.updateAxis("y",v.point,C),this.visualElement.render(),_&&_(b,v)},x=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v,this.stop(b,v),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Us(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new zN(a,{onSessionStart:u,onStart:d,onMove:f,onSessionEnd:x,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:_N(this.visualElement)})}stop(a,r){const i=a||this.latestPointerEvent,c=r||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!c||!i)return;const{velocity:d}=c;this.startAnimation(d);const{onDragEnd:f}=this.getProps();f&&ft.postRender(()=>f(i,c))}cancel(){this.isDragging=!1;const{projection:a,animationState:r}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(a,r,i){const{drag:c}=this.getProps();if(!i||!bc(a,c,this.currentDirection))return;const u=this.getAxisMotionValue(a);let d=this.originPoint[a]+i[a];this.constraints&&this.constraints[a]&&(d=k3(d,this.constraints[a],this.elastic[a])),u.set(d)}resolveConstraints(){const{dragConstraints:a,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;a&&al(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&i?this.constraints=R3(i.layoutBox,a):this.constraints=!1,this.elastic=O3(r),c!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Us(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=z3(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:a,onMeasureDragConstraints:r}=this.getProps();if(!a||!al(a))return!1;const i=a.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const u=U6(i,c.root,this.visualElement.getTransformPagePoint());let d=M3(c.layout.layoutBox,u);if(r){const f=r(L6(d));this.hasMutatedConstraints=!!f,f&&(d=bN(f))}return d}startAnimation(a){const{drag:r,dragMomentum:i,dragElastic:c,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:f}=this.getProps(),x=this.constraints||{},g=Us(p=>{if(!bc(p,r,this.currentDirection))return;let b=x&&x[p]||{};d&&(b={min:0,max:0});const v=c?200:1e6,S=c?40:1e7,T={type:"inertia",velocity:i?a[p]:0,bounceStiffness:v,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...u,...b};return this.startAxisValueAnimation(p,T)});return Promise.all(g).then(f)}startAxisValueAnimation(a,r){const i=this.getAxisMotionValue(a);return Xf(this.visualElement,a),i.start(Zh(a,i,0,r,this.visualElement,!1))}stopAnimation(){Us(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){Us(a=>this.getAxisMotionValue(a).animation?.pause())}getAnimationState(a){return this.getAxisMotionValue(a).animation?.state}getAxisMotionValue(a){const r=`_drag${a.toUpperCase()}`,i=this.visualElement.getProps(),c=i[r];return c||this.visualElement.getValue(a,(i.initial?i.initial[a]:void 0)||0)}snapToCursor(a){Us(r=>{const{drag:i}=this.getProps();if(!bc(r,i,this.currentDirection))return;const{projection:c}=this.visualElement,u=this.getAxisMotionValue(r);if(c&&c.layout){const{min:d,max:f}=c.layout.layoutBox[r];u.set(a[r]-bt(d,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:a,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!al(r)||!i||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Us(d=>{const f=this.getAxisMotionValue(d);if(f&&this.constraints!==!1){const x=f.get();c[d]=_3({min:x,max:x},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Us(d=>{if(!bc(d,a,null))return;const f=this.getAxisMotionValue(d),{min:x,max:g}=this.constraints[d];f.set(bt(x,g,c[d]))})}addListeners(){if(!this.visualElement.current)return;L3.set(this.visualElement,this);const a=this.visualElement.current,r=Di(a,"pointerdown",x=>{const{drag:g,dragListener:p=!0}=this.getProps();g&&p&&this.start(x)}),i=()=>{const{dragConstraints:x}=this.getProps();al(x)&&x.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,u=c.addEventListener("measure",i);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),ft.read(i);const d=Hi(window,"resize",()=>this.scalePositionWithinConstraints()),f=c.addEventListener("didUpdate",(({delta:x,hasLayoutChanged:g})=>{this.isDragging&&g&&(Us(p=>{const b=this.getAxisMotionValue(p);b&&(this.originPoint[p]+=x[p].translate,b.set(b.get()+x[p].translate))}),this.visualElement.render())}));return()=>{d(),r(),u(),f&&f()}}getProps(){const a=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:c=!1,dragConstraints:u=!1,dragElastic:d=Jf,dragMomentum:f=!0}=a;return{...a,drag:r,dragDirectionLock:i,dragPropagation:c,dragConstraints:u,dragElastic:d,dragMomentum:f}}}function bc(e,a,r){return(a===!0||a===e)&&(r===null||r===e)}function P3(e,a=10){let r=null;return Math.abs(e.y)>a?r="y":Math.abs(e.x)>a&&(r="x"),r}class U3 extends Cn{constructor(a){super(a),this.removeGroupControls=$s,this.removeListeners=$s,this.controls=new V3(a)}mount(){const{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$s}unmount(){this.removeGroupControls(),this.removeListeners()}}const ny=e=>(a,r)=>{e&&ft.postRender(()=>e(a,r))};class B3 extends Cn{constructor(){super(...arguments),this.removePointerDownListener=$s}onPointerDown(a){this.session=new zN(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_N(this.node)})}createPanHandlers(){const{onPanSessionStart:a,onPanStart:r,onPan:i,onPanEnd:c}=this.node.getProps();return{onSessionStart:ny(a),onStart:ny(r),onMove:i,onEnd:(u,d)=>{delete this.session,c&&ft.postRender(()=>c(u,d))}}}mount(){this.removePointerDownListener=Di(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _c={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ry(e,a){return a.max===a.min?0:e/(a.max-a.min)*100}const ji={correct:(e,a)=>{if(!a.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const r=ry(e,a.target.x),i=ry(e,a.target.y);return`${r}% ${i}%`}},$3={correct:(e,{treeScale:a,projectionDelta:r})=>{const i=e,c=wn.parse(e);if(c.length>5)return i;const u=wn.createTransformer(e),d=typeof c[0]!="number"?1:0,f=r.x.scale*a.x,x=r.y.scale*a.y;c[0+d]/=f,c[1+d]/=x;const g=bt(f,x,.5);return typeof c[2+d]=="number"&&(c[2+d]/=g),typeof c[3+d]=="number"&&(c[3+d]/=g),u(c)}};let Ym=!1;class q3 extends y.Component{componentDidMount(){const{visualElement:a,layoutGroup:r,switchLayoutGroup:i,layoutId:c}=this.props,{projection:u}=a;u6(F3),u&&(r.group&&r.group.add(u),i&&i.register&&c&&i.register(u),Ym&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),_c.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){const{layoutDependency:r,visualElement:i,drag:c,isPresent:u}=this.props,{projection:d}=i;return d&&(d.isPresent=u,Ym=!0,c||a.layoutDependency!==r||r===void 0||a.isPresent!==u?d.willUpdate():this.safeToRemove(),a.isPresent!==u&&(u?d.promote():d.relegate()||ft.postRender(()=>{const f=d.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),Vh.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:a,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:c}=a;Ym=!0,c&&(c.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(c),i&&i.deregister&&i.deregister(c))}safeToRemove(){const{safeToRemove:a}=this.props;a&&a()}render(){return null}}function LN(e){const[a,r]=a6(),i=y.useContext(hj);return t.jsx(q3,{...e,layoutGroup:i,switchLayoutGroup:y.useContext(gN),isPresent:a,safeToRemove:r})}const F3={borderRadius:{...ji,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ji,borderTopRightRadius:ji,borderBottomLeftRadius:ji,borderBottomRightRadius:ji,boxShadow:$3};function I3(e,a,r){const i=ss(e)?e:ml(e);return i.start(Zh("",i,a,r)),i.animation}const H3=(e,a)=>e.depth-a.depth;class Y3{constructor(){this.children=[],this.isDirty=!1}add(a){bh(this.children,a),this.isDirty=!0}remove(a){yh(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(H3),this.isDirty=!1,this.children.forEach(a)}}function Z3(e,a){const r=gs.now(),i=({timestamp:c})=>{const u=c-r;u>=a&&(Nn(i),e(u-a))};return ft.setup(i,!0),()=>Nn(i)}const VN=["TopLeft","TopRight","BottomLeft","BottomRight"],G3=VN.length,ly=e=>typeof e=="string"?parseFloat(e):e,iy=e=>typeof e=="number"||Be.test(e);function K3(e,a,r,i,c,u){c?(e.opacity=bt(0,r.opacity??1,X3(i)),e.opacityExit=bt(a.opacity??1,0,Q3(i))):u&&(e.opacity=bt(a.opacity??1,r.opacity??1,i));for(let d=0;d<G3;d++){const f=`border${VN[d]}Radius`;let x=oy(a,f),g=oy(r,f);if(x===void 0&&g===void 0)continue;x||(x=0),g||(g=0),x===0||g===0||iy(x)===iy(g)?(e[f]=Math.max(bt(ly(x),ly(g),i),0),(ca.test(g)||ca.test(x))&&(e[f]+="%")):e[f]=g}(a.rotate||r.rotate)&&(e.rotate=bt(a.rotate||0,r.rotate||0,i))}function oy(e,a){return e[a]!==void 0?e[a]:e.borderRadius}const X3=PN(0,.5,Cj),Q3=PN(.5,.95,$s);function PN(e,a,r){return i=>i<e?0:i>a?1:r(Bi(e,a,i))}function cy(e,a){e.min=a.min,e.max=a.max}function Ps(e,a){cy(e.x,a.x),cy(e.y,a.y)}function uy(e,a){e.translate=a.translate,e.scale=a.scale,e.originPoint=a.originPoint,e.origin=a.origin}function dy(e,a,r,i,c){return e-=a,e=Ic(e,1/r,i),c!==void 0&&(e=Ic(e,1/c,i)),e}function J3(e,a=0,r=1,i=.5,c,u=e,d=e){if(ca.test(a)&&(a=parseFloat(a),a=bt(d.min,d.max,a/100)-d.min),typeof a!="number")return;let f=bt(u.min,u.max,i);e===u&&(f-=a),e.min=dy(e.min,a,r,f,c),e.max=dy(e.max,a,r,f,c)}function my(e,a,[r,i,c],u,d){J3(e,a[r],a[i],a[c],a.scale,u,d)}const W3=["x","scaleX","originX"],eE=["y","scaleY","originY"];function fy(e,a,r,i){my(e.x,a,W3,r?r.x:void 0,i?i.x:void 0),my(e.y,a,eE,r?r.y:void 0,i?i.y:void 0)}function hy(e){return e.translate===0&&e.scale===1}function UN(e){return hy(e.x)&&hy(e.y)}function xy(e,a){return e.min===a.min&&e.max===a.max}function tE(e,a){return xy(e.x,a.x)&&xy(e.y,a.y)}function gy(e,a){return Math.round(e.min)===Math.round(a.min)&&Math.round(e.max)===Math.round(a.max)}function BN(e,a){return gy(e.x,a.x)&&gy(e.y,a.y)}function py(e){return ls(e.x)/ls(e.y)}function by(e,a){return e.translate===a.translate&&e.scale===a.scale&&e.originPoint===a.originPoint}class sE{constructor(){this.members=[]}add(a){bh(this.members,a),a.scheduleRender()}remove(a){if(yh(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(a){const r=this.members.findIndex(c=>a===c);if(r===0)return!1;let i;for(let c=r;c>=0;c--){const u=this.members[c];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(a,r){const i=this.lead;if(a!==i&&(this.prevLead=i,this.lead=a,a.show(),i)){i.instance&&i.scheduleRender(),a.scheduleRender(),a.resumeFrom=i,r&&(a.resumeFrom.preserveOpacity=!0),i.snapshot&&(a.snapshot=i.snapshot,a.snapshot.latestValues=i.animationValues||i.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0);const{crossfade:c}=a.options;c===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(a=>{const{options:r,resumingFrom:i}=a;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aE(e,a,r){let i="";const c=e.x.translate/a.x,u=e.y.translate/a.y,d=r?.z||0;if((c||u||d)&&(i=`translate3d(${c}px, ${u}px, ${d}px) `),(a.x!==1||a.y!==1)&&(i+=`scale(${1/a.x}, ${1/a.y}) `),r){const{transformPerspective:g,rotate:p,rotateX:b,rotateY:v,skewX:S,skewY:T}=r;g&&(i=`perspective(${g}px) ${i}`),p&&(i+=`rotate(${p}deg) `),b&&(i+=`rotateX(${b}deg) `),v&&(i+=`rotateY(${v}deg) `),S&&(i+=`skewX(${S}deg) `),T&&(i+=`skewY(${T}deg) `)}const f=e.x.scale*a.x,x=e.y.scale*a.y;return(f!==1||x!==1)&&(i+=`scale(${f}, ${x})`),i||"none"}const Zm=["","X","Y","Z"],nE=1e3;let rE=0;function Gm(e,a,r,i){const{latestValues:c}=a;c[e]&&(r[e]=c[e],a.setStaticValue(e,0),i&&(i[e]=0))}function $N(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:a}=e.options;if(!a)return;const r=AN(a);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:c,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ft,!(c||u))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&$N(i)}function qN({attachResizeListener:e,defaultParent:a,measureScroll:r,checkIsScrollRoot:i,resetTransform:c}){return class{constructor(d={},f=a?.()){this.id=rE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(oE),this.nodes.forEach(mE),this.nodes.forEach(fE),this.nodes.forEach(cE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let x=0;x<this.path.length;x++)this.path[x].shouldResetTransform=!0;this.root===this&&(this.nodes=new Y3)}addEventListener(d,f){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new Nh),this.eventHandlers.get(d).add(f)}notifyListeners(d,...f){const x=this.eventHandlers.get(d);x&&x.notify(...f)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=aN(d)&&!e6(d),this.instance=d;const{layoutId:f,layout:x,visualElement:g}=this.options;if(g&&!g.current&&g.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(x||f)&&(this.isLayoutDirty=!0),e){let p,b=0;const v=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{b=window.innerWidth}),e(d,()=>{const S=window.innerWidth;S!==b&&(b=S,this.root.updateBlockedByResize=!0,p&&p(),p=Z3(v,250),_c.hasAnimatedSinceResize&&(_c.hasAnimatedSinceResize=!1,this.nodes.forEach(jy)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||x)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:b,hasRelativeLayoutChanged:v,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||g.getDefaultTransition()||bE,{onLayoutAnimationStart:M,onLayoutAnimationComplete:_}=g.getProps(),C=!this.targetLayout||!BN(this.targetLayout,S),j=!b&&v;if(this.options.layoutRoot||this.resumeFrom||j||b&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Oh(T,"layout"),onPlay:M,onComplete:_};(g.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(p,j)}else b||jy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hE),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$N(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const b=this.path[p];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:f,layout:x}=this.options;if(f===void 0&&!x)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dE),this.nodes.forEach(lE),this.nodes.forEach(iE)):this.nodes.forEach(vy),this.clearAllSnapshots();const f=gs.now();Kt.delta=Oa(0,1e3/60,f-Kt.timestamp),Kt.timestamp=f,Kt.isProcessing=!0,Lm.update.process(Kt),Lm.preRender.process(Kt),Lm.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uE),this.sharedNodes.forEach(xE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ls(this.snapshot.measuredBox.x)&&!ls(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let x=0;x<this.path.length;x++)this.path[x].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(f=!1),f&&this.instance){const x=i(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:x,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:x}}}resetTransform(){if(!c)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!UN(this.projectionDelta),x=this.getTransformTemplate(),g=x?x(this.latestValues,""):void 0,p=g!==this.prevTransformTemplateValue;d&&this.instance&&(f||Kn(this.latestValues)||p)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const f=this.measurePageBox();let x=this.removeElementScroll(f);return d&&(x=this.removeTransform(x)),yE(x),{animationId:this.root.animationId,measuredBox:f,layoutBox:x,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return At();const f=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vE))){const{scroll:g}=this.root;g&&(nl(f.x,g.offset.x),nl(f.y,g.offset.y))}return f}removeElementScroll(d){const f=At();if(Ps(f,d),this.scroll?.wasRoot)return f;for(let x=0;x<this.path.length;x++){const g=this.path[x],{scroll:p,options:b}=g;g!==this.root&&p&&b.layoutScroll&&(p.wasRoot&&Ps(f,d),nl(f.x,p.offset.x),nl(f.y,p.offset.y))}return f}applyTransform(d,f=!1){const x=At();Ps(x,d);for(let g=0;g<this.path.length;g++){const p=this.path[g];!f&&p.options.layoutScroll&&p.scroll&&p!==p.root&&rl(x,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Kn(p.latestValues)&&rl(x,p.latestValues)}return Kn(this.latestValues)&&rl(x,this.latestValues),x}removeTransform(d){const f=At();Ps(f,d);for(let x=0;x<this.path.length;x++){const g=this.path[x];if(!g.instance||!Kn(g.latestValues))continue;Yf(g.latestValues)&&g.updateSnapshot();const p=At(),b=g.measurePageBox();Ps(p,b),fy(f,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,p)}return Kn(this.latestValues)&&fy(f,this.latestValues),f}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const x=!!this.resumingFrom||this!==f;if(!(d||x&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:b}=this.options;if(!(!this.layout||!(p||b))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Ri(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),A3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ps(this.target,this.layout.layoutBox),vN(this.target,this.targetDelta)):Ps(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Ri(this.relativeTargetOrigin,this.target,v.target),Ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Yf(this.parent.latestValues)||yN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),f=!!this.resumingFrom||this!==d;let x=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(x=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(x=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(x=!1),x)return;const{layout:g,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||p))return;Ps(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,v=this.treeScale.y;P6(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=At());const{target:S}=d;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uy(this.prevProjectionDelta.x,this.projectionDelta.x),uy(this.prevProjectionDelta.y,this.projectionDelta.y)),ki(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==v||!by(this.projectionDelta.x,this.prevProjectionDelta.x)||!by(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ll(),this.projectionDelta=ll(),this.projectionDeltaWithTransform=ll()}setAnimationOrigin(d,f=!1){const x=this.snapshot,g=x?x.latestValues:{},p={...this.latestValues},b=ll();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const v=At(),S=x?x.source:void 0,T=this.layout?this.layout.source:void 0,M=S!==T,_=this.getStack(),C=!_||_.members.length<=1,j=!!(M&&!C&&this.options.crossfade===!0&&!this.path.some(pE));this.animationProgress=0;let N;this.mixTargetDelta=A=>{const O=A/1e3;Ny(b.x,d.x,O),Ny(b.y,d.y,O),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ri(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gE(this.relativeTarget,this.relativeTargetOrigin,v,O),N&&tE(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=At()),Ps(N,this.relativeTarget)),M&&(this.animationValues=p,K3(p,g,this.latestValues,O,j,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Nn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{_c.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ml(0)),this.currentAnimation=I3(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),d.onUpdate&&d.onUpdate(f)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:f,target:x,layout:g,latestValues:p}=d;if(!(!f||!x||!g)){if(this!==d&&this.layout&&g&&FN(this.options.animationType,this.layout.layoutBox,g.layoutBox)){x=this.target||At();const b=ls(this.layout.layoutBox.x);x.x.min=d.target.x.min,x.x.max=x.x.min+b;const v=ls(this.layout.layoutBox.y);x.y.min=d.target.y.min,x.y.max=x.y.min+v}Ps(f,x),rl(f,p),ki(this.projectionDeltaWithTransform,this.layoutCorrected,f,p)}}registerSharedNode(d,f){this.sharedNodes.has(d)||this.sharedNodes.set(d,new sE),this.sharedNodes.get(d).add(f);const g=f.options.initialPromotionConfig;f.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(f):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:f,preserveFollowOpacity:x}={}){const g=this.getStack();g&&g.promote(this,x),d&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let f=!1;const{latestValues:x}=d;if((x.z||x.rotate||x.rotateX||x.rotateY||x.rotateZ||x.skewX||x.skewY)&&(f=!0),!f)return;const g={};x.z&&Gm("z",d,g,this.animationValues);for(let p=0;p<Zm.length;p++)Gm(`rotate${Zm[p]}`,d,g,this.animationValues),Gm(`skew${Zm[p]}`,d,g,this.animationValues);d.render();for(const p in g)d.setStaticValue(p,g[p]),this.animationValues&&(this.animationValues[p]=g[p]);d.scheduleRender()}applyProjectionStyles(d,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const x=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=Mc(f?.pointerEvents)||"",d.transform=x?x(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=Mc(f?.pointerEvents)||""),this.hasProjected&&!Kn(this.latestValues)&&(d.transform=x?x({},""):"none",this.hasProjected=!1);return}d.visibility="";const p=g.animationValues||g.latestValues;this.applyTransformsToTarget();let b=aE(this.projectionDeltaWithTransform,this.treeScale,p);x&&(b=x(p,b)),d.transform=b;const{x:v,y:S}=this.projectionDelta;d.transformOrigin=`${v.origin*100}% ${S.origin*100}% 0`,g.animationValues?d.opacity=g===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=g===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in Ii){if(p[T]===void 0)continue;const{correct:M,applyTo:_,isCSSVariable:C}=Ii[T],j=b==="none"?p[T]:M(p[T],g);if(_){const N=_.length;for(let A=0;A<N;A++)d[_[A]]=j}else C?this.options.visualElement.renderState.vars[T]=j:d[T]=j}this.options.layoutId&&(d.pointerEvents=g===this?Mc(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(yy),this.root.sharedNodes.clear()}}}function lE(e){e.updateLayout()}function iE(e){const a=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:c}=e.options,u=a.source!==e.layout.source;c==="size"?Us(p=>{const b=u?a.measuredBox[p]:a.layoutBox[p],v=ls(b);b.min=r[p].min,b.max=b.min+v}):FN(c,a.layoutBox,r)&&Us(p=>{const b=u?a.measuredBox[p]:a.layoutBox[p],v=ls(r[p]);b.max=b.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+v)});const d=ll();ki(d,r,a.layoutBox);const f=ll();u?ki(f,e.applyTransform(i,!0),a.measuredBox):ki(f,r,a.layoutBox);const x=!UN(d);let g=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:b,layout:v}=p;if(b&&v){const S=At();Ri(S,a.layoutBox,b.layoutBox);const T=At();Ri(T,r,v.layoutBox),BN(S,T)||(g=!0),p.options.layoutRoot&&(e.relativeTarget=T,e.relativeTargetOrigin=S,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:a,delta:f,layoutDelta:d,hasLayoutChanged:x,hasRelativeLayoutChanged:g})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function oE(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cE(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function uE(e){e.clearSnapshot()}function yy(e){e.clearMeasurements()}function vy(e){e.isLayoutDirty=!1}function dE(e){const{visualElement:a}=e.options;a&&a.getProps().onBeforeLayoutMeasure&&a.notify("BeforeLayoutMeasure"),e.resetTransform()}function jy(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function mE(e){e.resolveTargetDelta()}function fE(e){e.calcProjection()}function hE(e){e.resetSkewAndRotation()}function xE(e){e.removeLeadSnapshot()}function Ny(e,a,r){e.translate=bt(a.translate,0,r),e.scale=bt(a.scale,1,r),e.origin=a.origin,e.originPoint=a.originPoint}function wy(e,a,r,i){e.min=bt(a.min,r.min,i),e.max=bt(a.max,r.max,i)}function gE(e,a,r,i){wy(e.x,a.x,r.x,i),wy(e.y,a.y,r.y,i)}function pE(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const bE={duration:.45,ease:[.4,0,.1,1]},Sy=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Cy=Sy("applewebkit/")&&!Sy("chrome/")?Math.round:$s;function Ay(e){e.min=Cy(e.min),e.max=Cy(e.max)}function yE(e){Ay(e.x),Ay(e.y)}function FN(e,a,r){return e==="position"||e==="preserve-aspect"&&!C3(py(a),py(r),.2)}function vE(e){return e!==e.root&&e.scroll?.wasRoot}const jE=qN({attachResizeListener:(e,a)=>Hi(e,"resize",a),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Km={current:void 0},IN=qN({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Km.current){const e=new jE({});e.mount(window),e.setOptions({layoutScroll:!0}),Km.current=e}return Km.current},resetTransform:(e,a)=>{e.style.transform=a!==void 0?a:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),NE={pan:{Feature:B3},drag:{Feature:U3,ProjectionNode:IN,MeasureLayout:LN}};function Ey(e,a,r){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",r==="Start");const c="onHover"+r,u=i[c];u&&ft.postRender(()=>u(a,to(a)))}class wE extends Cn{mount(){const{current:a}=this.node;a&&(this.unmount=KA(a,(r,i)=>(Ey(this.node,i,"Start"),c=>Ey(this.node,c,"End"))))}unmount(){}}class SE extends Cn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch{a=!0}!a||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ji(Hi(this.node.current,"focus",()=>this.onFocus()),Hi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ty(e,a,r){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",r==="Start");const c="onTap"+(r==="End"?"":r),u=i[c];u&&ft.postRender(()=>u(a,to(a)))}class CE extends Cn{mount(){const{current:a}=this.node;a&&(this.unmount=WA(a,(r,i)=>(Ty(this.node,i,"Start"),(c,{success:u})=>Ty(this.node,c,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wf=new WeakMap,Xm=new WeakMap,AE=e=>{const a=Wf.get(e.target);a&&a(e)},EE=e=>{e.forEach(AE)};function TE({root:e,...a}){const r=e||document;Xm.has(r)||Xm.set(r,{});const i=Xm.get(r),c=JSON.stringify(a);return i[c]||(i[c]=new IntersectionObserver(EE,{root:e,...a})),i[c]}function DE(e,a,r){const i=TE(a);return Wf.set(e,r),i.observe(e),()=>{Wf.delete(e),i.unobserve(e)}}const kE={some:0,all:1};class RE extends Cn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:a={}}=this.node.getProps(),{root:r,margin:i,amount:c="some",once:u}=a,d={root:r?r.current:void 0,rootMargin:i,threshold:typeof c=="number"?c:kE[c]},f=x=>{const{isIntersecting:g}=x;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:p,onViewportLeave:b}=this.node.getProps(),v=g?p:b;v&&v(x)};return DE(this.node.current,d,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:a,prevProps:r}=this.node;["amount","margin","root"].some(ME(a,r))&&this.startObserver()}unmount(){}}function ME({viewport:e={}},{viewport:a={}}={}){return r=>e[r]!==a[r]}const _E={inView:{Feature:RE},tap:{Feature:CE},focus:{Feature:SE},hover:{Feature:wE}},zE={layout:{ProjectionNode:IN,MeasureLayout:LN}},OE={...y3,..._E,...NE,...zE},Ra=O6(OE,G6),hl="/assets/cyberschool-JCH6ZCdG.jpg",LE=()=>t.jsxs("div",{className:"min-h-screen bg-slate-900 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.08)_1px,transparent_0)] bg-[length:40px_40px]"}),t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[400px] bg-blue-600/10 rounded-full blur-3xl"}),t.jsxs("div",{className:"relative min-h-screen flex flex-col",children:[t.jsx("nav",{className:"w-full px-6 py-5",children:t.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:hl,alt:"Cyber School",className:"w-10 h-10 rounded-lg object-cover"}),t.jsx("span",{className:"text-lg font-semibold text-white",children:"Cyber School"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(mt,{to:"/login",className:"text-sm font-medium text-slate-300 hover:text-white transition-colors",children:"Connexion"}),t.jsx(mt,{to:"/register",className:"text-sm font-medium bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500 transition-colors",children:"Commencer"})]})]})}),t.jsx("section",{className:"flex-1 flex items-center justify-center px-6 py-16",children:t.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[t.jsx(Ra.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"mb-10",children:t.jsx("div",{className:"inline-block p-4 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10",children:t.jsx("img",{src:hl,alt:"Cyber School",className:"w-28 h-28 md:w-36 md:h-36 object-contain"})})}),t.jsxs(Ra.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[t.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-4 tracking-tight",children:"Cyber School"}),t.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-medium text-blue-400 mb-6",children:"La Gestion Scolaire Simplifie"}),t.jsx("p",{className:"text-lg text-slate-400 max-w-2xl mx-auto mb-4",children:"Plateforme intgre de gestion scolaire"}),t.jsx("p",{className:"text-base text-slate-500 max-w-xl mx-auto mb-10",children:"Grez lves, enseignants, notes, finances et emplois du temps en toute simplicit."})]}),t.jsxs(Ra.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"inline-flex items-center gap-2 bg-white/5 border border-white/10 rounded-full px-4 py-2 mb-10",children:[t.jsx("span",{className:"text-sm text-slate-400",children:"Powered by"}),t.jsx("span",{className:"text-sm font-semibold text-blue-400",children:"MSNET"})]}),t.jsx(Ra.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-16",children:t.jsx(mt,{to:"/login",children:t.jsxs(Ra.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-blue-600 text-white px-8 py-4 rounded-xl font-semibold text-lg flex items-center gap-3 mx-auto hover:bg-blue-500 transition-colors",children:["Commencer maintenant",t.jsx(Es,{className:"w-5 h-5"})]})})}),t.jsxs(Ra.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"grid md:grid-cols-3 gap-6 max-w-3xl mx-auto",children:[t.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:border-blue-500/30 transition-colors",children:[t.jsx("div",{className:"w-14 h-14 bg-blue-600/20 rounded-xl flex items-center justify-center mb-4 mx-auto",children:t.jsx(Qt,{className:"w-7 h-7 text-blue-400"})}),t.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"500+"}),t.jsx("div",{className:"text-sm text-slate-500",children:"tablissements"})]}),t.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:border-blue-500/30 transition-colors",children:[t.jsx("div",{className:"w-14 h-14 bg-blue-600/20 rounded-xl flex items-center justify-center mb-4 mx-auto",children:t.jsx(qs,{className:"w-7 h-7 text-blue-400"})}),t.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"50K+"}),t.jsx("div",{className:"text-sm text-slate-500",children:"tudiants"})]}),t.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:border-blue-500/30 transition-colors",children:[t.jsx("div",{className:"w-14 h-14 bg-blue-600/20 rounded-xl flex items-center justify-center mb-4 mx-auto",children:t.jsx(cj,{className:"w-7 h-7 text-blue-400"})}),t.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"99%"}),t.jsx("div",{className:"text-sm text-slate-500",children:"Satisfaction"})]})]})]})})]})]}),An=({type:e,title:a,message:r,isVisible:i,onClose:c,duration:u=5e3})=>{y.useEffect(()=>{if(i&&u>0){const x=setTimeout(()=>{c()},u);return()=>clearTimeout(x)}},[i,u,c]);const d=()=>{switch(e){case"success":return t.jsx(Bs,{className:"w-6 h-6 text-green-500"});case"error":return t.jsx(xh,{className:"w-6 h-6 text-red-500"});case"warning":return t.jsx(pn,{className:"w-6 h-6 text-yellow-500"});case"info":return t.jsx(dl,{className:"w-6 h-6 text-blue-500"});default:return t.jsx(dl,{className:"w-6 h-6 text-blue-500"})}},f=()=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return i?t.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full ${f()} border rounded-lg shadow-lg p-4 transform transition-all duration-300 ease-out`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[d(),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-semibold mb-1",children:a}),t.jsx("p",{className:"text-sm opacity-90",children:r})]}),t.jsx("button",{onClick:c,className:"flex-shrink-0 p-1 rounded-full hover:bg-black/10 transition-colors",children:t.jsx(Sn,{className:"w-4 h-4"})})]})}):null},VE=()=>{const{login:e}=Xi(),[a,r]=y.useState(!1),[i,c]=y.useState({email:"",password:"",rememberMe:!1}),[u,d]=y.useState({}),[f,x]=y.useState(!1),[g,p]=y.useState({type:"info",title:"",message:"",isVisible:!1}),b=(_,C,j)=>{p({type:_,title:C,message:j,isVisible:!0})},v=()=>{p(_=>({..._,isVisible:!1}))},S=_=>{const{name:C,value:j,type:N,checked:A}=_.target;c(O=>({...O,[C]:N==="checkbox"?A:j})),u[C]&&d(O=>({...O,[C]:""}))},T=()=>{const _={};return i.email?/\S+@\S+\.\S+/.test(i.email)||(_.email="L'email n'est pas valide"):_.email="L'email est requis",i.password?i.password.length<6&&(_.password="Minimum 6 caractres"):_.password="Le mot de passe est requis",d(_),Object.keys(_).length===0},M=async _=>{if(_.preventDefault(),T()){x(!0);try{const C=await pe.login({email:i.email,password:i.password});if(C.success&&C.data){const{user:j,access_token:N,refresh_token:A}=C.data;localStorage.setItem("user",JSON.stringify(j)),localStorage.setItem("token",N),localStorage.setItem("refreshToken",A),e(j,N,A),b("success","Connexion russie",`Bienvenue ${j.firstName} !`),setTimeout(()=>{window.location.href="/dashboard"},800)}else b("error","chec",C.error||"Email ou mot de passe incorrect.")}catch{b("error","Erreur","Impossible de se connecter au serveur.")}finally{x(!1)}}};return t.jsxs("div",{className:"min-h-screen bg-slate-900 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.08)_1px,transparent_0)] bg-[length:40px_40px]"}),t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[300px] bg-blue-600/10 rounded-full blur-3xl"}),t.jsxs("div",{className:"relative min-h-screen flex flex-col",children:[t.jsx("nav",{className:"w-full px-6 py-5",children:t.jsx("div",{className:"max-w-6xl mx-auto",children:t.jsxs(mt,{to:"/",className:"inline-flex items-center gap-2 text-slate-300 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 px-4 py-2 rounded-lg transition-colors",children:[t.jsx(eu,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"Retour"})]})})}),t.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-12",children:t.jsxs(Ra.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-block p-3 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 mb-6",children:t.jsx("img",{src:hl,alt:"Cyber School",className:"w-16 h-16 object-contain"})}),t.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Connexion"}),t.jsx("p",{className:"text-slate-400",children:"Accdez  votre espace"})]}),t.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-8",children:t.jsxs("form",{onSubmit:M,className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(za,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:"email",name:"email",placeholder:"votre@email.com",value:i.email,onChange:S,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),u.email&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:u.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(kf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:a?"text":"password",name:"password",placeholder:"Votre mot de passe",value:i.password,onChange:S,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"}),t.jsx("button",{type:"button",onClick:()=>r(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300 transition-colors",children:a?t.jsx(Df,{className:"w-5 h-5"}):t.jsx(Oi,{className:"w-5 h-5"})})]}),u.password&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:u.password})]}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"rememberMe",checked:i.rememberMe,onChange:S,className:"w-4 h-4 bg-slate-800 border-slate-600 rounded text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),t.jsx("span",{className:"text-sm text-slate-400",children:"Se souvenir de moi"})]})}),t.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]})}),t.jsxs("p",{className:"text-center text-slate-400 text-sm mt-6",children:["Pas encore de compte ?"," ",t.jsx(mt,{to:"/register",className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Crer un compte"})]})]})})]}),t.jsx(An,{type:g.type,title:g.title,message:g.message,isVisible:g.isVisible,onClose:v,duration:5e3})]})},PE=()=>{const e=Ht(),[a,r]=y.useState(!1),[i,c]=y.useState(!1),[u,d]=y.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:Xr.SCOLARITE,acceptTerms:!1}),[f,x]=y.useState({}),[g,p]=y.useState(!1),[b,v]=y.useState({type:"info",title:"",message:"",isVisible:!1}),S=(N,A,O)=>{v({type:N,title:A,message:O,isVisible:!0})},T=()=>{v(N=>({...N,isVisible:!1}))},M=N=>{const{name:A,value:O,type:U}=N.target,D=N.target.checked;d(z=>({...z,[A]:U==="checkbox"?D:O})),f[A]&&x(z=>({...z,[A]:""}))},_=()=>{const N={};return u.email?/\S+@\S+\.\S+/.test(u.email)||(N.email="Email invalide"):N.email="L'email est requis",u.password?u.password.length<8&&(N.password="Minimum 8 caractres"):N.password="Le mot de passe est requis",u.password!==u.confirmPassword&&(N.confirmPassword="Les mots de passe ne correspondent pas"),u.firstName.trim()||(N.firstName="Le prnom est requis"),u.lastName.trim()||(N.lastName="Le nom est requis"),u.acceptTerms||(N.acceptTerms="Vous devez accepter les conditions"),x(N),Object.keys(N).length===0},C=async N=>{if(N.preventDefault(),_()){p(!0);try{const A={email:u.email,password:u.password,firstName:u.firstName,lastName:u.lastName,phone:u.phone||void 0,role:u.role},O=await pe.createUser(A);O.success?(S("success","Compte cr","Vous pouvez maintenant vous connecter."),setTimeout(()=>{e("/login")},2e3)):S("error","Erreur",O.error||"Erreur lors de la cration du compte.")}catch{S("error","Erreur","Impossible de se connecter au serveur.")}finally{p(!1)}}},j=[{value:Xr.SCOLARITE,label:"Service Scolarit"},{value:Xr.FINANCE,label:"Service Comptabilit"},{value:Xr.QUALITE,label:"Assurance Qualit & RP"},{value:Xr.ADMIN,label:"Administrateur"},{value:Xr.SUPER_ADMIN,label:"Prsident / DG"}];return t.jsxs("div",{className:"min-h-screen bg-slate-900 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.08)_1px,transparent_0)] bg-[length:40px_40px]"}),t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[300px] bg-blue-600/10 rounded-full blur-3xl"}),t.jsxs("div",{className:"relative min-h-screen flex flex-col",children:[t.jsx("nav",{className:"w-full px-6 py-5",children:t.jsx("div",{className:"max-w-6xl mx-auto",children:t.jsxs(mt,{to:"/",className:"inline-flex items-center gap-2 text-slate-300 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 px-4 py-2 rounded-lg transition-colors",children:[t.jsx(eu,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"Retour"})]})})}),t.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-8",children:t.jsxs(Ra.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full max-w-lg",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-block p-3 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 mb-6",children:t.jsx("img",{src:hl,alt:"Cyber School",className:"w-14 h-14 object-contain"})}),t.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Crer un compte"}),t.jsx("p",{className:"text-slate-400",children:"Rejoignez Cyber School"})]}),t.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-8",children:t.jsxs("form",{onSubmit:C,className:"space-y-5",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Prnom"}),t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:"text",name:"firstName",placeholder:"John",value:u.firstName,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),f.firstName&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.firstName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nom"}),t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:"text",name:"lastName",placeholder:"Doe",value:u.lastName,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),f.lastName&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.lastName})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(za,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:"email",name:"email",placeholder:"votre@email.com",value:u.email,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),f.email&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.email})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Tlphone"," ",t.jsx("span",{className:"text-slate-500",children:"(optionnel)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:"tel",name:"phone",placeholder:"+223 XX XX XX XX",value:u.phone,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Rle"}),t.jsx("select",{name:"role",value:u.role,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",children:j.map(N=>t.jsx("option",{value:N.value,className:"bg-slate-800",children:N.label},N.value))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(kf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:a?"text":"password",name:"password",placeholder:"8 caractres min",value:u.password,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-10 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"}),t.jsx("button",{type:"button",onClick:()=>r(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300",children:a?t.jsx(Df,{className:"w-4 h-4"}):t.jsx(Oi,{className:"w-4 h-4"})})]}),f.password&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.password})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Confirmer"}),t.jsxs("div",{className:"relative",children:[t.jsx(kf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),t.jsx("input",{type:i?"text":"password",name:"confirmPassword",placeholder:"Confirmer",value:u.confirmPassword,onChange:M,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-11 pr-10 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"}),t.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300",children:i?t.jsx(Df,{className:"w-4 h-4"}):t.jsx(Oi,{className:"w-4 h-4"})})]}),f.confirmPassword&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.confirmPassword})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"acceptTerms",checked:u.acceptTerms,onChange:M,className:"w-4 h-4 mt-0.5 bg-slate-800 border-slate-600 rounded text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),t.jsxs("span",{className:"text-sm text-slate-400",children:["J'accepte les"," ",t.jsx("span",{className:"text-blue-400",children:"conditions d'utilisation"})]})]}),f.acceptTerms&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.acceptTerms})]}),t.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]})}),t.jsxs("p",{className:"text-center text-slate-400 text-sm mt-6",children:["Dj un compte ?"," ",t.jsx(mt,{to:"/login",className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Se connecter"})]})]})})]}),t.jsx(An,{type:b.type,title:b.title,message:b.message,isVisible:b.isVisible,onClose:T,duration:5e3})]})},UE=({isCollapsed:e,onToggle:a})=>{const r=ma(),[i,c]=y.useState(null),{canAccessMenu:u,roleLabel:d}=ij(),{user:f,logout:x}=Xi(),p=[{title:"Tableau de bord",path:"/dashboard",icon:t.jsx(dj,{className:"w-5 h-5"}),menuKey:"dashboard"},{title:"Utilisateurs",path:"/users",icon:t.jsx(Qt,{className:"w-5 h-5"}),menuKey:"users"},{title:"tudiants",path:"/students",icon:t.jsx(Uc,{className:"w-5 h-5"}),menuKey:"students"},{title:"Classes & Matires",path:"/classes-subjects",icon:t.jsx(qs,{className:"w-5 h-5"}),menuKey:"classes"},{title:"Calendrier",path:"/calendar",icon:t.jsx(as,{className:"w-5 h-5"}),menuKey:"calendar"},{title:"Anne scolaire",path:"/school-years",icon:t.jsx(We,{className:"w-5 h-5"}),menuKey:"school-years"},{title:"Finances",path:"/finances",icon:t.jsx(ts,{className:"w-5 h-5"}),menuKey:"finances"},{title:"Assurance Qualit",path:"/qualite",icon:t.jsx(K4,{className:"w-5 h-5"}),menuKey:"qualite"},{title:"Affectations",path:"/settings",icon:t.jsx(Qi,{className:"w-5 h-5"}),menuKey:"settings"}].filter(S=>!S.menuKey||u(S.menuKey)),b=()=>{x(),window.location.href="/login"},v=S=>r.pathname===S||r.pathname.startsWith(S+"/");return t.jsxs("div",{className:`h-screen flex flex-col bg-slate-900 border-r border-slate-800 transition-all duration-300 ${e?"w-20":"w-64"}`,children:[t.jsx("div",{className:"p-4 border-b border-slate-800",children:t.jsxs("div",{className:"flex items-center justify-between",children:[e?t.jsx("div",{className:"w-10 h-10 bg-white rounded-lg p-1 mx-auto",children:t.jsx("img",{src:hl,alt:"Logo",className:"w-full h-full object-contain"})}):t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white rounded-lg p-1 flex-shrink-0",children:t.jsx("img",{src:hl,alt:"Logo",className:"w-full h-full object-contain"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-bold text-white text-sm",children:"UPCD-ITAK"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Gestion Universitaire"})]})]}),t.jsx("button",{onClick:a,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors",children:e?t.jsx(rr,{className:"w-4 h-4"}):t.jsx(hh,{className:"w-4 h-4"})})]})}),t.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:p.map(S=>{const T=v(S.path);return t.jsxs("div",{className:"relative",children:[t.jsxs(mt,{to:S.path,onMouseEnter:()=>c(S.path),onMouseLeave:()=>c(null),className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 ${T?"bg-blue-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[t.jsx("span",{className:T?"text-white":"text-slate-400",children:S.icon}),!e&&t.jsx("span",{className:"text-sm font-medium",children:S.title})]}),e&&i===S.path&&t.jsx("div",{className:"absolute left-full ml-2 px-3 py-2 bg-slate-800 text-white text-sm rounded-lg whitespace-nowrap z-50 shadow-lg",children:S.title})]},S.path)})}),t.jsx("div",{className:"p-3 border-t border-slate-800",children:!e&&f?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:[f.firstName?.[0],f.lastName?.[0]]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("p",{className:"text-sm font-medium text-white truncate",children:[f.firstName," ",f.lastName]}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:d})]})]}),t.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",children:[t.jsx(Rf,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Dconnexion"})]})]}):t.jsx("button",{onClick:b,className:"w-full p-2.5 flex items-center justify-center text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"Dconnexion",children:t.jsx(Rf,{className:"w-5 h-5"})})})]})},nu=()=>{const e=y.useContext(lj);if(e===void 0)throw new Error("useInstitution doit tre utilis dans un InstitutionProvider");return e},BE=({onSidebarToggle:e,user:a})=>{const[r,i]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),{selectedInstitution:x,institutions:g,setSelectedInstitution:p,isLoading:b}=nu(),v=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"},S=_=>({super_admin:"Prsident / DG",admin:"Administrateur",scolarite:"Scolarit",finance:"Comptabilit",qualite:"Assurance Qualit"})[_]||_,T=[{id:1,title:"Nouveau cours ajout",message:"Le cours de Mathmatiques a t cr",time:"Il y a 5 min",isRead:!1},{id:2,title:"Rapport disponible",message:"Votre rapport mensuel est prt",time:"Il y a 1 heure",isRead:!0}],M=T.filter(_=>!_.isRead).length;return t.jsxs("header",{className:"h-16 bg-slate-900 border-b border-slate-800 px-6 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:e,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors lg:hidden",children:t.jsxs("div",{className:"w-5 h-5 flex flex-col justify-center gap-1",children:[t.jsx("div",{className:"w-5 h-0.5 bg-current rounded"}),t.jsx("div",{className:"w-5 h-0.5 bg-current rounded"}),t.jsx("div",{className:"w-5 h-0.5 bg-current rounded"})]})}),t.jsxs("div",{className:"relative hidden md:block",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),t.jsx("input",{type:"text",placeholder:"Rechercher...",className:"w-72 pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 transition-colors"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>{f(!d),i(!1),u(!1)},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 transition-colors border border-slate-700",children:[t.jsx(Tf,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden md:block text-sm font-medium",children:x?x.name:"Slectionner"}),t.jsx(Vc,{className:"w-4 h-4"})]}),d&&t.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 overflow-hidden",children:[t.jsx("div",{className:"p-3 border-b border-slate-700",children:t.jsxs("h3",{className:"font-semibold text-white text-sm flex items-center gap-2",children:[t.jsx(Tf,{className:"w-4 h-4 text-blue-400"}),"Institution"]})}),t.jsx("div",{className:"max-h-64 overflow-y-auto",children:b?t.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"Chargement..."}):g.length===0?t.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"Aucune affectation"}):g.map(_=>t.jsxs("button",{onClick:()=>{p(_),f(!1),window.location.reload()},className:`w-full text-left p-3 hover:bg-slate-700 transition-colors ${x?.id===_.id?"bg-blue-500/20 border-l-2 border-blue-500":""}`,children:[t.jsx("p",{className:"text-sm font-medium text-white",children:_.name}),_.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:_.description})]},_.id))})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>{u(!c),i(!1)},className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors relative",children:[t.jsx(xb,{className:"w-5 h-5"}),M>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:M})]}),c&&t.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-700",children:t.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[t.jsx(xb,{className:"w-4 h-4 text-blue-400"}),"Notifications"]})}),t.jsx("div",{className:"max-h-64 overflow-y-auto",children:T.map(_=>t.jsx("div",{className:`p-4 border-b border-slate-700/50 hover:bg-slate-700/50 transition-colors ${_.isRead?"":"bg-blue-500/5"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[!_.isRead&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),t.jsxs("div",{className:_.isRead?"ml-5":"",children:[t.jsx("p",{className:"text-sm font-medium text-white",children:_.title}),t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:_.message}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:_.time})]})]})},_.id))}),t.jsx("div",{className:"p-3 border-t border-slate-700",children:t.jsx("button",{className:"w-full text-center text-sm text-blue-400 hover:text-blue-300 font-medium py-2 rounded-lg hover:bg-slate-700/50 transition-colors",children:"Voir tout"})})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>{i(!r),u(!1)},className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-800 transition-colors",children:[t.jsxs("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:[a.firstName?.[0],a.lastName?.[0]]}),t.jsxs("div",{className:"hidden md:block text-left",children:[t.jsxs("p",{className:"text-sm font-medium text-white",children:[a.firstName," ",a.lastName]}),t.jsx("p",{className:"text-xs text-slate-400",children:S(a.role)})]}),t.jsx(Vc,{className:"w-4 h-4 text-slate-400 hidden md:block"})]}),r&&t.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-700 bg-slate-800/50",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:[a.firstName?.[0],a.lastName?.[0]]}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-white",children:[a.firstName," ",a.lastName]}),t.jsx("p",{className:"text-xs text-slate-400",children:a.email}),t.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:S(a.role)})]})]})}),t.jsxs("div",{className:"p-2",children:[t.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:[t.jsx(Lt,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Mon Profil"})]}),t.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:[t.jsx(Qi,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Paramtres"})]})]}),t.jsx("div",{className:"p-2 border-t border-slate-700",children:t.jsxs("button",{onClick:v,className:"w-full flex items-center gap-3 px-3 py-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",children:[t.jsx(Rf,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Dconnexion"})]})})]})]})]})]})},bs=({user:e,children:a})=>{const[r,i]=y.useState(!1),c=()=>{i(!r)};return t.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(UE,{isCollapsed:r,onToggle:c})}),t.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(BE,{onSidebarToggle:c,isSidebarCollapsed:r,user:e})}),t.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-blue-50",children:a})]})]})},$E=({user:e,currentTime:a})=>{const[r,i]=y.useState({totalAmount:0,totalPayments:0,pendingPayments:0,totalStudents:0,paymentsByMethod:[],recentPayments:[]}),[c,u]=y.useState(!0);y.useEffect(()=>{d()},[]);const d=async()=>{try{const[v,S]=await Promise.allSettled([pe.getAllPayments(),pe.getAllStudents()]),T={totalAmount:0,totalPayments:0,pendingPayments:0,totalStudents:0,paymentsByMethod:[],recentPayments:[]};if(v.status==="fulfilled"&&v.value.success){const M=v.value.data||[];T.totalPayments=M.length,T.totalAmount=M.reduce((j,N)=>j+(Number(N.amount)||0),0);const _={};M.forEach(j=>{const N=j.method||"other";_[N]||(_[N]={count:0,amount:0}),_[N].count++,_[N].amount+=Number(j.amount)||0}),T.paymentsByMethod=Object.entries(_).map(([j,N])=>({method:j,count:N.count,amount:N.amount})),T.pendingPayments=M.filter(j=>j.status==="pending").length;const C=[...M].sort((j,N)=>{const A=new Date(j.createdAt||0).getTime();return new Date(N.createdAt||0).getTime()-A});T.recentPayments=C.slice(0,5).map(j=>({id:j.id,studentName:"tudiant",amount:Number(j.amount)||0,method:j.method||"other",date:j.createdAt||""}))}if(S.status==="fulfilled"&&S.value.success){const M=S.value.data||[];T.totalStudents=M.length}i(T)}catch(v){console.error("Error loading finance stats:",v)}finally{u(!1)}},f=v=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(v),x=v=>{if(!v)return"Rcemment";try{const S=new Date(v);if(isNaN(S.getTime()))return"Rcemment";const M=new Date().getTime()-S.getTime();if(M<0||M>365*24*60*60*1e3)return"Rcemment";const _=Math.floor(M/6e4),C=Math.floor(_/60),j=Math.floor(C/24);return j>30?`Il y a ${Math.floor(j/30)} mois`:j>0?`Il y a ${j}j`:C>0?`Il y a ${C}h`:_>0?`Il y a ${_}min`:" l'instant"}catch{return"Rcemment"}},g=v=>({cash:"Espces",bank_transfer:"Virement",mobile_money:"Mobile Money",card:"Carte",other:"Autre"})[v]||v,p=v=>v.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),b=v=>v.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-800 rounded-2xl p-8 text-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),t.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-emerald-200 text-sm mb-1",children:"Service Comptabilit - UPCD-ITAK"}),t.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bonjour, ",e.firstName," ",e.lastName]}),t.jsx("p",{className:"text-emerald-100",children:p(a)})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-5xl font-light",children:b(a)}),t.jsx("p",{className:"text-emerald-200 text-sm mt-1",children:"Heure locale"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(yc,{title:"Total Encaiss",value:f(r.totalAmount),icon:t.jsx(ts,{className:"w-5 h-5"}),color:"bg-emerald-500",loading:c,link:"/finances"}),t.jsx(yc,{title:"Paiements",value:r.totalPayments,icon:t.jsx(Xt,{className:"w-5 h-5"}),color:"bg-blue-500",loading:c,link:"/finances/payments"}),t.jsx(yc,{title:"En Attente",value:r.pendingPayments,icon:t.jsx(ps,{className:"w-5 h-5"}),color:"bg-amber-500",loading:c,link:"/finances"}),t.jsx(yc,{title:"tudiants",value:r.totalStudents,icon:t.jsx(We,{className:"w-5 h-5"}),color:"bg-violet-500",loading:c,link:"/students"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(jn,{className:"w-5 h-5 text-emerald-500"}),"Vue d'ensemble financire"]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Total Encaiss"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:c?"...":f(r.totalAmount)})]}),t.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx("p",{className:"text-sm text-amber-600 font-medium",children:"En Attente"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:c?"...":r.pendingPayments})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-600 mb-3",children:"Mthodes de paiement"}),r.paymentsByMethod.length>0?t.jsx("div",{className:"space-y-2",children:r.paymentsByMethod.map(v=>{const S=Math.max(...r.paymentsByMethod.map(T=>T.count),1);return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-slate-600",children:g(v.method)}),t.jsxs("span",{className:"font-medium text-slate-800",children:[v.count," (",f(v.amount),")"]})]}),t.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full transition-all duration-500",style:{width:`${v.count/S*100}%`}})})]},v.method)})}):t.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"Aucun paiement enregistr"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Actions rapides"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs(mt,{to:"/finances/payments",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-emerald-300 hover:bg-emerald-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(Xt,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-600",children:"Paiements"})]}),t.jsxs(mt,{to:"/finances/student-fees",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-emerald-300 hover:bg-emerald-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(ys,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-600",children:"Frais"})]}),t.jsxs(mt,{to:"/students",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-emerald-300 hover:bg-emerald-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-violet-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(We,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-600",children:"tudiants"})]}),t.jsxs(mt,{to:"/finances/invoices",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-emerald-300 hover:bg-emerald-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-amber-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(ys,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-600",children:"Factures"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(ps,{className:"w-5 h-5 text-emerald-500"}),"Paiements rcents"]}),r.recentPayments.length>0?t.jsx("div",{className:"space-y-3",children:r.recentPayments.map(v=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center flex-shrink-0",children:t.jsx(ts,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:v.studentName}),t.jsxs("p",{className:"text-xs text-slate-500",children:[f(v.amount),"  ",g(v.method),"  ",x(v.date)]})]})]},v.id))}):t.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"Aucun paiement rcent"})]})]})]})]})},yc=({title:e,value:a,icon:r,color:i,loading:c,link:u})=>t.jsx(mt,{to:u,className:"bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:border-emerald-300 hover:shadow-md transition-all group",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500",children:e}),c?t.jsx("div",{className:"h-7 w-14 bg-slate-200 rounded animate-pulse mt-1"}):t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 mt-1",children:typeof a=="number"?a.toLocaleString("fr-FR"):a})]}),t.jsx("div",{className:`w-9 h-9 sm:w-10 sm:h-10 ${i} rounded-lg flex items-center justify-center text-white`,children:r})]})}),qE=({user:e,currentTime:a})=>{const[r,i]=y.useState({totalStudents:0,totalClasses:0,totalTeachers:0,activeAssignments:0,recentStudents:[]}),[c,u]=y.useState(!0);y.useEffect(()=>{d()},[]);const d=async()=>{try{const[p,b,v,S]=await Promise.allSettled([pe.getAllStudents(),pe.getAllClasses(),pe.getAllTeachers(),pe.getAllStudentClasses()]),T={totalStudents:0,totalClasses:0,totalTeachers:0,activeAssignments:0,recentStudents:[]};if(p.status==="fulfilled"&&p.value.success){const M=p.value.data||[];T.totalStudents=M.length;const _=[...M].sort((C,j)=>{const N=new Date(C.createdAt||0).getTime();return new Date(j.createdAt||0).getTime()-N});T.recentStudents=_.slice(0,5).map(C=>({id:C.id,name:C.user?`${C.user.firstName} ${C.user.lastName}`:"tudiant",matricule:C.matricule||"N/A",class:"N/A",date:typeof C.createdAt=="string"?C.createdAt:C.createdAt?.toISOString()||""}))}if(b.status==="fulfilled"&&b.value.success){const M=b.value.data||[];T.totalClasses=M.length}if(v.status==="fulfilled"&&v.value.success){const M=v.value.data||[];T.totalTeachers=M.length}if(S.status==="fulfilled"&&S.value.success){const M=S.value.data||[];T.activeAssignments=M.filter(_=>!_.endDate).length}i(T)}catch(p){console.error("Error loading scolarite stats:",p)}finally{u(!1)}},f=p=>{if(!p)return"Rcemment";try{const b=new Date(p);if(isNaN(b.getTime()))return"Rcemment";const S=new Date().getTime()-b.getTime();if(S<0||S>365*24*60*60*1e3)return"Rcemment";const T=Math.floor(S/6e4),M=Math.floor(T/60),_=Math.floor(M/24);return _>30?`Il y a ${Math.floor(_/30)} mois`:_>0?`Il y a ${_}j`:M>0?`Il y a ${M}h`:T>0?`Il y a ${T}min`:" l'instant"}catch{return"Rcemment"}},x=p=>p.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),g=p=>p.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-8 text-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),t.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-blue-200 text-sm mb-1",children:"Service Scolarit - UPCD-ITAK"}),t.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bonjour, ",e.firstName," ",e.lastName]}),t.jsx("p",{className:"text-blue-100",children:x(a)})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-5xl font-light",children:g(a)}),t.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Heure locale"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(vc,{title:"tudiants",value:r.totalStudents,icon:t.jsx(We,{className:"w-5 h-5"}),color:"bg-blue-500",loading:c,link:"/students"}),t.jsx(vc,{title:"Classes",value:r.totalClasses,icon:t.jsx(qs,{className:"w-5 h-5"}),color:"bg-violet-500",loading:c,link:"/classes-subjects"}),t.jsx(vc,{title:"Enseignants",value:r.totalTeachers,icon:t.jsx(Qt,{className:"w-5 h-5"}),color:"bg-emerald-500",loading:c,link:"/students"}),t.jsx(vc,{title:"Affectations",value:r.activeAssignments,icon:t.jsx(Uc,{className:"w-5 h-5"}),color:"bg-amber-500",loading:c,link:"/settings/student-class-assignment"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(_5,{className:"w-5 h-5 text-blue-500"}),"Vue d'ensemble"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[t.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total tudiants"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:c?"...":r.totalStudents})]}),t.jsxs("div",{className:"p-4 bg-violet-50 rounded-xl border border-violet-100",children:[t.jsx("p",{className:"text-sm text-violet-600 font-medium",children:"Total Classes"}),t.jsx("p",{className:"text-2xl font-bold text-violet-700",children:c?"...":r.totalClasses})]}),t.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Enseignants"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:c?"...":r.totalTeachers})]}),t.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx("p",{className:"text-sm text-amber-600 font-medium",children:"Affectations Actives"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:c?"...":r.activeAssignments})]})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-600 mb-2",children:t.jsx("strong",{children:"Gestion tudiante complte"})}),t.jsx("p",{className:"text-xs text-slate-500",children:"Grez les inscriptions, les affectations aux classes, les notes et les diplmes des tudiants."})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Actions rapides"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs(mt,{to:"/students",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(We,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-blue-600",children:"tudiants"})]}),t.jsxs(mt,{to:"/classes-subjects",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-violet-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(qs,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-blue-600",children:"Classes"})]}),t.jsxs(mt,{to:"/settings/student-class-assignment",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(Uc,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-blue-600",children:"Affectations"})]}),t.jsxs(mt,{to:"/calendar",className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-amber-600 rounded-lg flex items-center justify-center text-white",children:t.jsx(as,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-blue-600",children:"Calendrier"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(ps,{className:"w-5 h-5 text-blue-500"}),"tudiants rcents"]}),r.recentStudents.length>0?t.jsx("div",{className:"space-y-3",children:r.recentStudents.map(p=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center flex-shrink-0",children:t.jsx(We,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:p.name}),t.jsxs("p",{className:"text-xs text-slate-500",children:[p.matricule,"  ",f(p.date)]})]})]},p.id))}):t.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"Aucun tudiant rcent"})]})]})]})]})},vc=({title:e,value:a,icon:r,color:i,loading:c,link:u})=>t.jsx(mt,{to:u,className:"bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:border-blue-300 hover:shadow-md transition-all group",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500",children:e}),c?t.jsx("div",{className:"h-7 w-14 bg-slate-200 rounded animate-pulse mt-1"}):t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 mt-1",children:a.toLocaleString("fr-FR")})]}),t.jsx("div",{className:`w-9 h-9 sm:w-10 sm:h-10 ${i} rounded-lg flex items-center justify-center text-white`,children:r})]})}),FE=()=>{const e=Ht(),[a,r]=y.useState(null),[i,c]=y.useState({totalUsers:0,totalStudents:0,totalClasses:0,totalPayments:0,pendingPayments:0,totalAmount:0,recentActivities:[],paymentsByMethod:[]}),[u,d]=y.useState(!0),[f,x]=y.useState(new Date);y.useEffect(()=>{const N=localStorage.getItem("user"),A=localStorage.getItem("token");if(!N||!A){e("/login");return}try{r(JSON.parse(N))}catch{e("/login");return}g(A);const O=setInterval(()=>x(new Date),6e4);return()=>clearInterval(O)},[e]);const g=async N=>{try{const A={Authorization:`Bearer ${N}`,"Content-Type":"application/json"},[O,U,D,z,P]=await Promise.allSettled([fetch("/api/users",{headers:A}),fetch("/api/students",{headers:A}),fetch("/api/classes",{headers:A}),fetch("/api/payments",{headers:A}),fetch("/api/payments/summary",{headers:A})]),se={totalUsers:0,totalStudents:0,totalClasses:0,totalPayments:0,pendingPayments:0,totalAmount:0,recentActivities:[],paymentsByMethod:[]};if(O.status==="fulfilled"&&O.value.ok){const X=await O.value.json();se.totalUsers=Array.isArray(X)?X.length:0}if(U.status==="fulfilled"&&U.value.ok){const X=await U.value.json();se.totalStudents=Array.isArray(X)?X.length:0}if(D.status==="fulfilled"&&D.value.ok){const X=await D.value.json();se.totalClasses=Array.isArray(X)?X.length:0}if(z.status==="fulfilled"&&z.value.ok){const X=await z.value.json();if(Array.isArray(X)){se.totalPayments=X.length;const R={};X.forEach(ae=>{const te=ae.method||"other";R[te]||(R[te]={count:0,amount:0}),R[te].count++,R[te].amount+=Number(ae.amount)||0}),se.paymentsByMethod=Object.entries(R).map(([ae,te])=>({method:ae,count:te.count,amount:te.amount}));const Q=X.slice(0,5).map((ae,te)=>({id:`payment-${te}`,type:"payment",title:"Paiement reu",description:`${v(ae.amount||0)} - ${b(ae.method||"other")}`,time:S(ae.createdAt||"")}));se.recentActivities=Q}}if(P.status==="fulfilled"&&P.value.ok){const X=await P.value.json();se.totalAmount=X.totalAmount||0,se.pendingPayments=X.pendingCount||0}c(se)}catch(A){console.error("Error fetching stats:",A)}finally{d(!1)}},p=N=>({super_admin:"Prsident / DG",admin:"Administrateur",scolarite:"Scolarit",finance:"Comptabilit",qualite:"Assurance Qualit"})[N]||N,b=N=>({cash:"Espces",bank_transfer:"Virement",mobile_money:"Mobile Money",card:"Carte",other:"Autre"})[N]||N,v=N=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(N),S=N=>{if(!N)return"Rcemment";try{const A=new Date(N);if(isNaN(A.getTime()))return"Rcemment";const U=new Date().getTime()-A.getTime();if(U<0||U>365*24*60*60*1e3)return"Rcemment";const D=Math.floor(U/6e4),z=Math.floor(D/60),P=Math.floor(z/24);return P>30?`Il y a ${Math.floor(P/30)} mois`:P>0?`Il y a ${P}j`:z>0?`Il y a ${z}h`:D>0?`Il y a ${D}min`:" l'instant"}catch{return"Rcemment"}},T=N=>N.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),M=N=>N.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});if(!a)return t.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:t.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(a.role==="finance")return t.jsx(bs,{user:{firstName:a.firstName||"Utilisateur",lastName:a.lastName||"",role:a.role||"user",email:a.email||""},children:t.jsx($E,{user:a,currentTime:f})});if(a.role==="scolarite")return t.jsx(bs,{user:{firstName:a.firstName||"Utilisateur",lastName:a.lastName||"",role:a.role||"user",email:a.email||""},children:t.jsx(qE,{user:a,currentTime:f})});const _=[{label:"tudiants",path:"/students",icon:We,color:"bg-blue-600"},{label:"Paiements",path:"/finances",icon:ts,color:"bg-emerald-600"},{label:"Calendrier",path:"/calendar",icon:as,color:"bg-violet-600"},{label:"Utilisateurs",path:"/users",icon:Qt,color:"bg-amber-600"}],C=[{label:"Utilisateurs",value:i.totalUsers,color:"#3B82F6"},{label:"tudiants",value:i.totalStudents,color:"#10B981"},{label:"Classes",value:i.totalClasses,color:"#8B5CF6"},{label:"Paiements",value:i.totalPayments,color:"#F59E0B"}],j=C.reduce((N,A)=>N+A.value,0)||1;return t.jsx(bs,{user:{firstName:a.firstName||"Utilisateur",lastName:a.lastName||"",role:a.role||"user",email:a.email||""},children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-8 text-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),t.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-blue-200 text-sm mb-1",children:"Bienvenue sur UPCD-ITAK"}),t.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bonjour, ",a.firstName," ",a.lastName]}),t.jsxs("p",{className:"text-blue-100",children:[p(a.role),"  ",T(f)]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-5xl font-light",children:M(f)}),t.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Heure locale"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(jc,{title:"Utilisateurs",value:i.totalUsers,icon:t.jsx(Qt,{className:"w-5 h-5"}),color:"bg-blue-500",loading:u,link:"/users"}),t.jsx(jc,{title:"tudiants",value:i.totalStudents,icon:t.jsx(We,{className:"w-5 h-5"}),color:"bg-emerald-500",loading:u,link:"/students"}),t.jsx(jc,{title:"Classes",value:i.totalClasses,icon:t.jsx(qs,{className:"w-5 h-5"}),color:"bg-violet-500",loading:u,link:"/classes-subjects"}),t.jsx(jc,{title:"Paiements",value:i.totalPayments,icon:t.jsx(Xt,{className:"w-5 h-5"}),color:"bg-amber-500",loading:u,link:"/finances"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(B4,{className:"w-5 h-5 text-blue-500"}),"Rpartition"]}),t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsxs("div",{className:"relative w-40 h-40",children:[t.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:C.map((N,A)=>{const O=N.value/j*100,U=C.slice(0,A).reduce((D,z)=>D+z.value/j*100,0);return t.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:N.color,strokeWidth:"20",strokeDasharray:`${O*2.51} 251`,strokeDashoffset:`${-U*2.51}`,className:"transition-all duration-700"},N.label)})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:j}),t.jsx("p",{className:"text-xs text-slate-500",children:"Total"})]})})]})}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(N=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:N.color}}),t.jsx("span",{className:"text-sm text-slate-600",children:N.label}),t.jsx("span",{className:"text-sm font-semibold text-slate-800 ml-auto",children:N.value})]},N.label))})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(jn,{className:"w-5 h-5 text-emerald-500"}),"Finances"]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Total Encaiss"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:u?"...":v(i.totalAmount)})]}),t.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx("p",{className:"text-sm text-amber-600 font-medium",children:"En Attente"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:u?"...":i.pendingPayments})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-600 mb-3",children:"Mthodes de paiement"}),i.paymentsByMethod.length>0?t.jsx("div",{className:"space-y-2",children:i.paymentsByMethod.map(N=>{const A=Math.max(...i.paymentsByMethod.map(O=>O.count),1);return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-slate-600",children:b(N.method)}),t.jsx("span",{className:"font-medium text-slate-800",children:N.count})]}),t.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-500",style:{width:`${N.count/A*100}%`}})})]},N.method)})}):t.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"Aucun paiement enregistr"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Actions"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(N=>t.jsxs(mt,{to:N.path,className:"flex flex-col items-center gap-2 p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all group",children:[t.jsx("div",{className:`w-10 h-10 ${N.color} rounded-lg flex items-center justify-center text-white`,children:t.jsx(N.icon,{className:"w-5 h-5"})}),t.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-blue-600",children:N.label})]},N.path))})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(ps,{className:"w-5 h-5 text-blue-500"}),"Activit"]}),i.recentActivities.length>0?t.jsx("div",{className:"space-y-3",children:i.recentActivities.slice(0,3).map(N=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${N.type==="payment"?"bg-emerald-100 text-emerald-600":N.type==="student"?"bg-blue-100 text-blue-600":"bg-violet-100 text-violet-600"}`,children:N.type==="payment"?t.jsx(ts,{className:"w-4 h-4"}):N.type==="student"?t.jsx(Uc,{className:"w-4 h-4"}):t.jsx(Qt,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:N.title}),t.jsx("p",{className:"text-xs text-slate-500",children:N.time})]})]},N.id))}):t.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"Aucune activit"})]})]})]}),t.jsxs("div",{className:"bg-slate-100 rounded-xl p-4 flex flex-col sm:flex-row items-center justify-between gap-2 text-sm text-slate-600",children:[t.jsx("p",{children:"UPCD-ITAK v1.0"}),t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),a.email]})]})]})})},jc=({title:e,value:a,icon:r,color:i,loading:c,link:u})=>t.jsx(mt,{to:u,className:"bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:border-blue-300 hover:shadow-md transition-all group",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500",children:e}),c?t.jsx("div",{className:"h-7 w-14 bg-slate-200 rounded animate-pulse mt-1"}):t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 mt-1",children:a.toLocaleString("fr-FR")})]}),t.jsx("div",{className:`w-9 h-9 sm:w-10 sm:h-10 ${i} rounded-lg flex items-center justify-center text-white`,children:r})]})}),os=({children:e})=>{const{user:a,isLoading:r}=Xi(),i=localStorage.getItem("user"),c=localStorage.getItem("token"),u=!!(i&&c);if(r&&!u)return t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Chargement..."})]})});if(!a&&!u)return t.jsx(Af,{to:"/login",replace:!0});const d=a||(i?JSON.parse(i):null);return d?t.jsx(bs,{user:{firstName:d.firstName||"Utilisateur",lastName:d.lastName||"",role:d.role||"user",email:d.email||""},children:e}):t.jsx(Af,{to:"/login",replace:!0})},cs=({title:e,subtitle:a,icon:r,iconColor:i="from-blue-600 to-blue-800",actions:c})=>t.jsxs("div",{className:`bg-gradient-to-r ${i} rounded-2xl p-8 text-white relative overflow-hidden shadow-lg`,children:[t.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),t.jsx("div",{className:"absolute top-1/2 right-1/4 w-20 h-20 bg-white/5 rounded-full"}),t.jsxs("div",{className:"relative flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-5",children:[r&&t.jsx("div",{className:"w-14 h-14 bg-white/25 backdrop-blur rounded-xl flex items-center justify-center shadow-inner",children:t.jsx(r,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:e}),a&&t.jsx("p",{className:"text-white/80 text-sm mt-1.5 font-medium",children:a})]})]}),c&&t.jsx("div",{className:"flex items-center gap-3",children:c})]})]});function hn({data:e,columns:a,searchPlaceholder:r="Rechercher...",searchKeys:i=[],pageSize:c=10,emptyMessage:u="Aucune donne trouve",emptyIcon:d}){const[f,x]=y.useState(""),[g,p]=y.useState(1),[b,v]=y.useState(null),[S,T]=y.useState("asc"),M=y.useMemo(()=>!f||i.length===0?e:e.filter(A=>i.some(O=>{const U=A[O];return typeof U=="string"?U.toLowerCase().includes(f.toLowerCase()):typeof U=="object"&&U!==null?JSON.stringify(U).toLowerCase().includes(f.toLowerCase()):!1})),[e,f,i]),_=Math.ceil(M.length/c),C=(g-1)*c,j=M.slice(C,C+c),N=A=>{b===A?T(S==="asc"?"desc":"asc"):(v(A),T("asc"))};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",placeholder:r,value:f,onChange:A=>{x(A.target.value),p(1)},className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 bg-white"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-md",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsx("tr",{className:"bg-slate-100 border-b border-slate-200",children:a.map(A=>t.jsx("th",{onClick:()=>A.sortable&&N(A.key),className:`text-left px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider ${A.sortable?"cursor-pointer hover:bg-slate-200":""}`,children:A.header},A.key))})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:j.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:a.length,className:"px-5 py-20 text-center",children:t.jsxs("div",{className:"text-slate-500",children:[d&&t.jsx("div",{className:"mb-4",children:d}),t.jsx("p",{className:"text-base font-medium",children:u})]})})}):j.map(A=>t.jsx("tr",{className:"hover:bg-blue-50/50 transition-colors",children:a.map(O=>t.jsx("td",{className:"px-5 py-4",children:O.render(A)},O.key))},A.id))})]})}),_>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50/50",children:[t.jsxs("p",{className:"text-sm text-slate-500",children:[C+1," - ",Math.min(C+c,M.length)," sur"," ",M.length]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>p(A=>Math.max(1,A-1)),disabled:g===1,className:"p-2 rounded-lg text-slate-500 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t.jsx(hh,{className:"w-4 h-4"})}),Array.from({length:Math.min(5,_)},(A,O)=>{let U;return _<=5||g<=3?U=O+1:g>=_-2?U=_-4+O:U=g-2+O,t.jsx("button",{onClick:()=>p(U),className:`w-8 h-8 rounded-lg text-sm font-medium transition-colors ${g===U?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:U},U)}),t.jsx("button",{onClick:()=>p(A=>Math.min(_,A+1)),disabled:g===_,className:"p-2 rounded-lg text-slate-500 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t.jsx(rr,{className:"w-4 h-4"})})]})]})]})]})}const xt=({isOpen:e,onClose:a,title:r,subtitle:i,children:c,size:u="md",showCloseButton:d=!0})=>{y.useEffect(()=>{const g=p=>{p.key==="Escape"&&a()};return e&&(document.addEventListener("keydown",g),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",g),document.body.style.overflow=""}},[e,a]);const f={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl","2xl":"max-w-3xl","3xl":"max-w-4xl",full:"max-w-6xl"};if(!e)return null;const x=t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[t.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl w-full mx-4 max-h-[90vh] flex flex-col ${f[u]}`,children:[(r||d)&&t.jsxs("div",{className:"flex items-start justify-between px-6 py-5 border-b border-slate-100 flex-shrink-0",children:[t.jsxs("div",{children:[r&&t.jsx("h2",{className:"text-xl font-bold text-slate-900",children:r}),i&&t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:i})]}),d&&t.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg cursor-pointer",children:t.jsx(Sn,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"px-6 py-5 flex-1 min-h-0 overflow-y-auto",children:c})]})]});return fh.createPortal(x,document.body)},sr=({isOpen:e,onClose:a,onConfirm:r,title:i,message:c,type:u="danger",confirmText:d="Confirmer",cancelText:f="Annuler",loading:x=!1})=>{const g={danger:{icon:vn,iconBg:"bg-red-100",iconColor:"text-red-600",buttonBg:"bg-red-600 hover:bg-red-700"},warning:{icon:Pc,iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonBg:"bg-amber-600 hover:bg-amber-700"},info:{icon:dl,iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonBg:"bg-blue-600 hover:bg-blue-700"},success:{icon:Bs,iconBg:"bg-emerald-100",iconColor:"text-emerald-600",buttonBg:"bg-emerald-600 hover:bg-emerald-700"}},{icon:p,iconBg:b,iconColor:v,buttonBg:S}=g[u];return t.jsx(xt,{isOpen:e,onClose:a,size:"sm",showCloseButton:!1,children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`w-16 h-16 ${b} rounded-full flex items-center justify-center mx-auto mb-4`,children:t.jsx(p,{className:`w-8 h-8 ${v}`})}),t.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:i}),t.jsx("p",{className:"text-slate-600 mb-6",children:c}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:a,disabled:x,className:"flex-1 px-4 py-2.5 border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 font-medium disabled:opacity-50",children:f}),t.jsx("button",{onClick:r,disabled:x,className:`flex-1 px-4 py-2.5 ${S} text-white rounded-xl font-medium disabled:opacity-50`,children:x?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),"Chargement..."]}):d})]})]})})},ua=({onClick:e,icon:a=is,label:r,disabled:i=!1})=>t.jsxs("button",{onClick:e,disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-white text-slate-800 font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(a,{className:"w-4 h-4"}),t.jsx("span",{children:r})]}),xn=({onView:e,onEdit:a,onDelete:r,viewLabel:i="Voir",editLabel:c="Modifier",deleteLabel:u="Supprimer",compact:d=!1})=>{const[f,x]=y.useState(!1),g=y.useRef(null);return y.useEffect(()=>{const p=b=>{g.current&&!g.current.contains(b.target)&&x(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),d?t.jsxs("div",{className:"relative",ref:g,children:[t.jsx("button",{onClick:()=>x(!f),className:"p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx(t5,{className:"w-5 h-5"})}),f&&t.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white rounded-xl shadow-xl border border-slate-200 py-1 min-w-[140px] z-20 animate-in fade-in slide-in-from-top-2 duration-150",children:[e&&t.jsxs("button",{onClick:()=>{e(),x(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[t.jsx(Oi,{className:"w-4 h-4"}),i]}),a&&t.jsxs("button",{onClick:()=>{a(),x(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[t.jsx(Pi,{className:"w-4 h-4"}),c]}),r&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"border-t border-slate-100 my-1"}),t.jsxs("button",{onClick:()=>{r(),x(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[t.jsx(vn,{className:"w-4 h-4"}),u]})]})]})]}):t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e&&t.jsx("button",{onClick:e,className:"p-2 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-md",title:i,children:t.jsx(Oi,{className:"w-4 h-4"})}),a&&t.jsx("button",{onClick:a,className:"p-2 bg-amber-50 text-amber-600 hover:bg-amber-100 hover:text-amber-700 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-md",title:c,children:t.jsx(Pi,{className:"w-4 h-4"})}),r&&t.jsx("button",{onClick:r,className:"p-2 bg-red-50 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-md",title:u,children:t.jsx(vn,{className:"w-4 h-4"})})]})};var so=e=>e.type==="checkbox",Jn=e=>e instanceof Date,xs=e=>e==null;const HN=e=>typeof e=="object";var Mt=e=>!xs(e)&&!Array.isArray(e)&&HN(e)&&!Jn(e),IE=e=>Mt(e)&&e.target?so(e.target)?e.target.checked:e.target.value:e,HE=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,YE=(e,a)=>e.has(HE(a)),ZE=e=>{const a=e.constructor&&e.constructor.prototype;return Mt(a)&&a.hasOwnProperty("isPrototypeOf")},Gh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function qt(e){let a;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)a=new Date(e);else if(!(Gh&&(e instanceof Blob||i))&&(r||Mt(e)))if(a=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!ZE(e))a=e;else for(const c in e)e.hasOwnProperty(c)&&(a[c]=qt(e[c]));else return e;return a}var ru=e=>/^\w*$/.test(e),Et=e=>e===void 0,Kh=e=>Array.isArray(e)?e.filter(Boolean):[],Xh=e=>Kh(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_e=(e,a,r)=>{if(!a||!Mt(e))return r;const i=(ru(a)?[a]:Xh(a)).reduce((c,u)=>xs(c)?c:c[u],e);return Et(i)||i===e?Et(e[a])?r:e[a]:i},la=e=>typeof e=="boolean",lt=(e,a,r)=>{let i=-1;const c=ru(a)?[a]:Xh(a),u=c.length,d=u-1;for(;++i<u;){const f=c[i];let x=r;if(i!==d){const g=e[f];x=Mt(g)||Array.isArray(g)?g:isNaN(+c[i+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=x,e=e[f]}};const Dy={BLUR:"blur",FOCUS_OUT:"focusout"},Ks={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ka={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},GE=Ft.createContext(null);GE.displayName="HookFormContext";var KE=(e,a,r,i=!0)=>{const c={defaultValues:a._defaultValues};for(const u in e)Object.defineProperty(c,u,{get:()=>{const d=u;return a._proxyFormState[d]!==Ks.all&&(a._proxyFormState[d]=!i||Ks.all),e[d]}});return c};const XE=typeof window<"u"?Ft.useLayoutEffect:Ft.useEffect;var Ts=e=>typeof e=="string",QE=(e,a,r,i,c)=>Ts(e)?(i&&a.watch.add(e),_e(r,e,c)):Array.isArray(e)?e.map(u=>(i&&a.watch.add(u),_e(r,u))):(i&&(a.watchAll=!0),r),eh=e=>xs(e)||!HN(e);function fn(e,a,r=new WeakSet){if(eh(e)||eh(a))return Object.is(e,a);if(Jn(e)&&Jn(a))return e.getTime()===a.getTime();const i=Object.keys(e),c=Object.keys(a);if(i.length!==c.length)return!1;if(r.has(e)||r.has(a))return!0;r.add(e),r.add(a);for(const u of i){const d=e[u];if(!c.includes(u))return!1;if(u!=="ref"){const f=a[u];if(Jn(d)&&Jn(f)||Mt(d)&&Mt(f)||Array.isArray(d)&&Array.isArray(f)?!fn(d,f,r):!Object.is(d,f))return!1}}return!0}var Qh=(e,a,r,i,c)=>a?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:c||!0}}:{},Mi=e=>Array.isArray(e)?e:[e],ky=()=>{let e=[];return{get observers(){return e},next:c=>{for(const u of e)u.next&&u.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(u=>u!==c)}}),unsubscribe:()=>{e=[]}}};function YN(e,a){const r={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],u=a[i];if(c&&Mt(c)&&u){const d=YN(c,u);Mt(d)&&(r[i]=d)}else e[i]&&(r[i]=u)}return r}var rs=e=>Mt(e)&&!Object.keys(e).length,Jh=e=>e.type==="file",Xs=e=>typeof e=="function",Hc=e=>{if(!Gh)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},ZN=e=>e.type==="select-multiple",Wh=e=>e.type==="radio",JE=e=>Wh(e)||so(e),Qm=e=>Hc(e)&&e.isConnected;function WE(e,a){const r=a.slice(0,-1).length;let i=0;for(;i<r;)e=Et(e)?i++:e[a[i++]];return e}function eT(e){for(const a in e)if(e.hasOwnProperty(a)&&!Et(e[a]))return!1;return!0}function kt(e,a){const r=Array.isArray(a)?a:ru(a)?[a]:Xh(a),i=r.length===1?e:WE(e,r),c=r.length-1,u=r[c];return i&&delete i[u],c!==0&&(Mt(i)&&rs(i)||Array.isArray(i)&&eT(i))&&kt(e,r.slice(0,-1)),e}var tT=e=>{for(const a in e)if(Xs(e[a]))return!0;return!1};function GN(e){return Array.isArray(e)||Mt(e)&&!tT(e)}function th(e,a={}){for(const r in e){const i=e[r];GN(i)?(a[r]=Array.isArray(i)?[]:{},th(i,a[r])):Et(i)||(a[r]=!0)}return a}function tl(e,a,r){r||(r=th(a));for(const i in e){const c=e[i];if(GN(c))Et(a)||eh(r[i])?r[i]=th(c,Array.isArray(c)?[]:{}):tl(c,xs(a)?{}:a[i],r[i]);else{const u=a[i];r[i]=!fn(c,u)}}return r}const Ry={value:!1,isValid:!1},My={value:!0,isValid:!0};var KN=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Et(e[0].attributes.value)?Et(e[0].value)||e[0].value===""?My:{value:e[0].value,isValid:!0}:My:Ry}return Ry},XN=(e,{valueAsNumber:a,valueAsDate:r,setValueAs:i})=>Et(e)?e:a?e===""?NaN:e&&+e:r&&Ts(e)?new Date(e):i?i(e):e;const _y={isValid:!1,value:null};var QN=e=>Array.isArray(e)?e.reduce((a,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:a,_y):_y;function zy(e){const a=e.ref;return Jh(a)?a.files:Wh(a)?QN(e.refs).value:ZN(a)?[...a.selectedOptions].map(({value:r})=>r):so(a)?KN(e.refs).value:XN(Et(a.value)?e.ref.value:a.value,e)}var sT=(e,a,r,i)=>{const c={};for(const u of e){const d=_e(a,u);d&&lt(c,u,d._f)}return{criteriaMode:r,names:[...e],fields:c,shouldUseNativeValidation:i}},Yc=e=>e instanceof RegExp,Ni=e=>Et(e)?e:Yc(e)?e.source:Mt(e)?Yc(e.value)?e.value.source:e.value:e,Oy=e=>({isOnSubmit:!e||e===Ks.onSubmit,isOnBlur:e===Ks.onBlur,isOnChange:e===Ks.onChange,isOnAll:e===Ks.all,isOnTouch:e===Ks.onTouched});const Ly="AsyncFunction";var aT=e=>!!e&&!!e.validate&&!!(Xs(e.validate)&&e.validate.constructor.name===Ly||Mt(e.validate)&&Object.values(e.validate).find(a=>a.constructor.name===Ly)),nT=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Vy=(e,a,r)=>!r&&(a.watchAll||a.watch.has(e)||[...a.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const _i=(e,a,r,i)=>{for(const c of r||Object.keys(e)){const u=_e(e,c);if(u){const{_f:d,...f}=u;if(d){if(d.refs&&d.refs[0]&&a(d.refs[0],c)&&!i)return!0;if(d.ref&&a(d.ref,d.name)&&!i)return!0;if(_i(f,a))break}else if(Mt(f)&&_i(f,a))break}}};function Py(e,a,r){const i=_e(e,r);if(i||ru(r))return{error:i,name:r};const c=r.split(".");for(;c.length;){const u=c.join("."),d=_e(a,u),f=_e(e,u);if(d&&!Array.isArray(d)&&r!==u)return{name:r};if(f&&f.type)return{name:u,error:f};if(f&&f.root&&f.root.type)return{name:`${u}.root`,error:f.root};c.pop()}return{name:r}}var rT=(e,a,r,i)=>{r(e);const{name:c,...u}=e;return rs(u)||Object.keys(u).length>=Object.keys(a).length||Object.keys(u).find(d=>a[d]===(!i||Ks.all))},lT=(e,a,r)=>!e||!a||e===a||Mi(e).some(i=>i&&(r?i===a:i.startsWith(a)||a.startsWith(i))),iT=(e,a,r,i,c)=>c.isOnAll?!1:!r&&c.isOnTouch?!(a||e):(r?i.isOnBlur:c.isOnBlur)?!e:(r?i.isOnChange:c.isOnChange)?e:!0,oT=(e,a)=>!Kh(_e(e,a)).length&&kt(e,a),cT=(e,a,r)=>{const i=Mi(_e(e,r));return lt(i,"root",a[r]),lt(e,r,i),e};function Uy(e,a,r="validate"){if(Ts(e)||Array.isArray(e)&&e.every(Ts)||la(e)&&!e)return{type:r,message:Ts(e)?e:"",ref:a}}var Qr=e=>Mt(e)&&!Yc(e)?e:{value:e,message:""},By=async(e,a,r,i,c,u)=>{const{ref:d,refs:f,required:x,maxLength:g,minLength:p,min:b,max:v,pattern:S,validate:T,name:M,valueAsNumber:_,mount:C}=e._f,j=_e(r,M);if(!C||a.has(M))return{};const N=f?f[0]:d,A=R=>{c&&N.reportValidity&&(N.setCustomValidity(la(R)?"":R||""),N.reportValidity())},O={},U=Wh(d),D=so(d),z=U||D,P=(_||Jh(d))&&Et(d.value)&&Et(j)||Hc(d)&&d.value===""||j===""||Array.isArray(j)&&!j.length,se=Qh.bind(null,M,i,O),X=(R,Q,ae,te=ka.maxLength,F=ka.minLength)=>{const ce=R?Q:ae;O[M]={type:R?te:F,message:ce,ref:d,...se(R?te:F,ce)}};if(u?!Array.isArray(j)||!j.length:x&&(!z&&(P||xs(j))||la(j)&&!j||D&&!KN(f).isValid||U&&!QN(f).isValid)){const{value:R,message:Q}=Ts(x)?{value:!!x,message:x}:Qr(x);if(R&&(O[M]={type:ka.required,message:Q,ref:N,...se(ka.required,Q)},!i))return A(Q),O}if(!P&&(!xs(b)||!xs(v))){let R,Q;const ae=Qr(v),te=Qr(b);if(!xs(j)&&!isNaN(j)){const F=d.valueAsNumber||j&&+j;xs(ae.value)||(R=F>ae.value),xs(te.value)||(Q=F<te.value)}else{const F=d.valueAsDate||new Date(j),ce=L=>new Date(new Date().toDateString()+" "+L),J=d.type=="time",W=d.type=="week";Ts(ae.value)&&j&&(R=J?ce(j)>ce(ae.value):W?j>ae.value:F>new Date(ae.value)),Ts(te.value)&&j&&(Q=J?ce(j)<ce(te.value):W?j<te.value:F<new Date(te.value))}if((R||Q)&&(X(!!R,ae.message,te.message,ka.max,ka.min),!i))return A(O[M].message),O}if((g||p)&&!P&&(Ts(j)||u&&Array.isArray(j))){const R=Qr(g),Q=Qr(p),ae=!xs(R.value)&&j.length>+R.value,te=!xs(Q.value)&&j.length<+Q.value;if((ae||te)&&(X(ae,R.message,Q.message),!i))return A(O[M].message),O}if(S&&!P&&Ts(j)){const{value:R,message:Q}=Qr(S);if(Yc(R)&&!j.match(R)&&(O[M]={type:ka.pattern,message:Q,ref:d,...se(ka.pattern,Q)},!i))return A(Q),O}if(T){if(Xs(T)){const R=await T(j,r),Q=Uy(R,N);if(Q&&(O[M]={...Q,...se(ka.validate,Q.message)},!i))return A(Q.message),O}else if(Mt(T)){let R={};for(const Q in T){if(!rs(R)&&!i)break;const ae=Uy(await T[Q](j,r),N,Q);ae&&(R={...ae,...se(Q,ae.message)},A(ae.message),i&&(O[M]=R))}if(!rs(R)&&(O[M]={ref:N,...R},!i))return O}}return A(!0),O};const uT={mode:Ks.onSubmit,reValidateMode:Ks.onChange,shouldFocusError:!0};function dT(e={}){let a={...uT,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Xs(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},i={},c=Mt(a.defaultValues)||Mt(a.values)?qt(a.defaultValues||a.values)||{}:{},u=a.shouldUnregister?{}:qt(c),d={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,g=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...p};const v={array:ky(),state:ky()},S=a.criteriaMode===Ks.all,T=q=>le=>{clearTimeout(g),g=setTimeout(q,le)},M=async q=>{if(!a.disabled&&(p.isValid||b.isValid||q)){const le=a.resolver?rs((await D()).errors):await P(i,!0);le!==r.isValid&&v.state.next({isValid:le})}},_=(q,le)=>{!a.disabled&&(p.isValidating||p.validatingFields||b.isValidating||b.validatingFields)&&((q||Array.from(f.mount)).forEach(ge=>{ge&&(le?lt(r.validatingFields,ge,le):kt(r.validatingFields,ge))}),v.state.next({validatingFields:r.validatingFields,isValidating:!rs(r.validatingFields)}))},C=(q,le=[],ge,Te,De=!0,Ae=!0)=>{if(Te&&ge&&!a.disabled){if(d.action=!0,Ae&&Array.isArray(_e(i,q))){const Oe=ge(_e(i,q),Te.argA,Te.argB);De&&lt(i,q,Oe)}if(Ae&&Array.isArray(_e(r.errors,q))){const Oe=ge(_e(r.errors,q),Te.argA,Te.argB);De&&lt(r.errors,q,Oe),oT(r.errors,q)}if((p.touchedFields||b.touchedFields)&&Ae&&Array.isArray(_e(r.touchedFields,q))){const Oe=ge(_e(r.touchedFields,q),Te.argA,Te.argB);De&&lt(r.touchedFields,q,Oe)}(p.dirtyFields||b.dirtyFields)&&(r.dirtyFields=tl(c,u)),v.state.next({name:q,isDirty:X(q,le),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else lt(u,q,le)},j=(q,le)=>{lt(r.errors,q,le),v.state.next({errors:r.errors})},N=q=>{r.errors=q,v.state.next({errors:r.errors,isValid:!1})},A=(q,le,ge,Te)=>{const De=_e(i,q);if(De){const Ae=_e(u,q,Et(ge)?_e(c,q):ge);Et(Ae)||Te&&Te.defaultChecked||le?lt(u,q,le?Ae:zy(De._f)):ae(q,Ae),d.mount&&!d.action&&M()}},O=(q,le,ge,Te,De)=>{let Ae=!1,Oe=!1;const qe={name:q};if(!a.disabled){if(!ge||Te){(p.isDirty||b.isDirty)&&(Oe=r.isDirty,r.isDirty=qe.isDirty=X(),Ae=Oe!==qe.isDirty);const Ke=fn(_e(c,q),le);Oe=!!_e(r.dirtyFields,q),Ke?kt(r.dirtyFields,q):lt(r.dirtyFields,q,!0),qe.dirtyFields=r.dirtyFields,Ae=Ae||(p.dirtyFields||b.dirtyFields)&&Oe!==!Ke}if(ge){const Ke=_e(r.touchedFields,q);Ke||(lt(r.touchedFields,q,ge),qe.touchedFields=r.touchedFields,Ae=Ae||(p.touchedFields||b.touchedFields)&&Ke!==ge)}Ae&&De&&v.state.next(qe)}return Ae?qe:{}},U=(q,le,ge,Te)=>{const De=_e(r.errors,q),Ae=(p.isValid||b.isValid)&&la(le)&&r.isValid!==le;if(a.delayError&&ge?(x=T(()=>j(q,ge)),x(a.delayError)):(clearTimeout(g),x=null,ge?lt(r.errors,q,ge):kt(r.errors,q)),(ge?!fn(De,ge):De)||!rs(Te)||Ae){const Oe={...Te,...Ae&&la(le)?{isValid:le}:{},errors:r.errors,name:q};r={...r,...Oe},v.state.next(Oe)}},D=async q=>{_(q,!0);const le=await a.resolver(u,a.context,sT(q||f.mount,i,a.criteriaMode,a.shouldUseNativeValidation));return _(q),le},z=async q=>{const{errors:le}=await D(q);if(q)for(const ge of q){const Te=_e(le,ge);Te?lt(r.errors,ge,Te):kt(r.errors,ge)}else r.errors=le;return le},P=async(q,le,ge={valid:!0})=>{for(const Te in q){const De=q[Te];if(De){const{_f:Ae,...Oe}=De;if(Ae){const qe=f.array.has(Ae.name),Ke=De._f&&aT(De._f);Ke&&p.validatingFields&&_([Ae.name],!0);const it=await By(De,f.disabled,u,S,a.shouldUseNativeValidation&&!le,qe);if(Ke&&p.validatingFields&&_([Ae.name]),it[Ae.name]&&(ge.valid=!1,le))break;!le&&(_e(it,Ae.name)?qe?cT(r.errors,it,Ae.name):lt(r.errors,Ae.name,it[Ae.name]):kt(r.errors,Ae.name))}!rs(Oe)&&await P(Oe,le,ge)}}return ge.valid},se=()=>{for(const q of f.unMount){const le=_e(i,q);le&&(le._f.refs?le._f.refs.every(ge=>!Qm(ge)):!Qm(le._f.ref))&&be(q)}f.unMount=new Set},X=(q,le)=>!a.disabled&&(q&&le&&lt(u,q,le),!fn(L(),c)),R=(q,le,ge)=>QE(q,f,{...d.mount?u:Et(le)?c:Ts(q)?{[q]:le}:le},ge,le),Q=q=>Kh(_e(d.mount?u:c,q,a.shouldUnregister?_e(c,q,[]):[])),ae=(q,le,ge={})=>{const Te=_e(i,q);let De=le;if(Te){const Ae=Te._f;Ae&&(!Ae.disabled&&lt(u,q,XN(le,Ae)),De=Hc(Ae.ref)&&xs(le)?"":le,ZN(Ae.ref)?[...Ae.ref.options].forEach(Oe=>Oe.selected=De.includes(Oe.value)):Ae.refs?so(Ae.ref)?Ae.refs.forEach(Oe=>{(!Oe.defaultChecked||!Oe.disabled)&&(Array.isArray(De)?Oe.checked=!!De.find(qe=>qe===Oe.value):Oe.checked=De===Oe.value||!!De)}):Ae.refs.forEach(Oe=>Oe.checked=Oe.value===De):Jh(Ae.ref)?Ae.ref.value="":(Ae.ref.value=De,Ae.ref.type||v.state.next({name:q,values:qt(u)})))}(ge.shouldDirty||ge.shouldTouch)&&O(q,De,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&W(q)},te=(q,le,ge)=>{for(const Te in le){if(!le.hasOwnProperty(Te))return;const De=le[Te],Ae=q+"."+Te,Oe=_e(i,Ae);(f.array.has(q)||Mt(De)||Oe&&!Oe._f)&&!Jn(De)?te(Ae,De,ge):ae(Ae,De,ge)}},F=(q,le,ge={})=>{const Te=_e(i,q),De=f.array.has(q),Ae=qt(le);lt(u,q,Ae),De?(v.array.next({name:q,values:qt(u)}),(p.isDirty||p.dirtyFields||b.isDirty||b.dirtyFields)&&ge.shouldDirty&&v.state.next({name:q,dirtyFields:tl(c,u),isDirty:X(q,Ae)})):Te&&!Te._f&&!xs(Ae)?te(q,Ae,ge):ae(q,Ae,ge),Vy(q,f)&&v.state.next({...r,name:q}),v.state.next({name:d.mount?q:void 0,values:qt(u)})},ce=async q=>{d.mount=!0;const le=q.target;let ge=le.name,Te=!0;const De=_e(i,ge),Ae=Ke=>{Te=Number.isNaN(Ke)||Jn(Ke)&&isNaN(Ke.getTime())||fn(Ke,_e(u,ge,Ke))},Oe=Oy(a.mode),qe=Oy(a.reValidateMode);if(De){let Ke,it;const ur=le.type?zy(De._f):IE(q),Ws=q.type===Dy.BLUR||q.type===Dy.FOCUS_OUT,xu=!nT(De._f)&&!a.resolver&&!_e(r.errors,ge)&&!De._f.deps||iT(Ws,_e(r.touchedFields,ge),r.isSubmitted,qe,Oe),Pa=Vy(ge,f,Ws);lt(u,ge,ur),Ws?(!le||!le.readOnly)&&(De._f.onBlur&&De._f.onBlur(q),x&&x(0)):De._f.onChange&&De._f.onChange(q);const Ua=O(ge,ur,Ws),ha=!rs(Ua)||Pa;if(!Ws&&v.state.next({name:ge,type:q.type,values:qt(u)}),xu)return(p.isValid||b.isValid)&&(a.mode==="onBlur"?Ws&&M():Ws||M()),ha&&v.state.next({name:ge,...Pa?{}:Ua});if(!Ws&&Pa&&v.state.next({...r}),a.resolver){const{errors:Tn}=await D([ge]);if(Ae(ur),Te){const Dn=Py(r.errors,i,ge),ao=Py(Tn,i,Dn.name||ge);Ke=ao.error,ge=ao.name,it=rs(Tn)}}else _([ge],!0),Ke=(await By(De,f.disabled,u,S,a.shouldUseNativeValidation))[ge],_([ge]),Ae(ur),Te&&(Ke?it=!1:(p.isValid||b.isValid)&&(it=await P(i,!0)));Te&&(De._f.deps&&(!Array.isArray(De._f.deps)||De._f.deps.length>0)&&W(De._f.deps),U(ge,it,Ke,Ua))}},J=(q,le)=>{if(_e(r.errors,le)&&q.focus)return q.focus(),1},W=async(q,le={})=>{let ge,Te;const De=Mi(q);if(a.resolver){const Ae=await z(Et(q)?q:De);ge=rs(Ae),Te=q?!De.some(Oe=>_e(Ae,Oe)):ge}else q?(Te=(await Promise.all(De.map(async Ae=>{const Oe=_e(i,Ae);return await P(Oe&&Oe._f?{[Ae]:Oe}:Oe)}))).every(Boolean),!(!Te&&!r.isValid)&&M()):Te=ge=await P(i);return v.state.next({...!Ts(q)||(p.isValid||b.isValid)&&ge!==r.isValid?{}:{name:q},...a.resolver||!q?{isValid:ge}:{},errors:r.errors}),le.shouldFocus&&!Te&&_i(i,J,q?De:f.mount),Te},L=(q,le)=>{let ge={...d.mount?u:c};return le&&(ge=YN(le.dirtyFields?r.dirtyFields:r.touchedFields,ge)),Et(q)?ge:Ts(q)?_e(ge,q):q.map(Te=>_e(ge,Te))},ne=(q,le)=>({invalid:!!_e((le||r).errors,q),isDirty:!!_e((le||r).dirtyFields,q),error:_e((le||r).errors,q),isValidating:!!_e(r.validatingFields,q),isTouched:!!_e((le||r).touchedFields,q)}),K=q=>{q&&Mi(q).forEach(le=>kt(r.errors,le)),v.state.next({errors:q?r.errors:{}})},me=(q,le,ge)=>{const Te=(_e(i,q,{_f:{}})._f||{}).ref,De=_e(r.errors,q)||{},{ref:Ae,message:Oe,type:qe,...Ke}=De;lt(r.errors,q,{...Ke,...le,ref:Te}),v.state.next({name:q,errors:r.errors,isValid:!1}),ge&&ge.shouldFocus&&Te&&Te.focus&&Te.focus()},re=(q,le)=>Xs(q)?v.state.subscribe({next:ge=>"values"in ge&&q(R(void 0,le),ge)}):R(q,le,!0),ie=q=>v.state.subscribe({next:le=>{lT(q.name,le.name,q.exact)&&rT(le,q.formState||p,B,q.reRenderRoot)&&q.callback({values:{...u},...r,...le,defaultValues:c})}}).unsubscribe,G=q=>(d.mount=!0,b={...b,...q.formState},ie({...q,formState:b})),be=(q,le={})=>{for(const ge of q?Mi(q):f.mount)f.mount.delete(ge),f.array.delete(ge),le.keepValue||(kt(i,ge),kt(u,ge)),!le.keepError&&kt(r.errors,ge),!le.keepDirty&&kt(r.dirtyFields,ge),!le.keepTouched&&kt(r.touchedFields,ge),!le.keepIsValidating&&kt(r.validatingFields,ge),!a.shouldUnregister&&!le.keepDefaultValue&&kt(c,ge);v.state.next({values:qt(u)}),v.state.next({...r,...le.keepDirty?{isDirty:X()}:{}}),!le.keepIsValid&&M()},V=({disabled:q,name:le})=>{(la(q)&&d.mount||q||f.disabled.has(le))&&(q?f.disabled.add(le):f.disabled.delete(le))},je=(q,le={})=>{let ge=_e(i,q);const Te=la(le.disabled)||la(a.disabled);return lt(i,q,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:q}},name:q,mount:!0,...le}}),f.mount.add(q),ge?V({disabled:la(le.disabled)?le.disabled:a.disabled,name:q}):A(q,!0,le.value),{...Te?{disabled:le.disabled||a.disabled}:{},...a.progressive?{required:!!le.required,min:Ni(le.min),max:Ni(le.max),minLength:Ni(le.minLength),maxLength:Ni(le.maxLength),pattern:Ni(le.pattern)}:{},name:q,onChange:ce,onBlur:ce,ref:De=>{if(De){je(q,le),ge=_e(i,q);const Ae=Et(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,Oe=JE(Ae),qe=ge._f.refs||[];if(Oe?qe.find(Ke=>Ke===Ae):Ae===ge._f.ref)return;lt(i,q,{_f:{...ge._f,...Oe?{refs:[...qe.filter(Qm),Ae,...Array.isArray(_e(c,q))?[{}]:[]],ref:{type:Ae.type,name:q}}:{ref:Ae}}}),A(q,!1,void 0,Ae)}else ge=_e(i,q,{}),ge._f&&(ge._f.mount=!1),(a.shouldUnregister||le.shouldUnregister)&&!(YE(f.array,q)&&d.action)&&f.unMount.add(q)}}},E=()=>a.shouldFocusError&&_i(i,J,f.mount),$=q=>{la(q)&&(v.state.next({disabled:q}),_i(i,(le,ge)=>{const Te=_e(i,ge);Te&&(le.disabled=Te._f.disabled||q,Array.isArray(Te._f.refs)&&Te._f.refs.forEach(De=>{De.disabled=Te._f.disabled||q}))},0,!1))},ue=(q,le)=>async ge=>{let Te;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let De=qt(u);if(v.state.next({isSubmitting:!0}),a.resolver){const{errors:Ae,values:Oe}=await D();r.errors=Ae,De=qt(Oe)}else await P(i);if(f.disabled.size)for(const Ae of f.disabled)kt(De,Ae);if(kt(r.errors,"root"),rs(r.errors)){v.state.next({errors:{}});try{await q(De,ge)}catch(Ae){Te=Ae}}else le&&await le({...r.errors},ge),E(),setTimeout(E);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:rs(r.errors)&&!Te,submitCount:r.submitCount+1,errors:r.errors}),Te)throw Te},Y=(q,le={})=>{_e(i,q)&&(Et(le.defaultValue)?F(q,qt(_e(c,q))):(F(q,le.defaultValue),lt(c,q,qt(le.defaultValue))),le.keepTouched||kt(r.touchedFields,q),le.keepDirty||(kt(r.dirtyFields,q),r.isDirty=le.defaultValue?X(q,qt(_e(c,q))):X()),le.keepError||(kt(r.errors,q),p.isValid&&M()),v.state.next({...r}))},ye=(q,le={})=>{const ge=q?qt(q):c,Te=qt(ge),De=rs(q),Ae=De?c:Te;if(le.keepDefaultValues||(c=ge),!le.keepValues){if(le.keepDirtyValues){const Oe=new Set([...f.mount,...Object.keys(tl(c,u))]);for(const qe of Array.from(Oe))_e(r.dirtyFields,qe)?lt(Ae,qe,_e(u,qe)):F(qe,_e(Ae,qe))}else{if(Gh&&Et(q))for(const Oe of f.mount){const qe=_e(i,Oe);if(qe&&qe._f){const Ke=Array.isArray(qe._f.refs)?qe._f.refs[0]:qe._f.ref;if(Hc(Ke)){const it=Ke.closest("form");if(it){it.reset();break}}}}if(le.keepFieldsRef)for(const Oe of f.mount)F(Oe,_e(Ae,Oe));else i={}}u=a.shouldUnregister?le.keepDefaultValues?qt(c):{}:qt(Ae),v.array.next({values:{...Ae}}),v.state.next({values:{...Ae}})}f={mount:le.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!p.isValid||!!le.keepIsValid||!!le.keepDirtyValues||!a.shouldUnregister&&!rs(Ae),d.watch=!!a.shouldUnregister,d.action=!1,le.keepErrors||(r.errors={}),v.state.next({submitCount:le.keepSubmitCount?r.submitCount:0,isDirty:De?!1:le.keepDirty?r.isDirty:!!(le.keepDefaultValues&&!fn(q,c)),isSubmitted:le.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:De?{}:le.keepDirtyValues?le.keepDefaultValues&&u?tl(c,u):r.dirtyFields:le.keepDefaultValues&&q?tl(c,q):le.keepDirty?r.dirtyFields:{},touchedFields:le.keepTouched?r.touchedFields:{},errors:le.keepErrors?r.errors:{},isSubmitSuccessful:le.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Z=(q,le)=>ye(Xs(q)?q(u):q,le),H=(q,le={})=>{const ge=_e(i,q),Te=ge&&ge._f;if(Te){const De=Te.refs?Te.refs[0]:Te.ref;De.focus&&(De.focus(),le.shouldSelect&&Xs(De.select)&&De.select())}},B=q=>{r={...r,...q}},ke={control:{register:je,unregister:be,getFieldState:ne,handleSubmit:ue,setError:me,_subscribe:ie,_runSchema:D,_focusError:E,_getWatch:R,_getDirty:X,_setValid:M,_setFieldArray:C,_setDisabledField:V,_setErrors:N,_getFieldArray:Q,_reset:ye,_resetDefaultValues:()=>Xs(a.defaultValues)&&a.defaultValues().then(q=>{Z(q,a.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:se,_disableForm:$,_subjects:v,_proxyFormState:p,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(q){d=q},get _defaultValues(){return c},get _names(){return f},set _names(q){f=q},get _formState(){return r},get _options(){return a},set _options(q){a={...a,...q}}},subscribe:G,trigger:W,register:je,handleSubmit:ue,watch:re,setValue:F,getValues:L,reset:Z,resetField:Y,clearErrors:K,unregister:be,setError:me,setFocus:H,getFieldState:ne};return{...ke,formControl:ke}}function lu(e={}){const a=Ft.useRef(void 0),r=Ft.useRef(void 0),[i,c]=Ft.useState({isDirty:!1,isValidating:!1,isLoading:Xs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Xs(e.defaultValues)?void 0:e.defaultValues});if(!a.current)if(e.formControl)a.current={...e.formControl,formState:i},e.defaultValues&&!Xs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...f}=dT(e);a.current={...f,formState:i}}const u=a.current.control;return u._options=e,XE(()=>{const d=u._subscribe({formState:u._proxyFormState,callback:()=>c({...u._formState}),reRenderRoot:!0});return c(f=>({...f,isReady:!0})),u._formState.isReady=!0,d},[u]),Ft.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),Ft.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),Ft.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),Ft.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),Ft.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),Ft.useEffect(()=>{var d;e.values&&!fn(e.values,r.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),!((d=u._options.resetOptions)===null||d===void 0)&&d.keepIsValid||u._setValid(),r.current=e.values,c(f=>({...f}))):u._resetDefaultValues()},[u,e.values]),Ft.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),a.current.formState=KE(i,u),a.current}const $y=(e,a,r)=>{if(e&&"reportValidity"in e){const i=_e(r,a);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},sh=(e,a)=>{for(const r in a.fields){const i=a.fields[r];i&&i.ref&&"reportValidity"in i.ref?$y(i.ref,r,e):i&&i.refs&&i.refs.forEach(c=>$y(c,r,e))}},qy=(e,a)=>{a.shouldUseNativeValidation&&sh(e,a);const r={};for(const i in e){const c=_e(a.fields,i),u=Object.assign(e[i]||{},{ref:c&&c.ref});if(mT(a.names||Object.keys(e),i)){const d=Object.assign({},_e(r,i));lt(d,"root",u),lt(r,i,d)}else lt(r,i,u)}return r},mT=(e,a)=>{const r=Fy(a);return e.some(i=>Fy(i).match(`^${r}\\.\\d+`))};function Fy(e){return e.replace(/\]|\[/g,"")}function Ce(e,a,r){function i(f,x){if(f._zod||Object.defineProperty(f,"_zod",{value:{def:x,constr:d,traits:new Set},enumerable:!1}),f._zod.traits.has(e))return;f._zod.traits.add(e),a(f,x);const g=d.prototype,p=Object.keys(g);for(let b=0;b<p.length;b++){const v=p[b];v in f||(f[v]=g[v].bind(f))}}const c=r?.Parent??Object;class u extends c{}Object.defineProperty(u,"name",{value:e});function d(f){var x;const g=r?.Parent?new u:this;i(g,f),(x=g._zod).deferred??(x.deferred=[]);for(const p of g._zod.deferred)p();return g}return Object.defineProperty(d,"init",{value:i}),Object.defineProperty(d,Symbol.hasInstance,{value:f=>r?.Parent&&f instanceof r.Parent?!0:f?._zod?.traits?.has(e)}),Object.defineProperty(d,"name",{value:e}),d}class ul extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class JN extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const WN={};function ar(e){return WN}function fT(e){const a=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>a.indexOf(+i)===-1).map(([i,c])=>c)}function ah(e,a){return typeof a=="bigint"?a.toString():a}function e0(e){return{get value(){{const a=e();return Object.defineProperty(this,"value",{value:a}),a}}}}function t0(e){return e==null}function s0(e){const a=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(a,r)}const Iy=Symbol("evaluating");function ut(e,a,r){let i;Object.defineProperty(e,a,{get(){if(i!==Iy)return i===void 0&&(i=Iy,i=r()),i},set(c){Object.defineProperty(e,a,{value:c})},configurable:!0})}function lr(e,a,r){Object.defineProperty(e,a,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ir(...e){const a={};for(const r of e){const i=Object.getOwnPropertyDescriptors(r);Object.assign(a,i)}return Object.defineProperties({},a)}function Hy(e){return JSON.stringify(e)}function hT(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const e1="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Zc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const xT=e0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Yi(e){if(Zc(e)===!1)return!1;const a=e.constructor;if(a===void 0||typeof a!="function")return!0;const r=a.prototype;return!(Zc(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function t1(e){return Yi(e)?{...e}:Array.isArray(e)?[...e]:e}const gT=new Set(["string","number","symbol"]);function xl(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function En(e,a,r){const i=new e._zod.constr(a??e._zod.def);return(!a||r?.parent)&&(i._zod.parent=e),i}function $e(e){const a=e;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function pT(e){return Object.keys(e).filter(a=>e[a]._zod.optin==="optional"&&e[a]._zod.optout==="optional")}function bT(e,a){const r=e._zod.def,i=ir(e._zod.def,{get shape(){const c={};for(const u in a){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);a[u]&&(c[u]=r.shape[u])}return lr(this,"shape",c),c},checks:[]});return En(e,i)}function yT(e,a){const r=e._zod.def,i=ir(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const u in a){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);a[u]&&delete c[u]}return lr(this,"shape",c),c},checks:[]});return En(e,i)}function vT(e,a){if(!Yi(a))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=ir(e._zod.def,{get shape(){const u={...e._zod.def.shape,...a};return lr(this,"shape",u),u},checks:[]});return En(e,c)}function jT(e,a){if(!Yi(a))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const i={...e._zod.def.shape,...a};return lr(this,"shape",i),i},checks:e._zod.def.checks};return En(e,r)}function NT(e,a){const r=ir(e._zod.def,{get shape(){const i={...e._zod.def.shape,...a._zod.def.shape};return lr(this,"shape",i),i},get catchall(){return a._zod.def.catchall},checks:[]});return En(e,r)}function wT(e,a,r){const i=ir(a._zod.def,{get shape(){const c=a._zod.def.shape,u={...c};if(r)for(const d in r){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=e?new e({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)u[d]=e?new e({type:"optional",innerType:c[d]}):c[d];return lr(this,"shape",u),u},checks:[]});return En(a,i)}function ST(e,a,r){const i=ir(a._zod.def,{get shape(){const c=a._zod.def.shape,u={...c};if(r)for(const d in r){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=new e({type:"nonoptional",innerType:c[d]}))}else for(const d in c)u[d]=new e({type:"nonoptional",innerType:c[d]});return lr(this,"shape",u),u},checks:[]});return En(a,i)}function il(e,a=0){if(e.aborted===!0)return!0;for(let r=a;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function s1(e,a){return a.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(e),r})}function Nc(e){return typeof e=="string"?e:e?.message}function nr(e,a,r){const i={...e,path:e.path??[]};if(!e.message){const c=Nc(e.inst?._zod.def?.error?.(e))??Nc(a?.error?.(e))??Nc(r.customError?.(e))??Nc(r.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,a?.reportInput||delete i.input,i}function a0(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Zi(...e){const[a,r,i]=e;return typeof a=="string"?{message:a,code:"custom",input:r,inst:i}:{...a}}const a1=(e,a)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:a,enumerable:!1}),e.message=JSON.stringify(a,ah,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},n0=Ce("$ZodError",a1),iu=Ce("$ZodError",a1,{Parent:Error});function CT(e,a=r=>r.message){const r={},i=[];for(const c of e.issues)c.path.length>0?(r[c.path[0]]=r[c.path[0]]||[],r[c.path[0]].push(a(c))):i.push(a(c));return{formErrors:i,fieldErrors:r}}function AT(e,a=r=>r.message){const r={_errors:[]},i=c=>{for(const u of c.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>i({issues:d}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)r._errors.push(a(u));else{let d=r,f=0;for(;f<u.path.length;){const x=u.path[f];f===u.path.length-1?(d[x]=d[x]||{_errors:[]},d[x]._errors.push(a(u))):d[x]=d[x]||{_errors:[]},d=d[x],f++}}};return i(e),r}const ou=e=>(a,r,i,c)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},d=a._zod.run({value:r,issues:[]},u);if(d instanceof Promise)throw new ul;if(d.issues.length){const f=new(c?.Err??e)(d.issues.map(x=>nr(x,u,ar())));throw e1(f,c?.callee),f}return d.value},ET=ou(iu),cu=e=>async(a,r,i,c)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let d=a._zod.run({value:r,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const f=new(c?.Err??e)(d.issues.map(x=>nr(x,u,ar())));throw e1(f,c?.callee),f}return d.value},TT=cu(iu),uu=e=>(a,r,i)=>{const c=i?{...i,async:!1}:{async:!1},u=a._zod.run({value:r,issues:[]},c);if(u instanceof Promise)throw new ul;return u.issues.length?{success:!1,error:new(e??n0)(u.issues.map(d=>nr(d,c,ar())))}:{success:!0,data:u.value}},DT=uu(iu),du=e=>async(a,r,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=a._zod.run({value:r,issues:[]},c);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>nr(d,c,ar())))}:{success:!0,data:u.value}},kT=du(iu),RT=e=>(a,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ou(e)(a,r,c)},MT=e=>(a,r,i)=>ou(e)(a,r,i),_T=e=>async(a,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return cu(e)(a,r,c)},zT=e=>async(a,r,i)=>cu(e)(a,r,i),OT=e=>(a,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return uu(e)(a,r,c)},LT=e=>(a,r,i)=>uu(e)(a,r,i),VT=e=>async(a,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return du(e)(a,r,c)},PT=e=>async(a,r,i)=>du(e)(a,r,i),UT=/^[cC][^\s-]{8,}$/,BT=/^[0-9a-z]+$/,$T=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,qT=/^[0-9a-vA-V]{20}$/,FT=/^[A-Za-z0-9]{27}$/,IT=/^[a-zA-Z0-9_-]{21}$/,HT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,YT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Yy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ZT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,GT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function KT(){return new RegExp(GT,"u")}const XT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,JT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,WT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eD=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,n1=/^[A-Za-z0-9_-]*$/,tD=/^\+(?:[0-9]){6,14}[0-9]$/,r1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",sD=new RegExp(`^${r1}$`);function l1(e){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${a}`:e.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${e.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function aD(e){return new RegExp(`^${l1(e)}$`)}function nD(e){const a=l1({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${a}(?:${r.join("|")})`;return new RegExp(`^${r1}T(?:${i})$`)}const rD=e=>{const a=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},lD=/^[^A-Z]*$/,iD=/^[^a-z]*$/,fa=Ce("$ZodCheck",(e,a)=>{var r;e._zod??(e._zod={}),e._zod.def=a,(r=e._zod).onattach??(r.onattach=[])}),oD=Ce("$ZodCheckMaxLength",(e,a)=>{var r;fa.init(e,a),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!t0(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<c&&(i._zod.bag.maximum=a.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=a.maximum)return;const d=a0(c);i.issues.push({origin:d,code:"too_big",maximum:a.maximum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),cD=Ce("$ZodCheckMinLength",(e,a)=>{var r;fa.init(e,a),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!t0(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>c&&(i._zod.bag.minimum=a.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=a.minimum)return;const d=a0(c);i.issues.push({origin:d,code:"too_small",minimum:a.minimum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),uD=Ce("$ZodCheckLengthEquals",(e,a)=>{var r;fa.init(e,a),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!t0(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=a.length,c.maximum=a.length,c.length=a.length}),e._zod.check=i=>{const c=i.value,u=c.length;if(u===a.length)return;const d=a0(c),f=u>a.length;i.issues.push({origin:d,...f?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!a.abort})}}),mu=Ce("$ZodCheckStringFormat",(e,a)=>{var r,i;fa.init(e,a),e._zod.onattach.push(c=>{const u=c._zod.bag;u.format=a.format,a.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(a.pattern))}),a.pattern?(r=e._zod).check??(r.check=c=>{a.pattern.lastIndex=0,!a.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:a.format,input:c.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:e,continue:!a.abort})}):(i=e._zod).check??(i.check=()=>{})}),dD=Ce("$ZodCheckRegex",(e,a)=>{mu.init(e,a),e._zod.check=r=>{a.pattern.lastIndex=0,!a.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:a.pattern.toString(),inst:e,continue:!a.abort})}}),mD=Ce("$ZodCheckLowerCase",(e,a)=>{a.pattern??(a.pattern=lD),mu.init(e,a)}),fD=Ce("$ZodCheckUpperCase",(e,a)=>{a.pattern??(a.pattern=iD),mu.init(e,a)}),hD=Ce("$ZodCheckIncludes",(e,a)=>{fa.init(e,a);const r=xl(a.includes),i=new RegExp(typeof a.position=="number"?`^.{${a.position}}${r}`:r);a.pattern=i,e._zod.onattach.push(c=>{const u=c._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=c=>{c.value.includes(a.includes,a.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:c.value,inst:e,continue:!a.abort})}}),xD=Ce("$ZodCheckStartsWith",(e,a)=>{fa.init(e,a);const r=new RegExp(`^${xl(a.prefix)}.*`);a.pattern??(a.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.startsWith(a.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:i.value,inst:e,continue:!a.abort})}}),gD=Ce("$ZodCheckEndsWith",(e,a)=>{fa.init(e,a);const r=new RegExp(`.*${xl(a.suffix)}$`);a.pattern??(a.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.endsWith(a.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:i.value,inst:e,continue:!a.abort})}}),pD=Ce("$ZodCheckOverwrite",(e,a)=>{fa.init(e,a),e._zod.check=r=>{r.value=a.tx(r.value)}});class bD{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const i=a.split(`
`).filter(d=>d),c=Math.min(...i.map(d=>d.length-d.trimStart().length)),u=i.map(d=>d.slice(c)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const a=Function,r=this?.args,c=[...(this?.content??[""]).map(u=>`  ${u}`)];return new a(...r,c.join(`
`))}}const yD={major:4,minor:1,patch:13},_t=Ce("$ZodType",(e,a)=>{var r;e??(e={}),e._zod.def=a,e._zod.bag=e._zod.bag||{},e._zod.version=yD;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const u of c._zod.onattach)u(e);if(i.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(d,f,x)=>{let g=il(d),p;for(const b of f){if(b._zod.def.when){if(!b._zod.def.when(d))continue}else if(g)continue;const v=d.issues.length,S=b._zod.check(d);if(S instanceof Promise&&x?.async===!1)throw new ul;if(p||S instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await S,d.issues.length!==v&&(g||(g=il(d,v)))});else{if(d.issues.length===v)continue;g||(g=il(d,v))}}return p?p.then(()=>d):d},u=(d,f,x)=>{if(il(d))return d.aborted=!0,d;const g=c(f,i,x);if(g instanceof Promise){if(x.async===!1)throw new ul;return g.then(p=>e._zod.parse(p,x))}return e._zod.parse(g,x)};e._zod.run=(d,f)=>{if(f.skipChecks)return e._zod.parse(d,f);if(f.direction==="backward"){const g=e._zod.parse({value:d.value,issues:[]},{...f,skipChecks:!0});return g instanceof Promise?g.then(p=>u(p,d,f)):u(g,d,f)}const x=e._zod.parse(d,f);if(x instanceof Promise){if(f.async===!1)throw new ul;return x.then(g=>c(g,i,f))}return c(x,i,f)}}e["~standard"]={validate:c=>{try{const u=DT(e,c);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return kT(e,c).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),r0=Ce("$ZodString",(e,a)=>{_t.init(e,a),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??rD(e._zod.bag),e._zod.parse=(r,i)=>{if(a.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),gt=Ce("$ZodStringFormat",(e,a)=>{mu.init(e,a),r0.init(e,a)}),vD=Ce("$ZodGUID",(e,a)=>{a.pattern??(a.pattern=YT),gt.init(e,a)}),jD=Ce("$ZodUUID",(e,a)=>{if(a.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(i===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=Yy(i))}else a.pattern??(a.pattern=Yy());gt.init(e,a)}),ND=Ce("$ZodEmail",(e,a)=>{a.pattern??(a.pattern=ZT),gt.init(e,a)}),wD=Ce("$ZodURL",(e,a)=>{gt.init(e,a),e._zod.check=r=>{try{const i=r.value.trim(),c=new URL(i);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(c.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:a.hostname.source,input:r.value,inst:e,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:r.value,inst:e,continue:!a.abort})),a.normalize?r.value=c.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!a.abort})}}}),SD=Ce("$ZodEmoji",(e,a)=>{a.pattern??(a.pattern=KT()),gt.init(e,a)}),CD=Ce("$ZodNanoID",(e,a)=>{a.pattern??(a.pattern=IT),gt.init(e,a)}),AD=Ce("$ZodCUID",(e,a)=>{a.pattern??(a.pattern=UT),gt.init(e,a)}),ED=Ce("$ZodCUID2",(e,a)=>{a.pattern??(a.pattern=BT),gt.init(e,a)}),TD=Ce("$ZodULID",(e,a)=>{a.pattern??(a.pattern=$T),gt.init(e,a)}),DD=Ce("$ZodXID",(e,a)=>{a.pattern??(a.pattern=qT),gt.init(e,a)}),kD=Ce("$ZodKSUID",(e,a)=>{a.pattern??(a.pattern=FT),gt.init(e,a)}),RD=Ce("$ZodISODateTime",(e,a)=>{a.pattern??(a.pattern=nD(a)),gt.init(e,a)}),MD=Ce("$ZodISODate",(e,a)=>{a.pattern??(a.pattern=sD),gt.init(e,a)}),_D=Ce("$ZodISOTime",(e,a)=>{a.pattern??(a.pattern=aD(a)),gt.init(e,a)}),zD=Ce("$ZodISODuration",(e,a)=>{a.pattern??(a.pattern=HT),gt.init(e,a)}),OD=Ce("$ZodIPv4",(e,a)=>{a.pattern??(a.pattern=XT),gt.init(e,a),e._zod.bag.format="ipv4"}),LD=Ce("$ZodIPv6",(e,a)=>{a.pattern??(a.pattern=QT),gt.init(e,a),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!a.abort})}}}),VD=Ce("$ZodCIDRv4",(e,a)=>{a.pattern??(a.pattern=JT),gt.init(e,a)}),PD=Ce("$ZodCIDRv6",(e,a)=>{a.pattern??(a.pattern=WT),gt.init(e,a),e._zod.check=r=>{const i=r.value.split("/");try{if(i.length!==2)throw new Error;const[c,u]=i;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${c}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!a.abort})}}});function i1(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const UD=Ce("$ZodBase64",(e,a)=>{a.pattern??(a.pattern=eD),gt.init(e,a),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{i1(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!a.abort})}});function BD(e){if(!n1.test(e))return!1;const a=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=a.padEnd(Math.ceil(a.length/4)*4,"=");return i1(r)}const $D=Ce("$ZodBase64URL",(e,a)=>{a.pattern??(a.pattern=n1),gt.init(e,a),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{BD(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!a.abort})}}),qD=Ce("$ZodE164",(e,a)=>{a.pattern??(a.pattern=tD),gt.init(e,a)});function FD(e,a=null){try{const r=e.split(".");if(r.length!==3)return!1;const[i]=r;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||a&&(!("alg"in c)||c.alg!==a))}catch{return!1}}const ID=Ce("$ZodJWT",(e,a)=>{gt.init(e,a),e._zod.check=r=>{FD(r.value,a.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!a.abort})}}),HD=Ce("$ZodUnknown",(e,a)=>{_t.init(e,a),e._zod.parse=r=>r}),YD=Ce("$ZodNever",(e,a)=>{_t.init(e,a),e._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Zy(e,a,r){e.issues.length&&a.issues.push(...s1(r,e.issues)),a.value[r]=e.value}const ZD=Ce("$ZodArray",(e,a)=>{_t.init(e,a),e._zod.parse=(r,i)=>{const c=r.value;if(!Array.isArray(c))return r.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),r;r.value=Array(c.length);const u=[];for(let d=0;d<c.length;d++){const f=c[d],x=a.element._zod.run({value:f,issues:[]},i);x instanceof Promise?u.push(x.then(g=>Zy(g,r,d))):Zy(x,r,d)}return u.length?Promise.all(u).then(()=>r):r}});function Gc(e,a,r,i){e.issues.length&&a.issues.push(...s1(r,e.issues)),e.value===void 0?r in i&&(a.value[r]=void 0):a.value[r]=e.value}function o1(e){const a=Object.keys(e.shape);for(const i of a)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const r=pT(e.shape);return{...e,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(r)}}function c1(e,a,r,i,c,u){const d=[],f=c.keySet,x=c.catchall._zod,g=x.def.type;for(const p in a){if(f.has(p))continue;if(g==="never"){d.push(p);continue}const b=x.run({value:a[p],issues:[]},i);b instanceof Promise?e.push(b.then(v=>Gc(v,r,p,a))):Gc(b,r,p,a)}return d.length&&r.issues.push({code:"unrecognized_keys",keys:d,input:a,inst:u}),e.length?Promise.all(e).then(()=>r):r}const GD=Ce("$ZodObject",(e,a)=>{if(_t.init(e,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const f=a.shape;Object.defineProperty(a,"shape",{get:()=>{const x={...f};return Object.defineProperty(a,"shape",{value:x}),x}})}const i=e0(()=>o1(a));ut(e._zod,"propValues",()=>{const f=a.shape,x={};for(const g in f){const p=f[g]._zod;if(p.values){x[g]??(x[g]=new Set);for(const b of p.values)x[g].add(b)}}return x});const c=Zc,u=a.catchall;let d;e._zod.parse=(f,x)=>{d??(d=i.value);const g=f.value;if(!c(g))return f.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),f;f.value={};const p=[],b=d.shape;for(const v of d.keys){const T=b[v]._zod.run({value:g[v],issues:[]},x);T instanceof Promise?p.push(T.then(M=>Gc(M,f,v,g))):Gc(T,f,v,g)}return u?c1(p,g,f,x,i.value,e):p.length?Promise.all(p).then(()=>f):f}}),KD=Ce("$ZodObjectJIT",(e,a)=>{GD.init(e,a);const r=e._zod.parse,i=e0(()=>o1(a)),c=v=>{const S=new bD(["shape","payload","ctx"]),T=i.value,M=N=>{const A=Hy(N);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};S.write("const input = payload.value;");const _=Object.create(null);let C=0;for(const N of T.keys)_[N]=`key_${C++}`;S.write("const newResult = {};");for(const N of T.keys){const A=_[N],O=Hy(N);S.write(`const ${A} = ${M(N)};`),S.write(`
        if (${A}.issues.length) {
          payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        
        if (${A}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${A}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const j=S.compile();return(N,A)=>j(v,N,A)};let u;const d=Zc,f=!WN.jitless,g=f&&xT.value,p=a.catchall;let b;e._zod.parse=(v,S)=>{b??(b=i.value);const T=v.value;return d(T)?f&&g&&S?.async===!1&&S.jitless!==!0?(u||(u=c(a.shape)),v=u(v,S),p?c1([],T,v,S,b,e):v):r(v,S):(v.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),v)}});function Gy(e,a,r,i){for(const u of e)if(u.issues.length===0)return a.value=u.value,a;const c=e.filter(u=>!il(u));return c.length===1?(a.value=c[0].value,c[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:r,errors:e.map(u=>u.issues.map(d=>nr(d,i,ar())))}),a)}const XD=Ce("$ZodUnion",(e,a)=>{_t.init(e,a),ut(e._zod,"optin",()=>a.options.some(c=>c._zod.optin==="optional")?"optional":void 0),ut(e._zod,"optout",()=>a.options.some(c=>c._zod.optout==="optional")?"optional":void 0),ut(e._zod,"values",()=>{if(a.options.every(c=>c._zod.values))return new Set(a.options.flatMap(c=>Array.from(c._zod.values)))}),ut(e._zod,"pattern",()=>{if(a.options.every(c=>c._zod.pattern)){const c=a.options.map(u=>u._zod.pattern);return new RegExp(`^(${c.map(u=>s0(u.source)).join("|")})$`)}});const r=a.options.length===1,i=a.options[0]._zod.run;e._zod.parse=(c,u)=>{if(r)return i(c,u);let d=!1;const f=[];for(const x of a.options){const g=x._zod.run({value:c.value,issues:[]},u);if(g instanceof Promise)f.push(g),d=!0;else{if(g.issues.length===0)return g;f.push(g)}}return d?Promise.all(f).then(x=>Gy(x,c,e,u)):Gy(f,c,e,u)}}),QD=Ce("$ZodIntersection",(e,a)=>{_t.init(e,a),e._zod.parse=(r,i)=>{const c=r.value,u=a.left._zod.run({value:c,issues:[]},i),d=a.right._zod.run({value:c,issues:[]},i);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([x,g])=>Ky(r,x,g)):Ky(r,u,d)}});function nh(e,a){if(e===a)return{valid:!0,data:e};if(e instanceof Date&&a instanceof Date&&+e==+a)return{valid:!0,data:e};if(Yi(e)&&Yi(a)){const r=Object.keys(a),i=Object.keys(e).filter(u=>r.indexOf(u)!==-1),c={...e,...a};for(const u of i){const d=nh(e[u],a[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};c[u]=d.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let i=0;i<e.length;i++){const c=e[i],u=a[i],d=nh(c,u);if(!d.valid)return{valid:!1,mergeErrorPath:[i,...d.mergeErrorPath]};r.push(d.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Ky(e,a,r){if(a.issues.length&&e.issues.push(...a.issues),r.issues.length&&e.issues.push(...r.issues),il(e))return e;const i=nh(a.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const JD=Ce("$ZodEnum",(e,a)=>{_t.init(e,a);const r=fT(a.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=new RegExp(`^(${r.filter(c=>gT.has(typeof c)).map(c=>typeof c=="string"?xl(c):c.toString()).join("|")})$`),e._zod.parse=(c,u)=>{const d=c.value;return i.has(d)||c.issues.push({code:"invalid_value",values:r,input:d,inst:e}),c}}),WD=Ce("$ZodLiteral",(e,a)=>{if(_t.init(e,a),a.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(a.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${a.values.map(i=>typeof i=="string"?xl(i):i?xl(i.toString()):String(i)).join("|")})$`),e._zod.parse=(i,c)=>{const u=i.value;return r.has(u)||i.issues.push({code:"invalid_value",values:a.values,input:u,inst:e}),i}}),ek=Ce("$ZodTransform",(e,a)=>{_t.init(e,a),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new JN(e.constructor.name);const c=a.transform(r.value,r);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(d=>(r.value=d,r));if(c instanceof Promise)throw new ul;return r.value=c,r}});function Xy(e,a){return e.issues.length&&a===void 0?{issues:[],value:void 0}:e}const tk=Ce("$ZodOptional",(e,a)=>{_t.init(e,a),e._zod.optin="optional",e._zod.optout="optional",ut(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),ut(e._zod,"pattern",()=>{const r=a.innerType._zod.pattern;return r?new RegExp(`^(${s0(r.source)})?$`):void 0}),e._zod.parse=(r,i)=>{if(a.innerType._zod.optin==="optional"){const c=a.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>Xy(u,r.value)):Xy(c,r.value)}return r.value===void 0?r:a.innerType._zod.run(r,i)}}),sk=Ce("$ZodNullable",(e,a)=>{_t.init(e,a),ut(e._zod,"optin",()=>a.innerType._zod.optin),ut(e._zod,"optout",()=>a.innerType._zod.optout),ut(e._zod,"pattern",()=>{const r=a.innerType._zod.pattern;return r?new RegExp(`^(${s0(r.source)}|null)$`):void 0}),ut(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),e._zod.parse=(r,i)=>r.value===null?r:a.innerType._zod.run(r,i)}),ak=Ce("$ZodDefault",(e,a)=>{_t.init(e,a),e._zod.optin="optional",ut(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return a.innerType._zod.run(r,i);if(r.value===void 0)return r.value=a.defaultValue,r;const c=a.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>Qy(u,a)):Qy(c,a)}});function Qy(e,a){return e.value===void 0&&(e.value=a.defaultValue),e}const nk=Ce("$ZodPrefault",(e,a)=>{_t.init(e,a),e._zod.optin="optional",ut(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=a.defaultValue),a.innerType._zod.run(r,i))}),rk=Ce("$ZodNonOptional",(e,a)=>{_t.init(e,a),ut(e._zod,"values",()=>{const r=a.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),e._zod.parse=(r,i)=>{const c=a.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>Jy(u,e)):Jy(c,e)}});function Jy(e,a){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:a}),e}const lk=Ce("$ZodCatch",(e,a)=>{_t.init(e,a),ut(e._zod,"optin",()=>a.innerType._zod.optin),ut(e._zod,"optout",()=>a.innerType._zod.optout),ut(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return a.innerType._zod.run(r,i);const c=a.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>(r.value=u.value,u.issues.length&&(r.value=a.catchValue({...r,error:{issues:u.issues.map(d=>nr(d,i,ar()))},input:r.value}),r.issues=[]),r)):(r.value=c.value,c.issues.length&&(r.value=a.catchValue({...r,error:{issues:c.issues.map(u=>nr(u,i,ar()))},input:r.value}),r.issues=[]),r)}}),ik=Ce("$ZodPipe",(e,a)=>{_t.init(e,a),ut(e._zod,"values",()=>a.in._zod.values),ut(e._zod,"optin",()=>a.in._zod.optin),ut(e._zod,"optout",()=>a.out._zod.optout),ut(e._zod,"propValues",()=>a.in._zod.propValues),e._zod.parse=(r,i)=>{if(i.direction==="backward"){const u=a.out._zod.run(r,i);return u instanceof Promise?u.then(d=>wc(d,a.in,i)):wc(u,a.in,i)}const c=a.in._zod.run(r,i);return c instanceof Promise?c.then(u=>wc(u,a.out,i)):wc(c,a.out,i)}});function wc(e,a,r){return e.issues.length?(e.aborted=!0,e):a._zod.run({value:e.value,issues:e.issues},r)}const ok=Ce("$ZodReadonly",(e,a)=>{_t.init(e,a),ut(e._zod,"propValues",()=>a.innerType._zod.propValues),ut(e._zod,"values",()=>a.innerType._zod.values),ut(e._zod,"optin",()=>a.innerType?._zod?.optin),ut(e._zod,"optout",()=>a.innerType?._zod?.optout),e._zod.parse=(r,i)=>{if(i.direction==="backward")return a.innerType._zod.run(r,i);const c=a.innerType._zod.run(r,i);return c instanceof Promise?c.then(Wy):Wy(c)}});function Wy(e){return e.value=Object.freeze(e.value),e}const ck=Ce("$ZodCustom",(e,a)=>{fa.init(e,a),_t.init(e,a),e._zod.parse=(r,i)=>r,e._zod.check=r=>{const i=r.value,c=a.fn(i);if(c instanceof Promise)return c.then(u=>ev(u,r,i,e));ev(c,r,i,e)}});function ev(e,a,r,i){if(!e){const c={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),a.issues.push(Zi(c))}}var tv;class uk{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...r){const i=r[0];if(this._map.set(a,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const r=this._map.get(a);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(a),this}get(a){const r=a._zod.parent;if(r){const i={...this.get(r)??{}};delete i.id;const c={...i,...this._map.get(a)};return Object.keys(c).length?c:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function dk(){return new uk}(tv=globalThis).__zod_globalRegistry??(tv.__zod_globalRegistry=dk());const Sc=globalThis.__zod_globalRegistry;function mk(e,a){return new e({type:"string",...$e(a)})}function fk(e,a){return new e({type:"string",format:"email",check:"string_format",abort:!1,...$e(a)})}function sv(e,a){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...$e(a)})}function hk(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...$e(a)})}function xk(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...$e(a)})}function gk(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...$e(a)})}function pk(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...$e(a)})}function bk(e,a){return new e({type:"string",format:"url",check:"string_format",abort:!1,...$e(a)})}function yk(e,a){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...$e(a)})}function vk(e,a){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...$e(a)})}function jk(e,a){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...$e(a)})}function Nk(e,a){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...$e(a)})}function wk(e,a){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...$e(a)})}function Sk(e,a){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...$e(a)})}function Ck(e,a){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...$e(a)})}function Ak(e,a){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...$e(a)})}function Ek(e,a){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...$e(a)})}function Tk(e,a){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...$e(a)})}function Dk(e,a){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...$e(a)})}function kk(e,a){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...$e(a)})}function Rk(e,a){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...$e(a)})}function Mk(e,a){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...$e(a)})}function _k(e,a){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...$e(a)})}function zk(e,a){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...$e(a)})}function Ok(e,a){return new e({type:"string",format:"date",check:"string_format",...$e(a)})}function Lk(e,a){return new e({type:"string",format:"time",check:"string_format",precision:null,...$e(a)})}function Vk(e,a){return new e({type:"string",format:"duration",check:"string_format",...$e(a)})}function Pk(e){return new e({type:"unknown"})}function Uk(e,a){return new e({type:"never",...$e(a)})}function u1(e,a){return new oD({check:"max_length",...$e(a),maximum:e})}function Kc(e,a){return new cD({check:"min_length",...$e(a),minimum:e})}function d1(e,a){return new uD({check:"length_equals",...$e(a),length:e})}function Bk(e,a){return new dD({check:"string_format",format:"regex",...$e(a),pattern:e})}function $k(e){return new mD({check:"string_format",format:"lowercase",...$e(e)})}function qk(e){return new fD({check:"string_format",format:"uppercase",...$e(e)})}function Fk(e,a){return new hD({check:"string_format",format:"includes",...$e(a),includes:e})}function Ik(e,a){return new xD({check:"string_format",format:"starts_with",...$e(a),prefix:e})}function Hk(e,a){return new gD({check:"string_format",format:"ends_with",...$e(a),suffix:e})}function Nl(e){return new pD({check:"overwrite",tx:e})}function Yk(e){return Nl(a=>a.normalize(e))}function Zk(){return Nl(e=>e.trim())}function Gk(){return Nl(e=>e.toLowerCase())}function Kk(){return Nl(e=>e.toUpperCase())}function Xk(){return Nl(e=>hT(e))}function Qk(e,a,r){return new e({type:"array",element:a,...$e(r)})}function Jk(e,a,r){return new e({type:"custom",check:"custom",fn:a,...$e(r)})}function Wk(e){const a=eR(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(Zi(i,r.value,a._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=r.value),c.inst??(c.inst=a),c.continue??(c.continue=!a._zod.def.abort),r.issues.push(Zi(c))}},e(r.value,r)));return a}function eR(e,a){const r=new fa({check:"custom",...$e(a)});return r._zod.check=e,r}function av(e,a){try{var r=e()}catch(i){return a(i)}return r&&r.then?r.then(void 0,a):r}function tR(e,a){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,d=i.path.join(".");if(!r[d])if("unionErrors"in i){var f=i.unionErrors[0].errors[0];r[d]={message:f.message,type:f.code}}else r[d]={message:u,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(p){return p.errors.forEach(function(b){return e.push(b)})}),a){var x=r[d].types,g=x&&x[i.code];r[d]=Qh(d,a,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function sR(e,a){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,d=i.path.join(".");if(!r[d])if(i.code==="invalid_union"&&i.errors.length>0){var f=i.errors[0][0];r[d]={message:f.message,type:f.code}}else r[d]={message:u,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(p){return p.forEach(function(b){return e.push(b)})}),a){var x=r[d].types,g=x&&x[i.code];r[d]=Qh(d,a,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function fu(e,a,r){if(r===void 0&&(r={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,u){try{return Promise.resolve(av(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,a)).then(function(d){return u.shouldUseNativeValidation&&sh({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(f){return Array.isArray(f?.issues)})(d))return{values:{},errors:qy(tR(d.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,u){try{return Promise.resolve(av(function(){return Promise.resolve((r.mode==="sync"?ET:TT)(e,i,a)).then(function(d){return u.shouldUseNativeValidation&&sh({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(f){return f instanceof n0})(d))return{values:{},errors:qy(sR(d.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};throw new Error("Invalid input: not a Zod schema")}const aR=Ce("ZodISODateTime",(e,a)=>{RD.init(e,a),yt.init(e,a)});function nR(e){return zk(aR,e)}const rR=Ce("ZodISODate",(e,a)=>{MD.init(e,a),yt.init(e,a)});function lR(e){return Ok(rR,e)}const iR=Ce("ZodISOTime",(e,a)=>{_D.init(e,a),yt.init(e,a)});function oR(e){return Lk(iR,e)}const cR=Ce("ZodISODuration",(e,a)=>{zD.init(e,a),yt.init(e,a)});function uR(e){return Vk(cR,e)}const dR=(e,a)=>{n0.init(e,a),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>AT(e,r)},flatten:{value:r=>CT(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,ah,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,ah,2)}},isEmpty:{get(){return e.issues.length===0}}})},Fs=Ce("ZodError",dR,{Parent:Error}),mR=ou(Fs),fR=cu(Fs),hR=uu(Fs),xR=du(Fs),gR=RT(Fs),pR=MT(Fs),bR=_T(Fs),yR=zT(Fs),vR=OT(Fs),jR=LT(Fs),NR=VT(Fs),wR=PT(Fs),Vt=Ce("ZodType",(e,a)=>(_t.init(e,a),e.def=a,e.type=a.type,Object.defineProperty(e,"_def",{value:a}),e.check=(...r)=>e.clone(ir(a,{checks:[...a.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(r,i)=>En(e,r,i),e.brand=()=>e,e.register=((r,i)=>(r.add(e,i),e)),e.parse=(r,i)=>mR(e,r,i,{callee:e.parse}),e.safeParse=(r,i)=>hR(e,r,i),e.parseAsync=async(r,i)=>fR(e,r,i,{callee:e.parseAsync}),e.safeParseAsync=async(r,i)=>xR(e,r,i),e.spa=e.safeParseAsync,e.encode=(r,i)=>gR(e,r,i),e.decode=(r,i)=>pR(e,r,i),e.encodeAsync=async(r,i)=>bR(e,r,i),e.decodeAsync=async(r,i)=>yR(e,r,i),e.safeEncode=(r,i)=>vR(e,r,i),e.safeDecode=(r,i)=>jR(e,r,i),e.safeEncodeAsync=async(r,i)=>NR(e,r,i),e.safeDecodeAsync=async(r,i)=>wR(e,r,i),e.refine=(r,i)=>e.check(fM(r,i)),e.superRefine=r=>e.check(hM(r)),e.overwrite=r=>e.check(Nl(r)),e.optional=()=>lv(e),e.nullable=()=>iv(e),e.nullish=()=>lv(iv(e)),e.nonoptional=r=>lM(e,r),e.array=()=>YR(e),e.or=r=>KR([e,r]),e.and=r=>QR(e,r),e.transform=r=>ov(e,eM(r)),e.default=r=>aM(e,r),e.prefault=r=>rM(e,r),e.catch=r=>oM(e,r),e.pipe=r=>ov(e,r),e.readonly=()=>dM(e),e.describe=r=>{const i=e.clone();return Sc.add(i,{description:r}),i},Object.defineProperty(e,"description",{get(){return Sc.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Sc.get(e);const i=e.clone();return Sc.add(i,r[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),m1=Ce("_ZodString",(e,a)=>{r0.init(e,a),Vt.init(e,a);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...i)=>e.check(Bk(...i)),e.includes=(...i)=>e.check(Fk(...i)),e.startsWith=(...i)=>e.check(Ik(...i)),e.endsWith=(...i)=>e.check(Hk(...i)),e.min=(...i)=>e.check(Kc(...i)),e.max=(...i)=>e.check(u1(...i)),e.length=(...i)=>e.check(d1(...i)),e.nonempty=(...i)=>e.check(Kc(1,...i)),e.lowercase=i=>e.check($k(i)),e.uppercase=i=>e.check(qk(i)),e.trim=()=>e.check(Zk()),e.normalize=(...i)=>e.check(Yk(...i)),e.toLowerCase=()=>e.check(Gk()),e.toUpperCase=()=>e.check(Kk()),e.slugify=()=>e.check(Xk())}),SR=Ce("ZodString",(e,a)=>{r0.init(e,a),m1.init(e,a),e.email=r=>e.check(fk(CR,r)),e.url=r=>e.check(bk(AR,r)),e.jwt=r=>e.check(_k($R,r)),e.emoji=r=>e.check(yk(ER,r)),e.guid=r=>e.check(sv(nv,r)),e.uuid=r=>e.check(hk(Cc,r)),e.uuidv4=r=>e.check(xk(Cc,r)),e.uuidv6=r=>e.check(gk(Cc,r)),e.uuidv7=r=>e.check(pk(Cc,r)),e.nanoid=r=>e.check(vk(TR,r)),e.guid=r=>e.check(sv(nv,r)),e.cuid=r=>e.check(jk(DR,r)),e.cuid2=r=>e.check(Nk(kR,r)),e.ulid=r=>e.check(wk(RR,r)),e.base64=r=>e.check(kk(PR,r)),e.base64url=r=>e.check(Rk(UR,r)),e.xid=r=>e.check(Sk(MR,r)),e.ksuid=r=>e.check(Ck(_R,r)),e.ipv4=r=>e.check(Ak(zR,r)),e.ipv6=r=>e.check(Ek(OR,r)),e.cidrv4=r=>e.check(Tk(LR,r)),e.cidrv6=r=>e.check(Dk(VR,r)),e.e164=r=>e.check(Mk(BR,r)),e.datetime=r=>e.check(nR(r)),e.date=r=>e.check(lR(r)),e.time=r=>e.check(oR(r)),e.duration=r=>e.check(uR(r))});function He(e){return mk(SR,e)}const yt=Ce("ZodStringFormat",(e,a)=>{gt.init(e,a),m1.init(e,a)}),CR=Ce("ZodEmail",(e,a)=>{ND.init(e,a),yt.init(e,a)}),nv=Ce("ZodGUID",(e,a)=>{vD.init(e,a),yt.init(e,a)}),Cc=Ce("ZodUUID",(e,a)=>{jD.init(e,a),yt.init(e,a)}),AR=Ce("ZodURL",(e,a)=>{wD.init(e,a),yt.init(e,a)}),ER=Ce("ZodEmoji",(e,a)=>{SD.init(e,a),yt.init(e,a)}),TR=Ce("ZodNanoID",(e,a)=>{CD.init(e,a),yt.init(e,a)}),DR=Ce("ZodCUID",(e,a)=>{AD.init(e,a),yt.init(e,a)}),kR=Ce("ZodCUID2",(e,a)=>{ED.init(e,a),yt.init(e,a)}),RR=Ce("ZodULID",(e,a)=>{TD.init(e,a),yt.init(e,a)}),MR=Ce("ZodXID",(e,a)=>{DD.init(e,a),yt.init(e,a)}),_R=Ce("ZodKSUID",(e,a)=>{kD.init(e,a),yt.init(e,a)}),zR=Ce("ZodIPv4",(e,a)=>{OD.init(e,a),yt.init(e,a)}),OR=Ce("ZodIPv6",(e,a)=>{LD.init(e,a),yt.init(e,a)}),LR=Ce("ZodCIDRv4",(e,a)=>{VD.init(e,a),yt.init(e,a)}),VR=Ce("ZodCIDRv6",(e,a)=>{PD.init(e,a),yt.init(e,a)}),PR=Ce("ZodBase64",(e,a)=>{UD.init(e,a),yt.init(e,a)}),UR=Ce("ZodBase64URL",(e,a)=>{$D.init(e,a),yt.init(e,a)}),BR=Ce("ZodE164",(e,a)=>{qD.init(e,a),yt.init(e,a)}),$R=Ce("ZodJWT",(e,a)=>{ID.init(e,a),yt.init(e,a)}),qR=Ce("ZodUnknown",(e,a)=>{HD.init(e,a),Vt.init(e,a)});function rv(){return Pk(qR)}const FR=Ce("ZodNever",(e,a)=>{YD.init(e,a),Vt.init(e,a)});function IR(e){return Uk(FR,e)}const HR=Ce("ZodArray",(e,a)=>{ZD.init(e,a),Vt.init(e,a),e.element=a.element,e.min=(r,i)=>e.check(Kc(r,i)),e.nonempty=r=>e.check(Kc(1,r)),e.max=(r,i)=>e.check(u1(r,i)),e.length=(r,i)=>e.check(d1(r,i)),e.unwrap=()=>e.element});function YR(e,a){return Qk(HR,e,a)}const ZR=Ce("ZodObject",(e,a)=>{KD.init(e,a),Vt.init(e,a),ut(e,"shape",()=>a.shape),e.keyof=()=>l0(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:rv()}),e.loose=()=>e.clone({...e._zod.def,catchall:rv()}),e.strict=()=>e.clone({...e._zod.def,catchall:IR()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>vT(e,r),e.safeExtend=r=>jT(e,r),e.merge=r=>NT(e,r),e.pick=r=>bT(e,r),e.omit=r=>yT(e,r),e.partial=(...r)=>wT(f1,e,r[0]),e.required=(...r)=>ST(h1,e,r[0])});function hu(e,a){const r={type:"object",shape:e??{},...$e(a)};return new ZR(r)}const GR=Ce("ZodUnion",(e,a)=>{XD.init(e,a),Vt.init(e,a),e.options=a.options});function KR(e,a){return new GR({type:"union",options:e,...$e(a)})}const XR=Ce("ZodIntersection",(e,a)=>{QD.init(e,a),Vt.init(e,a)});function QR(e,a){return new XR({type:"intersection",left:e,right:a})}const rh=Ce("ZodEnum",(e,a)=>{JD.init(e,a),Vt.init(e,a),e.enum=a.entries,e.options=Object.values(a.entries);const r=new Set(Object.keys(a.entries));e.extract=(i,c)=>{const u={};for(const d of i)if(r.has(d))u[d]=a.entries[d];else throw new Error(`Key ${d} not found in enum`);return new rh({...a,checks:[],...$e(c),entries:u})},e.exclude=(i,c)=>{const u={...a.entries};for(const d of i)if(r.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new rh({...a,checks:[],...$e(c),entries:u})}});function l0(e,a){const r=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new rh({type:"enum",entries:r,...$e(a)})}const JR=Ce("ZodLiteral",(e,a)=>{WD.init(e,a),Vt.init(e,a),e.values=new Set(a.values),Object.defineProperty(e,"value",{get(){if(a.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return a.values[0]}})});function i0(e,a){return new JR({type:"literal",values:Array.isArray(e)?e:[e],...$e(a)})}const WR=Ce("ZodTransform",(e,a)=>{ek.init(e,a),Vt.init(e,a),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new JN(e.constructor.name);r.addIssue=u=>{if(typeof u=="string")r.issues.push(Zi(u,r.value,a));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=r.value),d.inst??(d.inst=e),r.issues.push(Zi(d))}};const c=a.transform(r.value,r);return c instanceof Promise?c.then(u=>(r.value=u,r)):(r.value=c,r)}});function eM(e){return new WR({type:"transform",transform:e})}const f1=Ce("ZodOptional",(e,a)=>{tk.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType});function lv(e){return new f1({type:"optional",innerType:e})}const tM=Ce("ZodNullable",(e,a)=>{sk.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType});function iv(e){return new tM({type:"nullable",innerType:e})}const sM=Ce("ZodDefault",(e,a)=>{ak.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function aM(e,a){return new sM({type:"default",innerType:e,get defaultValue(){return typeof a=="function"?a():t1(a)}})}const nM=Ce("ZodPrefault",(e,a)=>{nk.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType});function rM(e,a){return new nM({type:"prefault",innerType:e,get defaultValue(){return typeof a=="function"?a():t1(a)}})}const h1=Ce("ZodNonOptional",(e,a)=>{rk.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType});function lM(e,a){return new h1({type:"nonoptional",innerType:e,...$e(a)})}const iM=Ce("ZodCatch",(e,a)=>{lk.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function oM(e,a){return new iM({type:"catch",innerType:e,catchValue:typeof a=="function"?a:()=>a})}const cM=Ce("ZodPipe",(e,a)=>{ik.init(e,a),Vt.init(e,a),e.in=a.in,e.out=a.out});function ov(e,a){return new cM({type:"pipe",in:e,out:a})}const uM=Ce("ZodReadonly",(e,a)=>{ok.init(e,a),Vt.init(e,a),e.unwrap=()=>e._zod.def.innerType});function dM(e){return new uM({type:"readonly",innerType:e})}const mM=Ce("ZodCustom",(e,a)=>{ck.init(e,a),Vt.init(e,a)});function fM(e,a={}){return Jk(mM,e,a)}function hM(e){return Wk(e)}const x1=hu({firstName:He().min(2,"Prnom requis (min 2 car.)"),lastName:He().min(2,"Nom requis (min 2 car.)"),email:He().email("Email invalide"),phone:He().optional(),password:He().min(6,"Mot de passe min 6 car."),role:l0(["super_admin","admin","scolarite","finance","qualite"])}),xM=x1.omit({password:!0,email:!0}).extend({email:He().email("Email invalide").optional()}),cv={firstName:"",lastName:"",email:"",phone:"",password:"",role:"scolarite"},gM=[{value:"scolarite",label:"Scolarit"},{value:"finance",label:"Comptabilit"},{value:"qualite",label:"Assurance Qualit"},{value:"admin",label:"Administrateur"},{value:"super_admin",label:"Prsident / DG"}],ze=y.forwardRef(({label:e,error:a,icon:r,className:i="",type:c="text",...u},d)=>{const f=c==="date";return t.jsxs("div",{className:"space-y-1",children:[e&&t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide",children:e}),t.jsxs("div",{className:"relative",children:[r&&t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:r}),t.jsx("input",{ref:d,type:c,className:`
              w-full px-3 py-2.5 text-sm font-medium
              border-2 rounded-lg transition-all duration-200
              ${f?"bg-slate-800 text-white border-slate-700 [color-scheme:dark]":"bg-white text-slate-800 border-slate-200"}
              ${a?"border-red-400 focus:border-red-500 focus:ring-red-500/20":"focus:border-blue-500 focus:ring-blue-500/20"}
              focus:outline-none focus:ring-2
              placeholder:text-slate-400 placeholder:font-normal
              ${r?"pl-10":""}
              ${i}
            `,...u})]}),a&&t.jsx("p",{className:"text-xs text-red-500 font-medium",children:a.message})]})});ze.displayName="FormInput";const gn=y.forwardRef(({label:e,error:a,options:r,placeholder:i="Slectionner",className:c="",...u},d)=>t.jsxs("div",{className:"space-y-1",children:[e&&t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide",children:e}),t.jsxs("select",{ref:d,className:`
            w-full px-3 py-2.5 text-sm font-medium
            bg-white border-2 rounded-lg transition-all duration-200
            ${a?"border-red-400 focus:border-red-500":"border-slate-200 focus:border-blue-500"}
            focus:outline-none focus:ring-2 focus:ring-blue-500/20
            ${c}
          `,...u,children:[t.jsx("option",{value:"",children:i}),r.map(f=>t.jsx("option",{value:f.value,children:f.label},f.value))]}),a&&t.jsx("p",{className:"text-xs text-red-500 font-medium",children:a.message})]}));gn.displayName="FormSelect";const uv=({isOpen:e,onClose:a,onSubmit:r,initialData:i,mode:c,loading:u=!1})=>{const[d,f]=y.useState(""),x=y.useRef(void 0),g=lu({resolver:fu(c==="create"?x1:xM),defaultValues:{...cv,...i}}),{register:p,handleSubmit:b,reset:v,formState:{errors:S}}=g;y.useEffect(()=>{if(!e){x.current=void 0;return}if(c==="create")v({...cv}),x.current=void 0;else if(c==="edit"&&i){const _={...i};delete _.password,v({firstName:_.firstName||"",lastName:_.lastName||"",email:_.email||"",phone:_.phone||"",role:_.role||"scolarite"}),x.current=i?.email}},[e,c]);const T=()=>{v(),f(""),a()},M=async _=>{f("");try{c==="create"?await r(_):await r(_),T()}catch(C){f(C.message||"Erreur lors de l'enregistrement")}};return t.jsx(xt,{isOpen:e,onClose:T,title:c==="create"?"Nouveau compte":"Modifier le compte",size:"md",children:t.jsxs("form",{onSubmit:b(M),className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(ze,{label:"Prnom",placeholder:"Jean",error:S.firstName,...p("firstName")}),t.jsx(ze,{label:"Nom",placeholder:"Dupont",error:S.lastName,...p("lastName")})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(ze,{label:"Email",type:"email",placeholder:"email@upcd-itak.com",error:S.email,...p("email")}),t.jsx(ze,{label:"Tlphone",type:"tel",placeholder:"+223 XX XX XX XX",...p("phone")})]}),c==="create"&&t.jsx(ze,{label:"Mot de passe",type:"password",placeholder:"",error:c==="create"?S.password:void 0,...p("password")}),t.jsx(gn,{label:"Rle",options:gM,error:S.role,...p("role")}),d&&t.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:d}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:T,className:"flex-1 px-4 py-2.5 border-2 border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors font-semibold",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:u,className:`flex-1 px-4 py-2.5 text-white rounded-xl transition-colors font-semibold disabled:opacity-50 shadow-lg ${c==="create"?"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25":"bg-amber-500 hover:bg-amber-600 shadow-amber-500/25"}`,children:u?"...":c==="create"?"Crer":"Enregistrer"})]})]})})},pM=()=>{const[e,a]=y.useState([]),[r,i]=y.useState(!0),[c,u]=y.useState("all"),[d,f]=y.useState(!1),[x,g]=y.useState(!1),[p,b]=y.useState(!1),[v,S]=y.useState(!1),[T,M]=y.useState(null),[_,C]=y.useState(!1);y.useEffect(()=>{j()},[]);const j=async()=>{i(!0);try{const R=await pe.getAllUsers(),Q=R.data||R;Array.isArray(Q)&&a(Q.filter(ae=>["super_admin","admin","scolarite","finance","qualite"].includes(ae.role)))}catch(R){console.error("Erreur:",R)}finally{i(!1)}},N=async R=>{C(!0);try{const Q=await pe.createUser(R);if(!Q.success)throw new Error(Q.error||"Erreur lors de la cration du compte");f(!1),j()}catch(Q){throw console.error("Erreur cration:",Q),Q}finally{C(!1)}},A=async R=>{if(T){C(!0);try{const Q=await pe.updateUser(T.id,{firstName:R.firstName,lastName:R.lastName,email:R.email,phone:R.phone,role:R.role});if(!Q.success)throw new Error(Q.error||"Erreur lors de la modification du compte");b(!1),M(null),j()}catch(Q){throw console.error("Erreur modification:",Q),Q}finally{C(!1)}}},O=async()=>{if(T){C(!0);try{await pe.deleteUser(T.id),S(!1),M(null),j()}finally{C(!1)}}},U=async R=>{try{R.isActive?await pe.deactivateUser(R.id):await pe.activateUser(R.id),j()}catch(Q){console.error("Erreur:",Q)}},D=c==="all"?e:e.filter(R=>R.role===c),z=[{value:"super_admin",label:"Prsident / DG",color:"bg-red-500"},{value:"admin",label:"Admin",color:"bg-purple-500"},{value:"scolarite",label:"Scolarit",color:"bg-blue-500"},{value:"finance",label:"Finance",color:"bg-emerald-500"},{value:"qualite",label:"Qualit",color:"bg-amber-500"}],P=R=>({super_admin:"bg-red-100 text-red-700",admin:"bg-purple-100 text-purple-700",scolarite:"bg-blue-100 text-blue-700",finance:"bg-emerald-100 text-emerald-700",qualite:"bg-amber-100 text-amber-700"})[R]||"bg-slate-100 text-slate-700",se=R=>R?new Date(R).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}):"-",X=[{key:"user",header:"Utilisateur",render:R=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-700 font-bold text-sm",children:[R.firstName?.[0],R.lastName?.[0]]}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold text-slate-900",children:[R.firstName," ",R.lastName]}),t.jsxs("p",{className:"text-xs text-slate-500",children:["@",R.username]})]})]})},{key:"contact",header:"Contact",render:R=>t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-slate-600",children:[t.jsx(za,{className:"w-3 h-3"}),R.email]}),R.phone&&t.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[t.jsx(bn,{className:"w-3 h-3"}),R.phone]})]})},{key:"role",header:"Rle",render:R=>t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded-full ${P(R.role)}`,children:[t.jsx(Om,{className:"w-3 h-3"}),fb[R.role]||R.role]})},{key:"status",header:"Statut",render:R=>t.jsx("button",{onClick:()=>U(R),className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded-full transition-colors ${R.isActive?"bg-emerald-100 text-emerald-800 hover:bg-emerald-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:R.isActive?t.jsxs(t.Fragment,{children:[t.jsx(Bs,{className:"w-3 h-3"}),"Actif"]}):t.jsxs(t.Fragment,{children:[t.jsx(xh,{className:"w-3 h-3"}),"Inactif"]})})},{key:"actions",header:"",render:R=>t.jsx(xn,{onView:()=>{M(R),g(!0)},onEdit:()=>{M(R),b(!0)},onDelete:()=>{M(R),S(!0)}})}];return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(cs,{title:"Gestion des Utilisateurs",subtitle:"Comptes avec accs au systme",icon:Qt,iconColor:"from-violet-600 to-purple-700",actions:t.jsx(ua,{onClick:()=>f(!0),icon:fj,label:"Nouveau compte"})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:()=>u("all"),className:`flex items-center gap-3 px-5 py-4 rounded-xl transition-all ${c==="all"?"bg-white shadow-lg border-2 border-slate-300":"bg-white/60 hover:bg-white border border-slate-200"}`,children:[t.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center text-white shadow",children:t.jsx(Qt,{className:"w-5 h-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:`text-sm font-bold ${c==="all"?"text-slate-900":"text-slate-700"}`,children:"Tous"}),t.jsx("p",{className:"text-xs font-medium text-slate-500",children:e.length})]})]}),z.map(R=>t.jsxs("button",{onClick:()=>u(R.value),className:`flex items-center gap-3 px-5 py-4 rounded-xl transition-all ${c===R.value?"bg-white shadow-lg border-2 border-slate-300":"bg-white/60 hover:bg-white border border-slate-200"}`,children:[t.jsx("div",{className:`w-10 h-10 ${R.color} rounded-lg flex items-center justify-center text-white shadow`,children:t.jsx(Om,{className:"w-5 h-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:`text-sm font-bold ${c===R.value?"text-slate-900":"text-slate-700"}`,children:R.label}),t.jsx("p",{className:"text-xs font-medium text-slate-500",children:e.filter(Q=>Q.role===R.value).length})]})]},R.value))]}),r?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx("div",{className:"w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t.jsx(hn,{data:D,columns:X,searchPlaceholder:"Rechercher...",pageSize:10,emptyMessage:"Aucun utilisateur"}),t.jsx(uv,{isOpen:d,onClose:()=>f(!1),onSubmit:N,mode:"create",loading:_}),t.jsx(uv,{isOpen:p,onClose:()=>{b(!1),M(null)},onSubmit:A,mode:"edit",loading:_,initialData:T?{firstName:T.firstName,lastName:T.lastName,email:T.email,phone:T.phone||"",role:T.role}:void 0}),t.jsx(xt,{isOpen:x,onClose:()=>{g(!1),M(null)},title:"Dtails",size:"sm",children:T&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center text-blue-700 text-xl font-bold",children:[T.firstName?.[0],T.lastName?.[0]]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-slate-900",children:[T.firstName," ",T.lastName]}),t.jsxs("p",{className:"text-sm text-slate-500",children:["@",T.username]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(wi,{icon:za,label:"Email",value:T.email}),t.jsx(wi,{icon:bn,label:"Tlphone",value:T.phone}),t.jsx(wi,{icon:Om,label:"Rle",value:fb[T.role],badge:P(T.role)}),t.jsx(wi,{icon:Lt,label:"Statut",value:T.isActive?"Actif":"Inactif",badge:T.isActive?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}),T.createdAt&&t.jsx(wi,{icon:as,label:"Cr le",value:se(T.createdAt)})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{g(!1),b(!0)},className:"flex-1 px-4 py-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600 font-semibold text-sm",children:"Modifier"}),t.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 border-2 border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 font-semibold text-sm",children:"Fermer"})]})]})}),t.jsx(sr,{isOpen:v,onClose:()=>{S(!1),M(null)},onConfirm:O,title:"Supprimer ?",message:`Voulez-vous supprimer ${T?.firstName} ${T?.lastName} ?`,type:"danger",confirmText:"Supprimer",loading:_})]})})},wi=({icon:e,label:a,value:r,badge:i})=>r?t.jsxs("div",{className:"flex items-center gap-3 p-2 border border-slate-100 rounded-lg",children:[t.jsx(e,{className:"w-4 h-4 text-slate-400"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:a}),i?t.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${i}`,children:r}):t.jsx("p",{className:"text-sm text-slate-700",children:r})]})]}):null,bM=hu({firstName:He().min(2,"Prnom requis (min 2 car.)"),lastName:He().min(2,"Nom requis (min 2 car.)"),matricule:He().min(3,"Matricule requis"),enrollmentDate:He().min(1,"Date d'inscription requise"),email:He().email("Email invalide").optional().or(i0("")),phone:He().optional(),gender:l0(["M","F",""]).optional(),birthDate:He().optional(),address:He().optional(),maritalStatus:He().optional(),fatherName:He().optional(),motherName:He().optional(),tutorName:He().optional(),tutorPhone:He().optional(),emergencyContact:He().optional(),notes:He().optional(),institutionId:He().uuid("ID d'affectation invalide").refine(e=>e.length>0,{message:"Veuillez slectionner une affectation"})}),Jm={firstName:"",lastName:"",matricule:"",enrollmentDate:new Date().toISOString().split("T")[0],email:"",phone:"",gender:"",birthDate:"",address:"",maritalStatus:"",fatherName:"",motherName:"",tutorName:"",tutorPhone:"",emergencyContact:"",notes:"",institutionId:""},yM=({currentImage:e,onImageChange:a,size:r="md",shape:i="circle",label:c="Photo",disabled:u=!1})=>{const[d,f]=y.useState(e||null),[x,g]=y.useState(!1),p=y.useRef(null),b={sm:"w-20 h-20",md:"w-32 h-32",lg:"w-40 h-40"},v={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-12 h-12"},S=(A,O=400,U=.7)=>new Promise(D=>{const z=document.createElement("canvas"),P=z.getContext("2d"),se=new Image;se.onload=()=>{let X=se.width,R=se.height;X>O&&(R=R*O/X,X=O),z.width=X,z.height=R,P.drawImage(se,0,0,X,R);const Q=z.toDataURL("image/jpeg",U);D(Q)},se.src=URL.createObjectURL(A)}),T=async A=>{if(A){if(!A.type.startsWith("image/")){alert("Veuillez slectionner une image");return}if(A.size>5*1024*1024){alert("L'image ne doit pas dpasser 5 Mo");return}const O=await S(A);f(O),a(A,O)}else f(null),a(null,null)},M=async A=>{if(A.preventDefault(),g(!1),u)return;const O=A.dataTransfer.files[0];await T(O)},_=A=>{A.preventDefault(),u||g(!0)},C=()=>{g(!1)},j=()=>{u||p.current?.click()},N=A=>{A.stopPropagation(),T(null)};return t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx("p",{className:"text-sm font-semibold text-slate-700",children:c}),t.jsx("div",{onClick:j,onDrop:M,onDragOver:_,onDragLeave:C,className:`
          relative ${b[r]} ${i==="circle"?"rounded-full":"rounded-xl"}
          border-2 border-dashed transition-all duration-200 cursor-pointer overflow-hidden shadow-sm
          ${x?"border-blue-500 bg-blue-100 shadow-blue-200":"border-slate-400 bg-slate-100 hover:border-blue-500 hover:bg-blue-50"}
          ${u?"opacity-50 cursor-not-allowed":""}
          ${d?"border-solid border-slate-300 bg-white shadow-md":""}
        `,children:d?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"}),!u&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:t.jsx(L4,{className:"w-6 h-6 text-white"})}),t.jsx("button",{onClick:N,className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-md",children:t.jsx(Sn,{className:"w-3 h-3"})})]})]}):t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-500",children:[t.jsx(Lt,{className:v[r]}),r!=="sm"&&t.jsx("span",{className:"text-xs mt-1 text-center px-2 font-medium",children:"Ajouter photo"})]})}),t.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:A=>T(A.target.files?.[0]||null),className:"hidden",disabled:u}),!d&&!u&&t.jsxs("button",{type:"button",onClick:j,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",children:[t.jsx(Z5,{className:"w-3.5 h-3.5"}),"Parcourir"]})]})},dv=({isOpen:e,onClose:a,onSubmit:r,initialData:i,initialPhoto:c,mode:u,loading:d=!1})=>{const[f,x]=y.useState(null),[g,p]=y.useState(c||null),[b,v]=y.useState(""),{institutions:S,selectedInstitution:T}=nu(),{register:M,handleSubmit:_,reset:C,formState:{errors:j}}=lu({resolver:fu(bM),defaultValues:{...Jm,...i,institutionId:i?.institutionId||T?.id||""}});y.useEffect(()=>{e&&(u==="create"?(C({...Jm,institutionId:T?.id||""}),x(null),p(null)):u==="edit"&&i&&C({...Jm,...i,institutionId:i.institutionId||T?.id||""}))},[e,u,i,T,C]),y.useEffect(()=>{if(e&&u==="edit")if(c){const D=c.startsWith("http")||c.startsWith("/")?c:`/${c}`;p(D),x(null)}else p(null),x(null);else e&&u==="create"&&(p(null),x(null))},[e,u,c]);const N=()=>{C(),x(null),p(null),v(""),a()},A=async D=>{v("");try{await r(D,f),N()}catch(z){v(z.message||"Erreur lors de l'enregistrement")}},O=[{value:"M",label:"Masculin"},{value:"F",label:"Fminin"}],U=[{value:"single",label:"Clibataire"},{value:"married",label:"Mari(e)"}];return t.jsx(xt,{isOpen:e,onClose:N,title:u==="create"?"Nouvel tudiant":"Modifier l'tudiant",size:"xl",children:t.jsxs("form",{onSubmit:_(A),className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsx("div",{className:"col-span-2",children:t.jsx(yM,{currentImage:g,onImageChange:(D,z)=>{x(D),p(z)},size:"sm",label:""})}),t.jsxs("div",{className:"col-span-5 grid grid-cols-2 gap-2",children:[t.jsx(ze,{label:"Prnom",placeholder:"Prnom",error:j.firstName,...M("firstName")}),t.jsx(ze,{label:"Nom",placeholder:"Nom",error:j.lastName,...M("lastName")}),t.jsx(gn,{label:"Genre",options:O,error:j.gender,...M("gender")}),t.jsx(ze,{label:"Naissance",type:"date",error:j.birthDate,...M("birthDate")})]}),t.jsxs("div",{className:"col-span-5 p-3 bg-blue-50 rounded-xl border border-blue-200",children:[t.jsx("h4",{className:"text-[10px] font-bold text-blue-700 uppercase mb-2",children:"Inscription"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(ze,{placeholder:"Matricule",className:"font-mono",error:j.matricule,...M("matricule")}),t.jsx(ze,{type:"date",error:j.enrollmentDate,...M("enrollmentDate")}),t.jsx("div",{className:"col-span-2",children:t.jsx(gn,{label:"Affectation",placeholder:"Slectionner l'affectation",error:j.institutionId,options:S.map(D=>({value:D.id,label:D.name})),...M("institutionId")})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[t.jsx("h4",{className:"text-[10px] font-bold text-slate-600 uppercase mb-2",children:"Contact"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(ze,{placeholder:"Email",type:"email",error:j.email,...M("email")}),t.jsx(ze,{placeholder:"Tlphone",type:"tel",...M("phone")}),t.jsx(ze,{placeholder:"Adresse",className:"col-span-2",...M("address")})]})]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[t.jsx("h4",{className:"text-[10px] font-bold text-slate-600 uppercase mb-2",children:"Famille"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(ze,{placeholder:"Pre",...M("fatherName")}),t.jsx(ze,{placeholder:"Mre",...M("motherName")}),t.jsx(ze,{placeholder:"Tuteur",...M("tutorName")}),t.jsx(ze,{placeholder:"Tl. tuteur",type:"tel",...M("tutorPhone")})]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsx(ze,{placeholder:"Contact urgence",...M("emergencyContact")}),t.jsx(gn,{options:U,placeholder:"Situation",...M("maritalStatus")}),t.jsx(ze,{placeholder:"Notes",...M("notes")})]}),b&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:b}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-2.5 border-2 border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors font-semibold",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:d,className:`flex-1 px-4 py-2.5 text-white rounded-xl transition-colors font-semibold disabled:opacity-50 shadow-lg ${u==="create"?"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25":"bg-amber-500 hover:bg-amber-600 shadow-amber-500/25"}`,children:d?"...":u==="create"?"Crer":"Enregistrer"})]})]})})},vM=({isOpen:e,onClose:a,student:r,onEdit:i,onGenerateCard:c})=>{if(!r)return null;const u=d=>d?(typeof d=="string"?new Date(d):d).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}):"-";return t.jsx(xt,{isOpen:e,onClose:a,title:"",size:"2xl",children:t.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-8rem)] overflow-y-auto pr-2",children:[t.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl border-2 border-blue-200",children:[t.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-white shadow flex-shrink-0",children:r.photo?t.jsx("img",{src:r.photo,alt:"",className:"w-full h-full object-cover"}):t.jsxs("div",{className:"w-full h-full bg-blue-100 flex items-center justify-center text-blue-700 text-2xl font-bold",children:[r.user?.firstName?.[0],r.user?.lastName?.[0]]})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:[r.user?.firstName," ",r.user?.lastName]}),t.jsx("p",{className:"text-slate-700 font-mono text-sm font-semibold",children:r.matricule}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.user?.gender&&t.jsx("span",{className:"px-3 py-1 bg-slate-200 text-slate-800 rounded-lg text-sm font-semibold border border-slate-300",children:r.user.gender==="M"?"Masculin":"Fminin"})}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 font-medium",children:[t.jsx(as,{className:"w-4 h-4 text-slate-600"}),t.jsxs("span",{children:["Inscrit le"," ",t.jsx("strong",{className:"text-slate-900",children:u(r.enrollmentDate)})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-100 rounded-xl p-4 border-2 border-slate-300",children:[t.jsxs("h4",{className:"text-sm font-bold text-slate-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[t.jsx(za,{className:"w-4 h-4 text-blue-700"}),"Informations de contact"]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(un,{icon:za,label:"Email",value:r.user?.email}),t.jsx(un,{icon:bn,label:"Tlphone",value:r.user?.phone}),t.jsx(un,{icon:Mf,label:"Adresse",value:r.address}),t.jsx(un,{icon:pn,label:"Contact d'urgence",value:r.emergencyContact})]})]}),t.jsxs("div",{className:"bg-slate-100 rounded-xl p-4 border-2 border-slate-300",children:[t.jsxs("h4",{className:"text-sm font-bold text-slate-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[t.jsx(J5,{className:"w-4 h-4 text-blue-700"}),"Informations familiales"]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(un,{icon:Lt,label:"Pre",value:r.fatherName}),t.jsx(un,{icon:c5,label:"Mre",value:r.motherName}),t.jsx(un,{icon:Lt,label:"Tuteur",value:r.tutorName}),t.jsx(un,{icon:bn,label:"Tlphone tuteur",value:r.tutorPhone})]})]})]}),r.notes&&t.jsxs("div",{className:"bg-amber-100 rounded-xl p-4 border-2 border-amber-400",children:[t.jsxs("h4",{className:"text-sm font-bold text-amber-900 uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(pn,{className:"w-4 h-4"}),"Notes importantes"]}),t.jsx("p",{className:"text-sm text-amber-950 leading-relaxed whitespace-pre-wrap font-medium",children:r.notes})]}),t.jsxs("div",{className:"flex gap-3 pt-3 border-t-2 border-slate-300 sticky bottom-0 bg-white pb-2",children:[c&&t.jsxs("button",{onClick:c,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all font-semibold text-base shadow-lg hover:shadow-xl",children:[t.jsx(Xt,{className:"w-5 h-5"}),"Gnrer la carte tudiante"]}),i&&t.jsx("button",{onClick:i,className:"px-6 py-3 bg-amber-500 text-white rounded-xl hover:bg-amber-600 transition-colors font-semibold text-base shadow-md hover:shadow-lg",children:"Modifier"}),t.jsx("button",{onClick:a,className:"px-6 py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 hover:border-slate-400 transition-colors font-semibold text-base",children:"Fermer"})]})]})})},un=({icon:e,label:a,value:r})=>r?t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border-2 border-slate-200 hover:border-blue-400 hover:shadow-md transition-all",children:[t.jsx(e,{className:"w-5 h-5 text-blue-700 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase mb-1 tracking-wide",children:a}),t.jsx("p",{className:"text-sm text-slate-900 font-semibold break-words",children:r})]})]}):t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border-2 border-slate-200 opacity-60",children:[t.jsx(e,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-0.5",children:a}),t.jsx("p",{className:"text-sm text-slate-500 italic font-medium",children:"Non renseign"})]})]}),jM=hu({firstName:He().min(2,"Prnom requis (min 2 car.)"),lastName:He().min(2,"Nom requis (min 2 car.)"),hireDate:He().min(1,"Date d'embauche requise"),email:He().email("Email invalide").optional().or(i0("")),phone:He().optional(),maritalStatus:He().optional(),diplomas:He().optional(),emergencyContact:He().optional(),institutionId:He().uuid("ID d'affectation invalide").optional()}),Wm={firstName:"",lastName:"",hireDate:new Date().toISOString().split("T")[0],email:"",phone:"",maritalStatus:"",diplomas:"",emergencyContact:"",institutionId:""},mv=({isOpen:e,onClose:a,onSubmit:r,initialData:i,mode:c,loading:u=!1})=>{const[d,f]=y.useState(""),{institutions:x,selectedInstitution:g}=nu(),{register:p,handleSubmit:b,reset:v,formState:{errors:S},setValue:T}=lu({resolver:fu(jM),defaultValues:{...Wm,...i,institutionId:i?.institutionId||g?.id||""}});y.useEffect(()=>{e&&c==="create"?(v({...Wm,institutionId:g?.id||""}),g&&T("institutionId",g.id)):e&&c==="edit"&&i&&v({...Wm,...i,institutionId:i.institutionId||g?.id||""})},[e,c,g,i,v,T]);const M=()=>{v(),f(""),a()},_=async j=>{f("");try{await r(j),M()}catch(N){f(N.message||"Erreur lors de l'enregistrement")}},C=[{value:"single",label:"Clibataire"},{value:"married",label:"Mari(e)"}];return t.jsx(xt,{isOpen:e,onClose:M,title:c==="create"?"Nouvel enseignant":"Modifier l'enseignant",size:"lg",children:t.jsxs("form",{onSubmit:b(_),className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(ze,{label:"Prnom",placeholder:"Prnom",error:S.firstName,...p("firstName")}),t.jsx(ze,{label:"Nom",placeholder:"Nom",error:S.lastName,...p("lastName")}),t.jsx(ze,{label:"Date d'embauche",type:"date",error:S.hireDate,...p("hireDate")}),t.jsx(gn,{label:"Affectation",placeholder:"Slectionner l'affectation",error:S.institutionId,options:x.map(j=>({value:j.id,label:j.name})),...p("institutionId")})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(ze,{label:"Email",placeholder:"Email",type:"email",error:S.email,...p("email")}),t.jsx(ze,{label:"Tlphone",placeholder:"Tlphone",type:"tel",...p("phone")})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(gn,{label:"Situation matrimoniale",options:C,...p("maritalStatus")}),t.jsx(ze,{label:"Diplmes",placeholder:"Diplmes",...p("diplomas")})]}),t.jsx(ze,{label:"Contact d'urgence",placeholder:"Contact d'urgence",...p("emergencyContact")}),d&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:d}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:M,className:"flex-1 px-4 py-2.5 border-2 border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors font-semibold",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:u,className:`flex-1 px-4 py-2.5 text-white rounded-xl transition-colors font-semibold disabled:opacity-50 shadow-lg ${c==="create"?"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25":"bg-amber-500 hover:bg-amber-600 shadow-amber-500/25"}`,children:u?"...":c==="create"?"Crer":"Enregistrer"})]})]})})},NM=({isOpen:e,onClose:a,teacher:r,onEdit:i})=>r?t.jsx(xt,{isOpen:e,onClose:a,title:"",size:"md",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[t.jsxs("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-blue-100 flex items-center justify-center text-blue-700 text-xl font-bold shadow flex-shrink-0",children:[r.user?.firstName?.[0],r.user?.lastName?.[0]]}),t.jsx("div",{children:t.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[r.user?.firstName," ",r.user?.lastName]})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Si,{icon:za,label:"Email",value:r.user?.email}),t.jsx(Si,{icon:bn,label:"Tlphone",value:r.user?.phone}),r.maritalStatus&&t.jsx(Si,{icon:Lt,label:"Situation matrimoniale",value:r.maritalStatus==="single"?"Clibataire":r.maritalStatus==="married"?"Mari(e)":r.maritalStatus}),t.jsx(Si,{icon:T4,label:"Diplmes",value:r.diplomas}),t.jsx(Si,{icon:pn,label:"Contact d'urgence",value:r.emergencyContact})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[i&&t.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-semibold text-sm",children:"Modifier"}),t.jsx("button",{onClick:a,className:"flex-1 px-4 py-2.5 border-2 border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors font-semibold text-sm",children:"Fermer"})]})]})}):null,Si=({icon:e,label:a,value:r})=>r?t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[t.jsx(e,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-0.5",children:a}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:r})]})]}):null,wM=hu({firstName:He().min(2,"Prnom requis (min 2 car.)"),lastName:He().min(2,"Nom requis (min 2 car.)"),hireDate:He().min(1,"Date d'embauche requise"),position:He().min(2,"Poste requis"),email:He().email("Email invalide").optional().or(i0("")),phone:He().optional(),maritalStatus:He().optional(),emergencyContact:He().optional()}),ef={firstName:"",lastName:"",hireDate:new Date().toISOString().split("T")[0],position:"",email:"",phone:"",maritalStatus:"",emergencyContact:""},fv=({isOpen:e,onClose:a,onSubmit:r,initialData:i,mode:c,loading:u=!1})=>{const[d,f]=y.useState(""),{register:x,handleSubmit:g,reset:p,formState:{errors:b}}=lu({resolver:fu(wM),defaultValues:{...ef,...i}});y.useEffect(()=>{e&&c==="create"?p({...ef}):e&&c==="edit"&&i&&p({...ef,...i})},[e,c,i,p]);const v=()=>{p(),f(""),a()},S=async M=>{f("");try{await r(M),v()}catch(_){f(_.message||"Erreur lors de l'enregistrement")}},T=[{value:"single",label:"Clibataire"},{value:"married",label:"Mari(e)"}];return t.jsx(xt,{isOpen:e,onClose:v,title:c==="create"?"Nouveau personnel":"Modifier le personnel",size:"lg",children:t.jsxs("form",{onSubmit:g(S),className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(ze,{label:"Prnom",placeholder:"Prnom",error:b.firstName,...x("firstName")}),t.jsx(ze,{label:"Nom",placeholder:"Nom",error:b.lastName,...x("lastName")}),t.jsx(ze,{label:"Date d'embauche",type:"date",error:b.hireDate,...x("hireDate")})]}),t.jsx(ze,{label:"Poste",placeholder:"Poste",error:b.position,...x("position")}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(ze,{label:"Email",placeholder:"Email",type:"email",error:b.email,...x("email")}),t.jsx(ze,{label:"Tlphone",placeholder:"Tlphone",type:"tel",...x("phone")})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(gn,{label:"Situation matrimoniale",options:T,...x("maritalStatus")}),t.jsx(ze,{label:"Contact d'urgence",placeholder:"Contact d'urgence",...x("emergencyContact")})]}),d&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:d}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:v,className:"flex-1 px-4 py-2.5 border-2 border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors font-semibold",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:u,className:`flex-1 px-4 py-2.5 text-white rounded-xl transition-colors font-semibold disabled:opacity-50 shadow-lg ${c==="create"?"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25":"bg-amber-500 hover:bg-amber-600 shadow-amber-500/25"}`,children:u?"...":c==="create"?"Crer":"Enregistrer"})]})]})})},SM=({isOpen:e,onClose:a,staff:r,onEdit:i})=>r?t.jsx(xt,{isOpen:e,onClose:a,title:"",size:"md",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[t.jsxs("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-blue-100 flex items-center justify-center text-blue-700 text-xl font-bold shadow flex-shrink-0",children:[r.user?.firstName?.[0],r.user?.lastName?.[0]]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[r.user?.firstName," ",r.user?.lastName]}),r.position&&t.jsx("p",{className:"text-sm text-slate-600 mt-1",children:r.position})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Ac,{icon:za,label:"Email",value:r.user?.email}),t.jsx(Ac,{icon:bn,label:"Tlphone",value:r.user?.phone}),r.maritalStatus&&t.jsx(Ac,{icon:Lt,label:"Situation matrimoniale",value:r.maritalStatus==="single"?"Clibataire":r.maritalStatus==="married"?"Mari(e)":r.maritalStatus}),t.jsx(Ac,{icon:pn,label:"Contact d'urgence",value:r.emergencyContact})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[i&&t.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-semibold text-sm",children:"Modifier"}),t.jsx("button",{onClick:a,className:"flex-1 px-4 py-2.5 border-2 border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors font-semibold text-sm",children:"Fermer"})]})]})}):null,Ac=({icon:e,label:a,value:r})=>r?t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[t.jsx(e,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-0.5",children:a}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:r})]})]}):null;var Jr={},tf,hv;function CM(){return hv||(hv=1,tf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),tf}var sf={},dn={},xv;function or(){if(xv)return dn;xv=1;let e;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return dn.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},dn.getSymbolTotalCodewords=function(i){return a[i]},dn.getBCHDigit=function(r){let i=0;for(;r!==0;)i++,r>>>=1;return i},dn.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');e=i},dn.isKanjiModeEnabled=function(){return typeof e<"u"},dn.toSJIS=function(i){return e(i)},dn}var af={},gv;function o0(){return gv||(gv=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function a(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},e.from=function(i,c){if(e.isValid(i))return i;try{return a(i)}catch{return c}}})(af)),af}var nf,pv;function AM(){if(pv)return nf;pv=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(a){const r=Math.floor(a/8);return(this.buffer[r]>>>7-a%8&1)===1},put:function(a,r){for(let i=0;i<r;i++)this.putBit((a>>>r-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),a&&(this.buffer[r]|=128>>>this.length%8),this.length++}},nf=e,nf}var rf,bv;function EM(){if(bv)return rf;bv=1;function e(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return e.prototype.set=function(a,r,i,c){const u=a*this.size+r;this.data[u]=i,c&&(this.reservedBit[u]=!0)},e.prototype.get=function(a,r){return this.data[a*this.size+r]},e.prototype.xor=function(a,r,i){this.data[a*this.size+r]^=i},e.prototype.isReserved=function(a,r){return this.reservedBit[a*this.size+r]},rf=e,rf}var lf={},yv;function TM(){return yv||(yv=1,(function(e){const a=or().getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const c=Math.floor(i/7)+2,u=a(i),d=u===145?26:Math.ceil((u-13)/(2*c-2))*2,f=[u-7];for(let x=1;x<c-1;x++)f[x]=f[x-1]-d;return f.push(6),f.reverse()},e.getPositions=function(i){const c=[],u=e.getRowColCoords(i),d=u.length;for(let f=0;f<d;f++)for(let x=0;x<d;x++)f===0&&x===0||f===0&&x===d-1||f===d-1&&x===0||c.push([u[f],u[x]]);return c}})(lf)),lf}var of={},vv;function DM(){if(vv)return of;vv=1;const e=or().getSymbolSize,a=7;return of.getPositions=function(i){const c=e(i);return[[0,0],[c-a,0],[0,c-a]]},of}var cf={},jv;function kM(){return jv||(jv=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};e.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},e.from=function(c){return e.isValid(c)?parseInt(c,10):void 0},e.getPenaltyN1=function(c){const u=c.size;let d=0,f=0,x=0,g=null,p=null;for(let b=0;b<u;b++){f=x=0,g=p=null;for(let v=0;v<u;v++){let S=c.get(b,v);S===g?f++:(f>=5&&(d+=a.N1+(f-5)),g=S,f=1),S=c.get(v,b),S===p?x++:(x>=5&&(d+=a.N1+(x-5)),p=S,x=1)}f>=5&&(d+=a.N1+(f-5)),x>=5&&(d+=a.N1+(x-5))}return d},e.getPenaltyN2=function(c){const u=c.size;let d=0;for(let f=0;f<u-1;f++)for(let x=0;x<u-1;x++){const g=c.get(f,x)+c.get(f,x+1)+c.get(f+1,x)+c.get(f+1,x+1);(g===4||g===0)&&d++}return d*a.N2},e.getPenaltyN3=function(c){const u=c.size;let d=0,f=0,x=0;for(let g=0;g<u;g++){f=x=0;for(let p=0;p<u;p++)f=f<<1&2047|c.get(g,p),p>=10&&(f===1488||f===93)&&d++,x=x<<1&2047|c.get(p,g),p>=10&&(x===1488||x===93)&&d++}return d*a.N3},e.getPenaltyN4=function(c){let u=0;const d=c.data.length;for(let x=0;x<d;x++)u+=c.data[x];return Math.abs(Math.ceil(u*100/d/5)-10)*a.N4};function r(i,c,u){switch(i){case e.Patterns.PATTERN000:return(c+u)%2===0;case e.Patterns.PATTERN001:return c%2===0;case e.Patterns.PATTERN010:return u%3===0;case e.Patterns.PATTERN011:return(c+u)%3===0;case e.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(u/3))%2===0;case e.Patterns.PATTERN101:return c*u%2+c*u%3===0;case e.Patterns.PATTERN110:return(c*u%2+c*u%3)%2===0;case e.Patterns.PATTERN111:return(c*u%3+(c+u)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(c,u){const d=u.size;for(let f=0;f<d;f++)for(let x=0;x<d;x++)u.isReserved(x,f)||u.xor(x,f,r(c,x,f))},e.getBestMask=function(c,u){const d=Object.keys(e.Patterns).length;let f=0,x=1/0;for(let g=0;g<d;g++){u(g),e.applyMask(g,c);const p=e.getPenaltyN1(c)+e.getPenaltyN2(c)+e.getPenaltyN3(c)+e.getPenaltyN4(c);e.applyMask(g,c),p<x&&(x=p,f=g)}return f}})(cf)),cf}var Ec={},Nv;function g1(){if(Nv)return Ec;Nv=1;const e=o0(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ec.getBlocksCount=function(c,u){switch(u){case e.L:return a[(c-1)*4+0];case e.M:return a[(c-1)*4+1];case e.Q:return a[(c-1)*4+2];case e.H:return a[(c-1)*4+3];default:return}},Ec.getTotalCodewordsCount=function(c,u){switch(u){case e.L:return r[(c-1)*4+0];case e.M:return r[(c-1)*4+1];case e.Q:return r[(c-1)*4+2];case e.H:return r[(c-1)*4+3];default:return}},Ec}var uf={},Ci={},wv;function RM(){if(wv)return Ci;wv=1;const e=new Uint8Array(512),a=new Uint8Array(256);return(function(){let i=1;for(let c=0;c<255;c++)e[c]=i,a[i]=c,i<<=1,i&256&&(i^=285);for(let c=255;c<512;c++)e[c]=e[c-255]})(),Ci.log=function(i){if(i<1)throw new Error("log("+i+")");return a[i]},Ci.exp=function(i){return e[i]},Ci.mul=function(i,c){return i===0||c===0?0:e[a[i]+a[c]]},Ci}var Sv;function MM(){return Sv||(Sv=1,(function(e){const a=RM();e.mul=function(i,c){const u=new Uint8Array(i.length+c.length-1);for(let d=0;d<i.length;d++)for(let f=0;f<c.length;f++)u[d+f]^=a.mul(i[d],c[f]);return u},e.mod=function(i,c){let u=new Uint8Array(i);for(;u.length-c.length>=0;){const d=u[0];for(let x=0;x<c.length;x++)u[x]^=a.mul(c[x],d);let f=0;for(;f<u.length&&u[f]===0;)f++;u=u.slice(f)}return u},e.generateECPolynomial=function(i){let c=new Uint8Array([1]);for(let u=0;u<i;u++)c=e.mul(c,new Uint8Array([1,a.exp(u)]));return c}})(uf)),uf}var df,Cv;function _M(){if(Cv)return df;Cv=1;const e=MM();function a(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(i){this.degree=i,this.genPoly=e.generateECPolynomial(this.degree)},a.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const c=new Uint8Array(i.length+this.degree);c.set(i);const u=e.mod(c,this.genPoly),d=this.degree-u.length;if(d>0){const f=new Uint8Array(this.degree);return f.set(u,d),f}return u},df=a,df}var mf={},ff={},hf={},Av;function p1(){return Av||(Av=1,hf.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),hf}var ra={},Ev;function b1(){if(Ev)return ra;Ev=1;const e="[0-9]+",a="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;ra.KANJI=new RegExp(r,"g"),ra.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ra.BYTE=new RegExp(i,"g"),ra.NUMERIC=new RegExp(e,"g"),ra.ALPHANUMERIC=new RegExp(a,"g");const c=new RegExp("^"+r+"$"),u=new RegExp("^"+e+"$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ra.testKanji=function(x){return c.test(x)},ra.testNumeric=function(x){return u.test(x)},ra.testAlphanumeric=function(x){return d.test(x)},ra}var Tv;function cr(){return Tv||(Tv=1,(function(e){const a=p1(),r=b1();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(u,d){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!a.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?u.ccBits[0]:d<27?u.ccBits[1]:u.ccBits[2]},e.getBestModeForData=function(u){return r.testNumeric(u)?e.NUMERIC:r.testAlphanumeric(u)?e.ALPHANUMERIC:r.testKanji(u)?e.KANJI:e.BYTE},e.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},e.isValid=function(u){return u&&u.bit&&u.ccBits};function i(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+c)}}e.from=function(u,d){if(e.isValid(u))return u;try{return i(u)}catch{return d}}})(ff)),ff}var Dv;function zM(){return Dv||(Dv=1,(function(e){const a=or(),r=g1(),i=o0(),c=cr(),u=p1(),d=7973,f=a.getBCHDigit(d);function x(v,S,T){for(let M=1;M<=40;M++)if(S<=e.getCapacity(M,T,v))return M}function g(v,S){return c.getCharCountIndicator(v,S)+4}function p(v,S){let T=0;return v.forEach(function(M){const _=g(M.mode,S);T+=_+M.getBitsLength()}),T}function b(v,S){for(let T=1;T<=40;T++)if(p(v,T)<=e.getCapacity(T,S,c.MIXED))return T}e.from=function(S,T){return u.isValid(S)?parseInt(S,10):T},e.getCapacity=function(S,T,M){if(!u.isValid(S))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=c.BYTE);const _=a.getSymbolTotalCodewords(S),C=r.getTotalCodewordsCount(S,T),j=(_-C)*8;if(M===c.MIXED)return j;const N=j-g(M,S);switch(M){case c.NUMERIC:return Math.floor(N/10*3);case c.ALPHANUMERIC:return Math.floor(N/11*2);case c.KANJI:return Math.floor(N/13);case c.BYTE:default:return Math.floor(N/8)}},e.getBestVersionForData=function(S,T){let M;const _=i.from(T,i.M);if(Array.isArray(S)){if(S.length>1)return b(S,_);if(S.length===0)return 1;M=S[0]}else M=S;return x(M.mode,M.getLength(),_)},e.getEncodedBits=function(S){if(!u.isValid(S)||S<7)throw new Error("Invalid QR Code version");let T=S<<12;for(;a.getBCHDigit(T)-f>=0;)T^=d<<a.getBCHDigit(T)-f;return S<<12|T}})(mf)),mf}var xf={},kv;function OM(){if(kv)return xf;kv=1;const e=or(),a=1335,r=21522,i=e.getBCHDigit(a);return xf.getEncodedBits=function(u,d){const f=u.bit<<3|d;let x=f<<10;for(;e.getBCHDigit(x)-i>=0;)x^=a<<e.getBCHDigit(x)-i;return(f<<10|x)^r},xf}var gf={},pf,Rv;function LM(){if(Rv)return pf;Rv=1;const e=cr();function a(r){this.mode=e.NUMERIC,this.data=r.toString()}return a.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let c,u,d;for(c=0;c+3<=this.data.length;c+=3)u=this.data.substr(c,3),d=parseInt(u,10),i.put(d,10);const f=this.data.length-c;f>0&&(u=this.data.substr(c),d=parseInt(u,10),i.put(d,f*3+1))},pf=a,pf}var bf,Mv;function VM(){if(Mv)return bf;Mv=1;const e=cr(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(i){this.mode=e.ALPHANUMERIC,this.data=i}return r.getBitsLength=function(c){return 11*Math.floor(c/2)+6*(c%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(c){let u;for(u=0;u+2<=this.data.length;u+=2){let d=a.indexOf(this.data[u])*45;d+=a.indexOf(this.data[u+1]),c.put(d,11)}this.data.length%2&&c.put(a.indexOf(this.data[u]),6)},bf=r,bf}var yf,_v;function PM(){if(_v)return yf;_v=1;const e=cr();function a(r){this.mode=e.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return a.getBitsLength=function(i){return i*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){for(let i=0,c=this.data.length;i<c;i++)r.put(this.data[i],8)},yf=a,yf}var vf,zv;function UM(){if(zv)return vf;zv=1;const e=cr(),a=or();function r(i){this.mode=e.KANJI,this.data=i}return r.getBitsLength=function(c){return c*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let c;for(c=0;c<this.data.length;c++){let u=a.toSJIS(this.data[c]);if(u>=33088&&u<=40956)u-=33088;else if(u>=57408&&u<=60351)u-=49472;else throw new Error("Invalid SJIS character: "+this.data[c]+`
Make sure your charset is UTF-8`);u=(u>>>8&255)*192+(u&255),i.put(u,13)}},vf=r,vf}var jf={exports:{}},Ov;function BM(){return Ov||(Ov=1,(function(e){var a={single_source_shortest_paths:function(r,i,c){var u={},d={};d[i]=0;var f=a.PriorityQueue.make();f.push(i,0);for(var x,g,p,b,v,S,T,M,_;!f.empty();){x=f.pop(),g=x.value,b=x.cost,v=r[g]||{};for(p in v)v.hasOwnProperty(p)&&(S=v[p],T=b+S,M=d[p],_=typeof d[p]>"u",(_||M>T)&&(d[p]=T,f.push(p,T),u[p]=g))}if(typeof c<"u"&&typeof d[c]>"u"){var C=["Could not find a path from ",i," to ",c,"."].join("");throw new Error(C)}return u},extract_shortest_path_from_predecessor_list:function(r,i){for(var c=[],u=i;u;)c.push(u),r[u],u=r[u];return c.reverse(),c},find_path:function(r,i,c){var u=a.single_source_shortest_paths(r,i,c);return a.extract_shortest_path_from_predecessor_list(u,c)},PriorityQueue:{make:function(r){var i=a.PriorityQueue,c={},u;r=r||{};for(u in i)i.hasOwnProperty(u)&&(c[u]=i[u]);return c.queue=[],c.sorter=r.sorter||i.default_sorter,c},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var c={value:r,cost:i};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=a})(jf)),jf.exports}var Lv;function $M(){return Lv||(Lv=1,(function(e){const a=cr(),r=LM(),i=VM(),c=PM(),u=UM(),d=b1(),f=or(),x=BM();function g(C){return unescape(encodeURIComponent(C)).length}function p(C,j,N){const A=[];let O;for(;(O=C.exec(N))!==null;)A.push({data:O[0],index:O.index,mode:j,length:O[0].length});return A}function b(C){const j=p(d.NUMERIC,a.NUMERIC,C),N=p(d.ALPHANUMERIC,a.ALPHANUMERIC,C);let A,O;return f.isKanjiModeEnabled()?(A=p(d.BYTE,a.BYTE,C),O=p(d.KANJI,a.KANJI,C)):(A=p(d.BYTE_KANJI,a.BYTE,C),O=[]),j.concat(N,A,O).sort(function(D,z){return D.index-z.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function v(C,j){switch(j){case a.NUMERIC:return r.getBitsLength(C);case a.ALPHANUMERIC:return i.getBitsLength(C);case a.KANJI:return u.getBitsLength(C);case a.BYTE:return c.getBitsLength(C)}}function S(C){return C.reduce(function(j,N){const A=j.length-1>=0?j[j.length-1]:null;return A&&A.mode===N.mode?(j[j.length-1].data+=N.data,j):(j.push(N),j)},[])}function T(C){const j=[];for(let N=0;N<C.length;N++){const A=C[N];switch(A.mode){case a.NUMERIC:j.push([A,{data:A.data,mode:a.ALPHANUMERIC,length:A.length},{data:A.data,mode:a.BYTE,length:A.length}]);break;case a.ALPHANUMERIC:j.push([A,{data:A.data,mode:a.BYTE,length:A.length}]);break;case a.KANJI:j.push([A,{data:A.data,mode:a.BYTE,length:g(A.data)}]);break;case a.BYTE:j.push([{data:A.data,mode:a.BYTE,length:g(A.data)}])}}return j}function M(C,j){const N={},A={start:{}};let O=["start"];for(let U=0;U<C.length;U++){const D=C[U],z=[];for(let P=0;P<D.length;P++){const se=D[P],X=""+U+P;z.push(X),N[X]={node:se,lastCount:0},A[X]={};for(let R=0;R<O.length;R++){const Q=O[R];N[Q]&&N[Q].node.mode===se.mode?(A[Q][X]=v(N[Q].lastCount+se.length,se.mode)-v(N[Q].lastCount,se.mode),N[Q].lastCount+=se.length):(N[Q]&&(N[Q].lastCount=se.length),A[Q][X]=v(se.length,se.mode)+4+a.getCharCountIndicator(se.mode,j))}}O=z}for(let U=0;U<O.length;U++)A[O[U]].end=0;return{map:A,table:N}}function _(C,j){let N;const A=a.getBestModeForData(C);if(N=a.from(j,A),N!==a.BYTE&&N.bit<A.bit)throw new Error('"'+C+'" cannot be encoded with mode '+a.toString(N)+`.
 Suggested mode is: `+a.toString(A));switch(N===a.KANJI&&!f.isKanjiModeEnabled()&&(N=a.BYTE),N){case a.NUMERIC:return new r(C);case a.ALPHANUMERIC:return new i(C);case a.KANJI:return new u(C);case a.BYTE:return new c(C)}}e.fromArray=function(j){return j.reduce(function(N,A){return typeof A=="string"?N.push(_(A,null)):A.data&&N.push(_(A.data,A.mode)),N},[])},e.fromString=function(j,N){const A=b(j,f.isKanjiModeEnabled()),O=T(A),U=M(O,N),D=x.find_path(U.map,"start","end"),z=[];for(let P=1;P<D.length-1;P++)z.push(U.table[D[P]].node);return e.fromArray(S(z))},e.rawSplit=function(j){return e.fromArray(b(j,f.isKanjiModeEnabled()))}})(gf)),gf}var Vv;function qM(){if(Vv)return sf;Vv=1;const e=or(),a=o0(),r=AM(),i=EM(),c=TM(),u=DM(),d=kM(),f=g1(),x=_M(),g=zM(),p=OM(),b=cr(),v=$M();function S(U,D){const z=U.size,P=u.getPositions(D);for(let se=0;se<P.length;se++){const X=P[se][0],R=P[se][1];for(let Q=-1;Q<=7;Q++)if(!(X+Q<=-1||z<=X+Q))for(let ae=-1;ae<=7;ae++)R+ae<=-1||z<=R+ae||(Q>=0&&Q<=6&&(ae===0||ae===6)||ae>=0&&ae<=6&&(Q===0||Q===6)||Q>=2&&Q<=4&&ae>=2&&ae<=4?U.set(X+Q,R+ae,!0,!0):U.set(X+Q,R+ae,!1,!0))}}function T(U){const D=U.size;for(let z=8;z<D-8;z++){const P=z%2===0;U.set(z,6,P,!0),U.set(6,z,P,!0)}}function M(U,D){const z=c.getPositions(D);for(let P=0;P<z.length;P++){const se=z[P][0],X=z[P][1];for(let R=-2;R<=2;R++)for(let Q=-2;Q<=2;Q++)R===-2||R===2||Q===-2||Q===2||R===0&&Q===0?U.set(se+R,X+Q,!0,!0):U.set(se+R,X+Q,!1,!0)}}function _(U,D){const z=U.size,P=g.getEncodedBits(D);let se,X,R;for(let Q=0;Q<18;Q++)se=Math.floor(Q/3),X=Q%3+z-8-3,R=(P>>Q&1)===1,U.set(se,X,R,!0),U.set(X,se,R,!0)}function C(U,D,z){const P=U.size,se=p.getEncodedBits(D,z);let X,R;for(X=0;X<15;X++)R=(se>>X&1)===1,X<6?U.set(X,8,R,!0):X<8?U.set(X+1,8,R,!0):U.set(P-15+X,8,R,!0),X<8?U.set(8,P-X-1,R,!0):X<9?U.set(8,15-X-1+1,R,!0):U.set(8,15-X-1,R,!0);U.set(P-8,8,1,!0)}function j(U,D){const z=U.size;let P=-1,se=z-1,X=7,R=0;for(let Q=z-1;Q>0;Q-=2)for(Q===6&&Q--;;){for(let ae=0;ae<2;ae++)if(!U.isReserved(se,Q-ae)){let te=!1;R<D.length&&(te=(D[R]>>>X&1)===1),U.set(se,Q-ae,te),X--,X===-1&&(R++,X=7)}if(se+=P,se<0||z<=se){se-=P,P=-P;break}}}function N(U,D,z){const P=new r;z.forEach(function(ae){P.put(ae.mode.bit,4),P.put(ae.getLength(),b.getCharCountIndicator(ae.mode,U)),ae.write(P)});const se=e.getSymbolTotalCodewords(U),X=f.getTotalCodewordsCount(U,D),R=(se-X)*8;for(P.getLengthInBits()+4<=R&&P.put(0,4);P.getLengthInBits()%8!==0;)P.putBit(0);const Q=(R-P.getLengthInBits())/8;for(let ae=0;ae<Q;ae++)P.put(ae%2?17:236,8);return A(P,U,D)}function A(U,D,z){const P=e.getSymbolTotalCodewords(D),se=f.getTotalCodewordsCount(D,z),X=P-se,R=f.getBlocksCount(D,z),Q=P%R,ae=R-Q,te=Math.floor(P/R),F=Math.floor(X/R),ce=F+1,J=te-F,W=new x(J);let L=0;const ne=new Array(R),K=new Array(R);let me=0;const re=new Uint8Array(U.buffer);for(let je=0;je<R;je++){const E=je<ae?F:ce;ne[je]=re.slice(L,L+E),K[je]=W.encode(ne[je]),L+=E,me=Math.max(me,E)}const ie=new Uint8Array(P);let G=0,be,V;for(be=0;be<me;be++)for(V=0;V<R;V++)be<ne[V].length&&(ie[G++]=ne[V][be]);for(be=0;be<J;be++)for(V=0;V<R;V++)ie[G++]=K[V][be];return ie}function O(U,D,z,P){let se;if(Array.isArray(U))se=v.fromArray(U);else if(typeof U=="string"){let te=D;if(!te){const F=v.rawSplit(U);te=g.getBestVersionForData(F,z)}se=v.fromString(U,te||40)}else throw new Error("Invalid data");const X=g.getBestVersionForData(se,z);if(!X)throw new Error("The amount of data is too big to be stored in a QR Code");if(!D)D=X;else if(D<X)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+X+`.
`);const R=N(D,z,se),Q=e.getSymbolSize(D),ae=new i(Q);return S(ae,D),T(ae),M(ae,D),C(ae,z,0),D>=7&&_(ae,D),j(ae,R),isNaN(P)&&(P=d.getBestMask(ae,C.bind(null,ae,z))),d.applyMask(P,ae),C(ae,z,P),{modules:ae,version:D,errorCorrectionLevel:z,maskPattern:P,segments:se}}return sf.create=function(D,z){if(typeof D>"u"||D==="")throw new Error("No input text");let P=a.M,se,X;return typeof z<"u"&&(P=a.from(z.errorCorrectionLevel,a.M),se=g.from(z.version),X=d.from(z.maskPattern),z.toSJISFunc&&e.setToSJISFunction(z.toSJISFunc)),O(D,se,P,X)},sf}var Nf={},wf={},Pv;function y1(){return Pv||(Pv=1,(function(e){function a(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(u){return[u,u]}))),i.length===6&&i.push("F","F");const c=parseInt(i.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const c=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,u=i.width&&i.width>=21?i.width:void 0,d=i.scale||4;return{width:u,scale:u?4:d,margin:c,color:{dark:a(i.color.dark||"#000000ff"),light:a(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,c){return c.width&&c.width>=i+c.margin*2?c.width/(i+c.margin*2):c.scale},e.getImageWidth=function(i,c){const u=e.getScale(i,c);return Math.floor((i+c.margin*2)*u)},e.qrToImageData=function(i,c,u){const d=c.modules.size,f=c.modules.data,x=e.getScale(d,u),g=Math.floor((d+u.margin*2)*x),p=u.margin*x,b=[u.color.light,u.color.dark];for(let v=0;v<g;v++)for(let S=0;S<g;S++){let T=(v*g+S)*4,M=u.color.light;if(v>=p&&S>=p&&v<g-p&&S<g-p){const _=Math.floor((v-p)/x),C=Math.floor((S-p)/x);M=b[f[_*d+C]?1:0]}i[T++]=M.r,i[T++]=M.g,i[T++]=M.b,i[T]=M.a}}})(wf)),wf}var Uv;function FM(){return Uv||(Uv=1,(function(e){const a=y1();function r(c,u,d){c.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=d,u.width=d,u.style.height=d+"px",u.style.width=d+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(u,d,f){let x=f,g=d;typeof x>"u"&&(!d||!d.getContext)&&(x=d,d=void 0),d||(g=i()),x=a.getOptions(x);const p=a.getImageWidth(u.modules.size,x),b=g.getContext("2d"),v=b.createImageData(p,p);return a.qrToImageData(v.data,u,x),r(b,g,p),b.putImageData(v,0,0),g},e.renderToDataURL=function(u,d,f){let x=f;typeof x>"u"&&(!d||!d.getContext)&&(x=d,d=void 0),x||(x={});const g=e.render(u,d,x),p=x.type||"image/png",b=x.rendererOpts||{};return g.toDataURL(p,b.quality)}})(Nf)),Nf}var Sf={},Bv;function IM(){if(Bv)return Sf;Bv=1;const e=y1();function a(c,u){const d=c.a/255,f=u+'="'+c.hex+'"';return d<1?f+" "+u+'-opacity="'+d.toFixed(2).slice(1)+'"':f}function r(c,u,d){let f=c+u;return typeof d<"u"&&(f+=" "+d),f}function i(c,u,d){let f="",x=0,g=!1,p=0;for(let b=0;b<c.length;b++){const v=Math.floor(b%u),S=Math.floor(b/u);!v&&!g&&(g=!0),c[b]?(p++,b>0&&v>0&&c[b-1]||(f+=g?r("M",v+d,.5+S+d):r("m",x,0),x=0,g=!1),v+1<u&&c[b+1]||(f+=r("h",p),p=0)):x++}return f}return Sf.render=function(u,d,f){const x=e.getOptions(d),g=u.modules.size,p=u.modules.data,b=g+x.margin*2,v=x.color.light.a?"<path "+a(x.color.light,"fill")+' d="M0 0h'+b+"v"+b+'H0z"/>':"",S="<path "+a(x.color.dark,"stroke")+' d="'+i(p,g,x.margin)+'"/>',T='viewBox="0 0 '+b+" "+b+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(x.width?'width="'+x.width+'" height="'+x.width+'" ':"")+T+' shape-rendering="crispEdges">'+v+S+`</svg>
`;return typeof f=="function"&&f(null,_),_},Sf}var $v;function HM(){if($v)return Jr;$v=1;const e=CM(),a=qM(),r=FM(),i=IM();function c(u,d,f,x,g){const p=[].slice.call(arguments,1),b=p.length,v=typeof p[b-1]=="function";if(!v&&!e())throw new Error("Callback required as last argument");if(v){if(b<2)throw new Error("Too few arguments provided");b===2?(g=f,f=d,d=x=void 0):b===3&&(d.getContext&&typeof g>"u"?(g=x,x=void 0):(g=x,x=f,f=d,d=void 0))}else{if(b<1)throw new Error("Too few arguments provided");return b===1?(f=d,d=x=void 0):b===2&&!d.getContext&&(x=f,f=d,d=void 0),new Promise(function(S,T){try{const M=a.create(f,x);S(u(M,d,x))}catch(M){T(M)}})}try{const S=a.create(f,x);g(null,u(S,d,x))}catch(S){g(S)}}return Jr.create=a.create,Jr.toCanvas=c.bind(null,r.render),Jr.toDataURL=c.bind(null,r.renderToDataURL),Jr.toString=c.bind(null,function(u,d,f){return i.render(u,f)}),Jr}var YM=HM();const v1=Fv(YM);var zc={exports:{}},ZM=zc.exports,qv;function GM(){return qv||(qv=1,(function(e,a){(function(r,i){e.exports=i(Xc())})(typeof self<"u"?self:ZM,function(r){return(function(){var i={155:function(C){C.exports=r}},c={};function u(C){var j=c[C];if(j!==void 0)return j.exports;var N=c[C]={exports:{}};return i[C](N,N.exports,u),N.exports}u.d=function(C,j){for(var N in j)u.o(j,N)&&!u.o(C,N)&&Object.defineProperty(C,N,{enumerable:!0,get:j[N]})},u.o=function(C,j){return Object.prototype.hasOwnProperty.call(C,j)},u.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var d={};u.r(d),u.d(d,{useReactToPrint:function(){return _}});var f=u(155);function x({level:C="error",messages:j,suppressErrors:N=!1}){N||(C==="error"?console.error(j):C==="warning"?console.warn(j):console.debug(j))}function g(C,j){if(j||!C){const N=document.getElementById("printWindow");N&&document.body.removeChild(N)}}function p(C){return C instanceof Error?C:new Error("Unknown Error")}function b(C,j){const{documentTitle:N,onAfterPrint:A,onPrintError:O,preserveAfterPrint:U,print:D,suppressErrors:z}=j;setTimeout(()=>{var P,se;if(C.contentWindow){let R=function(){A?.(),g(U)};var X=R;if(C.contentWindow.focus(),D)D(C).then(R).catch(Q=>{O?O("print",p(Q)):x({messages:["An error was thrown by the specified `print` function"],suppressErrors:z})});else{if(C.contentWindow.print){const Q=(se=(P=C.contentDocument)===null||P===void 0?void 0:P.title)!==null&&se!==void 0?se:"",ae=C.ownerDocument.title;N&&(C.ownerDocument.title=N,C.contentDocument&&(C.contentDocument.title=N)),C.contentWindow.print(),N&&(C.ownerDocument.title=ae,C.contentDocument&&(C.contentDocument.title=Q))}else x({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:z});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(Q=>{var ae,te;return((te=(ae=navigator.userAgent)!==null&&ae!==void 0?ae:navigator.vendor)!==null&&te!==void 0?te:"opera"in window&&window.opera).match(Q)})?setTimeout(R,500):R()}}else x({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:z})},500)}function v(C){const j=[],N=document.createTreeWalker(C,NodeFilter.SHOW_ELEMENT,null);let A=N.nextNode();for(;A;)j.push(A),A=N.nextNode();return j}function S(C,j,N){const A=v(C),O=v(j);if(A.length===O.length)for(let U=0;U<A.length;U++){const D=A[U],z=O[U],P=D.shadowRoot;if(P!==null){const se=z.attachShadow({mode:P.mode});se.innerHTML=P.innerHTML,S(P,se,N)}}else x({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",C,j],suppressErrors:N})}const T=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function M(C,j,N,A){var O,U,D,z,P;const{contentNode:se,clonedContentNode:X,clonedImgNodes:R,clonedVideoNodes:Q,numResourcesToLoad:ae,originalCanvasNodes:te}=N,{bodyClass:F,fonts:ce,ignoreGlobalStyles:J,pageStyle:W,nonce:L,suppressErrors:ne,copyShadowRoots:K}=A;C.onload=null;const me=(O=C.contentDocument)!==null&&O!==void 0?O:(U=C.contentWindow)===null||U===void 0?void 0:U.document;if(me){const re=me.body.appendChild(X);K&&S(se,re,!!ne),ce&&(!((D=C.contentDocument)===null||D===void 0)&&D.fonts&&(!((z=C.contentWindow)===null||z===void 0)&&z.FontFace)?ce.forEach($=>{const ue=new FontFace($.family,$.source,{weight:$.weight,style:$.style});C.contentDocument.fonts.add(ue),ue.loaded.then(()=>{j(ue)}).catch(Y=>{j(ue,["Failed loading the font:",ue,"Load error:",p(Y)])})}):(ce.forEach($=>{j($)}),x({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:ne})));const ie=W??T,G=me.createElement("style");L&&(G.setAttribute("nonce",L),me.head.setAttribute("nonce",L)),G.appendChild(me.createTextNode(ie)),me.head.appendChild(G),F&&me.body.classList.add(...F.split(" "));const be=me.querySelectorAll("canvas");for(let $=0;$<te.length;++$){const ue=te[$],Y=be[$];if(Y===void 0){x({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ue],suppressErrors:ne});continue}const ye=Y.getContext("2d");ye&&ye.drawImage(ue,0,0)}for(let $=0;$<R.length;$++){const ue=R[$],Y=ue.getAttribute("src");if(Y){const ye=new Image;ye.onload=()=>{j(ue)},ye.onerror=(Z,H,B,Ne,ke)=>{j(ue,["Error loading <img>",ue,"Error",ke])},ye.src=Y}else j(ue,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ue])}for(let $=0;$<Q.length;$++){const ue=Q[$];ue.preload="auto";const Y=ue.getAttribute("poster");if(Y){const ye=new Image;ye.onload=()=>{j(ue)},ye.onerror=(Z,H,B,Ne,ke)=>{j(ue,["Error loading video poster",Y,"for video",ue,"Error:",ke])},ye.src=Y}else ue.readyState>=2?j(ue):ue.src?(ue.onloadeddata=()=>{j(ue)},ue.onerror=(ye,Z,H,B,Ne)=>{j(ue,["Error loading video",ue,"Error",Ne])},ue.onstalled=()=>{j(ue,["Loading video stalled, skipping",ue])}):j(ue,["Error loading video, `src` is empty",ue])}const V="select",je=se.querySelectorAll(V),E=me.querySelectorAll(V);for(let $=0;$<je.length;$++)E[$].value=je[$].value;if(!J){const $=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ue=0,Y=$.length;ue<Y;++ue){const ye=$[ue];if(ye.tagName.toLowerCase()==="style"){const Z=me.createElement(ye.tagName),H=ye.sheet;if(H){let B="";try{const Ne=H.cssRules.length;for(let ke=0;ke<Ne;++ke)typeof H.cssRules[ke].cssText=="string"&&(B+=`${H.cssRules[ke].cssText}\r
`)}catch(Ne){x({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",ye,`Original error: ${p(Ne).message}`],level:"warning"})}Z.setAttribute("id",`react-to-print-${ue}`),L&&Z.setAttribute("nonce",L),Z.appendChild(me.createTextNode(B)),me.head.appendChild(Z)}}else if(ye.getAttribute("href"))if(ye.hasAttribute("disabled"))x({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",ye],level:"warning"}),j(ye);else{const Z=me.createElement(ye.tagName);for(let H=0,B=ye.attributes.length;H<B;++H){const Ne=ye.attributes[H];Ne&&Z.setAttribute(Ne.nodeName,(P=Ne.nodeValue)!==null&&P!==void 0?P:"")}Z.onload=()=>{j(Z)},Z.onerror=(H,B,Ne,ke,q)=>{j(Z,["Failed to load",Z,"Error:",q])},L&&Z.setAttribute("nonce",L),me.head.appendChild(Z)}else x({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",ye],level:"warning"}),j(ye)}}}ae===0&&b(C,A)}function _({bodyClass:C,contentRef:j,copyShadowRoots:N,documentTitle:A,fonts:O,ignoreGlobalStyles:U,nonce:D,onAfterPrint:z,onBeforePrint:P,onPrintError:se,pageStyle:X,preserveAfterPrint:R,print:Q,suppressErrors:ae}){return(0,f.useCallback)(te=>{function F(){const ce={bodyClass:C,contentRef:j,copyShadowRoots:N,documentTitle:A,fonts:O,ignoreGlobalStyles:U,nonce:D,onAfterPrint:z,onPrintError:se,pageStyle:X,preserveAfterPrint:R,print:Q,suppressErrors:ae},J=(function(){const ne=document.createElement("iframe");return ne.width=`${document.documentElement.clientWidth}px`,ne.height=`${document.documentElement.clientHeight}px`,ne.style.position="absolute",ne.style.top=`-${document.documentElement.clientHeight+100}px`,ne.style.left=`-${document.documentElement.clientWidth+100}px`,ne.id="printWindow",ne.srcdoc="<!DOCTYPE html>",ne})(),W=(function(ne,K){const{contentRef:me,fonts:re,ignoreGlobalStyles:ie,suppressErrors:G}=K,be=(function({contentRef:Y,optionalContent:ye,suppressErrors:Z}){return ye&&typeof ye=="function"?(Y&&x({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),ye()):Y?Y.current:void x({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Z})})({contentRef:me,optionalContent:ne,suppressErrors:G});if(!be)return;const V=be.cloneNode(!0),je=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),E=V.querySelectorAll("img"),$=V.querySelectorAll("video"),ue=re?re.length:0;return{contentNode:be,clonedContentNode:V,clonedImgNodes:E,clonedVideoNodes:$,numResourcesToLoad:(ie?0:je.length)+E.length+$.length+ue,originalCanvasNodes:be.querySelectorAll("canvas")}})(te,ce);if(!W)return void x({messages:["There is nothing to print"],suppressErrors:ae});const L=(function(ne,K,me){const{suppressErrors:re}=ne,ie=[],G=[];return function(be,V){ie.includes(be)?x({level:"debug",messages:["Tried to mark a resource that has already been handled",be],suppressErrors:re}):(V?(x({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...V],suppressErrors:re}),G.push(be)):ie.push(be),ie.length+G.length===K&&b(me,ne))}})(ce,W.numResourcesToLoad,J);(function(ne,K,me,re){ne.onload=()=>{M(ne,K,me,re)},document.body.appendChild(ne)})(J,L,W,ce)}g(R,!0),P?P().then(()=>{F()}).catch(ce=>{se?.("onBeforePrint",p(ce))}):F()},[C,j,N,A,O,U,D,z,P,se,X,R,Q,ae])}return d})()})})(zc)),zc.exports}var j1=GM();const Ee=({children:e,variant:a="primary",size:r="md",className:i="",onClick:c,disabled:u=!1,type:d="button"})=>{const f="btn font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",x={primary:"btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl",secondary:"btn-secondary bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white",outline:"btn-outline border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white",ghost:"btn-ghost text-blue-600 hover:bg-blue-50 hover:text-blue-700"},g={sm:"btn-sm px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"btn-lg px-8 py-4 text-lg"};return t.jsx("button",{type:d,className:`${f} ${x[a]} ${g[r]} ${i}`,onClick:c,disabled:u,children:e})},ol="/assets/logo%20itak-C5PHd-VC.png",KM=({isOpen:e,onClose:a,student:r,redirectUrl:i="https://upcd-itak.edu"})=>{const[c,u]=y.useState(""),[d,f]=y.useState(!1),[x,g]=y.useState(!1),p=y.useRef(null),b=y.useRef(null),v=j1.useReactToPrint({contentRef:b,documentTitle:`Carte_etudiante_${r?.user.firstName}_${r?.user.lastName}`,pageStyle:`
      @page {
        size: A4;
        margin: 0.5in;
      }
      @media print {
        body {
          -webkit-print-color-adjust: exact !important;
          color-adjust: exact !important;
          print-color-adjust: exact !important;
        }
      }
    `}),S=y.useCallback(async()=>{if(r){f(!0);try{const C={id:r.id,name:`${r.user.firstName} ${r.user.lastName}`,matricule:r.matricule||"",redirectUrl:i},j=JSON.stringify(C),N=await v1.toDataURL(j,{width:200,margin:2,color:{dark:"#1e40af",light:"#ffffff"},errorCorrectionLevel:"H"});u(N)}catch(C){console.error("Erreur lors de la gnration du QR code:",C)}finally{f(!1)}}},[r,i]);y.useEffect(()=>{r&&e&&S()},[r,e,S]);const T=C=>{if(!C)return"Non renseign";try{return new Date(C).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"})}catch{return"Date invalide"}},M=()=>{const C=new Date,j=C.getFullYear();return C.getMonth()<8?`${j-1}-${j}`:`${j}-${j+1}`},_=async()=>{if(p.current&&r)try{const C=document.createElement("canvas"),j=C.getContext("2d");if(!j)throw new Error("Impossible de crer le contexte canvas");const N=1016,A=640;C.width=N,C.height=A;const O=j.createLinearGradient(0,0,N,A);O.addColorStop(0,"#1e3a5f"),O.addColorStop(1,"#2563eb"),j.fillStyle=O,j.fillRect(0,0,N,A);const U=140,D=40,z=180;if(j.fillStyle="white",j.fillRect(D-4,z-4,U+8,U+8),r.photo){const P=new Image;P.crossOrigin="anonymous",P.src=r.photo,await new Promise(se=>{P.onload=se,P.onerror=se}),j.drawImage(P,D,z,U,U)}else j.fillStyle="#3b82f6",j.fillRect(D,z,U,U),j.fillStyle="white",j.font="bold 48px Arial",j.textAlign="center",j.textBaseline="middle",j.fillText(`${r.user.firstName?.[0]||""}${r.user.lastName?.[0]||""}`,D+U/2,z+U/2);if(j.fillStyle="white",j.font="bold 24px Arial",j.textAlign="left",j.fillText("UPCD - ITAK",40,50),j.font="14px Arial",j.fillText("Carte tudiant",40,75),j.textAlign="right",j.font="bold 18px Arial",j.fillText(M(),N-40,50),j.textAlign="left",j.font="bold 28px Arial",j.fillText(`${r.user.firstName} ${r.user.lastName}`,200,210),j.font="16px Arial",j.fillText(`Matricule: ${r.matricule||"N/A"}`,200,250),j.fillText(`Email: ${r.user.email||"Non renseign"}`,200,280),j.fillText(`Inscription: ${T(r.enrollmentDate)}`,200,310),c){const se=N-100-40,X=A-100-80;j.fillStyle="white",j.fillRect(se-4,X-4,108,108);const R=new Image;R.onload=()=>{j.drawImage(R,se,X,100,100),j.fillStyle="rgba(255, 255, 255, 0.8)",j.font="12px Arial",j.textAlign="center",j.fillText("Institut Technique l'Antidote de Kati",N/2,A-20);const Q=document.createElement("a");Q.download=`carte-etudiant-${r.user.firstName}-${r.user.lastName}.png`,Q.href=C.toDataURL("image/png",1),Q.click()},R.src=c}else{j.fillStyle="rgba(255, 255, 255, 0.8)",j.font="12px Arial",j.textAlign="center",j.fillText("Institut Technique l'Antidote de Kati",N/2,A-20);const P=document.createElement("a");P.download=`carte-etudiant-${r.user.firstName}-${r.user.lastName}.png`,P.href=C.toDataURL("image/png",1),P.click()}}catch(C){console.error("Erreur lors du tlchargement:",C),alert("Erreur lors du tlchargement de la carte")}};return!e||!r?null:t.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[t.jsxs(Ra.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 px-6 py-4 text-white flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:t.jsx(A5,{className:"w-5 h-5 text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold",children:"Carte tudiante"}),t.jsxs("p",{className:"text-slate-400 text-xs",children:[r.user.firstName," ",r.user.lastName]})]})]}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:t.jsx(Sn,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 bg-slate-50",children:[t.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[t.jsxs("button",{onClick:()=>g(!1),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x?"bg-white text-slate-600 hover:bg-slate-100":"bg-blue-600 text-white shadow-md"}`,children:[t.jsx(R5,{className:"w-4 h-4"}),"Recto"]}),t.jsxs("button",{onClick:()=>g(!0),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x?"bg-blue-600 text-white shadow-md":"bg-white text-slate-600 hover:bg-slate-100"}`,children:[t.jsx(D5,{className:"w-4 h-4"}),"Verso"]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsxs("div",{ref:p,className:"relative",style:{width:"340px",height:"214px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",transformStyle:"preserve-3d",transition:"transform 0.6s",transform:x?"rotateY(180deg)":"rotateY(0deg)"},children:[t.jsxs("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%)",color:"white",backfaceVisibility:"hidden"},children:[t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-15deg)",fontSize:"50px",fontWeight:"900",color:"rgba(255, 255, 255, 0.05)",whiteSpace:"nowrap"},children:"UPCD ITAK"}),t.jsxs("div",{className:"p-4 h-full flex flex-col justify-between relative z-10",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:ol,alt:"ITAK",className:"w-8 h-8 rounded bg-white p-0.5 object-contain"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-bold",children:"UPCD - ITAK"}),t.jsx("div",{className:"text-[10px] opacity-75",children:"Carte tudiant"})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("div",{className:"text-xs font-bold bg-white/20 px-2 py-0.5 rounded",children:M()})})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx("div",{className:"w-16 h-20 rounded overflow-hidden bg-white shadow-md flex-shrink-0",children:r.photo?t.jsx("img",{src:r.photo,alt:"",className:"w-full h-full object-cover"}):t.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-lg",children:[r.user.firstName?.[0],r.user.lastName?.[0]]})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"text-sm font-bold truncate mb-1",children:[r.user.firstName," ",r.user.lastName]}),t.jsxs("div",{className:"space-y-0.5 text-[9px] opacity-90",children:[t.jsxs("div",{className:"bg-white/10 px-2 py-0.5 rounded",children:[t.jsx("span",{className:"opacity-70",children:"Matricule:"})," ",t.jsx("span",{className:"font-semibold",children:r.matricule||"N/A"})]}),t.jsxs("div",{className:"bg-white/10 px-2 py-0.5 rounded truncate",children:[t.jsx("span",{className:"opacity-70",children:"Email:"})," ",t.jsx("span",{className:"font-semibold",children:r.user.email||"-"})]}),t.jsxs("div",{className:"bg-white/10 px-2 py-0.5 rounded",children:[t.jsx("span",{className:"opacity-70",children:"Inscrit:"})," ",t.jsx("span",{className:"font-semibold",children:T(r.enrollmentDate)})]}),r.institution&&t.jsxs("div",{className:"bg-white/10 px-2 py-0.5 rounded",children:[t.jsx("span",{className:"opacity-70",children:"Affectation:"})," ",t.jsx("span",{className:"font-semibold",children:r.institution.name})]})]})]}),c&&t.jsx("div",{className:"w-14 h-14 bg-white rounded p-1 shadow-md flex-shrink-0",children:t.jsx("img",{src:c,alt:"QR",className:"w-full h-full"})})]}),t.jsx("div",{className:"text-[8px] text-center opacity-70",children:"Institut Technique l'Antidote de Kati"})]})]}),t.jsxs("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",color:"#1e3a5f",backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-15deg)",fontSize:"50px",fontWeight:"900",color:"rgba(30, 58, 95, 0.05)",whiteSpace:"nowrap"},children:"UPCD ITAK"}),t.jsxs("div",{className:"p-4 h-full flex flex-col justify-between relative z-10",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("div",{className:"text-xs font-bold",children:"Informations"}),t.jsx("img",{src:ol,alt:"ITAK",className:"w-6 h-6 rounded object-contain"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[8px]",children:[t.jsx(Wr,{label:"Contact d'urgence",value:r.emergencyContact}),t.jsx(Wr,{label:"Adresse",value:r.address}),t.jsx(Wr,{label:"Pre",value:r.fatherName}),t.jsx(Wr,{label:"Mre",value:r.motherName}),t.jsx(Wr,{label:"Tuteur",value:r.tutorName}),t.jsx(Wr,{label:"Tl. tuteur",value:r.tutorPhone})]}),t.jsxs("div",{className:"text-[7px] text-center bg-blue-50 rounded py-1 px-2",children:[t.jsx("div",{className:"font-bold text-blue-800",children:"En cas de perte, scanner le QR code"}),t.jsx("div",{className:"text-blue-600",children:"UPCD - ITAK | Kati, Mali"})]})]})]})]})}),t.jsxs("div",{className:"flex gap-3 mt-6 justify-center",children:[t.jsxs(Ee,{onClick:v,className:"flex items-center gap-2 px-5 py-2.5 bg-slate-800 hover:bg-slate-900 text-white rounded-lg font-medium",disabled:d,children:[t.jsx(mj,{className:"w-4 h-4"}),"Imprimer"]}),t.jsxs(Ee,{onClick:_,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",disabled:d,children:[t.jsx(uj,{className:"w-4 h-4"}),"Tlcharger"]})]})]})]}),t.jsx("div",{style:{display:"none"},children:t.jsx("div",{ref:b,children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",alignItems:"center",padding:"20px"},children:[t.jsxs("div",{style:{width:"85.6mm",height:"54mm",background:"linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%)",color:"white",borderRadius:"8px",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative",border:"1px solid #ccc"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("img",{src:ol,alt:"ITAK",style:{width:"24px",height:"24px",borderRadius:"4px",background:"white",padding:"2px"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"10px",fontWeight:"bold"},children:"UPCD - ITAK"}),t.jsx("div",{style:{fontSize:"8px",opacity:.8},children:"Carte tudiant"})]})]}),t.jsx("div",{style:{fontSize:"10px",fontWeight:"bold",background:"rgba(255,255,255,0.2)",padding:"2px 6px",borderRadius:"4px"},children:M()})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t.jsx("div",{style:{width:"50px",height:"65px",background:"white",borderRadius:"4px",overflow:"hidden"},children:r?.photo?t.jsx("img",{src:r.photo,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):t.jsxs("div",{style:{width:"100%",height:"100%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:[r?.user.firstName?.[0],r?.user.lastName?.[0]]})}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px"},children:[r?.user.firstName," ",r?.user.lastName]}),t.jsxs("div",{style:{fontSize:"8px",lineHeight:"1.4"},children:[t.jsxs("div",{children:["Matricule: ",r?.matricule||"N/A"]}),t.jsxs("div",{children:["Email: ",r?.user.email||"-"]}),t.jsxs("div",{children:["Inscrit: ",T(r?.enrollmentDate)]}),r?.institution&&t.jsxs("div",{children:["Affectation: ",r.institution.name]})]})]}),c&&t.jsx("div",{style:{width:"45px",height:"45px",background:"white",borderRadius:"4px",padding:"2px"},children:t.jsx("img",{src:c,alt:"QR",style:{width:"100%",height:"100%"}})})]}),t.jsx("div",{style:{fontSize:"6px",textAlign:"center",opacity:.8},children:"Institut Technique l'Antidote de Kati"})]}),t.jsxs("div",{style:{width:"85.6mm",height:"54mm",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",color:"#1e3a5f",borderRadius:"8px",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative",border:"1px solid #ccc"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("div",{style:{fontSize:"10px",fontWeight:"bold"},children:"Informations dtailles"}),t.jsx("img",{src:ol,alt:"ITAK",style:{width:"20px",height:"20px",borderRadius:"4px"}})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"7px"},children:[t.jsx(el,{label:"Contact d'urgence",value:r?.emergencyContact}),t.jsx(el,{label:"Adresse",value:r?.address}),t.jsx(el,{label:"Pre",value:r?.fatherName}),t.jsx(el,{label:"Mre",value:r?.motherName}),t.jsx(el,{label:"Tuteur",value:r?.tutorName}),t.jsx(el,{label:"Tl. tuteur",value:r?.tutorPhone})]}),t.jsxs("div",{style:{fontSize:"6px",textAlign:"center",background:"rgba(30, 64, 175, 0.1)",borderRadius:"4px",padding:"4px"},children:[t.jsx("div",{style:{fontWeight:"bold"},children:"En cas de perte, scanner le QR code"}),t.jsx("div",{children:"UPCD - ITAK | Kati, Mali"})]})]})]})})})]})},Wr=({label:e,value:a})=>t.jsxs("div",{className:"bg-blue-900/10 rounded px-2 py-1",children:[t.jsx("div",{className:"text-[7px] uppercase opacity-60 font-medium",children:e}),t.jsx("div",{className:"truncate font-medium",children:a||"Non renseign"})]}),el=({label:e,value:a})=>t.jsxs("div",{style:{background:"rgba(30, 64, 175, 0.1)",borderRadius:"4px",padding:"4px"},children:[t.jsx("div",{style:{fontSize:"6px",textTransform:"uppercase",opacity:.6,fontWeight:"600"},children:e}),t.jsx("div",{style:{fontSize:"7px",fontWeight:"500"},children:a||"Non renseign"})]}),XM=()=>{const{institutions:e}=nu(),[a,r]=y.useState(null),[i,c]=y.useState("students"),[u,d]=y.useState(!0),[f,x]=y.useState([]),[g,p]=y.useState([]),[b,v]=y.useState([]),[S,T]=y.useState(!1),[M,_]=y.useState(!1),[C,j]=y.useState(!1),[N,A]=y.useState(!1),[O,U]=y.useState(!1),[D,z]=y.useState(null),[P,se]=y.useState(!1);y.useEffect(()=>{if(e.length>0&&!a){const V=e.find(je=>je.code==="ITAK");r(V?V.id:e[0].id)}},[e,a]);const X=y.useCallback(async()=>{if(!a)return;d(!0);const V=a;console.log(" fetchData - institutionId utilis pour filtrage:",V);const[je,E,$]=await Promise.allSettled([pe.getAllStudents(V),pe.getAllTeachers(V),pe.getAllStaff()]);if(je.status==="fulfilled"){const ue=je.value;console.log(" Students response:",ue);const Y=ue?.success?ue.data:ue?.data||ue;console.log(" Students data:",Y),x(Array.isArray(Y)?Y:[])}else console.error(" Erreur rcupration students:",je.reason);if(E.status==="fulfilled"){const ue=E.value;console.log(" Teachers response:",ue);const Y=ue?.success?ue.data:ue?.data||ue;console.log(" Teachers data:",Y),p(Array.isArray(Y)?Y:[])}else console.error(" Erreur rcupration teachers:",E.reason);if($.status==="fulfilled"){const ue=$.value;console.log(" Staff response:",ue);const Y=ue?.success?ue.data:ue?.data||ue;console.log(" Staff data:",Y),v(Array.isArray(Y)?Y:[])}else console.error(" Erreur rcupration staff:",$.reason);d(!1)},[a]);y.useEffect(()=>{a&&X()},[a,X]);const R=V=>V?(typeof V=="string"?new Date(V):V).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"-",Q=async(V,je)=>{se(!0);try{const E=await pe.createUser({firstName:V.firstName,lastName:V.lastName,email:V.email&&V.email.trim()?V.email.trim():void 0,phone:V.phone,password:"temp123456",role:"scolarite"});if(console.log("Rponse createUser:",E),!E.success){const H=E.error||"Erreur lors de la cration de l'utilisateur";throw new Error(H)}const $=E,ue=$?.data?.user||$?.data||$?.user||$;console.log("userData extrait:",ue);const Y=ue?.id;if(console.log("userId extrait:",Y),!Y)throw console.error("Structure rponse inattendue:",JSON.stringify(E,null,2)),new Error("Erreur lors de la cration de l'utilisateur - userId non trouv");const ye={userId:Y,matricule:V.matricule,enrollmentDate:V.enrollmentDate,fatherName:V.fatherName,motherName:V.motherName,tutorName:V.tutorName,tutorPhone:V.tutorPhone,address:V.address,emergencyContact:V.emergencyContact,notes:V.notes,institutionId:V.institutionId,photo:je?await L(je):void 0},Z=await pe.createStudentProfile(ye);if(!Z.data&&!Z)throw new Error("Erreur lors de la cration du profil tudiant");T(!1),X()}catch(E){console.error("Erreur cration tudiant:",E),alert(`Erreur: ${E instanceof Error?E.message:"Erreur inconnue"}`)}finally{se(!1)}},ae=async(V,je)=>{if(D){se(!0);try{const E=D;E.user?.id&&await pe.updateUser(E.user.id,{firstName:V.firstName,lastName:V.lastName,email:V.email&&V.email.trim()?V.email.trim():void 0,phone:V.phone});const $={matricule:V.matricule,enrollmentDate:V.enrollmentDate,fatherName:V.fatherName,motherName:V.motherName,tutorName:V.tutorName,tutorPhone:V.tutorPhone,address:V.address,emergencyContact:V.emergencyContact,notes:V.notes,institutionId:V.institutionId,photo:je?await L(je):void 0};await pe.updateStudentProfile(D.id,$),X()}catch(E){console.error("Erreur modification tudiant:",E),alert(`Erreur: ${E instanceof Error?E.message:"Erreur inconnue"}`)}finally{se(!1)}}},te=async V=>{se(!0);try{const je=await pe.createUser({firstName:V.firstName,lastName:V.lastName,email:V.email&&V.email.trim()?V.email.trim():void 0,phone:V.phone,password:"temp123456",role:"scolarite"});if(!je.success)throw new Error(je.error||"Erreur lors de la cration de l'utilisateur");const E=je,ue=(E?.data?.user||E?.data||E?.user||E)?.id;if(!ue)throw new Error("Erreur lors de la cration de l'utilisateur - userId non trouv");const Y=V.institutionId||a||void 0;console.log(" Cration enseignant - institutionId:",Y),console.log(" activeInstitution:",a);const ye={userId:ue,hireDate:V.hireDate,diplomas:V.diplomas,emergencyContact:V.emergencyContact,maritalStatus:V.maritalStatus,institutionId:Y||void 0};console.log(" Donnes envoyes pour cration enseignant:",ye);const Z=await pe.createTeacherProfile(ye);console.log(" Rponse cration enseignant:",Z);const B=(Z?.data||Z)?.institutionId||Y||void 0;console.log(" InstitutionId de l'enseignant cr:",B),T(!1),setTimeout(async()=>{d(!0);try{const Ne=await pe.getAllTeachers(B),ke=Ne?.success?Ne.data:Ne?.data||Ne;console.log(" Teachers aprs cration:",ke),p(Array.isArray(ke)?ke:[])}catch(Ne){console.error(" Erreur rcupration teachers aprs cration:",Ne),X()}finally{d(!1)}},500)}catch(je){console.error("Erreur cration enseignant:",je);let E="Erreur inconnue";if(je&&typeof je=="object"){const $=je;$.statusCode===409?E="Cet email est dj utilis par un autre utilisateur":$.statusCode===400?Array.isArray($.message)?E=$.message.join(", "):typeof $.message=="string"?E=$.message:E="Donnes invalides":Array.isArray($.message)?E=$.message.join(", "):typeof $.message=="string"?E=$.message:typeof $.error=="string"&&(E=$.error)}else je instanceof Error&&(E=je.message);alert(`Erreur: ${E}`)}finally{se(!1)}},F=async V=>{if(D){se(!0);try{const je=D;je.user?.id&&await pe.updateUser(je.user.id,{firstName:V.firstName,lastName:V.lastName,email:V.email&&V.email.trim()?V.email.trim():void 0,phone:V.phone});const E={hireDate:V.hireDate,diplomas:V.diplomas,emergencyContact:V.emergencyContact,maritalStatus:V.maritalStatus,institutionId:V.institutionId};await pe.updateTeacherProfile(D.id,E),X()}catch(je){console.error("Erreur modification enseignant:",je),alert(`Erreur: ${je instanceof Error?je.message:"Erreur inconnue"}`)}finally{se(!1)}}},ce=async V=>{se(!0);try{const je=await pe.createUser({firstName:V.firstName,lastName:V.lastName,email:V.email&&V.email.trim()?V.email.trim():void 0,phone:V.phone,password:"temp123456",role:"scolarite"});if(!je.success)throw new Error(je.error||"Erreur lors de la cration de l'utilisateur");const E=je,ue=(E?.data?.user||E?.data||E?.user||E)?.id;if(!ue)throw new Error("Erreur lors de la cration de l'utilisateur - userId non trouv");const Y={userId:ue,hireDate:V.hireDate,position:V.position,emergencyContact:V.emergencyContact,maritalStatus:V.maritalStatus};await pe.createStaffProfile(Y),T(!1),X()}catch(je){console.error("Erreur cration personnel:",je);let E="Erreur inconnue";if(je&&typeof je=="object"){const $=je;$.statusCode===409?E="Cet email est dj utilis par un autre utilisateur":$.statusCode===400?Array.isArray($.message)?E=$.message.join(", "):typeof $.message=="string"?E=$.message:E="Donnes invalides":Array.isArray($.message)?E=$.message.join(", "):typeof $.message=="string"?E=$.message:typeof $.error=="string"&&(E=$.error)}else je instanceof Error&&(E=je.message);alert(`Erreur: ${E}`)}finally{se(!1)}},J=async V=>{if(D){se(!0);try{const je=D;je.user?.id&&await pe.updateUser(je.user.id,{firstName:V.firstName,lastName:V.lastName,email:V.email&&V.email.trim()?V.email.trim():void 0,phone:V.phone});const E={hireDate:V.hireDate,position:V.position,emergencyContact:V.emergencyContact,maritalStatus:V.maritalStatus};await pe.updateStaffProfile(D.id,E),X()}catch(je){console.error("Erreur modification personnel:",je),alert(`Erreur: ${je instanceof Error?je.message:"Erreur inconnue"}`)}finally{se(!1)}}},W=async()=>{if(D){se(!0);try{i==="students"?await pe.deleteStudent(D.id):i==="teachers"?await pe.deleteTeacher(D.id):await pe.deleteStaff(D.id),A(!1),z(null),X()}finally{se(!1)}}},L=V=>new Promise(je=>{const E=new FileReader;E.onloadend=()=>je(E.result),E.readAsDataURL(V)}),ne=a?f.filter(V=>V.institutionId===a):[],K=a?g.filter(V=>V.institutionId===a):[],me=b,re=[{id:"students",label:"tudiants",icon:We,count:ne.length,color:"bg-blue-500"},{id:"teachers",label:"Enseignants",icon:Qt,count:K.length,color:"bg-emerald-500"},{id:"staff",label:"Personnel",icon:M4,count:me.length,color:"bg-violet-500"}],ie=[{key:"photo",header:"",render:V=>t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center",children:V.photo?t.jsx("img",{src:V.photo,className:"w-full h-full object-cover"}):t.jsxs("span",{className:"text-blue-700 font-bold text-xs",children:[V.user?.firstName?.[0],V.user?.lastName?.[0]]})})},{key:"name",header:"tudiant",render:V=>t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold text-slate-900",children:[V.user?.firstName," ",V.user?.lastName]}),t.jsx("p",{className:"text-xs text-slate-500",children:V.user?.gender||"-"})]})},{key:"matricule",header:"Matricule",render:V=>t.jsx("span",{className:"px-2 py-1 bg-slate-200 text-slate-800 text-sm rounded font-mono",children:V.matricule})},{key:"institution",header:"Affectation",render:V=>t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded font-medium",children:V.institution?.name||"N/A"})},{key:"contact",header:"Contact",render:V=>t.jsxs("div",{className:"space-y-1 text-sm",children:[V.user?.email&&t.jsxs("div",{className:"flex items-center gap-1.5 text-slate-600",children:[t.jsx(za,{className:"w-3 h-3"}),V.user.email]}),V.user?.phone&&t.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[t.jsx(bn,{className:"w-3 h-3"}),V.user.phone]})]})},{key:"date",header:"Inscription",render:V=>t.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-600",children:[t.jsx(as,{className:"w-3 h-3"}),R(V.enrollmentDate)]})},{key:"actions",header:"",render:V=>t.jsx(xn,{onView:()=>{z(V),j(!0)},onEdit:()=>{z(V),_(!0)},onDelete:()=>{z(V),A(!0)}})}],G=[{key:"name",header:"Enseignant",render:V=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-700 font-bold text-xs",children:[V.user?.firstName?.[0],V.user?.lastName?.[0]]}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold text-slate-900",children:[V.user?.firstName," ",V.user?.lastName]}),t.jsx("p",{className:"text-xs text-slate-500",children:V.user?.email})]})]})},{key:"spec",header:"Diplmes",render:V=>t.jsx("span",{className:"text-sm text-slate-700",children:V.diplomas||"-"})},{key:"institution",header:"Affectation",render:V=>t.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-800 text-sm rounded font-medium",children:V.institution?.name||"N/A"})},{key:"date",header:"Embauche",render:V=>t.jsx("span",{className:"text-sm text-slate-600",children:R(V.hireDate)})},{key:"actions",header:"",render:V=>t.jsx(xn,{onView:()=>{z(V),j(!0)},onEdit:()=>{z(V),_(!0)},onDelete:()=>{z(V),A(!0)}})}],be=[{key:"name",header:"Personnel",render:V=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"w-10 h-10 bg-violet-100 rounded-full flex items-center justify-center text-violet-700 font-bold text-xs",children:[V.user?.firstName?.[0],V.user?.lastName?.[0]]}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold text-slate-900",children:[V.user?.firstName," ",V.user?.lastName]}),t.jsx("p",{className:"text-xs text-slate-500",children:V.user?.email})]})]})},{key:"position",header:"Poste",render:V=>t.jsx("span",{className:"text-sm text-slate-700",children:V.position})},{key:"date",header:"Embauche",render:V=>t.jsx("span",{className:"text-sm text-slate-600",children:R(V.hireDate)})},{key:"actions",header:"",render:V=>t.jsx(xn,{onView:()=>{z(V),j(!0)},onEdit:()=>{z(V),_(!0)},onDelete:()=>{z(V),A(!0)}})}];return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(cs,{title:"Gestion Acadmique",subtitle:"tudiants, enseignants et personnel",icon:We,iconColor:"from-blue-600 to-indigo-700",actions:t.jsx(ua,{onClick:()=>T(!0),icon:is,label:i==="students"?"Nouvel tudiant":i==="teachers"?"Nouvel enseignant":"Nouveau personnel"})}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("div",{className:"flex gap-3 mb-4",children:e.map(V=>{const je=a===V.id;return t.jsx("button",{onClick:()=>r(V.id),className:`flex-1 px-6 py-4 rounded-lg transition-all border-2 ${je?"bg-gradient-to-r from-blue-600 to-indigo-700 text-white border-blue-600 shadow-lg":"bg-slate-50 text-slate-700 border-slate-200 hover:bg-slate-100"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:`text-lg font-bold ${je?"text-white":"text-slate-900"}`,children:V.name}),t.jsx("p",{className:`text-xs mt-1 ${je?"text-blue-100":"text-slate-500"}`,children:V.description||V.code})]})},V.id)})}),t.jsx("div",{className:"flex flex-wrap gap-3",children:re.map(V=>t.jsxs("button",{onClick:()=>c(V.id),className:`flex items-center gap-3 px-5 py-4 rounded-xl transition-all ${i===V.id?"bg-white shadow-lg border-2 border-slate-300":"bg-white/60 hover:bg-white border border-slate-200"}`,children:[t.jsx("div",{className:`w-10 h-10 ${V.color} rounded-lg flex items-center justify-center text-white shadow`,children:t.jsx(V.icon,{className:"w-5 h-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:`text-sm font-bold ${i===V.id?"text-slate-900":"text-slate-700"}`,children:V.label}),t.jsx("p",{className:"text-xs font-medium text-slate-500",children:V.count})]})]},V.id))})]}),u?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx("div",{className:"w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t.jsxs(t.Fragment,{children:[i==="students"&&t.jsx(hn,{data:ne,columns:ie,searchPlaceholder:"Rechercher...",pageSize:10,emptyMessage:"Aucun tudiant"}),i==="teachers"&&t.jsx(hn,{data:K,columns:G,searchPlaceholder:"Rechercher...",pageSize:10,emptyMessage:"Aucun enseignant"}),i==="staff"&&t.jsx(hn,{data:me,columns:be,searchPlaceholder:"Rechercher...",pageSize:10,emptyMessage:"Aucun personnel"})]}),i==="students"&&t.jsxs(t.Fragment,{children:[t.jsx(dv,{isOpen:S,onClose:()=>T(!1),onSubmit:Q,mode:"create",loading:P}),t.jsx(dv,{isOpen:M,onClose:()=>{_(!1),z(null)},onSubmit:ae,mode:"edit",loading:P,initialData:D?{firstName:D.user?.firstName||"",lastName:D.user?.lastName||"",email:D.user?.email||"",phone:D.user?.phone||"",gender:D.user?.gender||"",birthDate:D.user?.birthDate?.toString().split("T")[0]||"",matricule:D.matricule||"",enrollmentDate:String(D.enrollmentDate||"").split("T")[0]||"",fatherName:D.fatherName||"",motherName:D.motherName||"",tutorName:D.tutorName||"",tutorPhone:D.tutorPhone||"",address:D.address||"",emergencyContact:D.emergencyContact||"",notes:D.notes||"",institutionId:D.institutionId||""}:void 0,initialPhoto:D?.photo}),t.jsx(vM,{isOpen:C,onClose:()=>{j(!1),z(null)},student:D,onEdit:()=>{j(!1),_(!0)},onGenerateCard:()=>{j(!1),U(!0)}}),t.jsx(KM,{isOpen:O,onClose:()=>{U(!1),z(null)},student:D})]}),i==="teachers"&&t.jsxs(t.Fragment,{children:[t.jsx(mv,{isOpen:S,onClose:()=>T(!1),onSubmit:te,mode:"create",loading:P}),t.jsx(mv,{isOpen:M,onClose:()=>{_(!1),z(null)},onSubmit:F,mode:"edit",loading:P,initialData:D?{firstName:D.user?.firstName||"",lastName:D.user?.lastName||"",email:D.user?.email||"",phone:D.user?.phone||"",hireDate:String(D.hireDate||"").split("T")[0]||"",diplomas:D.diplomas||"",emergencyContact:D.emergencyContact||"",maritalStatus:D.maritalStatus||"",institutionId:D.institutionId||""}:void 0}),t.jsx(NM,{isOpen:C,onClose:()=>{j(!1),z(null)},teacher:D,onEdit:()=>{j(!1),_(!0)}})]}),i==="staff"&&t.jsxs(t.Fragment,{children:[t.jsx(fv,{isOpen:S,onClose:()=>T(!1),onSubmit:ce,mode:"create",loading:P}),t.jsx(fv,{isOpen:M,onClose:()=>{_(!1),z(null)},onSubmit:J,mode:"edit",loading:P,initialData:D?{firstName:D.user?.firstName||"",lastName:D.user?.lastName||"",email:D.user?.email||"",phone:D.user?.phone||"",hireDate:String(D.hireDate||"").split("T")[0]||"",position:D.position||"",emergencyContact:D.emergencyContact||"",maritalStatus:D.maritalStatus||""}:void 0}),t.jsx(SM,{isOpen:C,onClose:()=>{j(!1),z(null)},staff:D,onEdit:()=>{j(!1),_(!0)}})]}),t.jsx(sr,{isOpen:N,onClose:()=>{A(!1),z(null)},onConfirm:W,title:"Supprimer ?",message:`Voulez-vous vraiment supprimer ${D?.user?.firstName||""} ?`,type:"danger",confirmText:"Supprimer",loading:P})]})})},QM=()=>{const[e,a]=y.useState("classes"),[r,i]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState([]),[x,g]=y.useState(!1),[p,b]=y.useState(!1),[v,S]=y.useState(!1),[T,M]=y.useState(!1),[_,C]=y.useState(!1),[j,N]=y.useState(null),[A,O]=y.useState({name:"",code:"",classCategoryId:"",description:"",level:"",capacity:void 0,orderLevel:1}),[U,D]=y.useState({name:"",code:""}),[z,P]=y.useState("category"),se=y.useCallback(async()=>{g(!0);try{const[E,$,ue]=await Promise.all([pe.getAllClasses(),pe.getAllSubjects(),pe.getAllClassCategories()]);E.success&&E.data&&i(E.data),$.success&&$.data&&u($.data),ue.success&&ue.data&&f(ue.data)}catch(E){console.error("Erreur lors du chargement des donnes:",E)}finally{g(!1)}},[]);y.useEffect(()=>{se()},[se]);const X=async()=>{if(!A.classCategoryId){alert("Veuillez slectionner une catgorie");return}b(!0);try{const E=await pe.createClass(A);E.success&&E.data?(i([...r,E.data]),S(!1),ce()):alert(E.message||"Erreur lors de la cration")}catch(E){console.error("Erreur lors de la cration de la classe:",E),alert("Erreur lors de la cration de la classe")}finally{b(!1)}},R=async()=>{if(j){b(!0);try{const E=j,$={...A,classCategoryId:A.classCategoryId||E.classCategoryId},ue=await pe.updateClass(E.id,$);ue.success&&ue.data?(i(r.map(Y=>Y.id===E.id?ue.data:Y)),M(!1),N(null),ce()):alert(ue.message||"Erreur lors de la mise  jour")}catch(E){console.error("Erreur lors de la mise  jour de la classe:",E),alert("Erreur lors de la mise  jour de la classe")}finally{b(!1)}}},Q=async()=>{if(j){b(!0);try{const E=j,$=isNaN(Number(E.id))?E.id:Number(E.id),ue=await pe.deleteClass($);ue.success?(i(r.filter(Y=>Y.id!==E.id)),C(!1),N(null)):alert(ue.message||"Erreur lors de la suppression")}catch(E){console.error("Erreur lors de la suppression de la classe:",E),alert("Erreur lors de la suppression de la classe")}finally{b(!1)}}},ae=async()=>{b(!0);try{const E=await pe.createSubject(U);E.success&&E.data?(u([...c,E.data]),S(!1),J()):alert(E.message||"Erreur lors de la cration")}catch(E){console.error("Erreur lors de la cration de la matire:",E),alert("Erreur lors de la cration de la matire")}finally{b(!1)}},te=async()=>{if(j){b(!0);try{const E=j,$=await pe.updateSubject(E.id,U);$.success&&$.data?(u(c.map(ue=>ue.id===E.id?$.data:ue)),M(!1),N(null),J()):alert($.message||"Erreur lors de la mise  jour")}catch(E){console.error("Erreur lors de la mise  jour de la matire:",E),alert("Erreur lors de la mise  jour de la matire")}finally{b(!1)}}},F=async()=>{if(j){b(!0);try{const E=j,$=await pe.deleteSubject(E.id);$.success?(u(c.filter(ue=>ue.id!==E.id)),C(!1),N(null)):alert($.message||"Erreur lors de la suppression")}catch(E){console.error("Erreur lors de la suppression de la matire:",E),alert("Erreur lors de la suppression de la matire")}finally{b(!1)}}},ce=()=>{O({name:"",code:"",classCategoryId:"",description:"",level:"",capacity:void 0,orderLevel:1}),P("category")},J=()=>{D({name:"",code:""})},W=E=>{N(E),O({name:E.name,code:E.code||"",classCategoryId:E.classCategoryId,description:E.description||"",level:E.level,capacity:E.capacity,orderLevel:E.orderLevel||1}),P("details"),M(!0)},L=E=>{N(E),D({name:E.name,code:E.code}),M(!0)},ne=()=>{z==="category"&&A.classCategoryId!==null&&A.classCategoryId!==""?P("details"):z==="details"&&A.name&&A.code&&A.level&&P("final")},K=()=>{z==="final"?P("details"):z==="details"&&P("category")},me=()=>z==="category"?A.classCategoryId!==null&&A.classCategoryId!=="":z==="details"?!!A.name&&!!A.code&&!!A.level:!0,re=E=>({seconde:"Seconde (11me)",premiere:"Premire (12me)",terminale:"Terminale (13me)",bts:"BTS",dut:"DUT",licence1:"Licence 1",licence2:"Licence 2",licence3:"Licence 3",master1:"Master 1",master2:"Master 2"})[E]||E,ie=E=>E.classCategory?.name||E.category?.name||d.find($=>$.id===E.classCategoryId)?.name||"Non dfinie",G=E=>E?new Date(E).toLocaleDateString("fr-FR"):"N/A",be=[{id:"classes",label:"Classes",icon:We,count:r.length,color:"bg-blue-500"},{id:"subjects",label:"Matires",icon:qs,count:c.length,color:"bg-indigo-500"}],V=[{key:"name",header:"Classe",render:E=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700 font-bold",children:t.jsx(We,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-slate-900",children:E.name}),t.jsx("p",{className:"text-xs text-slate-500",children:E.code||"N/A"})]})]})},{key:"category",header:"Catgorie",render:E=>t.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 text-sm rounded font-medium",children:ie(E)})},{key:"level",header:"Niveau",render:E=>t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded font-medium",children:re(E.level)})},{key:"capacity",header:"Capacit",render:E=>t.jsx("span",{className:"text-sm text-slate-700",children:E.capacity?`${E.capacity} lves`:"N/A"})},{key:"date",header:"Cre le",render:E=>t.jsx("span",{className:"text-sm text-slate-600",children:G(E.createdAt)})},{key:"actions",header:"",render:E=>t.jsx(xn,{onEdit:()=>W(E),onDelete:()=>{N(E),C(!0)}})}],je=[{key:"name",header:"Matire",render:E=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-700 font-bold",children:t.jsx(qs,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-slate-900",children:E.name}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:E.code})]})]})},{key:"date",header:"Cre le",render:E=>t.jsx("span",{className:"text-sm text-slate-600",children:G(E.createdAt)})},{key:"actions",header:"",render:E=>t.jsx(xn,{onEdit:()=>L(E),onDelete:()=>{N(E),C(!0)}})}];return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(cs,{title:"Classes et Matires",subtitle:"Grez les classes et les matires de votre tablissement",icon:We,iconColor:"from-blue-600 to-indigo-700",actions:t.jsx(ua,{onClick:()=>{e==="classes"?(ce(),P("category")):J(),S(!0)},icon:is,label:e==="classes"?"Nouvelle classe":"Nouvelle matire"})}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:t.jsx("div",{className:"flex flex-wrap gap-3",children:be.map(E=>t.jsxs("button",{onClick:()=>a(E.id),className:`flex items-center gap-3 px-5 py-4 rounded-xl transition-all ${e===E.id?"bg-white shadow-lg border-2 border-slate-300":"bg-white/60 hover:bg-white border border-slate-200"}`,children:[t.jsx("div",{className:`w-10 h-10 ${E.color} rounded-lg flex items-center justify-center text-white shadow`,children:t.jsx(E.icon,{className:"w-5 h-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:`text-sm font-bold ${e===E.id?"text-slate-900":"text-slate-700"}`,children:E.label}),t.jsx("p",{className:"text-xs font-medium text-slate-500",children:E.count})]})]},E.id))})}),x?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx("div",{className:"w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t.jsxs(t.Fragment,{children:[e==="classes"&&t.jsx(hn,{data:r,columns:V,searchPlaceholder:"Rechercher une classe...",searchKeys:["name","code","level"],pageSize:10,emptyMessage:"Aucune classe"}),e==="subjects"&&t.jsx(hn,{data:c,columns:je,searchPlaceholder:"Rechercher une matire...",searchKeys:["name","code"],pageSize:10,emptyMessage:"Aucune matire"})]}),e==="classes"&&t.jsx(xt,{isOpen:v||T,onClose:()=>{S(!1),M(!1),N(null),ce()},title:T?"Modifier la classe":"Nouvelle classe",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[!T&&t.jsxs("div",{className:"flex items-center justify-center space-x-4 pb-4 border-b",children:[t.jsxs("div",{className:`flex items-center ${z==="category"?"text-blue-600":"text-gray-400"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${z==="category"?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:"1"}),t.jsx("span",{className:"ml-2 font-medium",children:"Catgorie"})]}),t.jsx("div",{className:`w-16 h-0.5 ${z==="details"||z==="final"?"bg-blue-600":"bg-gray-200"}`}),t.jsxs("div",{className:`flex items-center ${z==="details"?"text-blue-600":z==="final"?"text-green-600":"text-gray-400"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${z==="details"?"bg-blue-600 text-white":z==="final"?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:"2"}),t.jsx("span",{className:"ml-2 font-medium",children:"Dtails"})]}),t.jsx("div",{className:`w-16 h-0.5 ${z==="final"?"bg-green-600":"bg-gray-200"}`}),t.jsxs("div",{className:`flex items-center ${z==="final"?"text-green-600":"text-gray-400"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${z==="final"?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:"3"}),t.jsx("span",{className:"ml-2 font-medium",children:"Validation"})]})]}),!T&&z==="category"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Choisissez le type d'tablissement"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Cette information dterminera les niveaux disponibles"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.map(E=>t.jsx("button",{onClick:()=>{O({...A,classCategoryId:E.id})},className:`p-4 rounded-xl border-2 transition-all ${A.classCategoryId===E.id?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"font-semibold text-slate-900",children:E.name}),t.jsx("p",{className:"text-xs text-slate-600 mt-1",children:E.description||"Catgorie de classe"})]})},E.id))}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{onClick:ne,disabled:!me(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuer"})})]}),!T&&z==="details"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ze,{label:"Nom de la classe",placeholder:"Ex: 6me A, 2nde S1...",value:A.name,onChange:E=>O({...A,name:E.target.value})}),t.jsx(ze,{label:"Code de la classe",placeholder:"Ex: 6A, 2S1, L1...",value:A.code,onChange:E=>O({...A,code:E.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Niveau"}),t.jsxs("select",{value:A.level,onChange:E=>O({...A,level:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Slectionner un niveau"}),t.jsxs("optgroup",{label:"Lyce",children:[t.jsx("option",{value:"seconde",children:"Seconde (11me)"}),t.jsx("option",{value:"premiere",children:"Premire (12me)"}),t.jsx("option",{value:"terminale",children:"Terminale (13me)"})]}),t.jsxs("optgroup",{label:"Enseignement Suprieur",children:[t.jsx("option",{value:"bts",children:"BTS"}),t.jsx("option",{value:"dut",children:"DUT"}),t.jsx("option",{value:"licence1",children:"Licence 1"}),t.jsx("option",{value:"licence2",children:"Licence 2"}),t.jsx("option",{value:"licence3",children:"Licence 3"}),t.jsx("option",{value:"master1",children:"Master 1"}),t.jsx("option",{value:"master2",children:"Master 2"})]})]})]}),t.jsx(ze,{label:"Capacit maximale (optionnel)",type:"number",placeholder:"Nombre d'lves",value:A.capacity?A.capacity.toString():"",onChange:E=>O({...A,capacity:E.target.value&&parseInt(E.target.value)||void 0})})]}),t.jsx(ze,{label:"Description (optionnel)",placeholder:"Ex: Classe de 6me avec option anglais...",value:A.description,onChange:E=>O({...A,description:E.target.value})}),t.jsx(ze,{label:"Niveau d'ordre",type:"number",placeholder:"Ex: 1, 2, 3...",value:A.orderLevel.toString(),onChange:E=>O({...A,orderLevel:parseInt(E.target.value)||1})}),t.jsxs("div",{className:"flex justify-between pt-4",children:[t.jsx("button",{onClick:K,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Retour"}),t.jsx("button",{onClick:ne,disabled:!me(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuer"})]})]}),(!T&&z==="final"||T)&&t.jsxs("div",{className:"space-y-4",children:[!T&&t.jsx("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Nom"}),t.jsx("p",{className:"text-lg font-semibold text-slate-900",children:A.name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Code"}),t.jsx("p",{className:"text-lg font-semibold text-slate-900",children:A.code})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Niveau"}),t.jsx("p",{className:"text-lg font-semibold text-slate-900",children:re(A.level)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Capacit"}),t.jsx("p",{className:"text-lg font-semibold text-slate-900",children:A.capacity?`${A.capacity} lves`:"Non dfinie"})]})]})}),T&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ze,{label:"Nom de la classe",value:A.name,onChange:E=>O({...A,name:E.target.value})}),t.jsx(ze,{label:"Code de la classe",value:A.code,onChange:E=>O({...A,code:E.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Niveau"}),t.jsxs("select",{value:A.level,onChange:E=>O({...A,level:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Slectionner un niveau"}),t.jsxs("optgroup",{label:"Lyce",children:[t.jsx("option",{value:"seconde",children:"Seconde (11me)"}),t.jsx("option",{value:"premiere",children:"Premire (12me)"}),t.jsx("option",{value:"terminale",children:"Terminale (13me)"})]}),t.jsxs("optgroup",{label:"Enseignement Suprieur",children:[t.jsx("option",{value:"bts",children:"BTS"}),t.jsx("option",{value:"dut",children:"DUT"}),t.jsx("option",{value:"licence1",children:"Licence 1"}),t.jsx("option",{value:"licence2",children:"Licence 2"}),t.jsx("option",{value:"licence3",children:"Licence 3"}),t.jsx("option",{value:"master1",children:"Master 1"}),t.jsx("option",{value:"master2",children:"Master 2"})]})]})]}),t.jsx(ze,{label:"Capacit maximale (optionnel)",type:"number",placeholder:"Nombre d'lves",value:A.capacity?A.capacity.toString():"",onChange:E=>O({...A,capacity:E.target.value&&parseInt(E.target.value)||void 0})})]}),t.jsx(ze,{label:"Description (optionnel)",value:A.description,onChange:E=>O({...A,description:E.target.value})}),t.jsx(ze,{label:"Niveau d'ordre",type:"number",value:A.orderLevel.toString(),onChange:E=>O({...A,orderLevel:parseInt(E.target.value)||1})})]}),t.jsxs("div",{className:"flex justify-between pt-4",children:[!T&&t.jsx("button",{onClick:K,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Retour"}),t.jsxs("div",{className:"flex gap-3 ml-auto",children:[t.jsx("button",{onClick:()=>{S(!1),M(!1),N(null),ce()},className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Annuler"}),t.jsx("button",{onClick:T?R:X,disabled:p||!me(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":T?"Enregistrer":"Crer la classe"})]})]})]})]})}),e==="subjects"&&t.jsx(xt,{isOpen:v||T,onClose:()=>{S(!1),M(!1),N(null),J()},title:T?"Modifier la matire":"Nouvelle matire",size:"lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ze,{label:"Nom de la matire",placeholder:"Ex: Mathmatiques, Franais...",value:U.name,onChange:E=>D({...U,name:E.target.value})}),t.jsx(ze,{label:"Code de la matire",placeholder:"Ex: MATH, FRAN",value:U.code,onChange:E=>D({...U,code:E.target.value.toUpperCase()})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{onClick:()=>{S(!1),M(!1),N(null),J()},className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Annuler"}),t.jsx("button",{onClick:T?te:ae,disabled:p||!U.name||!U.code,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":T?"Enregistrer":"Crer la matire"})]})]})}),t.jsx(sr,{isOpen:_,onClose:()=>{C(!1),N(null)},onConfirm:e==="classes"?Q:F,title:"Supprimer ?",message:`Voulez-vous vraiment supprimer ${e==="classes"?`la classe "${j?.name||""}"`:`la matire "${j?.name||""}"`} ?`,type:"danger",confirmText:"Supprimer",loading:p})]})})},JM=()=>{const e=Ht();return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(cs,{title:"Gestion Financire",subtitle:"Grez les finances, paiements et factures",icon:jn,iconColor:"from-blue-600 to-blue-800"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl p-5 border-2 border-emerald-200 cursor-pointer",onClick:()=>e("/finances/payments"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-600 rounded-lg flex items-center justify-center",children:t.jsx(Xt,{className:"w-6 h-6 text-white"})}),t.jsx(Es,{className:"w-5 h-5 text-emerald-600"})]}),t.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:"Paiements"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Transactions"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-violet-100 rounded-xl p-5 border-2 border-violet-200 cursor-pointer",onClick:()=>e("/finances/student-fees"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-12 h-12 bg-violet-600 rounded-lg flex items-center justify-center",children:t.jsx(We,{className:"w-6 h-6 text-white"})}),t.jsx(Es,{className:"w-5 h-5 text-violet-600"})]}),t.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:"Frais tudiants"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Par tudiant"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-5 border-2 border-amber-200 cursor-pointer",onClick:()=>e("/finances/fee-types"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-12 h-12 bg-amber-600 rounded-lg flex items-center justify-center",children:t.jsx(ts,{className:"w-6 h-6 text-white"})}),t.jsx(Es,{className:"w-5 h-5 text-amber-600"})]}),t.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:"Types de frais"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Configuration"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border-2 border-blue-200 cursor-pointer",onClick:()=>e("/finances/invoices"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:t.jsx(ys,{className:"w-6 h-6 text-white"})}),t.jsx(Es,{className:"w-5 h-5 text-blue-600"})]}),t.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:"Factures"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Crer et grer"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[t.jsx(P5,{className:"w-5 h-5 text-blue-600 mr-2"}),"Accs rapides"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 cursor-pointer",onClick:()=>e("/finances/payments"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:t.jsx(Xt,{className:"w-5 h-5 text-emerald-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:"Paiements"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Grer les transactions"})]}),t.jsx(Es,{className:"w-4 h-4 text-slate-400"})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 cursor-pointer",onClick:()=>e("/finances/student-fees"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center",children:t.jsx(We,{className:"w-5 h-5 text-violet-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:"Frais tudiants"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Frais par tudiant"})]}),t.jsx(Es,{className:"w-4 h-4 text-slate-400"})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 cursor-pointer",onClick:()=>e("/finances/fee-types"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:t.jsx(ts,{className:"w-5 h-5 text-amber-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:"Types de frais"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Configurer les frais"})]}),t.jsx(Es,{className:"w-4 h-4 text-slate-400"})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 cursor-pointer",onClick:()=>e("/finances/invoices"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(ys,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:"Factures"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Crer et grer"})]}),t.jsx(Es,{className:"w-4 h-4 text-slate-400"})]})})]})]}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[t.jsx(Qi,{className:"w-5 h-5 text-slate-500 mr-2"}),"Outils"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 cursor-pointer",onClick:()=>e("/finances/overview"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(jn,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:"Vue d'ensemble"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Statistiques"})]}),t.jsx(Es,{className:"w-4 h-4 text-slate-400"})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 cursor-pointer",onClick:()=>e("/finances/discounts"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(j5,{className:"w-5 h-5 text-green-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:"Rductions"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Bourses et remises"})]}),t.jsx(Es,{className:"w-4 h-4 text-slate-400"})]})})]})]})]})]})})},Va=({items:e})=>t.jsxs("nav",{className:"flex items-center space-x-2 text-sm mb-4",children:[t.jsx(mt,{to:"/dashboard",className:"text-slate-500 hover:text-slate-700 flex items-center",children:t.jsx(dj,{className:"w-4 h-4"})}),e.map((a,r)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(rr,{className:"w-4 h-4 text-slate-400"}),a.path&&r<e.length-1?t.jsx(mt,{to:a.path,className:"text-slate-500 hover:text-slate-700 font-medium",children:a.label}):t.jsx("span",{className:"text-slate-900 font-semibold",children:a.label})]},r))]}),WM=()=>{const e=Ht(),[a,r]=y.useState({totalRevenue:0,pendingPayments:0,overduePayments:0,totalInvoices:0,paidInvoices:0,pendingInvoices:0}),[i,c]=y.useState(!0);y.useEffect(()=>{u()},[]);const u=async()=>{try{const d=await pe.getFinanceStats();d.success&&d.data?r({totalRevenue:d.data.totalRevenue,pendingPayments:d.data.totalPending||0,overduePayments:d.data.totalOverdue||0,totalInvoices:0,paidInvoices:d.data.totalPaid||0,pendingInvoices:d.data.totalPending||0}):(console.error("Erreur lors du chargement des statistiques:",d.error),r({totalRevenue:25e5,pendingPayments:15,overduePayments:8,totalInvoices:120,paidInvoices:95,pendingInvoices:25}))}catch(d){console.error("Erreur lors du chargement des statistiques:",d),r({totalRevenue:25e5,pendingPayments:15,overduePayments:8,totalInvoices:120,paidInvoices:95,pendingInvoices:25})}finally{c(!1)}};return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Finances",path:"/finances"},{label:"Vue d'ensemble"}]}),t.jsx(cs,{title:"Vue d'ensemble financire",subtitle:"Tableau de bord et statistiques financires",icon:jn,iconColor:"from-blue-600 to-blue-800"}),i?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement des statistiques..."})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus totaux"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[a.totalRevenue.toLocaleString()," FCFA"]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:t.jsx(ts,{className:"w-6 h-6 text-green-600"})})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paiements en attente"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.pendingPayments})]}),t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:t.jsx(Xt,{className:"w-6 h-6 text-yellow-600"})})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paiements en retard"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.overduePayments})]}),t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:t.jsx("span",{className:"text-red-600 text-xl",children:""})})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Factures payes"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[a.paidInvoices,"/",a.totalInvoices]})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:t.jsx(ys,{className:"w-6 h-6 text-blue-600"})})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md cursor-pointer",onClick:()=>e("/finances/payments/assign"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:t.jsx(Xt,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nouveau paiement"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enregistrer un nouveau paiement"}),t.jsx("button",{onClick:()=>e("/finances/payments/assign"),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Crer un paiement"})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md cursor-pointer",onClick:()=>e("/finances/invoices"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:t.jsx(ys,{className:"w-8 h-8 text-purple-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nouvelle facture"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Crer une nouvelle facture"}),t.jsx("button",{onClick:()=>e("/finances/invoices"),className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium",children:"Crer une facture"})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md cursor-pointer",onClick:()=>e("/finances/fee-types"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:t.jsx(ts,{className:"w-8 h-8 text-green-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Types de frais"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Grer les types de frais"}),t.jsx("button",{onClick:()=>e("/finances/fee-types"),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium",children:"Grer les frais"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"volution des revenus"}),t.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:t.jsx("p",{className:"text-gray-500",children:"Graphique des revenus ( implmenter)"})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statut des paiements"}),t.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:t.jsx("p",{className:"text-gray-500",children:"Graphique des paiements ( implmenter)"})})]})]})]})]})})},e_=({isOpen:e,onClose:a,feeType:r,onSuccess:i})=>{const[c,u]=y.useState([]),[d,f]=y.useState([]),[x,g]=y.useState([]),[p,b]=y.useState(new Set),[v,S]=y.useState(null),[T,M]=y.useState(""),[_,C]=y.useState({dueDate:""}),[j,N]=y.useState(!1),[A,O]=y.useState(!1),[U,D]=y.useState(null),[z,P]=y.useState([]),se=y.useCallback(async()=>{try{N(!0);const[J,W,L,ne]=await Promise.all([pe.getAllStudents(),pe.getAllStudentClasses(),pe.getAllSchoolYears(),pe.getAllStudentFees()]);J.success&&J.data&&u(J.data),W.success&&W.data&&f(W.data),L.success&&L.data&&g(L.data),ne.success&&ne.data&&P(ne.data)}catch(J){console.error("Erreur lors du chargement des donnes d'affectation:",J)}finally{N(!1)}},[]);y.useEffect(()=>{e&&r&&(se(),b(new Set),S(null),M(""),C({dueDate:""}))},[e,r,se]);const X=J=>{const W=d.find(K=>K.studentId===J&&!K.endDate);if(!W?.class)return"Non assign";const L=W.class.name,ne=W.class.classCategory?.institution||null;return ne?`${L} (${ne.code})`:L},R=J=>{const W=new Set(p);W.has(J)?W.delete(J):W.add(J),b(W)},Q=()=>{const J=F;b(new Set(J.map(W=>W.id)))},ae=()=>{b(new Set)},te=y.useMemo(()=>{if(!r||!v)return new Set;const J=z.filter(W=>W.feeTypeId===r.id&&W.academicYearId===v.id).map(W=>W.studentId);return new Set(J)},[z,r,v]);y.useEffect(()=>{te.size!==0&&b(J=>new Set([...J].filter(L=>!te.has(L))))},[te]);const F=c.filter(J=>!(!(J.user.firstName.toLowerCase().includes(T.toLowerCase())||J.user.lastName.toLowerCase().includes(T.toLowerCase())||J.matricule.toLowerCase().includes(T.toLowerCase()))||te.has(J.id))),ce=async J=>{if(J.preventDefault(),!r||p.size===0||!v){alert("Veuillez slectionner au moins un tudiant et une anne scolaire.");return}try{O(!0);const W=Array.from(p).map(me=>{const re={studentId:me,feeTypeId:r.id,academicYearId:v.id,amountAssigned:Number(r.amountDefault)};return _.dueDate&&_.dueDate.trim()!==""&&(re.dueDate=_.dueDate),pe.createStudentFee(re)}),L=await Promise.all(W),ne=L.filter(me=>me.success),K=L.filter(me=>!me.success);ne.length===L.length?(D(`Frais attribus avec succs  ${ne.length} tudiant(s) !`),i&&i()):alert(`${ne.length} attribution(s) russie(s), ${K.length} choue(s).`)}catch(W){console.error("Erreur lors de l'affectation:",W),alert("Erreur lors de l'affectation. Veuillez ressayer.")}finally{O(!1)}};return r?t.jsxs(xt,{isOpen:e,onClose:a,title:`Affecter "${r.name}"`,size:"lg",children:[U&&t.jsx(xt,{isOpen:!0,onClose:()=>{D(null),a()},title:"Succs",size:"sm",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-gray-800 text-sm",children:U}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>{D(null),a()},className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"OK"})})]})}),j?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Chargement..."})]})}):t.jsxs("form",{onSubmit:ce,className:"space-y-4 flex flex-col h-full",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex-shrink-0",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[r.amountDefault.toLocaleString("fr-FR")," FCFA"]}),t.jsx("span",{className:"text-sm text-gray-600",children:p.size>0&&`${p.size} slectionn(s)`})]})}),t.jsxs("div",{className:"flex-shrink-0",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Anne scolaire *"}),t.jsxs("select",{value:v?.id||"",onChange:J=>{const W=x.find(L=>L.id===J.target.value);S(W||null)},className:"w-full px-4 py-2.5 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white cursor-pointer",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner une anne"}),x.map(J=>t.jsxs("option",{value:J.id,children:[J.name," ",J.isActive&&"(Actuelle)"]},J.id))]})]}),t.jsxs("div",{className:"flex-1 flex overflow-y-auto flex-col min-h-0 border border-gray-300 rounded-lg bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border-b overflow-y-auto border-gray-200 bg-gray-50 rounded-t-lg flex-shrink-0",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"tudiants *"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{type:"button",onClick:Q,className:"text-sm px-3 py-1.5 text-blue-700 hover:bg-blue-100 rounded-lg cursor-pointer font-semibold",children:"Tout"}),t.jsx("button",{type:"button",onClick:ae,className:"text-sm px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded-lg cursor-pointer font-semibold",children:"Aucun"})]})]}),t.jsxs("div",{className:"relative p-3 border-b border-gray-200 bg-gray-50 flex-shrink-0",children:[t.jsx(yn,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Rechercher un tudiant...",value:T,onChange:J=>M(J.target.value),className:"w-full pl-10 pr-4 py-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white placeholder-gray-400"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 p-3",children:t.jsxs("div",{className:"space-y-2",children:[F.map(J=>{const W=p.has(J.id);return t.jsx("div",{onClick:()=>R(J.id),className:`p-2.5 border rounded-lg cursor-pointer ${W?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[W?t.jsx(Vi,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}):t.jsx(Ui,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:J.photo?t.jsx("img",{src:J.photo,alt:`${J.user.firstName} ${J.user.lastName}`,className:"w-full h-full object-cover"}):t.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500 text-xs font-semibold",children:[J.user.firstName.charAt(0),J.user.lastName.charAt(0)]})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:[J.user.firstName," ",J.user.lastName]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[J.matricule,"  ",X(J.id)]})]})]})},J.id)}),F.length===0&&t.jsx("div",{className:"text-center py-8 text-sm text-gray-500",children:"Aucun tudiant trouv"})]})})]}),t.jsxs("div",{className:"flex-shrink-0",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Date d'chance"," ",t.jsx("span",{className:"text-gray-400 font-normal",children:"(optionnel)"})]}),t.jsx("input",{type:"date",value:_.dueDate,onChange:J=>C({..._,dueDate:J.target.value}),className:"w-full px-4 py-2.5 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white cursor-pointer"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-3 mt-3 border-t flex-shrink-0",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2.5 text-base border-2 border-gray-400 text-gray-800 rounded-lg hover:bg-gray-200 cursor-pointer font-semibold",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:A||p.size===0||!v,className:"px-4 py-2.5 text-base bg-green-700 hover:bg-green-800 text-white rounded-lg disabled:opacity-50 cursor-pointer font-bold shadow-md",children:A?"...":`Affecter (${p.size})`})]})]})]}):null},t_=()=>{const[e,a]=y.useState([]),[r,i]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[x,g]=y.useState(!1),[p,b]=y.useState(!1),[v,S]=y.useState(null),[T,M]=y.useState(null),[_,C]=y.useState(null),[j,N]=y.useState({name:"",description:"",amountDefault:0,isRecurring:!1,frequency:"once"}),[A,O]=y.useState(""),U=W=>W.toLocaleString("fr-FR"),D=W=>{const L=W.replace(/[\s.]/g,"");return parseInt(L)||0},z=W=>{const L=D(W);N({...j,amountDefault:L}),O(U(L))},P=y.useCallback(async()=>{try{const W=await pe.getAllFeeTypes();W.success&&W.data?a(W.data):a([])}catch(W){console.error("Erreur lors du chargement des types de frais:",W),a([])}},[]);y.useEffect(()=>{P()},[P]);const se=W=>{C(W),b(!0)},X=()=>{P()},R=async W=>{W.preventDefault();try{i(!0);const L=await pe.createFeeType(j);L.success?(u(!1),F(),await P()):alert(L.message||"Erreur lors de la cration")}catch(L){console.error("Erreur lors de la cration:",L),alert("Erreur lors de la cration")}finally{i(!1)}},Q=W=>{M(W),N({name:W.name,description:W.description||"",amountDefault:W.amountDefault,isRecurring:W.isRecurring,frequency:W.frequency}),O(U(W.amountDefault)),f(!0)},ae=async W=>{if(W.preventDefault(),!T)return;const L=typeof j.amountDefault=="number"?j.amountDefault:Number(j.amountDefault)||T.amountDefault,ne=L>0?L:T.amountDefault;if(!ne||ne<=0){alert("Le montant doit tre positif");return}try{i(!0);const K=await pe.updateFeeType(T.id,{...j,amountDefault:Number(ne)});K.success?(f(!1),M(null),F(),await P()):alert(K.message||"Erreur lors de la mise  jour")}catch(K){console.error("Erreur lors de la mise  jour:",K),alert("Erreur lors de la mise  jour")}finally{i(!1)}},te=async()=>{if(v)try{i(!0);const W=await pe.deleteFeeType(v.id);W.success?(g(!1),S(null),await P()):alert(W.message||"Erreur lors de la suppression")}catch(W){console.error("Erreur lors de la suppression:",W),alert("Erreur lors de la suppression")}finally{i(!1)}},F=()=>{N({name:"",description:"",amountDefault:0,isRecurring:!1,frequency:"once"}),O("")},ce=W=>({once:"Unique",monthly:"Mensuel",quarterly:"Trimestriel",yearly:"Annuel"})[W],J=[{key:"name",header:"Nom",render:W=>t.jsx("div",{className:"font-semibold text-slate-900",children:W.name})},{key:"description",header:"Description",render:W=>t.jsx("div",{className:"text-slate-600 max-w-xs truncate",children:W.description||"-"})},{key:"amountDefault",header:"Montant par dfaut",render:W=>t.jsxs("div",{className:"font-medium text-slate-900",children:[W.amountDefault.toLocaleString("fr-FR")," FCFA"]})},{key:"frequency",header:"Frquence",render:W=>t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:ce(W.frequency)})},{key:"actions",header:"Actions",render:W=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>se(W),className:"text-green-600 hover:text-green-900 cursor-pointer",children:t.jsx(fj,{className:"w-4 h-4"})}),t.jsx(xn,{onEdit:()=>Q(W),onDelete:()=>{S(W),g(!0)}})]})}];return t.jsxs(os,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Finances",path:"/finances"},{label:"Types de frais"}]}),t.jsx(cs,{title:"Types de frais",subtitle:"Grez les diffrents types de frais de l'tablissement",icon:ts,iconColor:"from-amber-600 to-amber-700",actions:t.jsx(ua,{onClick:()=>{F(),u(!0)},icon:is,label:"Nouveau type de frais"})}),t.jsx(hn,{data:e,columns:J,searchPlaceholder:"Rechercher un type de frais...",searchKeys:["name","description"],emptyMessage:"Aucun type de frais trouv"})]}),t.jsx(xt,{isOpen:c,onClose:()=>{u(!1),F()},title:"Nouveau type de frais",size:"md",children:t.jsxs("form",{onSubmit:R,className:"space-y-4",children:[t.jsx(ze,{label:"Nom du type de frais",type:"text",value:j.name,onChange:W=>N({...j,name:W.target.value}),required:!0}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Description"}),t.jsx("textarea",{value:j.description,onChange:W=>N({...j,description:W.target.value}),className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Montant par dfaut (FCFA)"}),t.jsx("input",{type:"text",value:A,onChange:W=>z(W.target.value),placeholder:"Ex: 20.000",className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",required:!0})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:j.isRecurring,onChange:W=>N({...j,isRecurring:W.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-slate-700",children:"Rcurrent"})]})}),j.isRecurring&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Frquence"}),t.jsxs("select",{value:j.frequency,onChange:W=>N({...j,frequency:W.target.value}),className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",children:[t.jsx("option",{value:"once",children:"Unique"}),t.jsx("option",{value:"monthly",children:"Mensuel"}),t.jsx("option",{value:"quarterly",children:"Trimestriel"}),t.jsx("option",{value:"yearly",children:"Annuel"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{u(!1),F()},className:"px-4 py-2.5 border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 font-medium",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium disabled:opacity-50",children:r?"Cration...":"Crer"})]})]})}),t.jsx(xt,{isOpen:d,onClose:()=>{f(!1),M(null),F()},title:"Modifier le type de frais",size:"md",children:t.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[t.jsx(ze,{label:"Nom du type de frais",type:"text",value:j.name,onChange:W=>{N({...j,name:W.target.value,amountDefault:j.amountDefault>0?j.amountDefault:T?.amountDefault||j.amountDefault})},required:!0}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Description"}),t.jsx("textarea",{value:j.description,onChange:W=>N({...j,description:W.target.value}),className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Montant par dfaut (FCFA)"}),t.jsx("input",{type:"text",value:A,onChange:W=>z(W.target.value),placeholder:"Ex: 20.000",className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",required:!0})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:j.isRecurring,onChange:W=>N({...j,isRecurring:W.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-slate-700",children:"Rcurrent"})]})}),j.isRecurring&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Frquence"}),t.jsxs("select",{value:j.frequency,onChange:W=>N({...j,frequency:W.target.value}),className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",children:[t.jsx("option",{value:"once",children:"Unique"}),t.jsx("option",{value:"monthly",children:"Mensuel"}),t.jsx("option",{value:"quarterly",children:"Trimestriel"}),t.jsx("option",{value:"yearly",children:"Annuel"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{f(!1),M(null),F()},className:"px-4 py-2.5 border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 font-medium",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium disabled:opacity-50",children:r?"Mise  jour...":"Mettre  jour"})]})]})}),t.jsx(sr,{isOpen:x,onClose:()=>{g(!1),S(null)},onConfirm:te,title:"Supprimer le type de frais",message:`tes-vous sr de vouloir supprimer le type de frais "${v?.name}" ? Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",loading:r}),t.jsx(e_,{isOpen:p,onClose:()=>{b(!1),C(null)},feeType:_,onSuccess:X})]})},It=y.forwardRef(({label:e,error:a,icon:r,className:i="",...c},u)=>t.jsxs("div",{className:"form-control w-full",children:[e&&t.jsx("label",{className:"label",children:t.jsx("span",{className:"label-text text-slate-700 font-medium",children:e})}),t.jsxs("div",{className:"relative",children:[r&&t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-500",children:r}),t.jsx("input",{ref:u,className:`
              input input-bordered w-full transition-all duration-200 placeholder:text-slate-400
              ${r?"pl-10":""}
              ${a?"border-red-400 focus:border-red-500 focus:ring-red-200":""}
              ${c.type==="date"||c.type==="time"?"bg-gray-700 text-white border-gray-600 focus:border-gray-500 focus:ring-2 focus:ring-gray-500 [color-scheme:dark]":"bg-white text-slate-800 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}
              ${i}
            `,...c})]}),a&&t.jsx("div",{className:"label",children:t.jsx("span",{className:"label-text-alt text-red-500",children:a})})]}));It.displayName="Input";const s_=({isOpen:e,onClose:a,title:r,children:i,size:c="md"})=>{if(!e)return null;const u={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return fh.createPortal(t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:`bg-white rounded-lg shadow-lg w-full ${u[c]} max-h-[90vh] overflow-hidden`,children:[t.jsxs("div",{className:"bg-blue-500 text-white p-4 flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:r}),t.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 p-1",children:t.jsx(Sn,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"p-6 max-h-[calc(90vh-120px)] overflow-y-auto",children:i})]})}),document.body)},a_=({studentFees:e,users:a,fullStudents:r=[],studentClasses:i,payments:c,onEdit:u,onDelete:d,onPayment:f})=>{const[x,g]=y.useState(new Set),p=N=>a.find(A=>A.id===N),b=N=>r.find(A=>A.id===N),v=N=>{let A=i.find(z=>z.studentId===N&&!z.endDate);if(A||(A=i.find(z=>z.studentId===N)),!A?.class)return"Non assign";const O=A.class.name,U=A.class.classCategory,D=U?.institution;return N&&!D&&U&&console.log(" Classe trouve mais pas d'institution:",{studentId:N,className:O,classCategory:U,fullClass:A.class}),D?`${O} (${D.code||D.name})`:O},S=Ft.useCallback(N=>c.filter(O=>O.studentFeeId===N&&O.status==="successful").reduce((O,U)=>O+(Number(U.amount)||0),0),[c]),T=N=>N==null||N===""?"0":(typeof N=="string"?parseFloat(N):N).toLocaleString("fr-FR"),M=y.useMemo(()=>{const N=new Map;return e.forEach(A=>{if(!A.student||!A.student.id)return;const O=A.student.id;N.has(O)||N.set(O,{student:A.student,fees:[],totalAssigned:0,totalPaid:0,totalRemaining:0});const U=N.get(O);U.fees.push(A),U.totalAssigned+=Number(A.amountAssigned)||0;const D=S(A.id);U.totalPaid+=D}),Array.from(N.values()).forEach(A=>{A.totalRemaining=A.totalAssigned-A.totalPaid}),Array.from(N.values())},[e,S]),_=N=>{g(A=>{const O=new Set(A);return O.has(N)?O.delete(N):O.add(N),O})},C=N=>{switch(N){case"paid":return"bg-green-100 text-green-800 border-green-200";case"partial":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=N=>{switch(N){case"paid":return"Pay";case"partial":return"Partiel";case"pending":return"En attente";case"overdue":return"En retard";default:return N}};return M.length===0?t.jsx("div",{className:"text-center py-16 bg-white rounded-xl shadow-md border border-slate-200",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:t.jsx(ys,{className:"w-10 h-10 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Aucun frais tudiant"}),t.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Commencez par attribuer des frais aux tudiants pour suivre leurs paiements."})]})}):t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-md overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100 border-b border-slate-200",children:[t.jsx("th",{className:"text-left px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"tudiant"}),t.jsx("th",{className:"text-left px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Classe"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Total Assign"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Total Pay"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Total Restant"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Nombre de frais"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:M.map(N=>{const A=p(N.student.id),O=b(N.student.id),U=x.has(N.student.id),D=v(N.student.id),z=O?.photo||A?.photo,P=O?.user?.firstName||A?.firstName||N.student.firstName,se=O?.user?.lastName||A?.lastName||N.student.lastName;return t.jsxs(Ft.Fragment,{children:[t.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${U?"bg-blue-50 border-l-4 border-l-blue-600 shadow-sm":"hover:bg-blue-50/70 hover:shadow-md hover:scale-[1] hover:border-l-4 hover:border-l-blue-400"}`,onClick:()=>_(N.student.id),children:[t.jsx("td",{className:"px-5 py-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full overflow-hidden bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0 transition-transform duration-200 ${U?"ring-2 ring-blue-500 ring-offset-2 scale-110":"hover:scale-110 hover:ring-2 hover:ring-blue-400"}`,children:z?t.jsx("img",{src:z,alt:`${P} ${se}`,className:"w-full h-full object-cover"}):t.jsxs("span",{className:"text-white font-bold text-sm",children:[P?.[0]||"",se?.[0]||""]})}),t.jsxs("div",{children:[t.jsx("div",{className:`font-semibold transition-colors duration-200 ${U?"text-blue-900":"text-slate-900"}`,children:P&&se?`${P} ${se}`:`tudiant ${N.student.matricule}`}),t.jsx("div",{className:"text-xs text-slate-500 font-mono",children:N.student.matricule})]})]})}),t.jsx("td",{className:"px-5 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold transition-all duration-200 ${U?"bg-purple-200 text-purple-900 shadow-sm":"bg-purple-100 text-purple-800 hover:bg-purple-200"}`,children:D})}),t.jsx("td",{className:"px-5 py-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(jn,{className:`w-4 h-4 transition-colors duration-200 ${U?"text-blue-700":"text-blue-600"}`}),t.jsxs("span",{className:`font-bold transition-colors duration-200 ${U?"text-blue-900":"text-gray-900"}`,children:[T(N.totalAssigned)," FCFA"]})]})}),t.jsx("td",{className:"px-5 py-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(Xt,{className:`w-4 h-4 transition-colors duration-200 ${U?"text-green-700":"text-green-600"}`}),t.jsxs("span",{className:`font-bold transition-colors duration-200 ${U?"text-green-800":"text-green-700"}`,children:[T(N.totalPaid)," FCFA"]})]})}),t.jsx("td",{className:"px-5 py-4 text-center",children:t.jsxs("div",{className:`flex items-center justify-center space-x-1 transition-colors duration-200 ${N.totalRemaining>0?U?"text-red-800":"text-red-700":U?"text-green-800":"text-green-700"}`,children:[N.totalRemaining>0?t.jsx(pb,{className:`w-4 h-4 transition-colors duration-200 ${U?"text-red-700":"text-red-600"}`}):t.jsx(Bs,{className:`w-4 h-4 transition-colors duration-200 ${U?"text-green-700":"text-green-600"}`}),t.jsxs("span",{className:"font-bold",children:[T(N.totalRemaining)," FCFA"]})]})}),t.jsxs("td",{className:"px-5 py-4 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(ts,{className:`w-4 h-4 transition-colors duration-200 ${U?"text-blue-700":"text-blue-600"}`}),t.jsx("span",{className:`font-bold transition-colors duration-200 ${U?"text-blue-900":"text-blue-800"}`,children:N.fees.length})]}),t.jsxs("div",{className:"flex items-center justify-center mt-1 space-x-2",children:[f&&t.jsx("button",{onClick:X=>{X.stopPropagation(),f(N.student.id)},className:"p-1.5 rounded-full bg-green-100 hover:bg-green-200 text-green-700 hover:text-green-900 transition-all duration-200 hover:scale-110 cursor-pointer",title:"Enregistrer un paiement",children:t.jsx(tC,{className:"w-4 h-4"})}),U?t.jsx(Vc,{className:"w-5 h-5 text-blue-600 animate-pulse"}):t.jsx(rr,{className:"w-5 h-5 text-gray-500 transition-transform duration-200 hover:translate-x-1"})]})]})]}),U&&t.jsx("tr",{className:"bg-blue-50/30 border-l-4 border-l-blue-600",children:t.jsx("td",{colSpan:6,className:"px-5 py-4 bg-gradient-to-r from-blue-50/50 to-slate-50",children:t.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx("div",{className:"w-1 h-6 bg-blue-600 rounded-full"}),t.jsx("div",{className:"text-sm font-bold text-blue-900 uppercase tracking-wide",children:"Dtails des frais"}),t.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-blue-200 to-transparent"})]}),t.jsx("div",{className:"space-y-2",children:N.fees.map(X=>{const R=S(X.id),Q=Number(X.amountAssigned)-R;return t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-400 hover:shadow-lg hover:scale-[1.02] transition-all duration-200 hover:ring-2 hover:ring-blue-100",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4 items-center",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(ys,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-bold text-gray-900",children:X.feeType.name}),t.jsx("div",{className:"text-xs text-gray-600 font-medium",children:X.academicYear.name})]})]}),t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"bg-blue-50 rounded-lg p-2 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[t.jsx(jn,{className:"w-3 h-3 text-blue-600"}),t.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:"Assign"})]}),t.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[T(X.amountAssigned)," ","FCFA"]})]})}),t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:`rounded-lg p-2 border ${R>0?R>=Number(X.amountAssigned)?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[t.jsx(Xt,{className:`w-3 h-3 ${R>0?R>=Number(X.amountAssigned)?"text-green-600":"text-blue-600":"text-gray-500"}`}),t.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide ${R>0?R>=Number(X.amountAssigned)?"text-green-600":"text-blue-600":"text-gray-500"}`,children:"Pay"})]}),t.jsxs("div",{className:`text-sm font-bold ${R>0?R>=Number(X.amountAssigned)?"text-green-700":"text-blue-700":"text-gray-600"}`,children:[T(R)," FCFA",R>0&&R<Number(X.amountAssigned)&&t.jsx("span",{className:"text-xs text-blue-500 ml-1 font-medium",children:"(partiel)"})]})]})}),t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:`rounded-lg p-2 border ${Q>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[Q>0?t.jsx(pb,{className:"w-3 h-3 text-red-600"}):t.jsx(Bs,{className:"w-3 h-3 text-green-600"}),t.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide ${Q>0?"text-red-600":"text-green-600"}`,children:"Restant"})]}),t.jsxs("div",{className:`text-sm font-bold ${Q>0?"text-red-700":"text-green-700"}`,children:[T(Q)," FCFA"]})]})}),t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[t.jsx(as,{className:"w-3 h-3 text-gray-600"}),t.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"chance"})]}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:X.dueDate?new Date(X.dueDate).toLocaleDateString("fr-FR"):"Non dfinie"})]})}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("div",{className:"flex justify-center",children:t.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold border ${C(X.status)}`,children:[X.status==="paid"&&t.jsx(Bs,{className:"w-3 h-3 mr-1"}),X.status==="partial"&&t.jsx(ps,{className:"w-3 h-3 mr-1"}),X.status==="pending"&&t.jsx(pn,{className:"w-3 h-3 mr-1"}),j(X.status)]})}),t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsxs(Ee,{variant:"outline",size:"sm",onClick:ae=>{ae?.stopPropagation(),u(X)},className:"text-xs",children:[t.jsx(y5,{className:"w-3 h-3 mr-1"}),"Modifier"]}),t.jsxs("button",{onClick:ae=>{ae?.stopPropagation(),d(X.id)},className:"flex items-center justify-center space-x-1 text-red-700 hover:text-red-900 bg-red-50 hover:bg-red-100 px-3 py-2 rounded-lg text-xs font-semibold border border-red-200 hover:border-red-300 transition-all duration-200 hover:shadow-md",children:[t.jsx(vn,{className:"w-3 h-3"}),t.jsx("span",{children:"Supprimer"})]})]})]})]})},X.id)})})]})})})]},N.student.id)})})]})})})},n_=({isOpen:e,onClose:a,student:r,studentFees:i,payments:c,onSuccess:u})=>{const[d,f]=y.useState(""),[x,g]=y.useState(""),[p,b]=y.useState(""),[v,S]=y.useState(new Date().toISOString().split("T")[0]),[T,M]=y.useState("cash"),[_,C]=y.useState(""),[j,N]=y.useState(""),[A,O]=y.useState(""),[U,D]=y.useState([]),[z,P]=y.useState(!1),[se,X]=y.useState(null);y.useEffect(()=>{e&&(R(),f(""),g(""),b(""),S(new Date().toISOString().split("T")[0]),M("cash"),C(""),N(""),O(""))},[e]);const R=async()=>{try{const K=await pe.getAllStaff();K.success&&K.data&&(D(K.data),K.data.length>0&&!A&&O(K.data[0].user.id))}catch(K){console.error("Erreur lors du chargement du personnel:",K),D([])}},Q=K=>K==null||K===""?"0":(typeof K=="string"?parseFloat(K):K).toLocaleString("fr-FR"),ae=K=>{const me=K.replace(/[\s.]/g,"");return parseInt(me)||0},te=K=>{const me=ae(K);g(me.toString()),b(Q(me))},F=K=>c.filter(re=>re.studentFeeId===K&&re.status==="successful").reduce((re,ie)=>re+(Number(ie.amount)||0),0),ce=K=>{const me=F(K.id);return Number(K.amountAssigned)-me},J=i.find(K=>K.id===d),W=J?ce(J):0,L=async K=>{if(K.preventDefault(),!d){alert("Veuillez slectionner un frais");return}if(!x||parseFloat(x)<=0){alert("Le montant doit tre positif");return}const me=parseFloat(x);if(me>W){alert(`Le montant ne peut pas dpasser le montant restant (${Q(W)} FCFA)`);return}if(!A){alert("Veuillez slectionner qui a reu le paiement");return}try{P(!0);const re={studentFeeId:d,paymentDate:new Date(v).toISOString(),amount:me,method:T,receivedBy:A,..._&&{provider:_},...j&&{transactionRef:j}},ie=await pe.createPayment(re);ie.success?(X(`Paiement de ${Q(me)} FCFA enregistr avec succs !`),setTimeout(()=>{X(null),a(),u&&u()},1500)):alert(ie.message||"Erreur lors de l'enregistrement du paiement")}catch(re){console.error("Erreur lors de l'enregistrement du paiement:",re),alert("Erreur lors de l'enregistrement du paiement. Veuillez ressayer.")}finally{P(!1)}};if(!r)return null;const ne=i.filter(K=>ce(K)>0);return t.jsxs(t.Fragment,{children:[t.jsx(xt,{isOpen:e&&!se,onClose:a,title:"Enregistrer un paiement",size:"md",children:t.jsxs("form",{onSubmit:L,className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(Lt,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:[r.firstName," ",r.lastName]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Matricule: ",r.matricule]})]})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Frais  payer ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:d,onChange:K=>{f(K.target.value);const me=i.find(re=>re.id===K.target.value);if(me){const re=ce(me);g(re.toString()),b(Q(re))}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner un frais"}),ne.map(K=>{const me=ce(K);return t.jsxs("option",{value:K.id,children:[K.feeType.name," - ",K.academicYear.name," (Restant: ",Q(me)," FCFA)"]},K.id)})]}),ne.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aucun frais avec un montant restant disponible"})]}),J&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Anne acadmique:"}),t.jsx("span",{className:"font-semibold text-purple-700",children:J.academicYear.name})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Montant assign:"}),t.jsxs("span",{className:"font-semibold",children:[Q(J.amountAssigned)," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Montant restant:"}),t.jsxs("span",{className:"font-semibold text-blue-600",children:[Q(W)," FCFA"]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant du paiement (FCFA) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:p,onChange:K=>te(K.target.value),placeholder:"Ex: 50.000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white",required:!0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",Q(W)," FCFA"]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de paiement ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:v,onChange:K=>S(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mthode de paiement ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:T,onChange:K=>M(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white",required:!0,children:[t.jsx("option",{value:"cash",children:"Espces"}),t.jsx("option",{value:"bank_transfer",children:"Virement bancaire"}),t.jsx("option",{value:"mobile_money",children:"Mobile Money"}),t.jsx("option",{value:"card",children:"Carte"})]})]}),T==="mobile_money"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fournisseur"}),t.jsx("input",{type:"text",value:_,onChange:K=>C(K.target.value),placeholder:"Ex: Orange Money, MTN Mobile Money",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white"})]}),(T==="bank_transfer"||T==="mobile_money"||T==="card")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rfrence de transaction"}),t.jsx("input",{type:"text",value:j,onChange:K=>N(K.target.value),placeholder:"Numro de rfrence",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reu par ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:A,onChange:K=>O(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-black text-white",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner un membre du personnel"}),U.map(K=>t.jsxs("option",{value:K.user.id,children:[K.user.firstName," ",K.user.lastName,K.position&&` - ${K.position}`]},K.user.id))]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx(Ee,{type:"button",variant:"outline",onClick:a,disabled:z,children:"Annuler"}),t.jsx(Ee,{type:"submit",disabled:z||!d||ne.length===0,children:z?"Enregistrement...":"Enregistrer le paiement"})]})]})}),se&&t.jsx(xt,{isOpen:!!se,onClose:()=>{X(null),a()},title:"Succs",size:"sm",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(Bs,{className:"w-8 h-8 text-green-600"})})}),t.jsx("p",{className:"text-center text-gray-800 text-base font-medium",children:se}),t.jsx("div",{className:"flex justify-end",children:t.jsx(Ee,{onClick:()=>{X(null),a(),u&&u()},variant:"primary",children:"OK"})})]})})]})},r_=()=>{const e=Ht(),[a,r]=y.useState([]),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState([]),[b,v]=y.useState([]),[S,T]=y.useState(!0),[M,_]=y.useState(!1),[C,j]=y.useState(null),[N,A]=y.useState(""),[O,U]=y.useState("all"),[D,z]=y.useState([]),[P,se]=y.useState([]),[X,R]=y.useState(!1),[Q,ae]=y.useState(null),[te,F]=y.useState({studentId:"",feeTypeId:"",academicYearId:"",amountAssigned:0,dueDate:""}),[ce,J]=y.useState(""),W=B=>B==null||B===""?"0":(typeof B=="string"?parseFloat(B):B).toLocaleString("fr-FR"),L=B=>{const Ne=B.replace(/[\s.]/g,"");return parseInt(Ne)||0},ne=B=>{const Ne=L(B);F({...te,amountAssigned:Ne}),J(W(Ne))};y.useEffect(()=>{re(),be()},[]);const K=async()=>{try{const B=await pe.getAllPayments();B.success&&B.data?(console.log(" Paiements reus de l'API:",B.data),z(B.data)):(console.error("Erreur lors du chargement des paiements:",B.error),z([]))}catch(B){console.error("Erreur lors du chargement des paiements:",B),z([])}},me=async()=>{try{const B=await pe.getAllStudentClasses();if(B.success&&B.data){if(console.log(" Classes d'tudiants reues de l'API:",B.data),B.data.length>0){const Ne=B.data[0];console.log(" Exemple de classe reue (frontend):",{hasClass:!!Ne.class,className:Ne.class?.name,hasClassCategory:!!Ne.class?.classCategory,classCategoryName:Ne.class?.classCategory?.name,hasInstitution:!!Ne.class?.classCategory?.institution,institution:Ne.class?.classCategory?.institution,fullClassCategory:Ne.class?.classCategory})}se(B.data)}else console.error("Erreur lors du chargement des classes d'tudiants:",B.error),se([])}catch(B){console.error("Erreur lors du chargement des classes d'tudiants:",B),se([])}},re=async()=>{try{T(!0),await Promise.all([G(),V(),ie(),je(),E(),K(),me()])}catch(B){console.error("Erreur lors du chargement des donnes:",B)}finally{T(!1)}},ie=async()=>{try{const B=await pe.getAllStudents();B.success&&B.data?(console.log(" tudiants complets reus de l'API:",B.data),x(B.data)):(console.error("Erreur lors du chargement des tudiants complets:",B.error),x([]))}catch(B){console.error("Erreur lors du chargement des tudiants complets:",B),x([])}},G=async()=>{try{const B=await pe.getAllStudentFees();if(B.success&&B.data){console.log(" Donnes reues de l'API:",B.data),console.log(" Premier StudentFee:",B.data[0]);const Ne=B.data.filter(ke=>ke.student&&ke.student.id);r(Ne)}else console.error("Erreur lors du chargement des frais tudiants:",B.error),r([])}catch(B){console.error("Erreur lors du chargement des frais tudiants:",B),r([])}},be=async()=>{try{const B=await pe.getAllUsers();B.success&&B.data?(console.log(" Utilisateurs reus de l'API:",B.data),d(B.data)):(console.error("Erreur lors du chargement des utilisateurs:",B.error),d([]))}catch(B){console.error("Erreur lors du chargement des utilisateurs:",B),d([])}},V=async()=>{try{const B=await pe.getAllStudents();if(B.success&&B.data){const Ne=B.data.map(ke=>({id:ke.user.id,firstName:ke.user.firstName,lastName:ke.user.lastName,matricule:ke.matricule||ke.user.username||`STU${ke.user.id}`}));console.log(" tudiants reus de l'API:",Ne),c(Ne)}else console.error("Erreur lors du chargement des tudiants:",B.error),c([])}catch(B){console.error("Erreur lors du chargement des tudiants:",B),c([])}},je=async()=>{try{const B=await pe.getAllFeeTypes();B.success&&B.data?p(B.data):p([])}catch(B){console.error("Erreur lors du chargement des types de frais:",B),p([])}},E=async()=>{try{const B=await pe.getAllSchoolYears();B.success&&B.data?v(B.data):(console.error("Erreur lors du chargement des annes scolaires:",B.error),v([]))}catch(B){console.error("Erreur lors du chargement des annes scolaires:",B),v([])}},$=async B=>{B.preventDefault();try{if(console.log(" Donnes envoyes:",te),C){const Ne=await pe.updateStudentFee(C.id,te);if(Ne.success)console.log("Frais tudiant mis  jour avec succs");else{console.error("Erreur lors de la mise  jour:",Ne.error),alert("Erreur lors de la mise  jour du frais tudiant");return}}else{const Ne=await pe.createStudentFee(te);if(Ne.success)console.log("Frais tudiant cr avec succs");else{console.error("Erreur lors de la cration:",Ne.error),alert("Erreur lors de la cration du frais tudiant");return}}_(!1),j(null),Z(),G()}catch(Ne){console.error("Erreur lors de la sauvegarde:",Ne),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}},ue=B=>{console.log(" Modification du frais:",B),console.log(" StudentId:",B.studentId),console.log(" tudiants disponibles:",i),j(B);const Ne=B.dueDate?new Date(B.dueDate).toISOString().split("T")[0]:"";F({studentId:B.studentId,feeTypeId:B.feeTypeId,academicYearId:B.academicYearId,amountAssigned:B.amountAssigned,dueDate:Ne}),J(W(B.amountAssigned)),_(!0),i.find(q=>q.id===B.studentId)||console.warn(" L'tudiant n'a pas t trouv dans la liste:",B.studentId)},ye=async B=>{if(window.confirm("tes-vous sr de vouloir supprimer ce frais tudiant ?"))try{const Ne=await pe.deleteStudentFee(B);Ne.success?(console.log("Frais tudiant supprim avec succs"),G()):(console.error("Erreur lors de la suppression:",Ne.error),alert("Erreur lors de la suppression du frais tudiant"))}catch(Ne){console.error("Erreur lors de la suppression:",Ne),alert("Erreur lors de la suppression. Veuillez ressayer.")}},Z=()=>{F({studentId:"",feeTypeId:"",academicYearId:"",amountAssigned:0,dueDate:""}),J("")},H=a.filter(B=>{const Ne=B.student,ke=B.feeType;if(!Ne||!ke)return console.warn("StudentFee avec donnes manquantes:",B),!1;const q=Ne.matricule?.toLowerCase().includes(N.toLowerCase())||!1||ke.name?.toLowerCase().includes(N.toLowerCase())||!1,le=O==="all"||B.status===O;return q&&le});return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Finances",path:"/finances"},{label:"Frais tudiants"}]}),t.jsx(cs,{title:"Frais tudiants",subtitle:"Grez les frais assigns individuellement aux tudiants",icon:We,iconColor:"from-violet-600 to-violet-700",actions:t.jsx(ua,{onClick:()=>e("/finances/student-fee-assignment"),icon:is,label:"Attribuer un frais"})}),t.jsxs("div",{className:"mb-6 flex gap-4",children:[t.jsx(It,{type:"text",placeholder:"Rechercher un frais tudiant...",value:N,onChange:B=>A(B.target.value),className:"max-w-md"}),t.jsxs("select",{value:O,onChange:B=>U(B.target.value),className:"px-3 text-black py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Tous les statuts"}),t.jsx("option",{value:"pending",children:"En attente"}),t.jsx("option",{value:"partial",children:"Partiel"}),t.jsx("option",{value:"paid",children:"Pay"}),t.jsx("option",{value:"overdue",children:"En retard"})]})]}),S?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement des frais tudiants..."})]})}):t.jsx(a_,{studentFees:H,users:u,fullStudents:f,studentClasses:P,payments:D,onEdit:ue,onDelete:ye,onPayment:B=>{const Ne=H.find(ke=>ke.student.id===B);Ne&&(ae({id:Ne.student.id,firstName:Ne.student.firstName,lastName:Ne.student.lastName,matricule:Ne.student.matricule}),R(!0))}}),t.jsx(s_,{isOpen:M,onClose:()=>_(!1),title:C?"Modifier le frais tudiant":"Nouveau frais tudiant",children:t.jsxs("form",{onSubmit:$,className:"space-y-4",children:[C?t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"tudiant"}),t.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(We,{className:"w-4 h-4 text-gray-600"}),t.jsxs("span",{className:"text-gray-900 font-medium",children:[C.student.firstName," ",C.student.lastName]}),t.jsxs("span",{className:"text-gray-500",children:["(",C.student.matricule,")"]})]})})]}):t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"tudiant"}),t.jsxs("select",{value:te.studentId||"",onChange:B=>F({...te,studentId:B.target.value}),className:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner un tudiant"}),i.map(B=>t.jsxs("option",{value:B.id,children:[B.firstName," ",B.lastName," (",B.matricule,")"]},B.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de frais"}),t.jsxs("select",{value:te.feeTypeId,onChange:B=>{const Ne=g.find(ke=>ke.id===B.target.value);F({...te,feeTypeId:B.target.value,amountAssigned:Ne?.amountDefault||0}),J(W(Ne?.amountDefault||0))},className:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner un type de frais"}),g.map(B=>t.jsxs("option",{value:B.id,children:[B.name," - ",W(B.amountDefault)," FCFA"]},B.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anne scolaire"}),t.jsxs("select",{value:te.academicYearId,onChange:B=>F({...te,academicYearId:B.target.value}),className:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner une anne scolaire"}),b.map(B=>t.jsxs("option",{value:B.id,children:[B.name," ",B.isActive?"(Actuelle)":""]},B.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant assign (FCFA)"}),t.jsx("input",{type:"text",value:ce,onChange:B=>ne(B.target.value),placeholder:"Ex: 500.000",className:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsx(It,{label:"Date d'chance",type:"date",value:te.dueDate,onChange:B=>F({...te,dueDate:B.target.value}),required:!0}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Annuler"}),t.jsx(Ee,{type:"submit",children:C?"Mettre  jour":"Crer"})]})]})}),Q&&t.jsx(n_,{isOpen:X,onClose:()=>{R(!1),ae(null)},student:Q,studentFees:H.filter(B=>B.student.id===Q.id),payments:D,onSuccess:()=>{G(),K()}})]})})},Wn=({children:e,className:a=""})=>t.jsx("div",{className:`card bg-white shadow-lg hover:shadow-xl border border-slate-100 transition-all duration-300 ${a}`,children:e}),l_=()=>{const e=Ht(),[a,r]=y.useState([]),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[,g]=y.useState([]),[p,b]=y.useState(!0),[v,S]=y.useState(!1),[T,M]=y.useState(null),[_,C]=y.useState(null),[j,N]=y.useState(null),[A,O]=y.useState(null),[U,D]=y.useState(null),[z,P]=y.useState(""),[se,X]=y.useState(""),[R,Q]=y.useState(new Set),[ae,te]=y.useState(!1),[F,ce]=y.useState({dueDate:""}),J=H=>H.toLocaleString("fr-FR"),W=(H,B)=>{console.log(" Recherche classe pour studentId:",H,"userId:",B),console.log(" Toutes les classes d'tudiants:",i);let Ne=i.find(ke=>ke.studentId===H&&!ke.endDate);return console.log(" Recherche par studentId:",Ne),!Ne&&B&&(Ne=i.find(ke=>ke.student.userId===B&&!ke.endDate),console.log(" Recherche par userId:",Ne)),Ne||(Ne=i.find(ke=>ke.studentId===H),console.log(" Recherche sans endDate:",Ne)),console.log(" Classe finale trouve:",Ne),Ne?.class||null};y.useEffect(()=>{L()},[]);const L=async()=>{try{b(!0),await Promise.all([ne(),K(),re(),ie(),me()])}catch(H){console.error("Erreur lors du chargement des donnes:",H)}finally{b(!1)}},ne=async()=>{try{const H=await pe.getAllStudents();H.success&&H.data?(console.log(" tudiants reus de l'API:",H.data),console.log(" Premier tudiant:",H.data[0]),r(H.data)):(console.error("Erreur lors du chargement des tudiants:",H.error),r([]))}catch(H){console.error("Erreur lors du chargement des tudiants:",H),r([])}},K=async()=>{try{const H=await pe.getAllStudentClasses();H.success&&H.data?(console.log(" Classes d'tudiants reues de l'API:",H.data),console.log(" Premier lment:",H.data[0]),c(H.data)):(console.error("Erreur lors du chargement des classes d'tudiants:",H.error),c([]))}catch(H){console.error("Erreur lors du chargement des classes d'tudiants:",H),c([])}},me=async()=>{try{const H=await pe.getAllStudentFees();H.success&&H.data?(console.log(" Frais tudiants reus de l'API:",H.data),g(H.data)):(console.error("Erreur lors du chargement des frais tudiants:",H.error),g([]))}catch(H){console.error("Erreur lors du chargement des frais tudiants:",H),g([])}},re=async()=>{try{const H=await pe.getAllFeeTypes();H.success&&H.data?d(H.data):(console.error("Erreur lors du chargement des types de frais:",H.error),d([]))}catch(H){console.error("Erreur lors du chargement des types de frais:",H),d([])}},ie=async()=>{try{const H=await pe.getAllSchoolYears();H.success&&H.data?(console.log(" Annes scolaires reues de l'API:",H.data),x(H.data)):(console.error("Erreur lors du chargement des annes scolaires:",H.error),x([]))}catch(H){console.error("Erreur lors du chargement des annes scolaires:",H),x([])}},G=H=>{ae?be(H.id):(N(H),P(""))},be=H=>{const B=new Set(R);B.has(H)?B.delete(H):B.add(H),Q(B)},V=()=>{const H=a.filter(B=>B.user.firstName.toLowerCase().includes(z.toLowerCase())||B.user.lastName.toLowerCase().includes(z.toLowerCase())||B.matricule.toLowerCase().includes(z.toLowerCase()));Q(new Set(H.map(B=>B.id)))},je=()=>{Q(new Set)},E=H=>{console.log(" Type de frais slectionn:",H),console.log(" Montant par dfaut:",H.amountDefault),console.log(" Type de montant:",typeof H.amountDefault),O(H),X("")},$=async H=>{if(H.preventDefault(),!j||!A||!U){C("Veuillez slectionner un tudiant, un type de frais et une anne scolaire.");return}try{if(S(!0),!A.amountDefault||A.amountDefault<=0){C("Erreur: Le type de frais slectionn n'a pas de montant valide."),S(!1);return}const B={studentId:j.id,feeTypeId:A.id,academicYearId:U.id,amountAssigned:Number(A.amountDefault),dueDate:F.dueDate};console.log(" Donnes envoyes:",B),console.log(" Montant par dfaut:",A.amountDefault),console.log(" Type de montant:",typeof A.amountDefault),console.log(" Montant converti:",Number(A.amountDefault)),console.log(" Type du montant converti:",typeof Number(A.amountDefault));const Ne=await pe.createStudentFee(B);Ne.success?(console.log("Frais tudiant cr avec succs"),M("Frais attribu avec succs  l'tudiant !"),setTimeout(()=>{window.location.reload()},1500)):(console.error("Erreur lors de la cration:",Ne.error),C("Erreur lors de l'attribution du frais. Veuillez ressayer."))}catch(B){console.error("Erreur lors de la sauvegarde:",B),C("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{S(!1)}},ue=async H=>{if(H.preventDefault(),R.size===0||!A||!U){C("Veuillez slectionner au moins un tudiant, un type de frais et une anne scolaire.");return}if(!F.dueDate){C("Veuillez dfinir une date d'chance.");return}try{if(S(!0),!A.amountDefault||A.amountDefault<=0){C("Erreur: Le type de frais slectionn n'a pas de montant valide."),S(!1);return}const B=Array.from(R).map(le=>{const ge={studentId:le,feeTypeId:A.id,academicYearId:U.id,amountAssigned:Number(A.amountDefault),dueDate:F.dueDate};return pe.createStudentFee(ge)}),Ne=await Promise.all(B),ke=Ne.filter(le=>le.success),q=Ne.filter(le=>!le.success);ke.length===Ne.length?(M(`Frais attribus avec succs  ${ke.length} tudiant(s) !`),setTimeout(()=>{window.location.reload()},1500)):(M(`${ke.length} attribution(s) russie(s), ${q.length} choue(s).`),q.length<Ne.length&&setTimeout(()=>{window.location.reload()},1500))}catch(B){console.error("Erreur lors de la sauvegarde en lot:",B),C("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{S(!1)}},Y=a.filter(H=>H.user.firstName.toLowerCase().includes(z.toLowerCase())||H.user.lastName.toLowerCase().includes(z.toLowerCase())||H.matricule.toLowerCase().includes(z.toLowerCase())||H.user.email&&H.user.email.toLowerCase().includes(z.toLowerCase())),ye=u.filter(H=>H.name.toLowerCase().includes(se.toLowerCase())||H.description&&H.description.toLowerCase().includes(se.toLowerCase())),Z=[{label:"Finances",path:"/finances"},{label:"Frais tudiants",path:"/finances/student-fees"},{label:"Attribution",path:"/finances/student-fee-assignment"}];return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:Z}),t.jsx(cs,{title:"Attribution de frais aux tudiants",subtitle:"Attribuez des frais spcifiques aux tudiants",icon:ts,iconColor:"from-green-600 to-green-800",actions:t.jsx(Ee,{onClick:()=>e("/finances/student-fees"),variant:"outline",children:" Retour"})}),p?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement des donnes..."})]})}):t.jsxs("form",{onSubmit:ae?ue:$,className:"space-y-8",children:[t.jsxs(Wn,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[ae?t.jsx(Qt,{className:"w-5 h-5 text-purple-600 mr-2"}):t.jsx(Lt,{className:"w-5 h-5 text-blue-600 mr-2"}),t.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["1. Slectionner"," ",ae?"des tudiants":"un tudiant"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(Ee,{type:"button",variant:ae?"outline":"primary",onClick:()=>{te(!1),Q(new Set)},className:"text-sm",children:[t.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Mode unique"]}),t.jsxs(Ee,{type:"button",variant:ae?"primary":"outline",onClick:()=>{te(!0),N(null)},className:"text-sm",children:[t.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Mode multiple"]})]})]}),!ae&&j?t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(Lt,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-medium text-gray-900",children:[j.user.firstName," ",j.user.lastName]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("span",{className:"text-gray-600",children:[t.jsx(ys,{className:"w-3 h-3 inline mr-1"}),j.matricule]}),t.jsxs("span",{className:"text-gray-600",children:[t.jsx(We,{className:"w-3 h-3 inline mr-1"}),W(j.id,j.userId)?.name||"Non assign"]})]})]})]}),t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>N(null),children:"Changer"})]})}):null,ae&&R.size>0&&t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:t.jsx(Qt,{className:"w-5 h-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-medium text-gray-900",children:[R.size," tudiant(s) slectionn(s)"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Les frais seront attribus  tous les tudiants slectionns"})]})]}),t.jsx(Ee,{type:"button",variant:"outline",onClick:je,children:"Tout dslectionner"})]})}),(!ae&&!j||ae)&&t.jsxs("div",{children:[t.jsxs("div",{className:"relative mb-4",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Rechercher un tudiant par nom, prnom, matricule...",value:z,onChange:H=>P(H.target.value),className:"w-full text-black pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ae&&t.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-gray-50 rounded-lg",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[R.size," / ",Y.length," ","slectionn(s)"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(Ee,{type:"button",onClick:V,variant:"outline",size:"sm",className:"text-xs",children:[t.jsx(Vi,{className:"w-3 h-3 mr-1"}),"Tout slectionner"]}),t.jsxs(Ee,{type:"button",onClick:je,variant:"outline",size:"sm",className:"text-xs",children:[t.jsx(Ui,{className:"w-3 h-3 mr-1"}),"Tout dslectionner"]})]})]}),t.jsx("div",{className:"border border-gray-200 rounded-lg p-2 bg-gray-50 max-h-[400px] overflow-y-auto",children:t.jsxs("div",{className:"space-y-2",children:[Y.map(H=>{const B=ae&&R.has(H.id);return t.jsx("div",{onClick:()=>G(H),className:`p-3 border rounded-lg cursor-pointer ${B?"border-purple-500 bg-purple-50":"border-gray-200 bg-white"}`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[ae&&t.jsx("div",{children:B?t.jsx(Vi,{className:"w-4 h-4 text-purple-600"}):t.jsx(Ui,{className:"w-4 h-4 text-gray-400"})}),t.jsx("div",{className:`w-8 h-8 ${B?"bg-purple-100":"bg-blue-100"} rounded-full flex items-center justify-center`,children:t.jsx(We,{className:`w-4 h-4 ${B?"text-purple-600":"text-blue-600"}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:[H.user.firstName," ",H.user.lastName]}),t.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(ys,{className:"w-3 h-3 mr-1"}),H.matricule]}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(We,{className:"w-3 h-3 mr-1"}),W(H.id,H.userId)?.name||"Non assign"]})]})]}),!ae&&t.jsx(Es,{className:"w-4 h-4 text-gray-400"})]})},H.id)}),Y.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(We,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Aucun tudiant trouv"})]})]})})]})]}),t.jsxs(Wn,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(ts,{className:"w-5 h-5 text-green-600 mr-2"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"2. Slectionner un type de frais"})]}),A?t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(ts,{className:"w-5 h-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900",children:A.name}),A.description&&t.jsx("p",{className:"text-sm text-gray-600",children:A.description}),t.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[J(A.amountDefault)," FCFA"]})]})]}),t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>O(null),children:"Changer"})]})}):t.jsxs("div",{children:[t.jsxs("div",{className:"relative mb-4",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Rechercher un type de frais par nom ou description...",value:se,onChange:H=>X(H.target.value),className:"w-full text-black pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:ye.map(H=>t.jsx("div",{onClick:()=>E(H),className:"p-3 border border-gray-200 rounded-lg cursor-pointer bg-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(ts,{className:"w-4 h-4 text-green-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:H.name}),H.description&&t.jsx("p",{className:"text-xs text-gray-600",children:H.description}),t.jsxs("p",{className:"text-xs font-semibold text-green-600",children:[J(H.amountDefault)," FCFA"]})]})]})},H.id))})]})]}),t.jsxs(Wn,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(as,{className:"w-5 h-5 text-purple-600 mr-2"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"3. Slectionner une anne scolaire"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:f.map(H=>t.jsx("div",{onClick:()=>D(H),className:`p-3 border rounded-lg cursor-pointer ${U?.id===H.id?"border-purple-500 bg-purple-50":"border-gray-200 bg-white"}`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${U?.id===H.id?"bg-purple-100":"bg-gray-100"}`,children:t.jsx(as,{className:`w-4 h-4 ${U?.id===H.id?"text-purple-600":"text-gray-600"}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:H.name}),H.isActive&&t.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Anne actuelle"})]})]})},H.id))})]}),(!ae&&j||ae&&R.size>0)&&A&&U&&t.jsxs(Wn,{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"4. Dtails du frais"}),t.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant (FCFA)"}),t.jsxs("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700",children:[J(A.amountDefault)," FCFA"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Montant par dfaut du type de frais slectionn"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'chance"}),t.jsx("input",{type:"date",value:F.dueDate,onChange:H=>ce({...F,dueDate:H.target.value}),className:"w-full bg-gray-700 text-white px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),(!ae&&j||ae&&R.size>0)&&A&&U&&t.jsx("div",{className:"flex justify-end",children:t.jsx(Ee,{type:"submit",disabled:v,className:"px-8 py-3",children:v?"Attribution en cours...":ae?`Attribuer  ${R.size} tudiant(s)`:"Attribuer le frais"})})]}),T&&t.jsx(xt,{isOpen:!!T,onClose:()=>M(null),title:"Succs",size:"sm",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(Bs,{className:"w-8 h-8 text-green-600"})})}),t.jsx("p",{className:"text-center text-gray-800 text-base font-medium",children:T}),t.jsx("div",{className:"flex justify-end",children:t.jsx(Ee,{onClick:()=>M(null),variant:"primary",children:"OK"})})]})}),_&&t.jsx(xt,{isOpen:!!_,onClose:()=>C(null),title:"Erreur",size:"sm",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(Sn,{className:"w-8 h-8 text-red-600"})})}),t.jsx("p",{className:"text-center text-gray-800 text-base font-medium",children:_}),t.jsx("div",{className:"flex justify-end",children:t.jsx(Ee,{onClick:()=>C(null),variant:"primary",children:"OK"})})]})})]})})},i_=({isOpen:e,onClose:a,payment:r,studentInfo:i,feeTypeInfo:c})=>{const[u,d]=y.useState("");if(y.useEffect(()=>{if(r&&i&&c){const v={facture:{numero:r.id.slice(-8).toUpperCase(),date:r.paymentDate,montant:r.amount,etudiant:i.name,matricule:i.matricule,typeFrais:c.name,institution:"Cyber School"}};v1.toDataURL(JSON.stringify(v),{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}}).then(d).catch(console.error)}},[r,i,c]),!e||!r||!i)return null;const f=v=>v.toLocaleString("fr-FR"),x=v=>new Date(v).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),g=v=>({cash:"Espces",bank_transfer:"Virement bancaire",mobile_money:"Mobile Money",card:"Carte bancaire"})[v]||v,p=v=>({successful:"Russi",failed:"chou",pending:"En attente"})[v]||v,b=v=>({successful:"text-green-600 bg-green-100",failed:"text-red-600 bg-red-100",pending:"text-yellow-600 bg-yellow-100"})[v]||"text-gray-600 bg-gray-100";return t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b-2 border-gray-300",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded flex items-center justify-center",children:t.jsx(Li,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Reu de paiement"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Reu officiel ITAK"}),i&&t.jsxs("p",{className:"text-xs font-semibold text-blue-600 mt-1",children:["tudiant: ",i.name]})]})]}),t.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:t.jsx(Sn,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("div",{className:"p-6 relative",children:[t.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none opacity-10 z-50",children:t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx("img",{src:ol,alt:"UPCD - ITAK Logo",className:"w-64 h-64 object-contain"}),t.jsx("div",{className:"text-6xl font-black text-blue-400 transform -rotate-12 mt-4",children:"UPCD - ITAK"})]})}),t.jsx("div",{className:"relative z-10 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between border-b-2 border-gray-200 pb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center overflow-hidden bg-white p-1 shadow-sm",children:t.jsx("img",{src:ol,alt:"ITAK Logo",className:"w-full h-full object-contain"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-black text-gray-900",children:"ITAK"}),t.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Institut de Technologie et d'Administration du Kankan"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Systme de gestion intgr"})]})]}),t.jsxs("div",{className:"text-right flex items-center space-x-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-black text-gray-800",children:"REU"}),t.jsxs("div",{className:"text-xs font-mono text-gray-600",children:["N ",r.id.slice(-8).toUpperCase()]}),t.jsx("div",{className:"text-xs text-gray-600",children:x(r.paymentDate)})]}),u&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("img",{src:u,alt:"QR Code Reu",className:"w-16 h-16 border border-gray-300 rounded"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"QR Code"})]})]})]})}),t.jsx("div",{className:"relative z-10 mb-6",children:t.jsxs("div",{className:"bg-gray-50/80 border-2 border-gray-200 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-sm font-black text-gray-800 mb-3 flex items-center",children:[t.jsx(Lt,{className:"w-4 h-4 mr-2 text-gray-700"}),"INFORMATIONS TUDIANT"]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Nom"}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:i.name})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Matricule"}),t.jsx("div",{className:"text-sm font-bold text-gray-900 font-mono",children:i.matricule})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Classe"}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:i.class})]})]})]})}),t.jsx("div",{className:"relative z-10 mb-6",children:t.jsxs("div",{className:"bg-white/90 border-2 border-gray-200 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"bg-gray-100/90 px-4 py-3 border-b-2 border-gray-300",children:t.jsxs("h3",{className:"text-sm font-black text-gray-800 flex items-center",children:[t.jsx(Xt,{className:"w-4 h-4 mr-2 text-gray-700"}),"DTAILS DU PAIEMENT"]})}),t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Type de frais"}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:c?.name||"Type de frais"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Montant assign"}),t.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[f(Number(r.studentFee.amountAssigned))," ","FCFA"]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Montant pay"}),t.jsxs("div",{className:"text-lg font-black text-green-600",children:[f(r.amount)," FCFA"]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Mthode"}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:g(r.method)})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Date"}),t.jsxs("div",{className:"text-sm font-bold text-gray-900 flex items-center",children:[t.jsx(as,{className:"w-3 h-3 mr-1"}),x(r.paymentDate)]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Statut"}),t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-bold ${b(r.status)}`,children:p(r.status)})]})]})]})})]})}),t.jsx("div",{className:"relative z-10 mb-6",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50/80 border-2 border-gray-200 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-sm font-black text-gray-800 mb-3 flex items-center",children:[t.jsx(Lt,{className:"w-4 h-4 mr-2 text-gray-700"}),"REU PAR"]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:t.jsx(Lt,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[r.receivedByUser.firstName," ",r.receivedByUser.lastName]}),t.jsx("div",{className:"text-xs text-gray-600 capitalize",children:r.receivedByUser.role})]})]})]}),t.jsxs("div",{className:"bg-gray-50/80 border-2 border-gray-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-black text-gray-800 mb-3",children:"RSUM FINANCIER"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-600",children:"Assign:"}),t.jsxs("span",{className:"font-bold text-gray-900",children:[f(Number(r.studentFee.amountAssigned))," ","FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-600",children:"Pay:"}),t.jsxs("span",{className:"font-bold text-green-600",children:[f(r.amount)," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-xs border-t border-gray-300 pt-2",children:[t.jsx("span",{className:"text-gray-600",children:"Restant:"}),t.jsxs("span",{className:"font-bold text-red-600",children:[f(Number(r.studentFee.amountAssigned)-r.amount)," ","FCFA"]})]})]})]})]})}),t.jsx("div",{className:"relative z-10 border-t-2 border-gray-300 pt-4",children:t.jsxs("div",{className:"text-center text-xs text-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[t.jsx(Tf,{className:"w-3 h-3"}),t.jsx("span",{className:"font-semibold",children:"UPCD - ITAK - Institut de Technique de l'Antidote de Kati"})]}),t.jsx("p",{children:"Facture gnre automatiquement par le systme de gestion"})]})})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t-2 border-gray-300 bg-gray-100",children:[t.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Fermer"}),t.jsxs("button",{onClick:()=>{const v=document.title;document.title=`Facture_${i?.name.replace(/\s+/g,"_")}_${r.id.slice(-8).toUpperCase()}`,window.print(),setTimeout(()=>{document.title=v},1e3)},className:"px-4 py-1.5 bg-gray-800 text-white rounded text-sm font-semibold hover:bg-gray-900 transition-colors flex items-center space-x-2",children:[t.jsx(Li,{className:"w-3 h-3"}),t.jsx("span",{children:"Imprimer"})]})]})]})})},o_=({payments:e,fullStudents:a=[],studentClasses:r,feeTypes:i,onViewInvoice:c})=>{const[u,d]=y.useState(new Set),f=C=>{const j=new Set(u);j.has(C)?j.delete(C):j.add(C),d(j)},x=C=>a.find(j=>j.id===C),g=C=>{const j=r.find(O=>O.studentId===C&&!O.endDate);if(!j?.class)return"Non assign";const N=j.class.name,A=j.class.classCategory?.institution;return A?`${N} (${A.code})`:N},p=C=>{const j=i.find(N=>N.id===C);return j?j.name:"Type inconnu"},b=C=>C.studentFee?.academicYear?.name?C.studentFee.academicYear.name:"N/A",v=C=>C==null||C===""?"0":(typeof C=="string"?parseFloat(C):C).toLocaleString("fr-FR"),S=C=>{switch(C){case"successful":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},T=C=>{switch(C){case"successful":return"Russi";case"failed":return"chou";case"pending":return"En attente";default:return C}},M=C=>{switch(C){case"cash":return"Espces";case"bank_transfer":return"Virement bancaire";case"mobile_money":return"Mobile Money";case"card":return"Carte bancaire";default:return C}},_=y.useMemo(()=>{const C=new Map;return e.forEach(j=>{if(!j.studentFee)return;const N=j.studentFee.studentId,A=x(N);C.has(N)||C.set(N,{student:{id:N,firstName:A?.user?.firstName||"Inconnu",lastName:A?.user?.lastName||"",matricule:A?.matricule||"N/A"},payments:[],totalAmount:0,successfulCount:0,failedCount:0,pendingCount:0});const O=C.get(N);O.payments.push(j),O.totalAmount+=Number(j.amount)||0,j.status==="successful"?O.successfulCount+=1:j.status==="failed"?O.failedCount+=1:j.status==="pending"&&(O.pendingCount+=1)}),Array.from(C.values())},[e,a]);return _.length===0?t.jsx("div",{className:"text-center py-16 bg-white rounded-xl shadow-md border border-slate-200",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:t.jsx(Li,{className:"w-10 h-10 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Aucun paiement trouv"}),t.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Aucun paiement n'a t enregistr pour le moment."})]})}):t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-md overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100 border-b border-slate-200",children:[t.jsx("th",{className:"text-left px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"tudiant"}),t.jsx("th",{className:"text-left px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Classe"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Total Pay"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Nombre de paiements"}),t.jsx("th",{className:"text-center px-5 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Statut"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:_.map(C=>{const j=x(C.student.id),N=u.has(C.student.id),A=g(C.student.id),O=j?.photo,U=j?.user?.firstName||C.student.firstName,D=j?.user?.lastName||C.student.lastName;return t.jsxs(Ft.Fragment,{children:[t.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${N?"bg-green-50 border-l-4 border-l-green-600 shadow-sm":"hover:bg-green-50/70 hover:shadow-md hover:scale-[1] hover:border-l-4 hover:border-l-green-400"}`,onClick:()=>f(C.student.id),children:[t.jsx("td",{className:"px-5 py-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[O?t.jsx("img",{src:O,alt:`${U} ${D}`,className:"w-10 h-10 rounded-full object-cover border-2 border-green-200"}):t.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center text-white font-bold text-sm border-2 border-green-200",children:[U.charAt(0).toUpperCase(),D.charAt(0).toUpperCase()]}),t.jsxs("div",{children:[t.jsxs("div",{className:`font-semibold transition-colors duration-200 ${N?"text-green-900":"text-gray-900"}`,children:[U," ",D]}),t.jsx("div",{className:"text-sm text-gray-600",children:C.student.matricule})]})]})}),t.jsx("td",{className:"px-5 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold transition-all duration-200 ${N?"bg-purple-200 text-purple-900 shadow-sm":"bg-purple-100 text-purple-800 hover:bg-purple-200"}`,children:A})}),t.jsx("td",{className:"px-5 py-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(jn,{className:`w-4 h-4 transition-colors duration-200 ${N?"text-green-700":"text-green-600"}`}),t.jsxs("span",{className:`font-bold transition-colors duration-200 ${N?"text-green-900":"text-gray-900"}`,children:[v(C.totalAmount)," FCFA"]})]})}),t.jsxs("td",{className:"px-5 py-4 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(Li,{className:`w-4 h-4 transition-colors duration-200 ${N?"text-green-700":"text-green-600"}`}),t.jsx("span",{className:`font-bold transition-colors duration-200 ${N?"text-green-900":"text-green-800"}`,children:C.payments.length})]}),t.jsx("div",{className:"flex items-center justify-center mt-1",children:N?t.jsx(Vc,{className:"w-5 h-5 text-green-600 animate-pulse"}):t.jsx(rr,{className:"w-5 h-5 text-gray-500 transition-transform duration-200 hover:translate-x-1"})})]}),t.jsx("td",{className:"px-5 py-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[C.successfulCount>0&&t.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:[C.successfulCount," "]}),C.failedCount>0&&t.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:[C.failedCount," "]}),C.pendingCount>0&&t.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:[C.pendingCount," "]})]})})]}),N&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-0 py-0",children:t.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100/50 border-t-2 border-green-200 animate-fade-in-slide-in",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("h4",{className:"text-lg font-bold text-green-900 mb-4 flex items-center space-x-2",children:[t.jsx(ys,{className:"w-5 h-5"}),t.jsx("span",{children:"Dtails des paiements"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-green-100 border-b-2 border-green-200",children:[t.jsx("th",{className:"text-left px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Type de frais"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Anne acadmique"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Montant"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Mthode"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Date"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Reu par"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Statut"}),t.jsx("th",{className:"text-center px-4 py-3 text-xs font-bold text-green-900 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-green-100",children:C.payments.map(z=>t.jsxs("tr",{className:"bg-white hover:bg-green-50/50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{children:t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:p(z.studentFee?.feeTypeId||"")})})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(We,{className:"w-4 h-4 text-purple-600"}),t.jsx("span",{className:"text-sm font-semibold text-purple-700",children:b(z)})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(ts,{className:"w-4 h-4 text-green-600"}),t.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[v(z.amount)," FCFA"]})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(Xt,{className:"w-4 h-4 text-blue-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:M(z.method)})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(as,{className:"w-4 h-4 text-gray-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:new Date(z.paymentDate).toLocaleDateString("fr-FR")})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:z.receivedByUser?t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(Lt,{className:"w-4 h-4 text-gray-600"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[z.receivedByUser.firstName," ",z.receivedByUser.lastName]})]}):t.jsx("span",{className:"text-sm text-gray-400",children:"N/A"})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${S(z.status)}`,children:T(z.status)})}),t.jsx("td",{className:"px-4 py-3 text-center",children:c&&t.jsx(Ee,{variant:"outline",size:"sm",onClick:P=>{P?.stopPropagation(),c(z)},children:"Facture"})})]},z.id))})]})})]})})})})]},C.student.id)})})]})})})},c_=()=>{const e=Ht(),[a,r]=y.useState([]),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState(!0),[b,v]=y.useState(""),[S,T]=y.useState("all"),[M,_]=y.useState("all"),[C,j]=y.useState(!1),[N,A]=y.useState(null);y.useEffect(()=>{O()},[]);const O=async()=>{try{p(!0),await Promise.all([D(),z(),P(),U()])}catch(te){console.error("Erreur lors du chargement des donnes:",te)}finally{p(!1)}},U=async()=>{try{const te=await pe.getAllStudents();te.success&&te.data?x(te.data):x([])}catch(te){console.error("Erreur lors du chargement des tudiants:",te),x([])}},D=async()=>{try{const te=await pe.getAllPayments();te.success&&te.data?(console.log(" Paiements reus de l'API:",te.data),r(te.data)):(console.error("Erreur lors du chargement des paiements:",te.error),r([]))}catch(te){console.error("Erreur lors du chargement des paiements:",te),r([])}},z=async()=>{try{const te=await pe.getAllFeeTypes();te.success&&te.data?(console.log(" Types de frais reus de l'API:",te.data),c(te.data)):(console.error("Erreur lors du chargement des types de frais:",te.error),c([]))}catch(te){console.error("Erreur lors du chargement des types de frais:",te),c([])}},P=async()=>{try{const te=await pe.getAllStudentClasses();te.success&&te.data?(console.log(" Classes d'tudiants reues de l'API:",te.data),d(te.data)):(console.error("Erreur lors du chargement des classes d'tudiants:",te.error),d([]))}catch(te){console.error("Erreur lors du chargement des classes d'tudiants:",te),d([])}},se=te=>{const F=i.find(ce=>ce.id===te);return F?F.name:"Type inconnu"},X=te=>{try{const F=f.find(W=>W.id===te),ce=u.find(W=>W.studentId===te&&!W.endDate);if(F)return{name:`${F.user.firstName} ${F.user.lastName}`,matricule:F.matricule||"Non disponible",class:ce?.class?.name||"Non assign"};const J=u.find(W=>W.studentId===te);return J?.student?.user?{name:`${J.student.user.firstName} ${J.student.user.lastName}`,matricule:J.student.matricule||"Non disponible",class:J.class?.name||"Non assign"}:{name:"Donnes non disponibles",matricule:"Non disponible",class:"Non assign"}}catch(F){return console.error("Erreur lors de la rcupration des infos tudiant:",F),{name:"Donnes non disponibles",matricule:"Non disponible",class:"Non assign"}}},R=te=>{A(te),j(!0)},Q=()=>{j(!1),A(null)},ae=a.filter(te=>{if(!te.studentFee)return console.warn("Payment sans studentFee:",te),!1;const F=M==="all"||te.studentFee.feeTypeId===M,ce=te.transactionRef&&te.transactionRef.toLowerCase().includes(b.toLowerCase())||te.studentFeeId.toLowerCase().includes(b.toLowerCase()),J=S==="all"||te.status===S;return F&&ce&&J});return t.jsxs(os,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Finances",path:"/finances"},{label:"Paiements"}]}),t.jsx(cs,{title:"Gestion des paiements",subtitle:"Grez les paiements et transactions financires",icon:Xt,iconColor:"from-emerald-600 to-emerald-700",actions:t.jsx(ua,{onClick:()=>e("/finances/payments/assign"),icon:is,label:"Nouveau paiement"})}),t.jsxs("div",{className:"mb-6 flex gap-4",children:[t.jsx(It,{type:"text",placeholder:"Rechercher un paiement...",value:b,onChange:te=>v(te.target.value),className:"max-w-md"}),t.jsxs("select",{value:S,onChange:te=>T(te.target.value),className:"px-3 text-black py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Tous les statuts"}),t.jsx("option",{value:"successful",children:"Russi"}),t.jsx("option",{value:"failed",children:"chou"}),t.jsx("option",{value:"pending",children:"En attente"})]})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>_("all"),className:`py-2 px-1 border-b-2 font-medium text-sm ${M==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Tous les frais"}),i.map(te=>t.jsx("button",{onClick:()=>_(te.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${M===te.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:te.name},te.id))]})})}),g?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement des paiements..."})]})}):t.jsx(o_,{payments:ae,fullStudents:f,studentClasses:u,feeTypes:i.map(te=>({id:te.id,name:te.name})),onViewInvoice:R})]}),N?.studentFee&&t.jsx(i_,{isOpen:C,onClose:Q,payment:{...N,studentFee:{...N.studentFee,amountAssigned:String(N.studentFee.amountAssigned),amountPaid:String(N.studentFee.amountPaid)},receivedByUser:N.receivedByUser||{id:"",firstName:"Non disponible",lastName:"",role:""}},studentInfo:X(N.studentFee.studentId),feeTypeInfo:{name:se(N.studentFee.feeTypeId),amountDefault:Number(N.studentFee.amountAssigned)}})]})},u_=()=>{const e=Ht(),[a,r]=y.useState([]),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState([]),[b,v]=y.useState([]),[S,T]=y.useState([]),[M,_]=y.useState(!0),[C,j]=y.useState(!1),[N,A]=y.useState(""),[O,U]=y.useState(""),[D,z]=y.useState(new Set),[P,se]=y.useState({amount:0,method:"cash",receivedBy:"",paymentDate:new Date().toISOString().split("T")[0],academicYearId:""}),X=E=>E.toLocaleString("fr-FR"),R=E=>{U(E),z(new Set)},Q=E=>{const $=new Set(D);$.has(E)?$.delete(E):$.add(E),z($)},ae=()=>{const E=F();z(new Set(E.map($=>$.id)))},te=()=>{z(new Set)},F=()=>O?a.filter(E=>{const $=W(E.student.userId);if(!$)return!1;const ue=J(E.id),Y=(Number(E.amountAssigned)||0)-ue;return E.feeTypeId===O&&Y>0&&($.firstName.toLowerCase().includes(N.toLowerCase())||$.lastName.toLowerCase().includes(N.toLowerCase())||E.student.matricule.toLowerCase().includes(N.toLowerCase())||ce(E.student.id).toLowerCase().includes(N.toLowerCase()))}):[],ce=E=>{let $=f.find(ue=>ue.student.id===E&&!ue.endDate);return $||($=f.find(ue=>ue.student.id===E)),$?.class?.name||"Non assign"},J=E=>{const $=g.filter(Y=>Y.studentFeeId===E&&Y.status==="successful"),ue=$.reduce((Y,ye)=>Y+(Number(ye.amount)||0),0);return console.log(` Calcul pour studentFeeId ${E}:`,{successfulPayments:$.length,totalPaid:ue,payments:$.map(Y=>({amount:Y.amount,status:Y.status}))}),ue},W=E=>i.find($=>$.id===E);y.useEffect(()=>{ne()},[]);const L=async()=>{try{const E=await pe.getAllFeeTypes();E.success&&E.data?(console.log(" Types de frais reus de l'API:",E.data),v(E.data)):(console.error("Erreur lors du chargement des types de frais:",E.error),v([]))}catch(E){console.error("Erreur lors du chargement des types de frais:",E),v([])}},ne=async()=>{try{_(!0),await Promise.all([K(),me(),re(),ie(),G(),L(),be()])}catch(E){console.error("Erreur lors du chargement des donnes:",E)}finally{_(!1)}},K=async()=>{try{const E=await pe.getAllStudentFees();if(E.success&&E.data){console.log(" Frais tudiants reus de l'API:",E.data),E.data.length>0&&(console.log(" Exemple de studentFee:",E.data[0]),console.log(" amountAssigned:",E.data[0].amountAssigned,typeof E.data[0].amountAssigned),console.log(" amountPaid:",E.data[0].amountPaid,typeof E.data[0].amountPaid));const $=E.data.filter(ue=>ue.student&&ue.student.id&&ue.student.matricule);r($)}else console.error("Erreur lors du chargement des frais tudiants:",E.error),r([])}catch(E){console.error("Erreur lors du chargement des frais tudiants:",E),r([])}},me=async()=>{try{const E=await pe.getAllUsers();E.success&&E.data?(console.log(" Utilisateurs reus de l'API:",E.data),c(E.data)):(console.error("Erreur lors du chargement des utilisateurs:",E.error),c([]))}catch(E){console.error("Erreur lors du chargement des utilisateurs:",E),c([])}},re=async()=>{try{const E=await pe.getAllStaff();E.success&&E.data?(console.log(" Staffs reus de l'API:",E.data),d(E.data)):(console.error("Erreur lors du chargement des staffs:",E.error),d([]))}catch(E){console.error("Erreur lors du chargement des staffs:",E),d([])}},ie=async()=>{try{const E=await pe.getAllStudentClasses();E.success&&E.data?(console.log(" Classes d'tudiants reues de l'API:",E.data),x(E.data)):(console.error("Erreur lors du chargement des classes d'tudiants:",E.error),x([]))}catch(E){console.error("Erreur lors du chargement des classes d'tudiants:",E),x([])}},G=async()=>{try{const E=await pe.getAllPayments();E.success&&E.data?(console.log(" Paiements reus de l'API:",E.data),p(E.data)):(console.error("Erreur lors du chargement des paiements:",E.error),p([]))}catch(E){console.error("Erreur lors du chargement des paiements:",E),p([])}},be=async()=>{try{const E=await pe.getAllSchoolYears();if(E.success&&E.data){console.log(" Annes acadmiques reues de l'API:",E.data),T(E.data);const $=E.data.find(ue=>ue.isActive);$&&se(ue=>({...ue,academicYearId:$.id}))}else console.error("Erreur lors du chargement des annes acadmiques:",E.error),T([])}catch(E){console.error("Erreur lors du chargement des annes acadmiques:",E),T([])}},V=async E=>{if(E.preventDefault(),D.size===0){alert("Veuillez slectionner au moins un tudiant.");return}if(!P.receivedBy){alert("Veuillez slectionner qui a reu le paiement.");return}if(!P.academicYearId){alert("Veuillez slectionner une anne acadmique.");return}if(P.amount<=0){alert("Le montant doit tre positif.");return}try{j(!0);const $=F().filter(H=>D.has(H.id)&&H.academicYearId===P.academicYearId);if($.length===0){alert("Aucun frais trouv pour l'anne acadmique slectionne parmi les tudiants slectionns."),j(!1);return}for(const H of $){const B=J(H.id),Ne=(Number(H.amountAssigned)||0)-B;if(P.amount>Ne){const ke=W(H.student.userId);alert(`Le montant ne peut pas dpasser le montant restant pour ${ke?.firstName} ${ke?.lastName} (${X(Ne)} FCFA).`);return}}const ue=$.map(H=>{const B={studentFeeId:H.id,amount:P.amount,method:P.method,receivedBy:P.receivedBy,paymentDate:P.paymentDate,status:"successful"};return pe.createPayment(B)}),Y=await Promise.all(ue),ye=Y.filter(H=>H.success),Z=Y.filter(H=>!H.success);if(ye.length===$.length){alert(`${ye.length} paiements enregistrs avec succs !`),z(new Set);const H=P.academicYearId;se({amount:0,method:"cash",receivedBy:"",paymentDate:new Date().toISOString().split("T")[0],academicYearId:H}),window.location.reload()}else alert(`${ye.length} paiements russis, ${Z.length} chous.`)}catch($){console.error(" Erreur lors de la cration en lot:",$),alert("Erreur lors de la cration des paiements.")}finally{j(!1)}},je=[{label:"Finances",path:"/finances"},{label:"Paiements",path:"/finances/payments"},{label:"Enregistrement",path:"/finances/payments/assign"}];return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:je}),t.jsx(cs,{title:"Enregistrement de paiements en lot",subtitle:"Slectionnez un type de frais, puis les tudiants pour enregistrer leurs paiements",icon:Xt,iconColor:"from-emerald-600 to-emerald-800",actions:t.jsx(Ee,{onClick:()=>e("/finances/payments"),variant:"outline",children:" Retour"})}),M?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement des donnes..."})]})}):t.jsxs("div",{className:"space-y-8",children:[t.jsxs(Wn,{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[t.jsx(Li,{className:"w-5 h-5 mr-2 text-blue-600"}),"tape 1: Slectionner le type de frais"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Choisissez le type de frais pour lequel vous voulez enregistrer des paiements"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(E=>t.jsxs("div",{onClick:()=>R(E.id),className:`p-4 border-2 rounded-lg cursor-pointer ${O===E.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:E.name}),O===E.id&&t.jsx(Bs,{className:"w-5 h-5 text-blue-600"})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Montant: ",X(E.amountDefault)," FCFA"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Frquence: ",E.frequency||"Non spcifie"]})]},E.id))})]}),O&&t.jsxs(Wn,{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[t.jsx(Lt,{className:"w-5 h-5 mr-2 text-green-600"}),"tape 2: Slectionner les tudiants"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Slectionnez les tudiants qui ont pay pour ce type de frais"})]}),t.jsx("div",{className:"flex items-center justify-between mb-4 p-4 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[D.size," tudiant(s) slectionn(s)"]}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",F().length," tudiant(s) trouv(s))"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(Ee,{type:"button",onClick:ae,variant:"outline",size:"sm",className:"text-xs",children:[t.jsx(Vi,{className:"w-4 h-4 mr-1"}),"Tout slectionner"]}),t.jsxs(Ee,{type:"button",onClick:te,variant:"outline",size:"sm",className:"text-xs",children:[t.jsx(Ui,{className:"w-4 h-4 mr-1"}),"Tout dslectionner"]})]})]})}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Rechercher un tudiant...",value:N,onChange:E=>A(E.target.value),className:"w-full text-black pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto border border-gray-200 rounded-lg p-3 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:F().map(E=>{const $=W(E.student.userId),ue=J(E.id),Y=(Number(E.amountAssigned)||0)-ue,ye=D.has(E.id);return $?t.jsx("div",{onClick:()=>Q(E.id),className:`p-3 border-2 rounded-lg cursor-pointer ${ye?"border-green-500 bg-green-50":"border-gray-200 bg-white"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex items-center",children:ye?t.jsx(Vi,{className:"w-4 h-4 text-green-600"}):t.jsx(Ui,{className:"w-4 h-4 text-gray-400"})}),t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(We,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 text-sm",children:[$.firstName," ",$.lastName]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-gray-600 mt-1",children:[t.jsxs("span",{className:"flex font-extrabold items-center",children:[t.jsx(ys,{className:"w-3 font-extrabold h-3 mr-1"}),E.student.matricule]}),t.jsxs("span",{className:"flex font-extrabold items-center",children:[t.jsx(We,{className:"w-3 font-extrabold h-3 mr-1"}),ce(E.student.id)]}),t.jsxs("span",{className:"flex font-extrabold items-center px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:[t.jsx(Xt,{className:"w-3 font-extrabold h-3 mr-1"}),E.feeType.name]}),t.jsx("span",{className:"flex font-extrabold items-center px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:E.academicYear.name})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[X(Y)," FCFA"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Restant"})]})]})},E.id):null})}),F().length>10&&t.jsxs("div",{className:"absolute bottom-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-lg",children:[F().length," tudiants"]})]}),F().length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Lt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Aucun tudiant trouv pour ce type de frais"})]})]}),D.size>0&&t.jsxs(Wn,{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[t.jsx(Xt,{className:"w-5 h-5 mr-2 text-purple-600"}),"tape 3: Dtails du paiement"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Renseignez les dtails du paiement qui sera appliqu  tous les tudiants slectionns"}),O&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-gray-700",children:"Type de frais:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:b.find(E=>E.id===O)?.name||"N/A"})]}),P.academicYearId&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-gray-700",children:"Anne slectionne:"}),t.jsx("span",{className:"ml-2 text-purple-700 font-semibold",children:S.find(E=>E.id===P.academicYearId)?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-gray-700",children:"Annes disponibles:"}),t.jsx("span",{className:"ml-2 text-gray-600 text-xs",children:Array.from(new Set(F().filter(E=>D.has(E.id)).map(E=>E.academicYear.name))).join(", ")})]})]})})]}),t.jsxs("form",{onSubmit:V,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Anne acadmique ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:P.academicYearId,onChange:E=>se({...P,academicYearId:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner une anne acadmique"}),S.map(E=>t.jsxs("option",{value:E.id,children:[E.name," ",E.isActive?"(Active)":""]},E.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Slectionnez l'anne acadmique pour laquelle ce paiement est destin"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant du paiement (FCFA)"}),t.jsx("input",{type:"number",value:P.amount,onChange:E=>se({...P,amount:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",required:!0,min:"1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mthode de paiement"}),t.jsxs("select",{value:P.method,onChange:E=>se({...P,method:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",required:!0,children:[t.jsx("option",{value:"cash",children:"Espces"}),t.jsx("option",{value:"bank_transfer",children:"Virement bancaire"}),t.jsx("option",{value:"mobile_money",children:"Mobile Money"}),t.jsx("option",{value:"card",children:"Carte bancaire"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reu par"}),t.jsxs("select",{value:P.receivedBy,onChange:E=>se({...P,receivedBy:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",required:!0,children:[t.jsx("option",{value:"",children:"Slectionner un membre du personnel"}),u.map(E=>t.jsxs("option",{value:E.user.id,children:[E.user.firstName," ",E.user.lastName,E.position&&` - ${E.position}`]},E.user.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de paiement"}),t.jsx("input",{type:"date",value:P.paymentDate,onChange:E=>se({...P,paymentDate:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-700 text-white",required:!0})]})]}),t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Rsum du paiement en lot"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"tudiants slectionns:"}),t.jsx("span",{className:"ml-2 font-bold text-blue-900",children:D.size})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"Montant par tudiant:"}),t.jsxs("span",{className:"ml-2 font-bold text-blue-900",children:[X(P.amount)," FCFA"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"Total  enregistrer:"}),t.jsxs("span",{className:"ml-2 font-bold text-blue-900",children:[X(P.amount*D.size)," ","FCFA"]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-4",children:[t.jsx(Ee,{type:"button",onClick:()=>{z(new Set),se({amount:0,method:"cash",receivedBy:"",paymentDate:new Date().toISOString().split("T")[0],academicYearId:""})},variant:"outline",children:"Annuler"}),t.jsx(Ee,{type:"submit",disabled:C,className:"bg-green-600 hover:bg-green-700",children:C?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Enregistrement..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Enregistrer ",D.size," paiement(s)"]})})]})]})]})]})]})})},d_=()=>{const[e,a]=y.useState([]),[r,i]=y.useState(!0),[c,u]=y.useState(!1),[d,f]=y.useState(null),[x,g]=y.useState(""),[p,b]=y.useState("all"),[v,S]=y.useState({studentId:"",invoiceNumber:`INV-${Date.now()}`,totalAmount:0,issuedDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],notes:""});y.useEffect(()=>{T()},[]);const T=async()=>{try{i(!0);const D=await pe.getAllInvoices();if(D.success&&D.data){const z=D.data.filter(P=>P.student&&P.student.firstName&&P.student.lastName);a(z)}else console.error("Erreur lors du chargement des factures:",D.error),a([{id:"1",studentId:"1",invoiceNumber:"INV-2024-001",totalAmount:525e3,status:"paid",issuedDate:"2024-01-01",dueDate:"2024-01-31",notes:"Facture de scolarit et cantine",createdAt:"2024-01-01T10:00:00Z",student:{firstName:"Mohamed",lastName:"Kamissoko"},invoiceItems:[{id:"1",amount:5e5,studentFee:{feeType:{name:"Scolarit"}}},{id:"2",amount:25e3,studentFee:{feeType:{name:"Cantine"}}}]},{id:"2",studentId:"2",invoiceNumber:"INV-2024-002",totalAmount:4e4,status:"unpaid",issuedDate:"2024-01-15",dueDate:"2024-02-15",notes:"Facture de transport",createdAt:"2024-01-15T14:30:00Z",student:{firstName:"Fatoumata",lastName:"Traor"},invoiceItems:[{id:"3",amount:4e4,studentFee:{feeType:{name:"Transport"}}}]}])}catch(D){console.error("Erreur lors du chargement des factures:",D),a([{id:"1",studentId:"1",invoiceNumber:"INV-2024-001",totalAmount:525e3,status:"paid",issuedDate:"2024-01-01",dueDate:"2024-01-31",notes:"Facture de scolarit et cantine",createdAt:"2024-01-01T10:00:00Z",student:{firstName:"Mohamed",lastName:"Kamissoko"},invoiceItems:[{id:"1",amount:5e5,studentFee:{feeType:{name:"Scolarit"}}},{id:"2",amount:25e3,studentFee:{feeType:{name:"Cantine"}}}]},{id:"2",studentId:"2",invoiceNumber:"INV-2024-002",totalAmount:4e4,status:"unpaid",issuedDate:"2024-01-15",dueDate:"2024-02-15",notes:"Facture de transport",createdAt:"2024-01-15T14:30:00Z",student:{firstName:"Fatoumata",lastName:"Traor"},invoiceItems:[{id:"3",amount:4e4,studentFee:{feeType:{name:"Transport"}}}]}])}finally{i(!1)}},M=async D=>{D.preventDefault();try{if(d){const z=await pe.updateInvoice(d.id,v);if(z.success)console.log("Facture mise  jour avec succs");else{console.error("Erreur lors de la mise  jour:",z.error),alert("Erreur lors de la mise  jour de la facture");return}}else{const z=await pe.createInvoice(v);if(z.success)console.log("Facture cre avec succs");else{console.error("Erreur lors de la cration:",z.error),alert("Erreur lors de la cration de la facture");return}}u(!1),f(null),j(),T()}catch(z){console.error("Erreur lors de la sauvegarde:",z),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}},_=D=>{f(D),S({studentId:D.studentId,invoiceNumber:D.invoiceNumber,totalAmount:D.totalAmount,issuedDate:D.issuedDate,dueDate:D.dueDate,notes:D.notes||""}),u(!0)},C=async D=>{if(window.confirm("tes-vous sr de vouloir supprimer cette facture ?"))try{const z=await pe.deleteInvoice(D);z.success?(console.log("Facture supprime avec succs"),T()):(console.error("Erreur lors de la suppression:",z.error),alert("Erreur lors de la suppression de la facture"))}catch(z){console.error("Erreur lors de la suppression:",z),alert("Erreur lors de la suppression. Veuillez ressayer.")}},j=()=>{S({studentId:"",invoiceNumber:`INV-${Date.now()}`,totalAmount:0,issuedDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],notes:""})},N=()=>{f(null),j(),u(!0)},A=D=>{switch(D){case"paid":return"text-green-600 bg-green-100";case"partial":return"text-yellow-600 bg-yellow-100";case"unpaid":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},O=D=>{switch(D){case"paid":return"Paye";case"partial":return"Partiellement paye";case"unpaid":return"Non paye";case"cancelled":return"Annule";default:return D}},U=e.filter(D=>{const z=D.student.firstName.toLowerCase().includes(x.toLowerCase())||D.student.lastName.toLowerCase().includes(x.toLowerCase())||D.invoiceNumber.toLowerCase().includes(x.toLowerCase()),P=p==="all"||D.status===p;return z&&P});return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Finances",path:"/finances"},{label:"Factures"}]}),t.jsx(cs,{title:"Gestion des factures",subtitle:"Grez les factures et documents de facturation",icon:ys,iconColor:"from-blue-600 to-blue-800",actions:t.jsx(ua,{onClick:N,icon:is,label:"Nouvelle facture"})}),t.jsxs("div",{className:"mb-6 flex gap-4",children:[t.jsx(It,{type:"text",placeholder:"Rechercher une facture...",value:x,onChange:D=>g(D.target.value),className:"max-w-md"}),t.jsxs("select",{value:p,onChange:D=>b(D.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Tous les statuts"}),t.jsx("option",{value:"paid",children:"Paye"}),t.jsx("option",{value:"partial",children:"Partiellement paye"}),t.jsx("option",{value:"unpaid",children:"Non paye"}),t.jsx("option",{value:"cancelled",children:"Annule"})]})]}),r?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement des factures..."})]})}):t.jsx("div",{className:"space-y-4",children:U.map(D=>t.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.invoiceNumber}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A(D.status)}`,children:O(D.status)})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"tudiant:"}),t.jsxs("p",{children:[D.student.firstName," ",D.student.lastName]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Montant total:"}),t.jsxs("p",{className:"font-semibold text-green-600",children:[D.totalAmount.toLocaleString()," FCFA"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Date d'mission:"}),t.jsx("p",{children:new Date(D.issuedDate).toLocaleDateString("fr-FR")})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Date d'chance:"}),t.jsx("p",{children:new Date(D.dueDate).toLocaleDateString("fr-FR")})]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"font-medium text-sm text-gray-600",children:"lments:"}),t.jsx("div",{className:"mt-1 space-y-1",children:D.invoiceItems.map(z=>t.jsxs("div",{className:"text-sm text-gray-600 flex justify-between",children:[t.jsx("span",{children:z.studentFee.feeType.name}),t.jsxs("span",{children:[z.amount.toLocaleString()," FCFA"]})]},z.id))})]}),D.notes&&t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:"Notes:"})," ",D.notes]})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>_(D),className:"text-blue-600 hover:text-blue-800 text-sm px-3 py-1 border border-blue-600 rounded hover:bg-blue-50",children:"Modifier"}),t.jsx("button",{onClick:()=>C(D.id),className:"text-red-600 hover:text-red-800 text-sm px-3 py-1 border border-red-600 rounded hover:bg-red-50",children:"Supprimer"})]})]})},D.id))}),t.jsx(xt,{isOpen:c,onClose:()=>u(!1),title:d?"Modifier la facture":"Nouvelle facture",size:"md",children:t.jsxs("form",{onSubmit:M,className:"space-y-4",children:[t.jsx(ze,{label:"ID de l'tudiant",type:"text",value:v.studentId,onChange:D=>S({...v,studentId:D.target.value}),required:!0}),t.jsx(ze,{label:"Montant total (FCFA)",type:"number",value:v.totalAmount,onChange:D=>S({...v,totalAmount:Number(D.target.value)}),required:!0,min:"0"}),t.jsx(ze,{label:"Date d'mission",type:"date",value:v.issuedDate,onChange:D=>S({...v,issuedDate:D.target.value}),required:!0}),t.jsx(ze,{label:"Date d'chance",type:"date",value:v.dueDate,onChange:D=>S({...v,dueDate:D.target.value}),required:!0}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-1",children:"Notes (optionnel)"}),t.jsx("textarea",{value:v.notes,onChange:D=>S({...v,notes:D.target.value}),className:"w-full px-3 py-2.5 text-sm font-medium border-2 rounded-lg bg-white text-slate-800 border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 focus:outline-none focus:ring-2",rows:3})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2.5 border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 font-medium",children:"Annuler"}),t.jsx("button",{type:"submit",className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium",children:d?"Mettre  jour":"Crer"})]})]})})]})})},m_=()=>{const e=Ht(),[a,r]=y.useState("schedules"),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState([]),[b,v]=y.useState(!1),[S,T]=y.useState(null),[M,_]=y.useState(!1),[C,j]=y.useState(null),N=y.useCallback(async()=>{try{v(!0);const[R,Q,ae,te]=await Promise.all([pe.getAllClasses(),pe.getAllSchoolYears(),pe.getAllTimetables(),pe.getAllEvents()]);R.success&&R.data&&c(R.data),Q.success&&Q.data&&d(Q.data),ae.success&&ae.data&&x(ae.data),te.success&&te.data&&p(te.data)}catch(R){console.error("Erreur lors du chargement des donnes:",R)}finally{v(!1)}},[]);y.useEffect(()=>{N()},[N]);const A=R=>{switch(R){case"exam":return"Examen";case"homework":return"Devoir";case"cultural_day":return"Journe culturelle";case"health_day":return"Journe sant";case"ball":return"Bal";default:return"Autre"}},O=R=>{switch(R){case"exam":return"bg-red-100 text-red-800";case"homework":return"bg-blue-100 text-blue-800";case"cultural_day":return"bg-purple-100 text-purple-800";case"health_day":return"bg-green-100 text-green-800";case"ball":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},U=async()=>{if(C)try{const R=await pe.deleteEvent(C.id);R.success?(p(g.filter(Q=>Q.id!==C.id)),_(!1),j(null)):alert(R.message||"Erreur lors de la suppression")}catch(R){console.error("Erreur lors de la suppression:",R),alert("Erreur lors de la suppression de l'vnement")}},D=u.find(R=>R.isActive),z=f.filter(R=>R.academicYearId===D?.id).length,P=g.length,se=[{key:"title",header:"Titre",render:R=>t.jsx("div",{className:"font-semibold text-gray-900",children:R.title}),sortable:!0},{key:"eventType",header:"Type",render:R=>t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(R.eventType)}`,children:A(R.eventType)}),sortable:!0},{key:"startDate",header:"Date de dbut",render:R=>t.jsx("div",{className:"text-sm text-gray-600",children:new Date(R.startDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),sortable:!0},{key:"endDate",header:"Date de fin",render:R=>t.jsx("div",{className:"text-sm text-gray-600",children:R.endDate?new Date(R.endDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"-"}),sortable:!0},{key:"class",header:"Classe",render:R=>t.jsx("div",{className:"text-sm text-gray-600",children:R.class?R.class.name:"Toutes les classes"})},{key:"actions",header:"Actions",render:R=>t.jsx(xn,{onView:()=>T(R),onEdit:()=>e(`/calendar/events?edit=${R.id}`),onDelete:()=>{j(R),_(!0)}})}],X=[{id:"schedules",label:"Emplois du temps",icon:ps,count:z},{id:"events",label:"vnements",icon:Lc,count:P}];return t.jsxs(os,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(cs,{title:"Calendrier",subtitle:"Grez les emplois du temps et les vnements de l'tablissement",icon:as,iconColor:"from-blue-600 to-blue-800",actions:a==="schedules"?t.jsx(ua,{onClick:()=>e("/calendar/timetables"),icon:is,label:"Nouvel emploi du temps"}):t.jsx(ua,{onClick:()=>e("/calendar/events"),icon:is,label:"Nouvel vnement"})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-2",children:t.jsx("nav",{className:"flex space-x-2",children:X.map(R=>{const Q=R.icon,ae=a===R.id;return t.jsx("button",{onClick:()=>r(R.id),className:`flex-1 py-3 px-6 rounded-lg font-medium text-sm transition-all duration-200 ${ae?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(Q,{className:"w-4 h-4"}),R.label,R.count>0&&t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${ae?"bg-white/20 text-white":"bg-gray-200 text-gray-700"}`,children:R.count})]})},R.id)})})}),t.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:a==="schedules"?t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Emplois du temps"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Crez et grez les emplois du temps des classes"})]}),b?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Chargement des emplois du temps..."})]}):z===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ps,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun emploi du temps cr"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Commencez par crer votre premier emploi du temps pour organiser les cours"}),t.jsx(Ee,{onClick:()=>e("/calendar/timetables"),className:"bg-blue-600 hover:bg-blue-700",children:"Crer un emploi du temps"})]}):t.jsx("div",{className:"space-y-4",children:i.map(R=>{const ae=f.filter(te=>te.academicYearId===D?.id&&te.teachingAssignment?.classSubject?.class?.id===R.id).length;return ae===0?null:t.jsxs("div",{onClick:()=>e(`/calendar/timetables?class=${R.id}&year=${D?.id||""}`),className:"flex items-center justify-between p-6 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg border border-gray-200 hover:shadow-md transition-all cursor-pointer group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:t.jsx(qs,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:R.name}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Qt,{className:"w-4 h-4"}),"Niveau ",R.level]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ps,{className:"w-4 h-4"}),ae," cours programm",ae>1?"s":""]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-blue-600 font-medium group-hover:text-blue-700",children:"Voir l'emploi du temps"}),t.jsx(rr,{className:"w-5 h-5 text-blue-600 group-hover:text-blue-700 group-hover:translate-x-1 transition-transform"})]})]},R.id)})})]}):t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"vnements"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Grez les vnements de l'tablissement (journes sport, propret, etc.)"})]}),b?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Chargement des vnements..."})]}):t.jsx(hn,{data:g.sort((R,Q)=>new Date(R.startDate).getTime()-new Date(Q.startDate).getTime()),columns:se,searchPlaceholder:"Rechercher un vnement...",searchKeys:["title","description"],pageSize:10,emptyMessage:"Aucun vnement cr",emptyIcon:t.jsx(Lc,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"})})]})})]}),S&&t.jsx(xt,{isOpen:!!S,onClose:()=>T(null),title:S.title,children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O(S.eventType)}`,children:A(S.eventType)}),S.allDay&&t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"Toute la journe"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(as,{className:"w-5 h-5 text-green-600"}),"Dates"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Date de dbut"}),t.jsx("p",{className:"text-gray-900",children:new Date(S.startDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),S.endDate&&S.endDate!==S.startDate&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Date de fin"}),t.jsx("p",{className:"text-gray-900",children:new Date(S.endDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]})]})]}),S.class&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(Qt,{className:"w-5 h-5 text-blue-600"}),"Classe concerne"]}),t.jsx("p",{className:"text-gray-900",children:S.class.name})]}),S.description&&t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(ys,{className:"w-5 h-5 text-green-600"}),"Description"]}),t.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:S.description})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(dl,{className:"w-5 h-5 text-purple-600"}),"Informations"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Cr le"}),t.jsx("p",{className:"text-gray-900",children:new Date(S.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),S.creator&&t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Cr par"}),t.jsxs("p",{className:"text-gray-900",children:[S.creator.firstName," ",S.creator.lastName]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[t.jsx(Ee,{variant:"outline",onClick:()=>T(null),children:"Fermer"}),t.jsx(Ee,{onClick:()=>{T(null),e("/calendar/events")},className:"bg-green-600 hover:bg-green-700",children:"Modifier l'vnement"})]})]})}),t.jsx(sr,{isOpen:M,onClose:()=>{_(!1),j(null)},onConfirm:U,title:"Supprimer l'vnement",message:`tes-vous sr de vouloir supprimer l'vnement "${C?.title}" ? Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger"})]})},f_=()=>{const e=Ht(),[a,r]=y.useState(null),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState([]),[b,v]=y.useState(""),[S,T]=y.useState(""),[M,_]=y.useState(!1),[C,j]=y.useState(!1),[N,A]=y.useState(!1),[O,U]=y.useState(""),[D,z]=y.useState("success"),[P,se]=y.useState(""),[X,R]=y.useState("list"),Q=y.useRef(null),[ae,te]=y.useState({teachingAssignmentId:"",academicYearId:"",dayOfWeek:Zs.MONDAY,startTime:"",endTime:"",room:""}),F=[{value:Zs.MONDAY,label:"Lundi"},{value:Zs.TUESDAY,label:"Mardi"},{value:Zs.WEDNESDAY,label:"Mercredi"},{value:Zs.THURSDAY,label:"Jeudi"},{value:Zs.FRIDAY,label:"Vendredi"},{value:Zs.SATURDAY,label:"Samedi"},{value:Zs.SUNDAY,label:"Dimanche"}];y.useEffect(()=>{const G=localStorage.getItem("user");if(G)try{r(JSON.parse(G))}catch{e("/login")}else e("/login")},[e]);const ce=y.useCallback(async()=>{try{_(!0);const G=new URLSearchParams(window.location.search),be=G.get("class"),V=G.get("year"),[je,E,$]=await Promise.all([pe.getAllSchoolYears(),pe.getAllClasses(),pe.getAllTeachingAssignments()]);if(je.success&&je.data)if(d(je.data),V)v(V),te(ue=>({...ue,academicYearId:V}));else{const ue=je.data.find(Y=>Y.isActive);ue&&(v(ue.id),te(Y=>({...Y,academicYearId:ue.id})))}E.success&&E.data&&(x(E.data),be&&T(be)),$.success&&$.data&&p($.data)}catch(G){console.error("Erreur lors du chargement des donnes:",G)}finally{_(!1)}},[]),J=y.useCallback(async()=>{if(!(!b||!S)){console.log(" Chargement des timetables pour:",{classe:S,anne:b});try{const G=await pe.getTimetablesByClass(S,b);console.log(" Rponse getTimetablesByClass:",G),G.success&&G.data?(console.log(" Timetables chargs:",G.data),c(G.data)):(console.warn(" Erreur ou pas de donnes:",G),c([]))}catch(G){console.error(" Erreur lors du chargement des emplois du temps:",G),c([])}}},[b,S]);y.useEffect(()=>{a&&ce()},[a,ce]),y.useEffect(()=>{b&&S&&J()},[b,S,J]);const W=(G,be)=>{U(G),z(be),A(!0),setTimeout(()=>A(!1),3e3)},L=async G=>{if(G.preventDefault(),!ae.teachingAssignmentId||!ae.academicYearId||!ae.startTime||!ae.endTime){W("Veuillez remplir tous les champs obligatoires","error");return}if(ae.startTime>=ae.endTime){W("L'heure de fin doit tre postrieure  l'heure de dbut","error");return}try{_(!0);const be=await pe.createTimetable(ae);be.success&&be.data?(c([...i,be.data]),j(!1),se(""),te({teachingAssignmentId:"",academicYearId:b,dayOfWeek:Zs.MONDAY,startTime:"",endTime:"",room:""}),W("Cours ajout avec succs","success")):W(be.message||be.error||"Erreur lors de la cration du cours","error")}catch{W("Erreur lors de la cration du cours","error")}finally{_(!1)}},ne=async G=>{if(window.confirm("tes-vous sr de vouloir supprimer ce cours ?"))try{const be=await pe.deleteTimetable(G);be.success?(c(i.filter(V=>V.id!==G)),W("Cours supprim avec succs","success")):W(be.message||be.error||"Erreur lors de la suppression","error")}catch{W("Erreur lors de la suppression","error")}},K=i,me=K.reduce((G,be)=>(G[be.dayOfWeek]||(G[be.dayOfWeek]=[]),G[be.dayOfWeek].push(be),G),{}),re=G=>G.substring(0,5),ie=j1.useReactToPrint({contentRef:Q,documentTitle:`Emploi du temps - ${S?f.find(G=>G.id===S)?.name:"Classe"}`,pageStyle:`
      @page {
        size: A4 landscape;
        margin: 1cm;
      }
      @media print {
        body {
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
        }
        .print-header {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
        }
        .print-table {
          border-collapse: collapse !important;
        }
        .print-cell {
          border: 1px solid #d1d5db !important;
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
        }
        .print-time-cell {
          background: linear-gradient(to right, #f9fafb, #f3f4f6) !important;
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
        }
        .print-course-cell {
          background: #ffffff !important;
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
        }
      }
    `});return Object.keys(me).forEach(G=>{me[G].sort((be,V)=>be.startTime.localeCompare(V.startTime))}),a?t.jsx(bs,{user:a,children:t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsxs(Ee,{onClick:()=>e("/calendar"),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[t.jsx(eu,{className:"w-4 h-4"}),"Retour"]}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:t.jsx(as,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Emplois du temps"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Crez et grez les emplois du temps de vos classes"})]})]})})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-2xl shadow-lg border-2 border-blue-100 p-6 mb-6",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:t.jsx(dl,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Slectionnez une anne scolaire et une classe"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Pour afficher ou crer un emploi du temps, vous devez d'abord slectionner une anne scolaire et une classe."})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-blue-200",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[t.jsx(We,{className:"w-4 h-4 text-blue-600"}),"Anne scolaire *"]}),t.jsxs("select",{value:b,onChange:G=>{v(G.target.value),te(be=>({...be,academicYearId:G.target.value}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${b?"border-green-400 bg-green-50 text-black":"border-gray-300 bg-white text-black"}`,children:[t.jsx("option",{value:"",children:"-- Slectionnez une anne --"}),u.map(G=>t.jsxs("option",{value:G.id,children:[G.name," ",G.isActive&&" (Active)"]},G.id))]}),b&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-green-600",children:[t.jsx(gb,{className:"w-3 h-3"}),"Anne slectionne"]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-blue-200",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[t.jsx(Qt,{className:"w-4 h-4 text-blue-600"}),"Classe *"]}),t.jsxs("select",{value:S,onChange:G=>T(G.target.value),disabled:!b,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${b?S?"border-green-400 bg-green-50 text-black":"border-gray-300 bg-white text-black":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[t.jsx("option",{value:"",children:b?"-- Slectionnez une classe --":"Slectionnez d'abord une anne"}),f.map(G=>t.jsxs("option",{value:G.id,children:[G.name," - ",G.level]},G.id))]}),S&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-green-600",children:[t.jsx(gb,{className:"w-3 h-3"}),"Classe slectionne"]}),!b&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-amber-600",children:[t.jsx(pn,{className:"w-3 h-3"}),"Slectionnez d'abord une anne scolaire"]})]})]}),b&&S&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200 flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Prt  afficher l'emploi du temps"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex gap-1 border border-gray-300 rounded-lg p-1 bg-white",children:[t.jsx("button",{onClick:()=>R("list"),className:`px-3 py-2 rounded-md transition-all ${X==="list"?"bg-blue-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,title:"Vue liste",children:t.jsx(f5,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>R("grid"),className:`px-3 py-2 rounded-md transition-all ${X==="grid"?"bg-blue-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,title:"Vue grille",children:t.jsx(i5,{className:"w-4 h-4"})})]}),X==="grid"&&K.length>0&&t.jsxs(Ee,{variant:"secondary",size:"sm",onClick:ie,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white shadow-md",children:[t.jsx(mj,{className:"w-4 h-4"}),"Imprimer"]}),t.jsxs(Ee,{onClick:()=>j(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg",children:[t.jsx(is,{className:"w-4 h-4"}),"Ajouter un cours"]})]})]})]}),M&&K.length===0?t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 font-medium",children:"Chargement des emplois du temps..."})]}):!b||!S?t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl shadow-lg border-2 border-amber-200 p-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(pn,{className:"w-10 h-10 text-amber-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Slection requise"}),t.jsx("p",{className:"text-gray-700 mb-2 max-w-md mx-auto",children:!b&&!S?"Pour afficher ou crer un emploi du temps, veuillez d'abord slectionner une anne scolaire et une classe dans la section ci-dessus.":b?"Veuillez slectionner une classe pour afficher l'emploi du temps.":"Veuillez slectionner une anne scolaire pour continuer."}),t.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-sm text-amber-700 bg-amber-100 px-4 py-2 rounded-lg",children:[t.jsx(dl,{className:"w-4 h-4"}),t.jsx("span",{children:"Utilisez les slecteurs en haut de la page"})]})]}):K.length===0?t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border-2 border-blue-200 p-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(ps,{className:"w-10 h-10 text-blue-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Aucun cours programm"}),t.jsx("p",{className:"text-gray-700 mb-6 max-w-md mx-auto",children:"L'emploi du temps pour cette classe est vide. Commencez par ajouter des cours pour crer l'emploi du temps."}),t.jsx("div",{className:"flex items-center justify-center gap-4",children:t.jsxs(Ee,{onClick:()=>j(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg px-6 py-3",children:[t.jsx(is,{className:"w-5 h-5 mr-2"}),"Ajouter le premier cours"]})})]}):X==="list"?t.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["Emploi du temps -"," ",f.find(G=>G.id===S)?.name]}),t.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[K.length," cours"]})]}),t.jsx("div",{className:"grid gap-4",children:F.map(G=>{const be=me[G.value]||[];return be.length===0?null:t.jsxs("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-5 py-4",children:t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[t.jsx(as,{className:"w-5 h-5"}),G.label,t.jsxs("span",{className:"ml-auto text-sm font-normal bg-white/20 px-2 py-1 rounded-full",children:[be.length," cours"]})]})}),t.jsx("div",{className:"divide-y divide-gray-100 bg-gray-50",children:be.map(V=>{const je=g.find(E=>E.id===V.teachingAssignmentId);return t.jsx("div",{className:"p-5 hover:bg-white transition-all bg-white",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg font-semibold text-sm",children:[t.jsx(ps,{className:"w-4 h-4"}),re(V.startTime)," -"," ",re(V.endTime)]}),V.room&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 bg-gray-100 px-3 py-1.5 rounded-lg",children:[t.jsx(Mf,{className:"w-4 h-4"}),V.room]})]}),je&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qs,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"font-bold text-lg text-gray-900",children:je.classSubject?.subject?.name})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Qt,{className:"w-4 h-4"}),je.classSubject?.class?.name]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-medium",children:"Prof:"}),je.teacher?.user?.firstName," ",je.teacher?.user?.lastName]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ee,{variant:"outline",size:"sm",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50 border-orange-200",children:t.jsx(Pi,{className:"w-4 h-4"})}),t.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>ne(V.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:t.jsx(vn,{className:"w-4 h-4"})})]})]})},V.id)})})]},G.value)})})]})}):t.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["Emploi du temps -"," ",f.find(G=>G.id===S)?.name]}),t.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[K.length," cours"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("div",{ref:Q,className:"print-container",children:[t.jsx("div",{className:"print-header hidden print:block bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 mb-6 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:"/src/assets/cyberschool.jpg",alt:"Cyber School Logo",className:"w-16 h-16 object-contain bg-white rounded-lg p-2"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Cyber School"}),t.jsx("p",{className:"text-lg opacity-90",children:"Emploi du temps"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm opacity-90",children:S?f.find(G=>G.id===S)?.name:"Classe"}),t.jsx("p",{className:"text-sm opacity-90",children:b?u.find(G=>G.id===b)?.name:"Anne scolaire"}),t.jsx("p",{className:"text-xs opacity-75",children:new Date().toLocaleDateString("fr-FR")})]})]})}),t.jsxs("table",{className:"w-full border-collapse border border-gray-300 print-table",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:[t.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold min-w-[100px]",children:"Heures"}),F.filter(G=>G.value!==Zs.SUNDAY).map(G=>t.jsx("th",{className:"border border-gray-300 p-3 text-center font-semibold",children:G.label},G.value))]})}),t.jsx("tbody",{children:(()=>{const G=new Set;K.forEach(V=>{G.add(`${re(V.startTime)}-${re(V.endTime)}`)});const be=Array.from(G).sort((V,je)=>{const[E]=V.split("-"),[$]=je.split("-");return E.localeCompare($)});return be.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"Aucun cours programm"})}):be.map(V=>{const[je,E]=V.split("-");return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"border border-gray-300 p-3 bg-gradient-to-r from-gray-50 to-gray-100 whitespace-nowrap print-cell print-time-cell",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"text-base font-bold text-gray-900",children:je}),t.jsx("div",{className:"text-xs text-gray-400 my-1",children:""}),t.jsx("div",{className:"text-sm font-semibold text-gray-700",children:E})]})}),F.filter($=>$.value!==Zs.SUNDAY).map($=>{const Y=(me[$.value]||[]).find(Z=>re(Z.startTime)===je&&re(Z.endTime)===E);if(!Y)return t.jsx("td",{className:"border border-gray-300 p-2 bg-white print-cell print-course-cell"},$.value);const ye=g.find(Z=>Z.id===Y.teachingAssignmentId);return t.jsx("td",{className:"border border-gray-300 p-3 bg-blue-50 align-top print-cell print-course-cell",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("div",{className:"font-bold text-blue-900 mb-1",children:ye?.classSubject?.subject?.name||"Matire"}),t.jsxs("div",{className:"text-gray-700 text-xs",children:[ye?.teacher?.user?.firstName," ",ye?.teacher?.user?.lastName]}),Y.room&&t.jsxs("div",{className:"text-gray-600 text-xs flex items-center gap-1 mt-1",children:[t.jsx(Mf,{className:"w-3 h-3"}),Y.room]})]})},$.value)})]},V)})})()})]}),t.jsx("div",{className:"hidden print:block mt-8 pt-4 border-t border-gray-300",children:t.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[t.jsx("div",{children:t.jsx("p",{children:"Kati, Mali"})}),t.jsx("div",{className:"text-right"})]})})]})})]})}),C&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ajouter un cours"}),t.jsx("button",{onClick:()=>{j(!1),se("")},className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:L,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Professeur et Matire *"}),t.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[g.length," affectation",g.length>1?"s":""]})]}),t.jsx("div",{className:"mb-2",children:t.jsx(It,{type:"text",placeholder:"Rechercher un professeur, une matire ou une classe...",value:P,onChange:G=>se(G.target.value),className:"text-sm"})}),t.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-300 rounded-lg scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:g.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucune affectation prof-matire disponible"}):(()=>{const G=g.filter(be=>{if(!P)return!0;const V=P.toLowerCase();return be.teacher?.user?.firstName?.toLowerCase().includes(V)||be.teacher?.user?.lastName?.toLowerCase().includes(V)||be.classSubject?.subject?.name?.toLowerCase().includes(V)||be.classSubject?.class?.name?.toLowerCase().includes(V)});return G.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucun rsultat trouv"}):t.jsx("div",{className:"divide-y divide-gray-200",children:G.map(be=>t.jsxs("label",{className:`flex items-center p-4 cursor-pointer hover:bg-blue-50 transition-colors ${ae.teachingAssignmentId===be.id?"bg-blue-50 border-l-4 border-blue-500":""}`,children:[t.jsx("input",{type:"radio",name:"teachingAssignment",value:be.id,checked:ae.teachingAssignmentId===be.id,onChange:V=>te({...ae,teachingAssignmentId:V.target.value}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium text-gray-900",children:[be.teacher?.user?.firstName," ",be.teacher?.user?.lastName]}),t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"text-blue-600 font-medium",children:be.classSubject?.subject?.name})]}),t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Classe: ",be.classSubject?.class?.name," "," ",be.classSubject?.weeklyHours,"h/semaine"]})]})]},be.id))})})()}),ae.teachingAssignmentId===""&&t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Slectionnez un professeur et sa matire dans la liste ci-dessus"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jour de la semaine *"}),t.jsx("select",{value:ae.dayOfWeek,onChange:G=>te({...ae,dayOfWeek:G.target.value}),className:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:F.map(G=>t.jsx("option",{value:G.value,children:G.label},G.value))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(It,{label:"Heure de dbut *",type:"time",value:ae.startTime,onChange:G=>te({...ae,startTime:G.target.value}),required:!0}),t.jsx(It,{label:"Heure de fin *",type:"time",value:ae.endTime,onChange:G=>te({...ae,endTime:G.target.value}),required:!0})]}),t.jsx(It,{label:"Salle",value:ae.room||"",onChange:G=>te({...ae,room:G.target.value}),placeholder:"Ex: Salle 101, Amphithtre A...",maxLength:50}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>{j(!1),se("")},className:"flex-1",children:"Annuler"}),t.jsx(Ee,{type:"submit",disabled:M,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:M?"Ajout...":"Ajouter"})]})]})]})})}),N&&t.jsx(An,{title:"Notification",isVisible:N,message:O,type:D,onClose:()=>A(!1)})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"})})})},h_=()=>{const e=Ht(),[a,r]=y.useState(null),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState(!1),[b,v]=y.useState(!1),[S,T]=y.useState(!1),[M,_]=y.useState(null),[C,j]=y.useState(!1),[N,A]=y.useState(""),[O,U]=y.useState("success"),[D,z]=y.useState({title:"",description:"",eventType:"other",startDate:"",endDate:"",allDay:!1,classId:"",createdBy:"",academicYearId:""}),[P,se]=y.useState(""),[X,R]=y.useState(""),[Q,ae]=y.useState(""),[te,F]=y.useState(0);y.useEffect(()=>{const Y=localStorage.getItem("user");if(Y)try{const ye=JSON.parse(Y);r(ye),z(Z=>({...Z,createdBy:ye.id}))}catch{e("/login")}else e("/login")},[e]);const ce=Ft.useCallback(async()=>{p(!0);try{const[Y,ye,Z]=await Promise.all([pe.getAllEvents(),pe.getAllClasses(),pe.getAllSchoolYears()]);if(Y.success&&c(Y.data||[]),ye.success&&d(ye.data||[]),Z.success){x(Z.data||[]);const B=Z.data?.find(Ne=>Ne.isActive)||Z.data?.[0];B&&(se(B.id),z(Ne=>({...Ne,academicYearId:B.id})))}}catch(Y){console.error("Erreur lors du chargement des donnes:",Y),J("Erreur lors du chargement des donnes","error")}finally{p(!1)}},[]);y.useEffect(()=>{a&&ce()},[a,ce]),y.useEffect(()=>{P&&!M&&z(Y=>({...Y,academicYearId:P}))},[P,M]);const J=(Y,ye)=>{A(Y),U(ye),j(!0),setTimeout(()=>j(!1),5e3)},W=async Y=>{if(Y.preventDefault(),!D.title||!D.startDate||!D.academicYearId){J("Veuillez remplir tous les champs obligatoires","error");return}const ye={...D,endDate:D.endDate||void 0,classId:D.classId||void 0};try{let Z;M?Z=await pe.updateEvent(M.id,ye):Z=await pe.createEvent(ye),Z.success?(J(M?"vnement modifi avec succs":"vnement cr avec succs","success"),v(!1),T(!1),_(null),K(),ce()):J("Erreur lors de la sauvegarde","error")}catch(Z){console.error("Erreur lors de la sauvegarde:",Z),J("Erreur lors de la sauvegarde","error")}},L=Y=>{_(Y),z({title:Y.title,description:Y.description||"",eventType:Y.eventType,startDate:typeof Y.startDate=="string"?Y.startDate.split("T")[0]:new Date(Y.startDate).toISOString().split("T")[0],endDate:Y.endDate?typeof Y.endDate=="string"?Y.endDate.split("T")[0]:new Date(Y.endDate).toISOString().split("T")[0]:"",allDay:Y.allDay,classId:Y.classId||"",createdBy:Y.createdBy,academicYearId:Y.academicYearId}),T(!0)},ne=async Y=>{if(window.confirm("tes-vous sr de vouloir supprimer cet vnement ?"))try{(await pe.deleteEvent(Y)).success?(J("vnement supprim avec succs","success"),ce()):J("Erreur lors de la suppression","error")}catch(ye){console.error("Erreur lors de la suppression:",ye),J("Erreur lors de la suppression","error")}},K=()=>{z({title:"",description:"",eventType:"other",startDate:"",endDate:"",allDay:!1,classId:"",createdBy:a?.id||"",academicYearId:P})},me=Y=>{switch(Y){case"exam":return"Examen";case"homework":return"Devoir";case"cultural_day":return"Journe culturelle";case"health_day":return"Journe sant";case"ball":return"Bal";default:return"Autre"}},re=Y=>{switch(Y){case"exam":return"bg-red-100 text-red-800";case"homework":return"bg-blue-100 text-blue-800";case"cultural_day":return"bg-purple-100 text-purple-800";case"health_day":return"bg-green-100 text-green-800";case"ball":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},ie=i.filter(Y=>!(P&&Y.academicYearId!==P||X&&Y.classId!==X||Q&&Y.eventType!==Q)),G=()=>{if(ie.length===0)return[];const Y=new Set;return ie.forEach(ye=>{const Z=new Date(ye.startDate),H=`${Z.getFullYear()}-${Z.getMonth()}`;if(Y.add(H),ye.endDate){const B=new Date(ye.endDate),Ne=`${B.getFullYear()}-${B.getMonth()}`;Y.add(Ne)}}),Array.from(Y).map(ye=>{const[Z,H]=ye.split("-").map(Number);return new Date(Z,H,1)}).sort((ye,Z)=>ye.getTime()-Z.getTime())},be=()=>{const Y=G();if(Y.length===0)return[];const ye=Y[te],Z=ye.getFullYear(),H=ye.getMonth(),B=ie.filter(q=>{const le=new Date(q.startDate);return le.getFullYear()===Z&&le.getMonth()===H}),Ne=new Set;return B.forEach(q=>{const le=new Date(q.startDate),ge=q.endDate?new Date(q.endDate):le,Te=new Date(le);for(;Te<=ge;)Ne.add(Te.toISOString().split("T")[0]),Te.setDate(Te.getDate()+1)}),Array.from(Ne).map(q=>{const le=ie.filter(ge=>{const Te=new Date(ge.startDate).toISOString().split("T")[0],De=ge.endDate?new Date(ge.endDate).toISOString().split("T")[0]:Te;return q>=Te&&q<=De});return{date:new Date(q),dateStr:q,events:le,isToday:q===new Date().toISOString().split("T")[0]}}).sort((q,le)=>q.date.getTime()-le.date.getTime())},V=()=>{F(Y=>Math.max(0,Y-1))},je=()=>{const Y=G();F(ye=>Math.min(Y.length-1,ye+1))},E=Y=>{F(Y)},$=G();Ft.useEffect(()=>{$.length>0&&te>=$.length&&F(0)},[$.length,te]);const ue=be();return a?t.jsx(bs,{user:a,children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white border-b border-gray-200",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(Ee,{onClick:()=>e("/calendar"),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[t.jsx(eu,{className:"w-4 h-4"}),"Retour"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des vnements"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Crez et grez les vnements de l'cole"})]})]}),t.jsxs(Ee,{onClick:()=>{K(),v(!0)},className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:[t.jsx(is,{className:"w-4 h-4"}),"Nouvel vnement"]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtres"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anne scolaire"}),t.jsxs("select",{value:P,onChange:Y=>se(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",children:[t.jsx("option",{value:"",children:"Toutes les annes"}),f.map(Y=>t.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Classe"}),t.jsxs("select",{value:X,onChange:Y=>R(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",children:[t.jsx("option",{value:"",children:"Selectionnez une classe"}),u.map(Y=>t.jsxs("option",{value:Y.id,children:[Y.name," - ",Y.level]},Y.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'vnement"}),t.jsxs("select",{value:Q,onChange:Y=>ae(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",children:[t.jsx("option",{value:"",children:"Tous les types"}),t.jsx("option",{value:"exam",children:"Examen"}),t.jsx("option",{value:"homework",children:"Devoir"}),t.jsx("option",{value:"cultural_day",children:"Journe culturelle"}),t.jsx("option",{value:"health_day",children:"Journe sant"}),t.jsx("option",{value:"ball",children:"Bal"}),t.jsx("option",{value:"other",children:"Autre"})]})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Calendrier des vnements (",ie.length,")"]}),$.length>0&&t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("select",{value:te,onChange:Y=>E(Number(Y.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm text-black",children:$.map((Y,ye)=>t.jsx("option",{value:ye,children:Y.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})},ye))}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ee,{onClick:V,variant:"outline",size:"sm",className:"p-2",disabled:te===0,children:t.jsx(hh,{className:"w-4 h-4"})}),t.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-[140px] text-center",children:$[te]?.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),t.jsx(Ee,{onClick:je,variant:"outline",size:"sm",className:"p-2",disabled:te===$.length-1,children:t.jsx(rr,{className:"w-4 h-4"})})]}),t.jsxs("span",{className:"text-xs text-gray-500",children:[te+1," / ",$.length]})]})]}),g?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Chargement des vnements..."})]}):ie.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Lc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun vnement"}),t.jsx("p",{className:"text-gray-500 mb-4",children:P||X||Q?"Aucun vnement ne correspond aux filtres slectionns":"Commencez par crer votre premier vnement"}),t.jsxs(Ee,{onClick:()=>{K(),v(!0)},className:"flex items-center gap-2",children:[t.jsx(is,{className:"w-4 h-4"}),"Crer un vnement"]})]}):t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(Y=>t.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500 bg-gray-50 rounded",children:Y},Y)),ue.map((Y,ye)=>t.jsxs("div",{className:`min-h-[120px] p-2 border rounded ${Y.isToday?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-300"}`,children:[t.jsxs("div",{className:`text-sm font-medium mb-1 ${Y.isToday?"text-blue-600":"text-gray-900"}`,children:[Y.date.getDate(),Y.isToday&&t.jsx("span",{className:"ml-1 text-xs bg-blue-600 text-white px-1 rounded",children:"Aujourd'hui"})]}),t.jsxs("div",{className:"space-y-1",children:[Y.events.slice(0,3).map(Z=>t.jsxs("div",{className:`text-xs p-1 rounded cursor-pointer hover:opacity-80 transition-opacity ${re(Z.eventType)} group relative`,onClick:()=>L(Z),title:`${Z.title} - ${me(Z.eventType)}`,children:[t.jsx("div",{className:"font-medium truncate",children:Z.title}),Z.class&&t.jsx("div",{className:"text-xs opacity-75 truncate",children:Z.class.name}),t.jsx("div",{className:"absolute top-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx("button",{onClick:H=>{H.stopPropagation(),ne(Z.id)},className:"text-red-600 hover:text-red-800 p-1",title:"Supprimer",children:t.jsx(vn,{className:"w-3 h-3"})})})]},Z.id)),Y.events.length>3&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",Y.events.length-3," autres"]})]})]},ye)),ue.length===0&&t.jsxs("div",{className:"col-span-7 text-center py-12 text-gray-500",children:[t.jsx(Lc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun vnement ce mois-ci"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Crez votre premier vnement pour ce mois"}),t.jsxs(Ee,{onClick:()=>{K(),v(!0)},className:"flex items-center gap-2 mx-auto",children:[t.jsx(is,{className:"w-4 h-4"}),"Crer un vnement"]})]})]})]})})]}),(b||S)&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:M?"Modifier l'vnement":"Nouvel vnement"}),t.jsx("button",{onClick:()=>{v(!1),T(!1),_(null),K()},className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre *"}),t.jsx(It,{type:"text",value:D.title,onChange:Y=>z(ye=>({...ye,title:Y.target.value})),placeholder:"Titre de l'vnement",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:D.description,onChange:Y=>z(ye=>({...ye,description:Y.target.value})),placeholder:"Description de l'vnement",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'vnement *"}),t.jsxs("select",{value:D.eventType,onChange:Y=>z(ye=>({...ye,eventType:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",required:!0,children:[t.jsx("option",{value:"exam",children:"Examen"}),t.jsx("option",{value:"homework",children:"Devoir"}),t.jsx("option",{value:"cultural_day",children:"Journe culturelle"}),t.jsx("option",{value:"health_day",children:"Journe sant"}),t.jsx("option",{value:"ball",children:"Bal"}),t.jsx("option",{value:"other",children:"Autre"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Classe"}),t.jsxs("select",{value:D.classId,onChange:Y=>z(ye=>({...ye,classId:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",children:[t.jsx("option",{value:"",children:"Selectionnez une classe"}),u.map(Y=>t.jsxs("option",{value:Y.id,children:[Y.name," - ",Y.level]},Y.id))]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anne scolaire *"}),t.jsxs("select",{value:D.academicYearId,onChange:Y=>z(ye=>({...ye,academicYearId:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",required:!0,children:[t.jsx("option",{value:"",children:"Slectionnez une anne"}),f.map(Y=>t.jsxs("option",{value:Y.id,children:[Y.name," ",Y.isActive?"(Actuelle)":""]},Y.id))]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de dbut *"}),t.jsx(It,{type:"date",value:D.startDate,onChange:Y=>z(ye=>({...ye,startDate:Y.target.value})),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),t.jsx(It,{type:"date",value:D.endDate,onChange:Y=>z(ye=>({...ye,endDate:Y.target.value}))})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"allDay",checked:D.allDay,onChange:Y=>z(ye=>({...ye,allDay:Y.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("label",{htmlFor:"allDay",className:"text-sm font-medium text-gray-700",children:"vnement toute la journe"})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx(Ee,{type:"button",onClick:()=>{v(!1),T(!1),_(null),K()},variant:"outline",children:"Annuler"}),t.jsx(Ee,{type:"submit",children:M?"Modifier":"Crer"})]})]})]})})}),C&&t.jsx(An,{type:O,title:O==="success"?"Succs":"Erreur",message:N,isVisible:C,onClose:()=>j(!1)})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Chargement..."})]})})},x_=()=>{const[e,a]=y.useState([]),[r,i]=y.useState([]),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[x,g]=y.useState(!1),[p,b]=y.useState(!1),[v,S]=y.useState(!1),[T,M]=y.useState(!1),[_,C]=y.useState(!1),[j,N]=y.useState(null),[A,O]=y.useState(null),[U,D]=y.useState(null),[z,P]=y.useState([]),[se,X]=y.useState(!1),[R,Q]=y.useState(null),[ae,te]=y.useState(null),[F,ce]=y.useState({name:"",startDate:"",endDate:"",isActive:!0}),[J,W]=y.useState({name:"",startDate:"",endDate:"",isActive:!0}),[L,ne]=y.useState({schoolYearId:"",name:"",startDate:"",endDate:"",isActive:!0,orderNumber:1}),[K,me]=y.useState({schoolYearId:"",name:"",startDate:"",endDate:"",isActive:!0,orderNumber:1}),re=y.useCallback(async()=>{try{u(!0);const[Z,H]=await Promise.all([pe.getAllSchoolYears(),pe.getAllTerms()]);Z.success&&Z.data&&a(Z.data),H.success&&H.data&&i(H.data)}catch(Z){console.error("Erreur lors du chargement des annes scolaires:",Z)}finally{u(!1)}},[]);y.useEffect(()=>{re()},[re]);const ie=Z=>r.filter(H=>H.schoolYearId===Z).length,G=async Z=>{if(Z.preventDefault(),!F.name){alert("Veuillez remplir le nom de l'anne scolaire");return}if(F.startDate&&F.endDate&&new Date(F.startDate)>=new Date(F.endDate)){alert("La date de fin doit tre postrieure  la date de dbut");return}try{f(!0);const H={name:F.name,startDate:F.startDate||new Date().toISOString().split("T")[0],endDate:F.endDate||new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0]};F.startDate&&(H.startDate=F.startDate),F.endDate&&(H.endDate=F.endDate),F.isActive!==void 0&&(H.isActive=F.isActive);const B=await pe.createSchoolYear(H);B.success&&B.data?(a([...e,B.data]),g(!1),ce({name:"",startDate:"",endDate:"",isActive:!0}),await re()):alert(B.message||"Erreur lors de la cration")}catch(H){console.error("Erreur lors de la cration:",H),alert("Erreur lors de la cration de l'anne scolaire")}finally{f(!1)}},be=Z=>{O(Z);let H="",B="";Z.startDate&&(Z.startDate instanceof Date?H=Z.startDate.toISOString().split("T")[0]:H=new Date(Z.startDate).toISOString().split("T")[0]),Z.endDate&&(Z.endDate instanceof Date?B=Z.endDate.toISOString().split("T")[0]:B=new Date(Z.endDate).toISOString().split("T")[0]),W({name:Z.name,startDate:H,endDate:B,isActive:Z.isActive}),b(!0)},V=async Z=>{if(Z.preventDefault(),!A||!J.name){alert("Veuillez remplir le nom de l'anne scolaire");return}if(J.startDate&&J.endDate&&new Date(J.startDate)>=new Date(J.endDate)){alert("La date de fin doit tre postrieure  la date de dbut");return}try{f(!0);const H={name:J.name,isActive:J.isActive};J.startDate&&J.startDate.trim()!==""&&(H.startDate=J.startDate),J.endDate&&J.endDate.trim()!==""&&(H.endDate=J.endDate);const B=await pe.updateSchoolYear(A.id,H);B.success&&B.data?(a(e.map(Ne=>Ne.id===A.id?B.data:Ne)),b(!1),O(null),W({name:"",startDate:"",endDate:"",isActive:!0}),await re()):alert(B.message||"Erreur lors de la mise  jour")}catch(H){console.error("Erreur lors de la mise  jour:",H),alert("Erreur lors de la mise  jour de l'anne scolaire")}finally{f(!1)}},je=async()=>{if(U)try{f(!0);const Z=await pe.deleteSchoolYear(U.id);Z.success?(a(e.filter(H=>H.id!==U.id)),M(!1),D(null),await re()):alert(Z.message||"Erreur lors de la suppression")}catch(Z){console.error("Erreur lors de la suppression:",Z),alert("Erreur lors de la suppression")}finally{f(!1)}},E=async Z=>{N(Z),S(!0),X(!0);try{const H=await pe.getTermsBySchoolYear(Z.id);if(H.success)H.success&&H.data?P(H.data):P([]);else{const B=await pe.getAllTerms();if(B.success&&B.data){const Ne=B.data.filter(ke=>ke.schoolYearId===Z.id);P(Ne)}else P([])}}catch(H){console.error("Erreur lors du chargement des trimestres:",H),P([])}finally{X(!1)}},$=async Z=>{if(Z.preventDefault(),!L.name||!L.startDate||!L.endDate){alert("Veuillez remplir tous les champs obligatoires");return}if(new Date(L.startDate)>=new Date(L.endDate)){alert("La date de fin doit tre postrieure  la date de dbut");return}if(z.some(B=>B.orderNumber===L.orderNumber)){alert(`Le numro d'ordre ${L.orderNumber} est dj utilis.`);return}try{f(!0);const B={...L,schoolYearId:j.id},Ne=await pe.createTerm(B);if(Ne.success&&Ne.data){const ke=[...z,Ne.data];P(ke),i([...r,Ne.data]);const q=ke.map(ge=>ge.orderNumber).sort((ge,Te)=>ge-Te);let le=1;for(const ge of q)if(ge===le)le++;else break;ne({schoolYearId:j.id,name:"",startDate:"",endDate:"",isActive:!0,orderNumber:le}),await re()}else alert(Ne.message||"Erreur lors de la cration")}catch(B){console.error("Erreur lors de la cration:",B),alert("Erreur lors de la cration du trimestre")}finally{f(!1)}},ue=Z=>{Q(Z);let H="",B="";if(Z.startDate)if(Z.startDate instanceof Date)H=Z.startDate.toISOString().split("T")[0];else{const Ne=new Date(Z.startDate);isNaN(Ne.getTime())||(H=Ne.toISOString().split("T")[0])}if(Z.endDate)if(Z.endDate instanceof Date)B=Z.endDate.toISOString().split("T")[0];else{const Ne=new Date(Z.endDate);isNaN(Ne.getTime())||(B=Ne.toISOString().split("T")[0])}me({schoolYearId:Z.schoolYearId,name:Z.name||"",startDate:H,endDate:B,isActive:Z.isActive??!0,orderNumber:Z.orderNumber??1})},Y=async Z=>{if(Z.preventDefault(),!R)return;if(!K.name||!K.startDate||!K.endDate||K.startDate.trim()===""||K.endDate.trim()===""){alert("Veuillez remplir tous les champs obligatoires");return}const H=new Date(K.startDate),B=new Date(K.endDate);if(isNaN(H.getTime())||isNaN(B.getTime())){alert("Les dates saisies ne sont pas valides");return}if(H>=B){alert("La date de fin doit tre postrieure  la date de dbut");return}if(z.some(ke=>ke.orderNumber===K.orderNumber&&ke.id!==R.id)){alert(`Le numro d'ordre ${K.orderNumber} est dj utilis.`);return}try{f(!0);const ke={name:K.name||R.name,startDate:K.startDate,endDate:K.endDate,schoolYearId:K.schoolYearId||R.schoolYearId,isActive:K.isActive!==void 0?K.isActive:R.isActive,orderNumber:K.orderNumber!==void 0?K.orderNumber:R.orderNumber},q=await pe.updateTerm(R.id,ke);if(q.success&&q.data){const le=z.map(ge=>ge.id===R.id?q.data:ge);P(le),i(r.map(ge=>ge.id===R.id?q.data:ge)),Q(null),me({schoolYearId:"",name:"",startDate:"",endDate:"",isActive:!0,orderNumber:1}),await re()}else alert(q.message||"Erreur lors de la mise  jour")}catch(ke){console.error("Erreur lors de la mise  jour:",ke),alert("Erreur lors de la mise  jour du trimestre")}finally{f(!1)}},ye=async()=>{if(ae)try{f(!0);const Z=await pe.deleteTerm(ae.id);Z.success?(P(z.filter(H=>H.id!==ae.id)),i(r.filter(H=>H.id!==ae.id)),C(!1),te(null),await re()):alert(Z.message||"Erreur lors de la suppression")}catch(Z){console.error("Erreur lors de la suppression:",Z),alert("Erreur lors de la suppression")}finally{f(!1)}};return t.jsxs(os,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(cs,{title:"Annes scolaires",subtitle:"Grez les annes scolaires et configurez leurs trimestres",icon:We,iconColor:"from-blue-600 to-indigo-600",actions:t.jsx(ua,{onClick:()=>g(!0),icon:is,label:"Nouvelle anne scolaire"})}),t.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:c&&e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Chargement des annes scolaires..."})]}):e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(We,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune anne scolaire cre"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Commencez par crer votre premire anne scolaire"}),t.jsx(Ee,{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Crer une anne scolaire"})]}):t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"grid gap-4",children:e.map(Z=>{const H=Z.startDate&&Z.endDate;return t.jsxs("div",{className:`flex items-center justify-between p-6 rounded-lg border ${H?"bg-gradient-to-r from-gray-50 to-blue-50 border-gray-200":"bg-gradient-to-r from-red-50 to-red-100 border-red-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${H?"bg-blue-100":"bg-red-200"}`,children:t.jsx(We,{className:`w-6 h-6 ${H?"text-blue-600":"text-red-600"}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:`text-lg font-semibold ${H?"text-gray-900":"text-red-900"}`,children:Z.name}),t.jsxs("div",{className:`flex items-center gap-4 text-sm mt-1 ${H?"text-gray-600":"text-red-700"}`,children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(as,{className:"w-4 h-4"}),H?t.jsxs(t.Fragment,{children:[new Date(Z.startDate).toLocaleDateString()," ","- ",new Date(Z.endDate).toLocaleDateString()]}):"Dates non dfinies"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ps,{className:"w-4 h-4"}),ie(Z.id)," trimestre",ie(Z.id)>1?"s":""]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Z.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Z.isActive?"Active":"Inactive"}),t.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>E(Z),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[t.jsx(Qi,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Configurer"})]}),t.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>be(Z),className:"text-orange-600 hover:text-orange-700",children:t.jsx(Pi,{className:"w-4 h-4"})}),t.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{D(Z),M(!0)},className:"text-red-600 hover:text-red-700",children:t.jsx(vn,{className:"w-4 h-4"})})]})]},Z.id)})})})})]}),t.jsx(xt,{isOpen:x,onClose:()=>{g(!1),ce({name:"",startDate:"",endDate:"",isActive:!0})},title:"Crer une anne scolaire",size:"md",children:t.jsxs("form",{onSubmit:G,className:"space-y-4",children:[t.jsx(ze,{label:"Nom de l'anne scolaire",value:F.name,onChange:Z=>ce({...F,name:Z.target.value}),placeholder:"Ex: Anne scolaire 2024-2025",required:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ze,{label:"Date de dbut (optionnel)",type:"date",value:F.startDate,onChange:Z=>ce({...F,startDate:Z.target.value})}),t.jsx(ze,{label:"Date de fin (optionnel)",type:"date",value:F.endDate,onChange:Z=>ce({...F,endDate:Z.target.value})})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:F.isActive,onChange:Z=>ce({...F,isActive:Z.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Anne scolaire active"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>{g(!1),ce({name:"",startDate:"",endDate:"",isActive:!0})},className:"flex-1",children:"Annuler"}),t.jsx(Ee,{type:"submit",disabled:d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Cration...":"Crer"})]})]})}),t.jsx(xt,{isOpen:p,onClose:()=>{b(!1),O(null),W({name:"",startDate:"",endDate:"",isActive:!0})},title:"Modifier l'anne scolaire",size:"md",children:t.jsxs("form",{onSubmit:V,className:"space-y-4",children:[t.jsx(ze,{label:"Nom de l'anne scolaire",value:J.name,onChange:Z=>W({...J,name:Z.target.value}),placeholder:"Ex: Anne scolaire 2024-2025",required:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ze,{label:"Date de dbut (optionnel)",type:"date",value:J.startDate||"",onChange:Z=>W({...J,startDate:Z.target.value})}),t.jsx(ze,{label:"Date de fin (optionnel)",type:"date",value:J.endDate||"",onChange:Z=>W({...J,endDate:Z.target.value})})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"editIsActive",checked:J.isActive,onChange:Z=>W({...J,isActive:Z.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"editIsActive",className:"ml-2 block text-sm text-gray-700",children:"Anne scolaire active"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>{b(!1),O(null),W({name:"",startDate:"",endDate:"",isActive:!0})},className:"flex-1",children:"Annuler"}),t.jsx(Ee,{type:"submit",disabled:d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Mise  jour...":"Mettre  jour"})]})]})}),t.jsx(xt,{isOpen:v,onClose:()=>{S(!1),N(null),P([]),Q(null)},title:"Configuration des trimestres",subtitle:j?.name,size:"full",children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:R?"Modifier le trimestre":"Ajouter un trimestre"}),t.jsxs("form",{onSubmit:R?Y:$,className:"space-y-4",children:[t.jsx(ze,{label:"Nom du trimestre ou du semestre",value:R?K.name:L.name,onChange:Z=>R?me({...K,name:Z.target.value}):ne({...L,name:Z.target.value}),placeholder:"Ex: Trimestre 1",required:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ze,{label:"Date de dbut",type:"date",value:R?K.startDate:L.startDate,onChange:Z=>R?me({...K,startDate:Z.target.value}):ne({...L,startDate:Z.target.value}),required:!0}),t.jsx(ze,{label:"Date de fin",type:"date",value:R?K.endDate:L.endDate,onChange:Z=>R?me({...K,endDate:Z.target.value}):ne({...L,endDate:Z.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Numro d'ordre"}),!R&&t.jsx("button",{type:"button",onClick:()=>{const Z=z.map(B=>B.orderNumber).sort((B,Ne)=>B-Ne);let H=1;for(const B of Z)if(B===H)H++;else break;ne({...L,orderNumber:H})},className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Suggrer auto"})]}),t.jsx(ze,{type:"number",value:R?K.orderNumber||"":L.orderNumber||"",onChange:Z=>R?me({...K,orderNumber:parseInt(Z.target.value)||1}):ne({...L,orderNumber:parseInt(Z.target.value)||1}),min:"1",required:!0}),z.some(Z=>Z.orderNumber===(R?K.orderNumber:L.orderNumber)&&Z.id!==R?.id)&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Ce numro est dj utilis"})]}),R&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"editTermIsActive",checked:K.isActive,onChange:Z=>me({...K,isActive:Z.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"editTermIsActive",className:"ml-2 block text-sm text-gray-700",children:"Trimestre actif"})]}),t.jsxs("div",{className:"flex gap-3",children:[R&&t.jsx(Ee,{type:"button",variant:"outline",onClick:()=>{Q(null),me({name:"",startDate:"",endDate:"",isActive:!0,orderNumber:1})},className:"flex-1",children:"Annuler"}),t.jsx(Ee,{type:"submit",disabled:d,className:`w-full bg-blue-600 hover:bg-blue-700 ${R?"flex-1":""}`,children:d?R?"Mise  jour...":"Ajout...":R?"Mettre  jour":"Ajouter le trimestre"})]})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Trimestres ou semestres existants (",z.length,")"]}),t.jsx("div",{className:"space-y-3",children:se?t.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Chargement des trimestres..."})]}):z.length===0?t.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[t.jsx(ps,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Aucun trimestre cr"})]}):z.sort((Z,H)=>Z.orderNumber-H.orderNumber).map(Z=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-bold text-blue-600",children:Z.orderNumber})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:Z.name}),t.jsxs("p",{className:"text-xs text-gray-600",children:[new Date(Z.startDate).toLocaleDateString()," -"," ",new Date(Z.endDate).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Z.isActive?"Actif":"Inactif"}),t.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>ue(Z),className:"text-orange-600 hover:text-orange-700",children:t.jsx(Pi,{className:"w-3 h-3"})}),t.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{te(Z),C(!0)},className:"text-red-600 hover:text-red-700",children:t.jsx(vn,{className:"w-3 h-3"})})]})]},Z.id))})]})]})}),t.jsx(sr,{isOpen:T,onClose:()=>{M(!1),D(null)},onConfirm:je,title:"Supprimer l'anne scolaire",message:`tes-vous sr de vouloir supprimer l'anne scolaire "${U?.name}" ? Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",loading:d}),t.jsx(sr,{isOpen:_,onClose:()=>{C(!1),te(null)},onConfirm:ye,title:"Supprimer le trimestre",message:`tes-vous sr de vouloir supprimer le trimestre "${ae?.name}" ? Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",loading:d})]})},g_=()=>{const[,e]=y.useState(!0),[a,r]=y.useState({totalClasses:0,totalSubjects:0,totalTeachers:0,totalStudents:0,totalTeachingAssignments:0});y.useEffect(()=>{i()},[]);const i=async()=>{try{e(!0);const[u,d,f,x,g]=await Promise.all([pe.getAllClasses(),pe.getAllSubjects(),pe.getAllTeachers(),pe.getAllStudents(),pe.getAllTeachingAssignments()]);r({totalClasses:u.success&&u.data?.length||0,totalSubjects:d.success&&d.data?.length||0,totalTeachers:f.success&&f.data?.length||0,totalStudents:x.success&&x.data?.length||0,totalTeachingAssignments:g.success&&g.data?.length||0})}catch(u){console.error("Erreur lors du chargement des statistiques:",u)}finally{e(!1)}},c=()=>{alert("Fonctionnalit d'export  implmenter")};return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Dashboard",path:"/dashboard"},{label:"Assurance Qualit"}]}),t.jsx(cs,{title:"Assurance Qualit & RP",subtitle:"Suivi qualit, volumes horaires, modules",icon:Bs,iconColor:"from-amber-600 to-orange-600"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(qs,{className:"w-5 h-5 text-blue-600"})})}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalClasses}),t.jsx("div",{className:"text-sm text-gray-600",children:"Classes"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx(qs,{className:"w-5 h-5 text-purple-600"})})}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalSubjects}),t.jsx("div",{className:"text-sm text-gray-600",children:"Matires"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(Bs,{className:"w-5 h-5 text-green-600"})})}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalTeachers}),t.jsx("div",{className:"text-sm text-gray-600",children:"Enseignants"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:t.jsx(Bs,{className:"w-5 h-5 text-orange-600"})})}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalStudents}),t.jsx("div",{className:"text-sm text-gray-600",children:"tudiants"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:t.jsx(ps,{className:"w-5 h-5 text-indigo-600"})})}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalTeachingAssignments}),t.jsx("div",{className:"text-sm text-gray-600",children:"Affectations"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions rapides"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs(Ee,{onClick:c,variant:"outline",className:"flex items-center justify-center gap-2",children:[t.jsx(uj,{className:"w-4 h-4"}),"Exporter les donnes"]}),t.jsxs(Ee,{onClick:()=>window.location.href="/classes-subjects",variant:"outline",className:"flex items-center justify-center gap-2",children:[t.jsx(cj,{className:"w-4 h-4"}),"Voir les classes"]}),t.jsxs(Ee,{onClick:()=>window.location.href="/calendar",variant:"outline",className:"flex items-center justify-center gap-2",children:[t.jsx(ps,{className:"w-4 h-4"}),"Calendrier"]})]})]}),t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-white text-sm font-bold",children:""})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-amber-900 mb-1",children:"Module Assurance Qualit"}),t.jsx("p",{className:"text-amber-800 text-sm",children:"Cette page permet de suivre la qualit de l'enseignement, les volumes horaires, et les modules. Les fonctionnalits compltes seront ajoutes progressivement."})]})]})})]})})},p_=()=>{const e=Ht(),a=[{id:"subject-class",title:"Matires  Classes",description:"Affecter des matires aux classes avec coefficients et heures",icon:qs,color:"from-blue-500 to-blue-600",path:"/settings/subject-class-assignment"},{id:"student-class",title:"lves  Classes",description:"Inscrire des lves dans des classes avec dates d'inscription",icon:Qt,color:"from-green-500 to-green-600",path:"/settings/student-class-assignment"},{id:"teacher-subject",title:"Enseignants  Matires-Classes",description:"Affecter des enseignants aux matires dans les classes",icon:We,color:"from-purple-500 to-purple-600",path:"/settings/teacher-subject-assignment"}];return t.jsx(os,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Va,{items:[{label:"Paramtres",path:"/settings"},{label:"Affectations"}]}),t.jsx(cs,{title:"Affectations",subtitle:"Grer les affectations entre lves, classes, matires et enseignants",icon:Qi,iconColor:"from-blue-600 to-indigo-600"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(r=>t.jsxs("div",{onClick:()=>e(r.path),className:"group bg-white rounded-xl p-6 border border-gray-200 hover:border-gray-300 hover:shadow-lg transition-all duration-200 cursor-pointer",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${r.color} rounded-lg flex items-center justify-center shadow-md`,children:t.jsx(r.icon,{className:"w-6 h-6 text-white"})}),t.jsx(Es,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 transition-colors"})]}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:r.title}),t.jsx("p",{className:"text-sm text-gray-600",children:r.description})]},r.id))})]})})},b_=()=>{const e=Ht(),[a,r]=y.useState(null),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState(null),[b,v]=y.useState(""),[S,T]=y.useState(""),[M,_]=y.useState(!0),[C,j]=y.useState(!1),[N,A]=y.useState(null),[O,U]=y.useState(""),[D,z]=y.useState(""),[P,se]=y.useState([]),[X,R]=y.useState(""),[Q,ae]=y.useState("create");y.useEffect(()=>{const ie=localStorage.getItem("user");if(ie)try{r(JSON.parse(ie))}catch{e("/login")}else e("/login")},[e]),y.useEffect(()=>{if(!a)return;(async()=>{_(!0);try{const[G,be,V]=await Promise.all([pe.getAllStudents(),pe.getAllClasses(),pe.getAllStudentClasses()]);G.success&&c(G.data||[]),be.success&&d(be.data||[]),V.success&&x(V.data||[])}catch{console.error("Erreur chargement")}finally{_(!1)}})()},[a]);const te=async ie=>{if(ie.preventDefault(),P.length===0||!g||!b){A({type:"error",title:"Erreur",message:"Veuillez slectionner au moins un lve, une classe et une date de dbut",isVisible:!0});return}if(!L(b,S)){A({type:"error",title:"Erreur de dates",message:"La date de fin doit tre suprieure  la date de dbut",isVisible:!0});return}j(!0);try{const G=P.map(je=>pe.createStudentClass({studentId:je,classId:g,startDate:b,endDate:S||void 0})),V=(await Promise.all(G)).filter(je=>je.success).length;if(V===P.length){const je=await pe.getAllStudentClasses();je.success&&x(je.data||[]),A({type:"success",title:"Succs",message:`${V} affectation(s) cre(s) avec succs`,isVisible:!0}),W(),v(""),T("")}else A({type:"error",title:"Erreur",message:`${V}/${P.length} affectations cres avec succs`,isVisible:!0})}catch{A({type:"error",title:"Erreur",message:"Erreur lors de la cration des affectations",isVisible:!0})}finally{j(!1)}},F=async ie=>{try{const G=await pe.deleteStudentClass(ie);if(G.success){const be=await pe.getAllStudentClasses();be.success&&x(be.data||[]),A({type:"success",title:"Succs",message:"Affectation supprime avec succs",isVisible:!0})}else A({type:"error",title:"Erreur",message:G.error||"Erreur lors de la suppression",isVisible:!0})}catch(G){console.error("Erreur lors de la suppression:",G),A({type:"error",title:"Erreur",message:G instanceof Error?G.message:"Erreur lors de la suppression",isVisible:!0})}},ce=ie=>{se(G=>G.includes(ie)?G.filter(be=>be!==ie):[...G,ie])},J=ie=>{p(ie)},W=()=>{se([]),p(null),U(""),z(""),R("")},L=(ie,G)=>{if(ie&&G){const be=new Date(ie),V=new Date(G);return be>=V?(R("La date de fin doit tre suprieure  la date de dbut"),!1):(R(""),!0)}else return R(""),!0},ne=ie=>{const G=ie.target.value;T(G),L(b,G)},K=ie=>{const G=ie.target.value;v(G),S&&L(G,S)},me=i.filter(ie=>{const G=f.some(V=>V.student?.id===ie.id),be=`${ie.user?.firstName||""} ${ie.user?.lastName||""} ${ie.matricule||""}`.toLowerCase().includes(O.toLowerCase());return!G&&be}),re=u.filter(ie=>`${ie.name} ${ie.level} ${ie.code||""}`.toLowerCase().includes(D.toLowerCase()));return a?M?t.jsx(bs,{user:a,children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t.jsxs(bs,{user:a,children:[t.jsx("style",{children:`
        .scrollbar-thin::-webkit-scrollbar {
          width: 6px;
        }
        .scrollbar-thin::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),t.jsxs("div",{className:"p-6 max-w-7xl mx-auto max-h-screen overflow-y-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(Ee,{onClick:()=>e("/settings"),variant:"outline",size:"sm",children:" Retour"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Affectation lves-Classes"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Grer l'affectation des lves aux classes"})]})]}),t.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total lves"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.filter(ie=>!f.some(G=>G.student?.id===ie.id)).length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Non Affects"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Classes"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Affectations"})]})]})]}),N&&t.jsx(An,{type:N.type,title:N.title,message:N.message,isVisible:N.isVisible,onClose:()=>A(null)}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[t.jsx("button",{onClick:()=>ae("create"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${Q==="create"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Nouvelle affectation"]})}),t.jsx("button",{onClick:()=>ae("list"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${Q==="list"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Affectations existantes",t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:f.length})]})})]})}),t.jsxs("div",{className:"p-6",children:[Q==="create"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Crer une nouvelle affectation"}),t.jsxs("form",{onSubmit:te,className:"space-y-4",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Slectionner les tudiants *"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Seuls les tudiants non encore affects  une classe sont affichs"}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Rechercher un tudiant...",value:O,onChange:ie=>U(ie.target.value),className:"w-full pl-10 pr-4 py-2 text-black border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})}),t.jsxs("div",{className:"h-64 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[me.map(ie=>{const G=ie.photo,be=ie.user?.firstName||"Prnom",V=ie.user?.lastName||"Nom";return t.jsx("div",{onClick:()=>ce(ie.id),className:`p-3 rounded-lg cursor-pointer transition-colors ${P.includes(ie.id)?"bg-blue-500 border-2 border-blue-200":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${P.includes(ie.id)?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:P.includes(ie.id)&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center flex-shrink-0",children:G?t.jsx("img",{src:G,alt:`${be} ${V}`,className:"w-full h-full object-cover"}):t.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500 text-xs font-semibold",children:[be.charAt(0),V.charAt(0)]})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:[be," ",V]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Matricule: ",ie.matricule||"N/A"]})]})]})},ie.id)}),me.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:O?"Aucun tudiant non affect trouv pour cette recherche":"Tous les tudiants sont dj affects  une classe"})]}),P.length>0&&t.jsxs("div",{className:"mt-3 text-sm text-blue-600",children:[P.length," tudiant(s) slectionn(s)"]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Slectionner la classe *"}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Rechercher une classe...",value:D,onChange:ie=>z(ie.target.value),className:"w-full pl-10 text-black pr-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})}),t.jsxs("div",{className:"h-48 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[re.map(ie=>t.jsx("div",{onClick:()=>J(ie.id),className:`p-3 rounded-lg cursor-pointer transition-colors ${g===ie.id?"bg-green-300 border-2 border-green-200":"bg-gray-200 text-white border-2 border-gray-700 hover:bg-gray-100"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g===ie.id?"bg-green-500 border-green-500":"border-gray-300"}`}),t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx(We,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:[ie.name,ie.classCategory?.institution&&t.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-600",children:["(",ie.classCategory.institution.code,")"]})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Niveau: ",ie.level,"  Code:"," ",ie.code||"N/A"]})]})]})},ie.id)),re.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune classe trouve"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de dbut *"}),t.jsx(It,{type:"date",value:b,onChange:K,max:new Date().toISOString().split("T")[0],required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin (optionnel)"}),t.jsx(It,{type:"date",value:S,onChange:ne,className:X?"border-red-500 focus:border-red-500":""}),X&&t.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),X]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(Ee,{type:"submit",disabled:C||P.length===0||!g||!!X,className:`flex-1 ${X?"opacity-50 cursor-not-allowed":""}`,children:C?"Cration...":X?"Corriger les dates":`Crer ${P.length} affectation(s)`}),t.jsx(Ee,{type:"button",onClick:W,variant:"outline",disabled:P.length===0&&!g,children:"Effacer"})]})]})]}),Q==="list"&&t.jsx("div",{children:f.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune affectation"}),t.jsx("p",{className:"text-gray-500",children:"Commencez par crer votre premire affectation"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"tudiant"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matricule"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classe"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date dbut"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date fin"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(ie=>{const G=!ie.endDate||new Date(ie.endDate)>new Date,be=new Date(ie.startDate),V=ie.endDate?new Date(ie.endDate):null,je=ie.student?.photo,E=ie.student?.user?.firstName||"Prnom",$=ie.student?.user?.lastName||"Nom";return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:je?t.jsx("img",{src:je,alt:`${E} ${$}`,className:"w-full h-full object-cover"}):t.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500 text-xs font-semibold",children:[E.charAt(0),$.charAt(0)]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E," ",$]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:ie.student?.matricule||"N/A"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:ie.class?.name||"Classe inconnue"}),t.jsxs("div",{className:"text-xs text-gray-500",children:[ie.class?.level||"N/A"," "," ",ie.class?.code||"N/A"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-semibold text-blue-600",children:ie.class?.classCategory?.institution?.code||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:be.toLocaleDateString("fr-FR")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:V?V.toLocaleDateString("fr-FR"):"En cours"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[t.jsx("div",{className:`w-2 h-2 rounded-full mr-1.5 ${G?"bg-green-400":"bg-gray-400"}`}),G?"Actif":"Termin"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsx(Ee,{onClick:()=>F(ie.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",children:"Supprimer"})})]},ie.id)})})]})})})]})]})]})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})})},N1=({isOpen:e,onClose:a,title:r="Erreur",message:i,details:c,statusCode:u})=>{if(!e)return null;const d=()=>u?u>=500?"bg-red-600":u>=400?"bg-orange-500":"bg-red-500":"bg-red-500",f=()=>{if(!u)return"";switch(u){case 400:return"Requte invalide";case 401:return"Non autoris";case 403:return"Accs interdit";case 404:return"Ressource non trouve";case 409:return"Conflit";case 422:return"Donnes invalides";case 500:return"Erreur serveur";default:return`Erreur ${u}`}};return fh.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all",onClick:x=>x.stopPropagation(),children:[t.jsxs("div",{className:`${d()} text-white p-4 rounded-t-lg flex justify-between items-center`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(xh,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:r}),u&&t.jsx("p",{className:"text-sm opacity-90",children:f()})]})]}),t.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white/20 transition-colors",children:t.jsx(Sn,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(Pc,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-gray-800 text-base leading-relaxed",children:i}),c&&t.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium mb-1",children:"Dtails techniques :"}),t.jsx("p",{className:"text-sm text-gray-700 font-mono break-words",children:c})]})]})]})}),t.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:t.jsx(Ee,{onClick:a,variant:"primary",children:"J'ai compris"})})]})]})}),document.body)},y_=()=>{const e=Ht(),[a,r]=y.useState(),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState(""),[b,v]=y.useState(""),[S,T]=y.useState("1"),[M,_]=y.useState(""),[C,j]=y.useState(!1),[N,A]=y.useState(!0),[O,U]=y.useState(!1),[D,z]=y.useState(null),[P,se]=y.useState({show:!1,assignmentId:null,assignmentInfo:""}),[X,R]=y.useState({isOpen:!1,message:""}),[Q,ae]=y.useState("create"),[te,F]=y.useState(""),[ce,J]=y.useState("");y.useEffect(()=>{const re=localStorage.getItem("user");if(re)try{r(JSON.parse(re))}catch(ie){console.error("Erreur parsing user data:",ie),e("/login")}else e("/login")},[e]),y.useEffect(()=>{if(!a)return;(async()=>{A(!0);try{const[ie,G,be]=await Promise.all([pe.getAllSubjects(),pe.getAllClasses(),pe.getAllClassSubjects()]);ie.success?(console.log(" Sujets chargs:",ie.data),console.log(" Nombre de sujets:",ie.data?.length),c(ie.data||[])):console.error(" Erreur chargement sujets:",ie.error),G.success?(console.log(" Classes charges:",G.data),console.log(" Nombre de classes:",G.data?.length),d(G.data||[])):console.error(" Erreur chargement classes:",G.error),be.success?(console.log(" Affectations charges:",be.data),x(be.data||[])):console.error(" Erreur chargement affectations:",be.error)}catch(ie){console.error("Erreur chargement:",ie)}finally{A(!1)}})()},[a]);const W=async re=>{if(re.preventDefault(),!g||!b||!S){z({type:"error",title:"Erreur",message:"Veuillez remplir tous les champs obligatoires",isVisible:!0});return}U(!0);try{const ie=await pe.createClassSubject({classId:b,subjectId:g,coefficient:parseInt(S),weeklyHours:M?parseInt(M):0,isOptional:C});if(ie.success){const G=await pe.getAllClassSubjects();G.success&&x(G.data||[]),z({type:"success",title:"Succs",message:"Affectation cre avec succs",isVisible:!0}),p(""),v(""),T("1"),_(""),j(!1)}else ie.statusCode===409?R({isOpen:!0,message:ie.error||"Conflit dtect lors de la cration",details:ie.error,statusCode:409}):R({isOpen:!0,message:ie.error||"Erreur lors de la cration",details:ie.error,statusCode:ie.statusCode})}catch(ie){console.error("Erreur lors de la cration:",ie),R({isOpen:!0,message:ie instanceof Error?ie.message:"Erreur lors de la cration",details:ie instanceof Error?ie.stack:void 0,statusCode:void 0})}finally{U(!1)}},L=(re,ie)=>{const G=ie.subject?.name||"Matire inconnue",be=ie.class?.name||"Classe inconnue",V=`${G}  ${be}`;se({show:!0,assignmentId:re,assignmentInfo:V})},ne=async()=>{if(P.assignmentId)try{const re=await pe.deleteClassSubject(P.assignmentId);if(re.success){se({show:!1,assignmentId:null,assignmentInfo:""});const ie=await pe.getAllClassSubjects();ie.success&&x(ie.data||[]),z({type:"success",title:"Succs",message:"Affectation supprime avec succs",isVisible:!0})}else re.statusCode===409?R({isOpen:!0,message:re.error||"Conflit dtect lors de la suppression",details:re.error,statusCode:409}):R({isOpen:!0,message:re.error||"Erreur lors de la suppression",details:re.error,statusCode:re.statusCode})}catch(re){console.error("Erreur lors de la suppression:",re),R({isOpen:!0,message:re instanceof Error?re.message:"Erreur lors de la suppression",details:re instanceof Error?re.stack:void 0,statusCode:void 0})}finally{se({show:!1,assignmentId:null,assignmentInfo:""})}};if(!a)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})});const K=i.filter(re=>re.name.toLowerCase().includes(te.toLowerCase())),me=u.filter(re=>re.name.toLowerCase().includes(ce.toLowerCase()));return N?t.jsx(bs,{user:a,children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t.jsxs(bs,{user:a,children:[t.jsx("style",{children:`
        .scrollbar-thin::-webkit-scrollbar {
          width: 6px;
        }
        .scrollbar-thin::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(Ee,{onClick:()=>e("/settings"),variant:"outline",size:"sm",children:" Retour"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Affectation Matires-Classes"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Grer l'affectation des matires aux classes"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Matires"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Classes"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Affectations"})]})]})]}),D&&t.jsx(An,{type:D.type,title:D.title,message:D.message,isVisible:D.isVisible,onClose:()=>z(null)}),(i.length===0||u.length===0)&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-white text-sm font-bold",children:""})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-yellow-900 mb-1",children:"Donnes manquantes"}),t.jsx("p",{className:"text-yellow-800 text-sm",children:i.length===0&&u.length===0?"Aucune matire et aucune classe disponibles. Veuillez d'abord crer des matires et des classes.":i.length===0?"Aucune matire disponible. Veuillez d'abord crer des matires.":"Aucune classe disponible. Veuillez d'abord crer des classes."}),t.jsxs("div",{className:"flex gap-2 mt-3",children:[i.length===0&&t.jsx(Ee,{onClick:()=>e("/classes-subjects"),variant:"outline",size:"sm",children:"Crer des matires"}),u.length===0&&t.jsx(Ee,{onClick:()=>e("/classes-subjects"),variant:"outline",size:"sm",children:"Crer des classes"})]})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[t.jsx("button",{onClick:()=>ae("create"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${Q==="create"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Nouvelle affectation"]})}),t.jsx("button",{onClick:()=>ae("list"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${Q==="list"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Affectations existantes",t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:f.length})]})})]})}),t.jsxs("div",{className:"p-6",children:[Q==="create"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Crer une nouvelle affectation matire-classe"}),t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Slectionner la matire *"}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Rechercher une matire...",value:te,onChange:re=>F(re.target.value),className:"w-full pl-10 pr-4 py-2 text-black border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})}),t.jsxs("div",{className:"h-48 overflow-y-auto border border-gray-500 rounded-lg p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[K.map(re=>t.jsx("div",{onClick:()=>p(re.id),className:`p-3 rounded-lg cursor-pointer transition-colors ${g===re.id?"bg-purple-300 border-2 border-purple-200":"bg-gray-200 border-2 border-transparent hover:bg-gray-100"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${g===re.id?"bg-purple-500 border-purple-500":"border-gray-300"}`,children:g===re.id&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:re.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Code: ",re.code||"N/A"]})]})]})},re.id)),K.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune matire trouve"})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Slectionner la classe *"}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Rechercher une classe...",value:ce,onChange:re=>J(re.target.value),className:"w-full pl-10 pr-4 py-2 text-black border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})}),t.jsxs("div",{className:"h-48 overflow-y-auto border border-gray-500 rounded-lg p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[me.map(re=>t.jsx("div",{onClick:()=>v(re.id),className:`p-3 rounded-lg cursor-pointer transition-colors ${b===re.id?"bg-green-300 border-2 border-green-200":"bg-gray-200 border-2 border-gray-500 hover:bg-gray-100"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${b===re.id?"bg-green-500 border-green-500":"border-gray-300"}`,children:b===re.id&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:[re.name,re.classCategory?.institution&&t.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-600",children:["(",re.classCategory.institution.code,")"]})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Niveau: ",re.level,"  Code:"," ",re.code||"N/A"]})]})]})},re.id)),me.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune classe trouve"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coefficient *"}),t.jsx(It,{type:"number",min:"1",max:"10",value:S,onChange:re=>T(re.target.value),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heures hebdomadaires"}),t.jsx(It,{type:"number",min:"1",max:"40",value:M,onChange:re=>_(re.target.value),placeholder:"Optionnel"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isOptional",checked:C,onChange:re=>j(re.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("label",{htmlFor:"isOptional",className:"text-sm text-gray-700",children:"Matire optionnelle"})]}),t.jsx(Ee,{type:"submit",disabled:O,children:O?"Cration...":"Crer l'affectation"})]})]}),Q==="list"&&t.jsx("div",{children:f.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune affectation"}),t.jsx("p",{className:"text-gray-500",children:"Commencez par crer votre premire affectation matire-classe"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matire"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classe"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coefficient"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heures/semaine"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(re=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:re.subject?.name||"Matire inconnue"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:re.class?.name||"Classe inconnue"}),t.jsx("div",{className:"text-xs text-gray-500",children:re.class?.level||"N/A"})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-semibold text-blue-600",children:"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:re.coefficient})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:re.weeklyHours?`${re.weeklyHours}h`:"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:re.isOptional?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Optionnel"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Obligatoire"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsx(Ee,{onClick:()=>L(re.id,re),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",children:"Supprimer"})})]},re.id))})]})})})]})]})]}),P.show&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("div",{className:"flex items-center mb-4",children:t.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirmer la suppression"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"tes-vous sr de vouloir supprimer cette affectation ?"}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:t.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.assignmentInfo})}),t.jsx("p",{className:"text-xs text-red-600 mb-6",children:"Cette action est irrversible."})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx(Ee,{onClick:()=>se({show:!1,assignmentId:null,assignmentInfo:""}),variant:"outline",size:"sm",children:"Annuler"}),t.jsx(Ee,{onClick:ne,variant:"outline",size:"sm",className:"bg-red-600 text-white hover:bg-red-700 border-red-600",children:"Supprimer"})]})]})}),t.jsx(N1,{isOpen:X.isOpen,onClose:()=>R({isOpen:!1,message:""}),title:"Erreur",message:X.message,details:X.details,statusCode:X.statusCode})]})},v_=()=>{const e=Ht(),[a,r]=y.useState(null),[i,c]=y.useState([]),[u,d]=y.useState([]),[f,x]=y.useState([]),[g,p]=y.useState(0),[b,v]=y.useState([]),[S,T]=y.useState(""),[M,_]=y.useState(""),[C,j]=y.useState(!0),[N,A]=y.useState(!1),[O,U]=y.useState({show:!1,assignmentId:null,assignmentInfo:""}),[D,z]=y.useState({show:!1,teacherId:null,classSubjectIds:[],isPrincipal:!1}),[P,se]=y.useState(new Set),[X,R]=y.useState(null),[Q,ae]=y.useState({isOpen:!1,message:""}),[te,F]=y.useState("create"),[ce,J]=y.useState(""),[W,L]=y.useState("");y.useEffect(()=>{const $=localStorage.getItem("user");if($)try{r(JSON.parse($))}catch{e("/login")}else e("/login")},[e]),y.useEffect(()=>{if(!a)return;(async()=>{j(!0);try{const[ue,Y,ye]=await Promise.all([pe.getAllTeachers(),pe.getAllClassSubjects(),pe.getAllTeachingAssignments()]);ue.success&&c(ue.data||[]),Y.success&&d(Y.data||[]),ye.success&&x(ye.data||[])}catch(ue){console.error("Erreur chargement:",ue)}finally{j(!1)}})()},[a]);const ne=($,ue)=>{const Y=`${ue.teacher?.user?.firstName||"Prnom"} ${ue.teacher?.user?.lastName||"Nom"}`,ye=`${ue.classSubject?.subject?.name||"Matire"} - ${ue.classSubject?.class?.name||"Classe"}`,Z=`${Y}  ${ye}`;U({show:!0,assignmentId:$,assignmentInfo:Z})},K=async()=>{if(O.assignmentId)try{const $=await pe.deleteTeachingAssignment(O.assignmentId);if($.success){U({show:!1,assignmentId:null,assignmentInfo:""});const ue=await pe.getAllTeachingAssignments();ue.success&&x(ue.data||[]),R({type:"success",title:"Succs",message:"Affectation supprime avec succs",isVisible:!0})}else $.statusCode===409?ae({isOpen:!0,message:$.error||"Conflit dtect lors de la suppression",details:$.error,statusCode:409}):ae({isOpen:!0,message:$.error||"Erreur lors de la suppression",details:$.error,statusCode:$.statusCode})}catch($){console.error("Erreur lors de la suppression:",$),ae({isOpen:!0,message:$ instanceof Error?$.message:"Erreur lors de la suppression",details:$ instanceof Error?$.stack:void 0,statusCode:void 0})}finally{U({show:!1,assignmentId:null,assignmentInfo:""})}},me=()=>{U({show:!1,assignmentId:null,assignmentInfo:""})},re=$=>{v(ue=>ue.includes($)?ue.filter(Y=>Y!==$):[...ue,$])},ie=()=>{if(!g||b.length===0){R({type:"error",title:"Erreur",message:"Veuillez slectionner un enseignant et au moins une matire-classe",isVisible:!0});return}z({show:!0,teacherId:g,classSubjectIds:b,isPrincipal:!1})},G=async()=>{if(!(!D.teacherId||D.classSubjectIds.length===0)){A(!0);try{const $=D.classSubjectIds.map(Z=>{const H={teacherId:D.teacherId.toString(),classSubjectId:Z.toString(),startDate:S,endDate:M||void 0};return pe.createTeachingAssignment(H)}),ue=await Promise.all($),Y=ue.filter(Z=>Z.success).length,ye=ue.filter(Z=>!Z.success&&Z.statusCode===409);if(Y>0&&Y<D.classSubjectIds.length){const Z=ye.length,H=ue.filter(ke=>!ke.success&&ke.statusCode!==409);let B=`${Y} affectation(s) cre(s) avec succs. `;Z>0&&(B+=`${Z} affectation(s) dj existante(s) (ignore(s)). `),H.length>0&&(B+=`${H.length} erreur(s) dtecte(s).`),R({type:"warning",title:"Affectation partielle",message:B,isVisible:!0});const Ne=await pe.getAllTeachingAssignments();Ne.success&&x(Ne.data||[]),Y===D.classSubjectIds.length&&(p(0),v([]),T(""),_(""))}else if(ye.length>0&&Y===0){const Z=ye.map(H=>H.error||"Affectation dj existante").join("; ");ae({isOpen:!0,message:"Toutes les affectations slectionnes existent dj",details:Z,statusCode:409})}else if(Y===D.classSubjectIds.length){R({type:"success",title:"Succs",message:`${Y} affectation(s) cre(s) avec succs (${D.classSubjectIds.length} requte(s) envoye(s))`,isVisible:!0}),p(0),v([]),T(""),_("");const Z=await pe.getAllTeachingAssignments();Z.success&&x(Z.data||[])}else{const Z=ue.filter(B=>!B.success),H=Z.map(B=>B.error).filter(B=>B).join("; ");ae({isOpen:!0,message:H||`${Y}/${D.classSubjectIds.length} affectation(s) cre(s)`,details:H,statusCode:Z[0]?.statusCode})}}catch($){console.error("Erreur lors de la cration en lot:",$),ae({isOpen:!0,message:$ instanceof Error?$.message:"Erreur lors de la cration des affectations",details:$ instanceof Error?$.stack:void 0,statusCode:void 0})}finally{A(!1),z({show:!1,teacherId:null,classSubjectIds:[],isPrincipal:!1})}}},be=()=>{z({show:!1,teacherId:null,classSubjectIds:[],isPrincipal:!1})},V=$=>{se(ue=>{const Y=new Set(ue);return Y.has($)?Y.delete($):Y.add($),Y})};if(!a)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})});const je=i.filter($=>`${$.user?.firstName||""} ${$.user?.lastName||""}`.toLowerCase().includes(ce.toLowerCase())),E=u.filter($=>`${$.subject?.name||""} - ${$.class?.name||""}`.toLowerCase().includes(W.toLowerCase()));return C?t.jsx(bs,{user:a,children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t.jsxs(bs,{user:a,children:[t.jsx("style",{children:`
        .scrollbar-thin::-webkit-scrollbar {
          width: 6px;
        }
        .scrollbar-thin::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(Ee,{onClick:()=>e("/settings"),variant:"outline",size:"sm",children:" Retour"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Affectation Enseignants"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Affecter un enseignant  une matire dj prsente dans une classe"})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-white text-sm font-bold",children:""})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Comment a marche ?"}),t.jsx("p",{className:"text-blue-800 text-sm",children:`D'abord, assurez-vous qu'une matire est affecte  une classe via la page "Affectation Matires-Classes". Ensuite, utilisez cette page pour affecter un enseignant  cette matire-classe.`}),t.jsx(Ee,{onClick:()=>e("/settings/subject-class-assignment"),variant:"outline",size:"sm",className:"mt-3",children:"Grer les matires-classes"})]})]})}),t.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Enseignants"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Matires en classe"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-500 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Affectations"})]})]})]}),X&&t.jsx(An,{type:X.type,title:X.title,message:X.message,isVisible:X.isVisible,onClose:()=>R(null)}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[t.jsx("button",{onClick:()=>F("create"),className:`py-4 px-1 border-b-2 font-medium text-sm ${te==="create"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Nouvelle affectation"]})}),t.jsx("button",{onClick:()=>F("list"),className:`py-4 px-1 border-b-2 font-medium text-sm ${te==="list"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Affectations existantes",t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:f.length})]})})]})}),t.jsxs("div",{className:"p-6",children:[te==="create"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Crer une nouvelle affectation enseignant-matire-classe"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Slectionner l'enseignant *"}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Rechercher un enseignant...",value:ce,onChange:$=>J($.target.value),className:"w-full pl-10 pr-4 py-2 text-black border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})}),t.jsxs("div",{className:"h-48 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[je.map($=>t.jsx("div",{onClick:()=>p($.id),className:`p-3 rounded-lg cursor-pointer ${g===$.id?"bg-blue-300 border-2 border-blue-200":"bg-gray-200 border-2 border-gray-500 hover:bg-gray-100"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${g===$.id?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:g===$.id&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:[$.user?.firstName||"Prnom"," ",$.user?.lastName||"Nom"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Spcialit: ",$.speciality||"N/A"]})]})]})},$.id)),je.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun enseignant trouv"})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Slectionner les matires-classes (multiple) *"}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Rechercher une matire-classe...",value:W,onChange:$=>L($.target.value),className:"w-full pl-10 pr-4 py-2 text-black border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})}),t.jsxs("div",{className:"h-48 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[E.map($=>{const ue=b.includes($.id);return t.jsx("div",{onClick:()=>re($.id),className:`p-3 rounded-lg cursor-pointer ${ue?"bg-green-300 border-2 border-green-200":"bg-gray-200 border-2 border-gray-500 hover:bg-gray-100"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${ue?"bg-green-500 border-green-500":"border-gray-300"}`,children:ue&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:$.subject?.name||"Matire"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Classe: ",$.class?.name||"Classe",$.class?.classCategory?.institution&&t.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:["(",$.class.classCategory.institution.code,")"]})," ","(",$.class?.level||"Niveau",")"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Coef: ",$.coefficient," "," ",$.weeklyHours||0,"h/semaine"]})]})]})},$.id)}),b.length>0&&t.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[b.length," matire(s) slectionne(s)"]})]})}),E.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:u.length===0?t.jsxs("div",{children:[t.jsx("p",{children:"Aucune matire-classe disponible"}),t.jsx(Ee,{onClick:()=>e("/settings/subject-class-assignment"),variant:"outline",size:"sm",className:"mt-2",children:"Crer des affectations"})]}):"Aucune matire-classe trouve"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de dbut *"}),t.jsx(It,{type:"date",value:S,onChange:$=>T($.target.value),max:new Date().toISOString().split("T")[0],required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin (optionnel)"}),t.jsx(It,{type:"date",value:M,onChange:$=>_($.target.value)})]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsx(Ee,{type:"button",onClick:ie,disabled:N||b.length===0,className:"flex-1 bg-green-600 hover:bg-green-700",children:N?"Affectation...":`Affecter ${b.length} matire(s)`})})]})]}),te==="list"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Affectations par enseignant"}),t.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:(()=>{const $=f.reduce((Y,ye)=>{const Z=ye.teacher?.id;return Z&&(Y[Z]||(Y[Z]={teacher:ye.teacher,assignments:[]}),Y[Z].assignments.push(ye)),Y},{}),ue=Object.values($);return ue.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune affectation"}),t.jsx("p",{className:"text-gray-500",children:"Commencez par crer des affectations d'enseignants"})]}):ue.map(Y=>{const ye=Y.teacher.id.toString(),Z=P.has(ye);return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200 cursor-pointer hover:from-blue-100 hover:to-indigo-100",onClick:()=>V(ye),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[Y.teacher.user?.firstName||"Prnom inconnu"," ",Y.teacher.user?.lastName||"Nom inconnu"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[Y.assignments.length," matire",Y.assignments.length>1?"s":""," ","assigne",Y.assignments.length>1?"s":""]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"text-sm font-medium text-blue-600",children:[Y.assignments.length," affectation",Y.assignments.length>1?"s":""]})}),t.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:t.jsx("svg",{className:`w-5 h-5 text-gray-600 ${Z?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),t.jsx("div",{className:`p-6 border-t border-gray-100 ${Z?"":"hidden"}`,children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matire"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classe"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date dbut"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date fin"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.assignments.map(H=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.classSubject?.subject?.name||"Matire inconnue"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:H.classSubject?.class?.name||"Classe inconnue"}),t.jsx("div",{className:"text-xs text-gray-500",children:H.classSubject?.class?.level||"N/A"})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-semibold text-blue-600",children:H.classSubject?.class?.classCategory?.institution?.code||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:H.startDate?new Date(H.startDate).toLocaleDateString("fr-FR"):"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:H.endDate?new Date(H.endDate).toLocaleDateString("fr-FR"):"En cours"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsx(Ee,{onClick:()=>ne(H.id,H),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",children:"Supprimer"})})]},`assignment-${H.id}`))})]})})})]},Y.teacher.id)})})()})]})]})]})]}),O.show&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("div",{className:"flex items-center mb-4",children:t.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirmer la suppression"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"tes-vous sr de vouloir supprimer cette affectation ?"}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:t.jsx("p",{className:"text-sm font-medium text-gray-900",children:O.assignmentInfo})}),t.jsx("p",{className:"text-xs text-red-600 mb-6",children:"Cette action est irrversible."})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx(Ee,{onClick:me,variant:"outline",size:"sm",children:"Annuler"}),t.jsx(Ee,{onClick:K,variant:"outline",size:"sm",className:"bg-red-600 text-white hover:bg-red-700 border-red-600",children:"Supprimer"})]})]})}),D.show&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirmer l'affectation multiple"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:D.isPrincipal?"Affecter l'enseignant aux matires slectionnes (marqu comme professeur principal) ?":"Affecter l'enseignant aux matires slectionnes ?"}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[t.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Enseignant:"," ",i.find($=>$.id===D.teacherId)?.user?.firstName," ",i.find($=>$.id===D.teacherId)?.user?.lastName]}),D.isPrincipal&&t.jsx("p",{className:"text-xs text-blue-700 mt-1",children:" Professeur principal (affichage frontend uniquement)"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Matires slectionnes (",D.classSubjectIds.length,"):"]}),t.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:D.classSubjectIds.map($=>{const ue=u.find(Y=>Y.id===$);return t.jsxs("p",{className:"text-xs text-gray-600",children:[" ",ue?.subject?.name," -"," ",ue?.class?.name]},$)})})]}),t.jsxs("p",{className:"text-xs text-orange-600 mb-6",children:[D.classSubjectIds.length," affectation(s) seront cre(s)."]})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx(Ee,{onClick:be,variant:"outline",size:"sm",children:"Annuler"}),t.jsx(Ee,{onClick:G,variant:"outline",size:"sm",className:"bg-green-600 text-white hover:bg-green-700 border-green-600",disabled:N,children:N?"Cration...":"Confirmer"})]})]})})}),t.jsx(N1,{isOpen:Q.isOpen,onClose:()=>ae({isOpen:!1,message:""}),title:"Erreur",message:Q.message,details:Q.details,statusCode:Q.statusCode})]})},j_=()=>{const e=Ht(),[a,r]=y.useState(null),[i,c]=y.useState([]),[u,d]=y.useState(!0),[f,x]=y.useState(null);return y.useEffect(()=>{const g=localStorage.getItem("user");if(g)try{r(JSON.parse(g))}catch{e("/login")}else e("/login")},[e]),y.useEffect(()=>{if(!a)return;(async()=>{d(!0);try{const p=await pe.getAllTeachingAssignments();p.success&&c(p.data||[])}catch(p){console.error("Erreur chargement:",p)}finally{d(!1)}})()},[a]),a?u?t.jsx(bs,{user:a,children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t.jsx(bs,{user:a,children:t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(Ee,{onClick:()=>e("/settings"),variant:"outline",size:"sm",children:" Retour"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vue Enseignants-Classes"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Consulter les affectations des enseignants aux classes"})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-white text-sm font-bold",children:""})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Page de consultation uniquement"}),t.jsx("p",{className:"text-blue-800 text-sm",children:'Cette page affiche les enseignants affects aux classes via leurs matires. Pour crer de nouvelles affectations, utilisez la page "Affectation Enseignants-Matires".'}),t.jsx(Ee,{onClick:()=>e("/settings/teacher-subject-assignment"),className:"mt-3",children:"Aller  la page d'affectation"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Affectations totales"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:new Set(i.map(g=>g.teacher?.id)).size}),t.jsx("div",{className:"text-sm text-gray-600",children:"Enseignants affects"})]})]})]}),f&&t.jsx(An,{type:f.type,title:f.title,message:f.message,isVisible:f.isVisible,onClose:()=>x(null)}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Affectations existantes (",i.length,")"]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enseignant"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spcialit"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matire"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classe"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date dbut"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date fin"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(g=>{const p=g.teacher?.user?.first_name||g.teacher?.user?.firstName||"Prnom",b=g.teacher?.user?.last_name||g.teacher?.user?.lastName||"Nom";return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[p," ",b]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:g.teacher?.speciality||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:g.class_subject?.subject?.name||g.classSubject?.subject?.name||"Matire inconnue"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:g.class_subject?.class?.name||g.classSubject?.class?.name||"Classe inconnue"}),t.jsx("div",{className:"text-xs text-gray-500",children:g.class_subject?.class?.level||g.classSubject?.class?.level||"N/A"})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-semibold text-blue-600",children:g.class_subject?.class?.classCategory?.institution?.code||g.classSubject?.class?.classCategory?.institution?.code||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:g.start_date?new Date(g.start_date).toLocaleDateString("fr-FR"):"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:g.end_date?new Date(g.end_date).toLocaleDateString("fr-FR"):"En cours"})})]},g.id)})})]})}),i.length===0&&t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),t.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune affectation trouve"}),t.jsx("p",{className:"text-gray-600",children:"Les enseignants n'ont pas encore t affects aux matires dans les classes."}),t.jsx(Ee,{onClick:()=>e("/settings/teacher-subject-assignment"),className:"mt-4",children:"Crer la premire affectation"})]})]})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})})};function N_(){return t.jsx(aC,{children:t.jsx(h4,{children:t.jsx(x4,{children:t.jsx(s4,{children:t.jsxs(_S,{children:[t.jsx(ct,{path:"/",element:t.jsx(LE,{})}),t.jsx(ct,{path:"/login",element:t.jsx(VE,{})}),t.jsx(ct,{path:"/register",element:t.jsx(PE,{})}),t.jsx(ct,{path:"/dashboard",element:t.jsx(Nt,{requiredMenu:"dashboard",children:t.jsx(FE,{})})}),t.jsx(ct,{path:"/users",element:t.jsx(Nt,{requiredMenu:"users",children:t.jsx(pM,{})})}),t.jsx(ct,{path:"/students",element:t.jsx(Nt,{requiredMenu:"students",children:t.jsx(XM,{})})}),t.jsx(ct,{path:"/classes-subjects",element:t.jsx(Nt,{requiredMenu:"classes",children:t.jsx(QM,{})})}),t.jsx(ct,{path:"/finances",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(JM,{})})}),t.jsx(ct,{path:"/finances/overview",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(WM,{})})}),t.jsx(ct,{path:"/finances/fee-types",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(t_,{})})}),t.jsx(ct,{path:"/finances/student-fees",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(r_,{})})}),t.jsx(ct,{path:"/finances/student-fee-assignment",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(l_,{})})}),t.jsx(ct,{path:"/finances/payments",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(c_,{})})}),t.jsx(ct,{path:"/finances/payments/assign",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(u_,{})})}),t.jsx(ct,{path:"/finances/invoices",element:t.jsx(Nt,{requiredMenu:"finances",children:t.jsx(d_,{})})}),t.jsx(ct,{path:"/qualite",element:t.jsx(Nt,{requiredMenu:"qualite",children:t.jsx(g_,{})})}),t.jsx(ct,{path:"/calendar",element:t.jsx(Nt,{requiredMenu:"calendar",children:t.jsx(m_,{})})}),t.jsx(ct,{path:"/calendar/timetables",element:t.jsx(Nt,{requiredMenu:"calendar",children:t.jsx(f_,{})})}),t.jsx(ct,{path:"/calendar/events",element:t.jsx(Nt,{requiredMenu:"calendar",children:t.jsx(h_,{})})}),t.jsx(ct,{path:"/school-years",element:t.jsx(Nt,{requiredMenu:"school-years",children:t.jsx(x_,{})})}),t.jsx(ct,{path:"/settings",element:t.jsx(Nt,{requiredMenu:"settings",children:t.jsx(p_,{})})}),t.jsx(ct,{path:"/settings/student-class-assignment",element:t.jsx(Nt,{requiredMenu:"settings",children:t.jsx(b_,{})})}),t.jsx(ct,{path:"/settings/subject-class-assignment",element:t.jsx(Nt,{requiredMenu:"settings",children:t.jsx(y_,{})})}),t.jsx(ct,{path:"/settings/teacher-subject-assignment",element:t.jsx(Nt,{requiredMenu:"settings",children:t.jsx(v_,{})})}),t.jsx(ct,{path:"/settings/teacher-class-assignment",element:t.jsx(Nt,{requiredMenu:"settings",children:t.jsx(j_,{})})})]})})})})})}F2.createRoot(document.getElementById("root")).render(t.jsx(y.StrictMode,{children:t.jsx(N_,{})}));
